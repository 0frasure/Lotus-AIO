function decode64(e) {
    var t, a, i, o, r, n = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
        s = "",
        l = "",
        d = "",
        c = 0;
    /[^A-Za-z0-9\+\/\=]/g.exec(e) && alert("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9Expect errors in decoding."), e = e.replace(/[^A-Za-z0-9\+\/\=]/g, "");
    do {
        i = n.indexOf(e.charAt(c++)), o = n.indexOf(e.charAt(c++)), r = n.indexOf(e.charAt(c++)), d = n.indexOf(e.charAt(c++)), t = i << 2 | o >> 4, a = (15 & o) << 4 | r >> 2, l = (3 & r) << 6 | d, s += String.fromCharCode(t), 64 != r && (s += String.fromCharCode(a)), 64 != d && (s += String.fromCharCode(l)), t = a = l = "", i = o = r = d = ""
    } while (c < e.length);
    return s
}

function sha256(e) {
    function t(e, t) {
        return e >>> t | e << 32 - t
    }
    for (var a, i, o = Math.pow, r = o(2, 32), n = "", s = [], l = 8 * e.length, d = sha256.h = sha256.h || [], c = sha256.k = sha256.k || [], u = c.length, p = {}, h = 2; u < 64; h++)
        if (!p[h]) {
            for (a = 0; a < 313; a += h) p[a] = h;
            d[u] = o(h, .5) * r | 0, c[u++] = o(h, 1 / 3) * r | 0
        } for (e += ""; e.length % 64 - 56;) e += "\0";
    for (a = 0; a < e.length; a++) {
        if ((i = e.charCodeAt(a)) >> 8) return;
        s[a >> 2] |= i << (3 - a) % 4 * 8
    }
    for (s[s.length] = l / r | 0, s[s.length] = l, i = 0; i < s.length;) {
        var m = s.slice(i, i += 16),
            f = d;
        for (d = d.slice(0, 8), a = 0; a < 64; a++) {
            var g = m[a - 15],
                v = m[a - 2],
                y = d[0],
                b = d[4],
                $ = d[7] + (t(b, 6) ^ t(b, 11) ^ t(b, 25)) + (b & d[5] ^ ~b & d[6]) + c[a] + (m[a] = a < 16 ? m[a] : m[a - 16] + (t(g, 7) ^ t(g, 18) ^ g >>> 3) + m[a - 7] + (t(v, 17) ^ t(v, 19) ^ v >>> 10) | 0);
            d = [$ + ((t(y, 2) ^ t(y, 13) ^ t(y, 22)) + (y & d[1] ^ y & d[2] ^ d[1] & d[2])) | 0].concat(d), d[4] = d[4] + $ | 0
        }
        for (a = 0; a < 8; a++) d[a] = d[a] + f[a] | 0
    }
    for (a = 0; a < 8; a++)
        for (i = 3; i + 1; i--) {
            var C = d[a] >> 8 * i & 255;
            n += (C < 16 ? 0 : "") + C.toString(16)
        }
    return n
}

function removeParam(e, t) {
    var a = window.location.host;
    if (e.indexOf(a) > -1) {
        var i = window.location.protocol,
            o = i + "//" + a;
        e = e.replace(o, "")
    }
    var r;
    return r = new RegExp("&" + t + "=[^(?:&|$)]*", "ig"), e = e.replace(r, ""), r = new RegExp("[?]" + t + "[^(?:&|$)]*(&?)", "i"), e = e.replace(r, function(e, t) {
        return "&" != t ? "" : "?"
    })
}

function getCookie(e) {
    for (var t = e + "=", a = decodeURIComponent(document.cookie), i = a.split(";"), o = 0; o < i.length; o++) {
        for (var r = i[o];
            " " == r.charAt(0);) r = r.substring(1);
        if (0 == r.indexOf(t)) return r.substring(t.length, r.length)
    }
    return ""
}

function setCookie(e, t, a) {
    var i = new Date;
    i.setTime(i.getTime() + 24 * a * 60 * 60 * 1e3);
    var o = "expires=" + i.toGMTString();
    document.cookie = e + "=" + t + ";" + o + ";path=/"
}

function closePrivacyPolicyBanner() {
    "" == getCookie("PrivacyPolicyBanner") && setCookie("PrivacyPolicyBanner", !0, 1e3)
}

function certonaRecommendations(e) {
    if (1 == FL.recommendation.showRecommendationsFlag) FL.recommendation.getProductsData(e.resonance.schemes);
    else {
        var t = e.resonance.schemes;
        FL.recommendation.$cartridge.hide(), t.forEach(function(e) {
            "pdprv1_rr" == e.scheme && $("#recentlyViewedProductsSection").hide()
        })
    }
}
window.FL = window.FL || {}, FL.global = FL.global || {}, FL.kiosk = FL.kiosk || {};
var FlAjaxresult = null;
FL.global = jQuery.extend(!0, {
    capitalizeFields: function() {
        $(".capitalize").each(function() {
            $(this).html($(this).html().capitalize())
        })
    },
    detectDevice: function() {
        return /iphone|ipad|android|ie|blackberry|fennec|windows phone|SymbianOS|webOS/.test(navigator.userAgent.toLowerCase()) ? $(window).width() < 768 ? "mobile" : "tablet" : "desktop"
    },
    init: function() {
        if (console.log("Common init started"), FL.Tealium.init(), FL.bLazy.init(), FL.Reflektion.isRfkOn(1) ? FL.Reflektion.isUUID(function() {
                FL.Reflektion.init()
            }) : FL.Reflektion.isRfkOn(6) && FL.Reflektion.rollOut(), 1 == $("#searchBarSearchBox").length) var e = setInterval(function() {
            console.log("Check for Rfk cookie."), console.log("FL.Reflektion.checkRrkCookie()", FL.Reflektion.checkRrkCookie()), FL.Reflektion.isRfkOn() && (console.log("FL.Reflektion.isRfkOn() was true"), FL.Reflektion.isUUID(function() {
                console.log("Rfk UUID conditional met"), FL.Reflektion.mobileOpenBox(), FL.Reflektion.checkEventStatus(), FL.Reflektion.TrendingCategories()
            }), clearInterval(e))
        }, 500);
        FL.global.initTrackingOrder(), FL.global.addPlatformClass(), FL.modal.init(), FL.global.errorMessages(), FL.global.initHeader(), FL.global.initCartLink(), FL.global.Nav.init(), FL.DynamicCart.init(), FL.global.Search.init(), FL.global.UMB.init(), FL.global.SiteCatalyst.init(), FL.global.SHQ.init(), FL.Cartridges.init(), FL.Grid.init(), FL.global.Favorites.init(), FL.global.offCanvas.initSwipe(), FL.youthFoundation.init(), FL.autoSuggest.init(), FL.global.checkBodyClass(), FL.global.initMiscPages(), FL.global.initNavLinks(), FL.global.initPolicyBanner(), FL.global.initMasonry(), FL.global.initScrollWatcher(), FL.UMB.init(), FL.mobile_category.init(), FL.BrandBarContainer.init(), FL.YouTubeContainer.init(), FL.customerservice.initChat(), FL.customerservice.initEmail(), FL.DynamicYield.init(), FL.optimove.init(), FL.isJDKiosk && FL.kiosk.init()
    },
    initScrollWatcher: function() {
        window.addEventListener("scroll", function() {
            FL.mainnav.Desktop.closeMeganav()
        })
    },
    addPlatformClass: function() {
        -1 != navigator.userAgent.indexOf("Mac OS X") ? $("body").addClass("platform-mac") : -1 != navigator.userAgent.indexOf("Windows") ? $("body").addClass("platform-pc") : $("body").addClass("platform-other"), -1 != navigator.userAgent.indexOf("Android") && $("body").addClass("platform-android")
    },
    checkBodyClass: function() {
        $.each(document.body.id.split(/\s+/), function(e, t) {
            "giftCards" == t ? FL.giftCards.init() : "wclanding" == t && $("#checkAnotherWCNumber").on("click", function(e) {
                $(".pointsMessage").addClass("hide"), $(".wcPointForm").removeClass("hide")
            })
        })
    },
    initHeader: function() {
        var e = FlAjaxresult,
            t = $("#myaccount-nav");
        t.html($(e).find("#myaccount-nav").html()), t.find(">a").on("touchstart", FL.global.Nav.touchDesktopMyAccountNav), $(".mobile-account-links").html($(e).find(".mobile-account-links").html()), $(".totalSessionTime").val($(e).find(".totalSessionTime").val()), $(".lastAccessedTime").val($(e).find(".lastAccessedTime").val())
    },
    initMiscPages: function() {
        $("#affiliateWrap").find("#signUpBtn").on("click", function() {
            return window.open("https://signup.linkshare.com/publishers/registration/landing?ls-locale=us&host=linkshare&mid=37731", "_blank"), !1
        }), $(".BrandLandingLinkContainer").length > 0 && FL.global.initBrandText($(".BrandLandingLinkContainer")), $(".FeaturedBrandLandingLinkContainer").length > 0 && FL.global.initBrandText($(".FeaturedBrandLandingLinkContainer"))
    },
    initBrandText: function(e) {
        $(e).find(".brand-list").find("span.icon").each(function() {
            if ("" === window.getComputedStyle($(this)[0], ":before").getPropertyValue("content")) {
                var e = $(this).next().text();
                e && $(this).addClass("brand-text-version").html(e)
            }
        })
    },
    initNavLinks: function() {
        $(".grid-nav-links li a").each(function(e) {
            var t = $(this).attr("href"),
                a = window.location.pathname + window.location.search;
            "/" != window.location.pathname && a.startsWith(t) && $(this).parent("li").addClass("selected")
        })
    },
    initOnReady: function() {
        $(".loyalty-account-status").length > 0 && FL.statusAccountSummary.init(), FL.loyaltyProgram.init(), FL.footer.init(), FL.mainnav.init(), FL.global.trackYourOrder.init()
    },
    initMasonry: function() {
        $grid = $(".masonrygrid").masonry({
            itemSelector: ".product-card",
            columnWidth: ".grid-sizer",
            gutter: 14,
            horizontalOrder: !0,
            transitionDuration: "0.8s",
            hiddenStyle: {
                transform: "translateY(100px)",
                opacity: 0
            },
            visibleStyle: {
                transform: "translateY(0px)",
                opacity: 1
            }
        }), FL.Grid.checkIsOnModel(), $grid.on("click", ".fav-heart-ico", function(e) {
            if (0 == $("body.accountDetail").length) {
                e.preventDefault(), e.stopPropagation();
                var t = $(e.target).closest(".product-card"),
                    a = $(e.target).closest("svg");
                $(a).removeClass("active").addClass("deactivated"), $grid.masonry("remove", t).masonry("layout")
            }
        }), $(".masonrygrid").length > 0 && FL.bLazy.Grid.init()
    },
    initCartLink: function() {
        $(".js-cart-link").on("click", function() {
            Foundation.MediaQuery.is("small only") || Foundation.MediaQuery.is("medium only") ? FL.cart.slideOut() : window.location = FL.contextPath + "/cart/cart.jsp"
        }), FL.global.updateBagCount()
    },
    updateBagCount: function() {
        var e = $(".js-cart-link");
        FL.cart.updateBagCount(e.add("#cartSlideShell, #cartSlide").find(".js-count"))
    },
    errorMessages: function() {
        var e = $("#globalErrorContent").html();
        FL.global.addErrorMessage(e)
    },
    addErrorMessage: function(e) {
        (e = $.trim(e)) && ($("#globalErrorMessage").html(e), $("#globalErrorMessage").addClass("show"))
    },
    showOverlay: function() {
        $("body").addClass("show-overlay")
    },
    hideOverlay: function() {
        $("body").removeClass("show-overlay")
    },
    offCanvas: {
        open: function(e, t, a, i) {
            var o;
            return o = "right" == t ? "#offCanvasRightSlider" : "left" == t ? "#offCanvasLeftSlider" : "bottom" == t ? "#offCanvasBottomSlider" : "#offCanvasRightSlider", $(o).removeClass(), "full" == e ? ($(o).addClass("off-canvas"), "left" == t ? $(o).addClass("position-left") : "right" == t ? $(o).addClass("position-right full") : $(o).addClass("position-bottom full")) : "large" == e ? ($(o).addClass("off-canvas"), "left" == t ? $(o).addClass("position-left large") : "right" == t ? $(o).addClass("position-right large") : $(o).addClass("position-bottom large")) : "small" == e && ($(o).addClass("off-canvas"), "left" == t ? $(o).addClass("position-left small") : "right" == t ? $(o).addClass("position-right small") : $(o).addClass("position-bottom small")), "push" == a ? ($(o).addClass("is-transition-push"), $(o).attr("data-transition", "push")) : ($(o).addClass("is-transition-overlap"), $(o).attr("data-transition", "overlap")), $(o).attr("role", "dialog"), $(o).html(i), $(o).foundation("open"), $(o)
        },
        close: function(e) {
            if ("right" == e) var t = "#offCanvasRightSlider";
            else var t = "#offCanvasLeftSlider";
            $(t).foundation("close")
        },
        initSwipe: function() {
            $("#offCanvasRightSlider, .off-canvas.position-right").on("swiperight", function() {
                $(this).foundation("close")
            }), $("#offCanvasLeftSlider, .off-canvas.position-left").on("swipeleft", function() {
                $(this).foundation("close")
            })
        }
    },
    rotateSpinner: function(e, t) {
        return void 0 === t ? t = $({
            deg: 0
        }) : t.get(0).deg = 0, t.animate({
            deg: 360
        }, {
            duration: 1e3,
            easing: "linear",
            step: function(t) {
                e.css({
                    transform: "rotate(" + t + "deg)"
                })
            },
            complete: function() {
                FL.global.rotateSpinner(e, t)
            }
        })
    },
    Search: {
        init: function() {
            $(".searchBarForm").each(function() {
                var e = $(this),
                    t = e.find("#searchBarSearchBox"),
                    a = e.find(".search-button-icon"),
                    i = e.find("#searchBarSearchButton"),
                    o = e.parent(".search-form-container").length > 0;
                t.on("keyup", function(e) {
                    t.val().length > 0 && !a.hasClass("highlighted") ? (a.addClass("highlighted"), i.prop("disabled", !1)) : 0 === t.val().length && (a.removeClass("highlighted"), i.prop("disabled", !0)), o && (a.hasClass("hide") || i.hasClass("hide")) && (a.removeClass("hide"), i.removeClass("hide"))
                }), o && (t.on("keydown", function(e) {
                    (e.shiftKey && 9 == e.keyCode || 9 == e.keyCode && !a.hasClass("highlighted")) && (a.addClass("hide"), i.addClass("hide"))
                }), t.on("focus", function() {
                    a.removeClass("hide"), i.removeClass("hide")
                }), i.on("blur", function() {
                    a.addClass("hide"), i.addClass("hide")
                }))
            }), $("#searchBarForm").on("submit", FL.global.Search.submitDesktop), $("#mobileSearchBarForm").on("submit", FL.global.Search.submitMobile), FL.global.isJDSport() && ($jdBtnSearch = $("#jd-search-btn"), $jdBtnSearch.on("click", FL.global.Search.submitDesktop))
        },
        submitDesktop: function(e) {
            var t = {
                form: "#searchBarForm",
                field: "#searchBarSearchBox"
            };
            return FL.global.Search.submitForm(t), !1
        },
        submitForm: function(e) {
            var t = $(e.form),
                a = t.find(e.field),
                i = a.val().replace(/(<|>)/g, "");
            if (a.val(i), "" !== i)
                if (localStorage.setItem("searchTerms", i), FL.Reflektion.isRfkOn()) {
                    var o = "/store/_/N-/Ntt-" + i;
                    o = FL.Reflektion.replaceUrlParam(o, "isrfk", "true"), window.location.href = o
                } else window.location.href = "/store/_/N-/Ntt-" + i
        },
        submitMobile: function(e) {
            var t = {
                form: "#mobileSearchBarForm",
                field: "#mobileSearchBarSearchBox"
            };
            return FL.global.Search.submitForm(t), !1
        }
    },
    Nav: {
        init: function() {
            $("select.select-navigation").change(FL.global.Nav.selectDropdownNavigation)
        },
        touchDesktopMyAccountNav: function(e) {
            var t = $(this),
                a = t.parent(),
                i = a.hasClass("medium-click");
            return e.preventDefault(), i ? (a.removeClass("medium-click"), !1) : (a.addClass("medium-click"), $("html").click().off("touchstart").on("touchstart", function() {
                FL.global.Nav.closeMyAccountNav(a)
            }), $(".myaccount-navigation").on("touchstart", function(e) {
                e.stopPropagation()
            }), !1)
        },
        closeMyAccountNav: function(e) {
            e.removeClass("medium-click")
        },
        selectDropdownNavigation: function() {
            var e = $(this),
                t = e.find("option:selected").attr("data-url");
            t && (window.location = t)
        }
    },
    UMB: {
        init: function() {
            var e = $("#umbSlider"),
                t = e.hasClass("has-slider-dots"),
                a = "undefined" !== e.attr("data-speed") ? e.attr("data-speed") : 0,
                i = "undefined" !== e.attr("data-noautoplay") ? e.attr("data-noautoplay") : "",
                o = {
                    dots: t,
                    nextArrow: '<button role="button" aria-label="next slide" class="icon icon-chevron-right slick-next-icon"></button>',
                    prevArrow: '<button role="button" aria-label="previous slide" class="icon icon-chevron-left slick-prev-icon"></button>'
                },
                r = !1;
            a > 0 && (r = !("true" === i || $("body").attr("id").indexOf("home") > -1)), r && (o.autoplay = !0, o.autoplaySpeed = a), e.slick(o), e.find(".slick-prev-icon").on("click", FL.Tealium.clickUMBPrevious), e.find(".slick-next-icon").on("click", FL.Tealium.clickUMBNext), e.find(".slick-slide").find("a").on("click", FL.Tealium.clickUMBSlide)
        }
    },
    SiteCatalyst: {
        getQueryParamValue: function(e, t) {
            var a = e.indexOf("?" + t + "=");
            if (a < 0 && (a = e.indexOf("&" + t + "=")) < 0) return null;
            a += 2 + t.length;
            var i = e.indexOf("&", a),
                o = e.indexOf("#", a),
                r = i >= 0 && i < o ? i : o;
            return r < 0 ? e.substring(a) : e.substring(a, r)
        },
        init: function() {
            $("a[href*='icid=']").map(function() {
                var e = FL.global.SiteCatalyst.getQueryParamValue($(this).attr("href"), "icid");
                return e && (e = ";promo:" + e), e
            }).get().join(",")
        }
    },
    SHQ: {
        init: function() {
            var e, t, a = $("[data-shqtype]"),
                i = $("h1.page-title");
            a.length > 0 ? "category" === (e = a.attr("data-shqtype")) && (t = a.attr("data-shqcategory") || a.html().toLowerCase(), _smtr.push(["pageView", {
                pageType: e,
                catId: t,
                catName: t
            }])) : i.length > 0 && !FL.Grid.isGridPage() && "grid categorylp " !== $("body").attr("id") && (t = $.trim($("h1.page-title").html().replace(/<span class="results-count">[0-9()]*<\/span>/g, "")), _smtr.push(["pageView", {
                pageType: "category",
                catId: t,
                catName: t
            }]))
        }
    },
    Favorites: {
        init: function() {
            FL.global.Favorites.bindFavHearts(), $("#signin_button").off("click").on("click", function(e) {
                FL.Tealium.clickFavoritesSignIn()
            }), $("#createaccount_button").off("click").on("click", function(e) {
                FL.Tealium.clickFavoritesCreateAccount()
            })
        },
        favoritePageOmni: function() {},
        favoritesHighlight: function() {
            var e = $("body");
            if (e.hasClass("grid") || e.hasClass("PDP")) {
                var t = FL.contextPath + "/browse/favoriteDetails.jsp";
                $.ajax({
                    dataType: "json",
                    type: "GET",
                    url: t,
                    error: function() {
                        console.log("Favorites AJAX call failed")
                    }
                }).done(function(t) {
                    e.hasClass("grid") ? FL.global.Favorites.findFavoritesInGrid(t) : e.hasClass("PDP") && FL.global.Favorites.findFavoritesInPDP(t)
                })
            }
        },
        bindFavHearts: function() {
            $(".fav-heart-ico").off("click").on("click", function(e) {
                FL.global.Favorites.clickAddToFavorites(e)
            })
        },
        clickAddToFavorites: function(e) {
            e.preventDefault();
            var t, a, i = $(e.currentTarget),
                o = $("div.color-image-mobile.selected,div.color-image.selected"),
                r = $(i).closest(".product-card__media-slide").data("styleid"),
                n = $(i).closest(".product-card__media-slide").data("colorid"),
                s = $(i).closest(".product-card").data("prodid");
            $(i).hasClass("active") || $(i).hasClass("unavailable") ? (t = "remove", a = "remove_favorite") : (t = "add", a = "add_favorite");
            var l = {
                product_id: s,
                style_id: r.toString(),
                color_id: n.toString()
            };
            FL.optimove.reportEvent(a, l), $.ajax({
                url: FL.contextPath + "/browse/addfavorites.jsp",
                type: "post",
                dataType: "json",
                data: {
                    styleId: r,
                    colorId: n,
                    prodId: s,
                    addOrRemove: t
                }
            }).done(function(a) {
                FL.global.Favorites.updateFaveCount(a.count), FL.global.Favorites.updateHeart(i, t, o), FL.global.Favorites.displayFavoritePrompts(a, e)
            }).fail(function(e, t, a) {
                console.log("coomon.js - failed: ", e.status), console.log(a)
            })
        },
        findFavoritesInGrid: function(e) {
            $.each(e, function(e, t) {
                $('.product-card__media-slide[data-styleid="' + t.mStyleId + '"][data-colorid="' + t.mColorId + '"]').find(".fav-heart-ico").addClass("active")
            })
        },
        findFavoritesInPDP: function(e) {
            var t = $("#alternateColors").find(".color-image"),
                a = $("#alternateColors").find(".color-image-mobile");
            $.each(e, function(e, i) {
                $("#productStyleId").val() == i.mStyleId && $("#productColorId").val() == i.mColorId && (FL.global.isJDSport() ? $(".pdp-image-icons .fav-heart-ico").addClass("active") : $(".fav-heart-ico").eq(2).addClass("active")), $(t).each(function(e) {
                    $(t[e]).parent().data("styleid") == i.mStyleId + "-" + i.mColorId && $(t[e]).addClass("favorited")
                }), $(a).each(function(e) {
                    $(a[e]).parent().data("styleid") == i.mStyleId + "-" + i.mColorId && $(a[e]).addClass("favorited")
                })
            })
        },
        updateFaveCount: function(e) {
            0 == e ? $("#fav-count").hide() : $("#fav-count").show().text("(" + e + ")")
        },
        updateHeart: function(e, t, a) {
            if ($("body.jdsports-page"), $(".favorite-message"), a.is("svg")) var i = a;
            else var o = a;
            $(e).removeClass("activeIntent"), "remove" === t ? ($(i).removeClass("active"), $(o).removeClass("favorited"), $(e).removeClass("active").addClass("deactivated"), setTimeout(function() {
                $(e).removeClass("deactivated"), $(e).addClass("hoverable")
            }, 2e3)) : ($(i).addClass("active"), $(o).addClass("favorited"), $(e).addClass("active").removeClass("deactivated")), FL.global.Favorites.adaSayFavorited(e, t)
        },
        adaSayFavorited: function(e, t) {
            "remove" === t ? $("#removedFromFavorites").focus() : $("#addedToFavorites").focus();
            var a = e.attr("aria-label");
            e.removeAttr("aria-label"), setTimeout(function() {
                e.focus(), setTimeout(function() {
                    e.attr("aria-label", a)
                }, 20)
            }, 10)
        },
        displayFavoritePrompts: function(e, t) {
            var a = !$("#myaccount-nav").data("transient"),
                i = $(t.currentTarget);
            if (e.firstTimeFav) {
                var o = a ? "/store/myaccount/favorites.jsp" : "/store/favorites_guest.jsp",
                    r = '<div class="firstTimeTip" role="tooltip" aria-describedby="Tooltip Added to favorites">                                    <p>Added to favorites.</p>                                    <a class="arrow underline" href="' + o + '">See Favorites <span></span></a>                                    </div>';
                $(".firstTimeTip").on("click", function(e) {
                    return e.preventDefault(), !1
                }), i.parents(".product-card__media").after(r), $("#reflektionList .firstTimeTip a").on("click", function(e) {
                    window.location.href = e.currentTarget.href
                }), setTimeout(function() {
                    $(".firstTimeTip").fadeOut("slow")
                }, 5e3)
            }
            e.count >= 11 && !1 === a && ($("#moreFavsModal").foundation("open"), $(i).removeClass("active"))
        }
    },
    trackYourOrder: {
        init: function() {
            var e = getUrlParameterValue("trackPurchaseNumber"),
                t = /^[0-9]{1,10}$/,
                a = t.test(e),
                i = FL.contextPath + "/navigation/modals/trackYourOrder.jsp",
                o = "";
            if ("0" != e && (o = "?purchaseNumber=" + e), a && $.ajax(i + o).done(function(e) {
                    FL.mask.init(), $("#trackYourOrder").html(e).foundation("open"), FL.global.trackYourOrder.initModalEvents()
                }), FL.global.isJDSport()) {
                var r = $(".footer-main .row-secondarylinks .footer-lists a:contains('Track an Order')");
                r.length > 0 && r.attr("id", "launchTYO")
            }
            $("#launchTYO").on("click", function() {
                return $.ajax(i).done(function(e) {
                    FL.mask.init(), $("#trackYourOrder").html(e).foundation("open"), FL.global.trackYourOrder.initModalEvents()
                }), !1
            })
        },
        initModalEvents: function() {
            $("#trackYourOrder").find("#purchaseDetailsTrackOrder").on("click", function(e) {
                return e.preventDefault(), $form = $("#trackOrderModal"), $("#trackOrderModal").valid() && $.ajax({
                    data: $("#trackOrderModal").serialize(),
                    url: $("#trackOrderModal").attr("action"),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        return void 0 === e.success ? ($("#divFormErrorMessage").show(), $("#orderFormErrorTitle").text("Something went wrong."), $("#orderFormErrorMessage").text("There was an issue while retrieving your order's details. Try again or check back later.")) : "true" === e.success ? ($("#divFormErrorMessage").hide(), orderSuccessURL = $("#orderSuccessURL").val(), $("#trackOrderModal").attr("action", orderSuccessURL), $form.submit()) : (FL.global.hideOverlay(), $("#divFormErrorMessage").show(), $("#orderFormErrorTitle").text("Order not found."), $("#orderFormErrorMessage").text("An order matching the purchase number and zip code you entered could not be found. Check your information and try again or contact Customer Care for assistance.")), !0
                    },
                    error: function(e) {
                        $("#divFormErrorMessage").show(), $("#orderFormErrorTitle").text("Something went wrong."), $("#orderFormErrorMessage").text("There was an issue while retrieving your order's details. Try again or check back later.")
                    }
                }), !1
            }), $("#trackOrderModal #modalOrderId").keyup(function() {
                0 == $(this).val().indexOf("X") ? $("#trackOrderModal #modalZip").attr("placeholder", "Enter Shipping Zip code") : $("#trackOrderModal #modalZip").attr("placeholder", "Enter Billing Zip code")
            })
        }
    },
    Slick: {
        changeDots: function(e, t) {
            if (void 0 === t) return !1;
            var a = e.find("ul.slick-dots li");
            if (a.length <= 1) return void a.addClass("hidden-dot");
            if (a.length > 4)
                if ("init" == t) a.removeClass("medium-dot small-dot hidden-dot"), a.filter(":nth-child(4)").addClass("medium-dot"), a.filter(":nth-child(5)").addClass("small-dot"), a.filter(":nth-child(n+6)").addClass("hidden-dot");
                else {
                    var i = [];
                    if ($.each(a, function(e, t) {
                            if (!$(t).hasClass("hidden-dot")) {
                                var a = "large",
                                    o = !1;
                                $(t).hasClass("small-dot") ? a = "small" : $(t).hasClass("medium-dot") && (a = "medium"), $(t).hasClass("slick-active") && (o = !0), i.push({
                                    position: e + 1,
                                    type: a,
                                    selected: o
                                })
                            }
                        }), "left" == t) {
                        if (7 === i.length && "small" === i[0].type && i[3].selected) return;
                        if (6 === i.length && "medium" === i[0].type && i[2].selected) return;
                        if (6 === i.length && "medium" === i[5].type && i[3].selected) return;
                        if (a.removeClass("medium-dot small-dot hidden-dot"), a.filter(":first-child").hasClass("slick-active") || a.filter(":nth-child(2)").hasClass("slick-active") || a.filter(":nth-child(3)").hasClass("slick-active")) a.filter(":nth-child(4)").addClass("medium-dot"), a.filter(":nth-child(5)").addClass("small-dot"), a.filter(":nth-child(n+6)").addClass("hidden-dot");
                        else if (a.filter(":nth-child(4)").hasClass("slick-active")) a.filter(":first-child").addClass("medium-dot"), a.filter(":nth-child(5)").addClass("medium-dot"), a.filter(":nth-child(6)").addClass("small-dot"), a.filter(":nth-child(n+7)").addClass("hidden-dot");
                        else if (a.filter(":nth-child(n+5)").hasClass("slick-active")) {
                            var o = a.filter(".slick-active").index() + 1;
                            a.filter(":nth-child(-n+" + (o - 5) + ")").addClass("hidden-dot"), a.filter(":nth-child(" + (o - 4) + ")").addClass("small-dot"), a.filter(":nth-child(" + (o - 3) + ")").addClass("medium-dot"), a.filter(":nth-child(" + (o + 1) + ")").addClass("medium-dot"), a.filter(":nth-child(" + (o + 2) + ")").addClass("small-dot"), a.filter(":nth-child(n+" + (o + 3) + ")").addClass("hidden-dot")
                        }
                    } else {
                        if (5 === i.length && "large" === i[0].type && (i[0].selected || i[1].selected)) return;
                        if (6 === i.length && "medium" === i[0].type && i[2].selected) return;
                        if (7 === i.length && "small" === i[0].type && i[3].selected) return;
                        if (6 === i.length && "medium" === i[5].type && i[3].selected) return;
                        if (a.removeClass("medium-dot small-dot hidden-dot"), a.filter(":last-child").hasClass("slick-active") || a.filter(":nth-last-child(2)").hasClass("slick-active") || a.filter(":nth-last-child(3)").hasClass("slick-active")) a.filter(":nth-last-child(4)").addClass("medium-dot"), a.filter(":nth-last-child(5)").addClass("small-dot"), a.filter(":nth-last-child(n+6)").addClass("hidden-dot");
                        else if (a.filter(":nth-last-child(4)").hasClass("slick-active")) a.filter(":last-child").addClass("medium-dot"), a.filter(":nth-last-child(5)").addClass("medium-dot"), a.filter(":nth-last-child(6)").addClass("small-dot"), a.filter(":nth-last-child(n+7)").addClass("hidden-dot");
                        else if (a.filter(":nth-last-child(n+5)").hasClass("slick-active")) {
                            var o = a.filter(".slick-active").index() + 1;
                            o > 3 && a.filter(":nth-child(-n+" + (o - 3) + ")").addClass("hidden-dot"), o > 1 && a.filter(":nth-child(" + (o - 1) + ")").addClass("medium-dot"), o > 2 && a.filter(":nth-child(" + (o - 2) + ")").addClass("small-dot"), a.filter(":nth-child(" + (o + 3) + ")").addClass("medium-dot"), a.filter(":nth-child(" + (o + 4) + ")").addClass("small-dot"), a.filter(":nth-child(n+" + (o + 5) + ")").addClass("hidden-dot")
                        }
                    }
                }
        }
    },
    initPolicyBanner: function() {
        "" == getCookie("PrivacyPolicyBanner") && $("#txtPrivacyPolicyBanner").length && $("#divPrivacyPolicyBanner").slideDown("slow")
    },
    initTrackingOrder: function() {
        $("#trackOrder #orderId").keyup(function() {
            0 == $(this).val().indexOf("X") ? $("#trackOrder #zip").attr("placeholder", "Enter Shipping Zip code") : $("#trackOrder #zip").attr("placeholder", "Enter Billing Zip code")
        }), (navigator.userAgent.search("Edge") > -1 || navigator.userAgent.search("Trident") > -1) && ($("input[name='tyoOrderId']").parent().find("span").addClass("has-float-label-ie"), $("input[name='tyoOrderId']").attr("placeholder", ""), $("input[name='tyoZipCode']").parent().find("span").addClass("has-float-label-ie"), $("input[name='tyoZipCode']").attr("placeholder", ""), $("input[name='tyoOrderId']").focus(function() {
            var e = $(this);
            e.parent().find("span").removeClass("has-float-label-ie"), e.attr("placeholder", "Enter Order Number")
        }), $("input[name='tyoOrderId']").focusout(function() {
            var e = $(this),
                t = e.parent().find("span");
            e.attr("placeholder") && "" === e.val() ? (t.addClass("has-float-label-ie"), e.attr("placeholder", "")) : (t.removeClass("has-float-label-ie"), e.attr("placeholder", "Enter Order Number"))
        }), $("input[name='tyoZipCode']").focus(function() {
            var e = $(this);
            e.parent().find("span").removeClass("has-float-label-ie"), e.attr("placeholder", "Enter Zip")
        }), $("input[name='tyoZipCode']").focusout(function() {
            var e = $(this),
                t = e.parent().find("span");
            e.attr("placeholder") && "" === e.val() ? (t.addClass("has-float-label-ie"), e.attr("placeholder", "")) : (t.removeClass("has-float-label-ie"), e.attr("placeholder", "Enter Zip"))
        }))
    },
    isJDSport: function() {
        return $("body").hasClass("jdsports-page")
    }
}, FL.global), String.prototype.capitalize = function() {
    return this.toLowerCase().replace(/(?:^|\s)\S/g, function(e) {
        return e.toUpperCase()
    })
}, $(document).ready(function() {
    FL.global.initOnReady(), $(document).on("click", "#leftNavigationContent .accordion-item a.accordion-title", function(e) {
        if (e.preventDefault(), $(this).closest("li").hasClass("is-active")) {
            var t = $(this).find(".filter-title").text();
            localStorage.setItem("test_" + t, "open")
        } else {
            var t = $(this).find(".filter-title").text();
            localStorage.setItem("test_" + t, "close")
        }
    });
    for (var e = [], t = Object.keys(localStorage), a = t.length; a--;) e.push(t[a]);
    for (var a = 0; a < e.length; a++)
        if (e[a].includes("test_")) {
            var i = localStorage.getItem(e[a]),
                o = e[a].indexOf("_"),
                r = e[a].length,
                n = e[a].substring(o + 1, r);
            "open" == i ? $(".accordion-item").each(function(e) {
                var t = $(this).find("a.accordion-title").text().trim();
                n == t && ($(this).addClass("is-active"), $(this).find(".accordion-content").css("display", "block"))
            }) : "close" == i && $(".accordion-item").each(function(e) {
                var t = $(this).find("a.accordion-title").text().trim();
                n == t && ($(this).removeClass("is-active"), $(this).find(".accordion-content").css("display", "none"))
            })
        } if ("" != FL.IspuData.storeCookie && "true" == Cookies.get("fl_ispu_search_status")) {
        var s = Cookies.get("fl_selected_store").split(":")[0];
        $("#headerMainMenu a, .menu-dropdown a, #leftNavigationContent a, .breadcrumbs a, #mainColumn a, #onePageContent a").on("click", "#headerMainMenu a, .menu-dropdown a, #leftNavigationContent a, .breadcrumbs a, #mainColumn a, #onePageContent a", function() {
            var e = $(this).attr("href"),
                t = -1 != e.indexOf("?mnid="),
                a = -1 != e.indexOf("?icid="),
                i = -1 != e.indexOf("/N-"),
                o = -1 != e.indexOf("?");
            (t || a || i) && (o ? $(this).attr("href", e + "&storeId=" + s) : $(this).attr("href", e + "?storeId=" + s))
        })
    }
    if ("" != FL.IspuData.storeCookie && "true" == Cookies.get("fl_ispu_search_status")) {
        var s = Cookies.get("fl_selected_store").split(":")[0];
        $(document).off("click", "#mobileMainMenu a").on("click", "#mobileMainMenu a", function() {
            event.preventDefault();
            var e = $(this).attr("href"),
                t = -1 != e.indexOf("?mnid="),
                a = -1 != e.indexOf("?icid="),
                i = -1 != e.indexOf("/N-"),
                o = -1 != e.indexOf("?"),
                r = e;
            (t || a || i) && (r = o ? e + "&storeId=" + s : e + "?storeId=" + s), "#" != e && null != e && (window.location.href = r)
        })
    }
});
var getUrlParameterValue = function(e) {
    var t, a, i = window.location.search.substring(1),
        o = i.split("&");
    for (a = 0; a < o.length; a++)
        if (t = o[a].split("="), t[0] === e) return void 0 === t[1] ? "none" : decodeURIComponent(t[1]);
    return "none"
};
window.FL = window.FL || {}, FL.Omniture = {
    sObj: null,
    add: function(e) {
        "use strict";
        var t;
        if ("object" == typeof e && (this.sObj = this.sObj || "function" == typeof s_gi ? s_gi(scServerCode) : null, null !== this.sObj))
            for (t in e) e.hasOwnProperty(t) && (this.sObj[t] = e[t]);
        return this
    },
    getParam: function(e) {
        "use strict";
        for (var t = window.location.search.replace(/^\?/, "").split("&"), a = 0; a < t.length; a++)
            if (0 === t[a].indexOf(e)) return t[a].split("=").pop();
        return null
    },
    getParamWishlist: function(e) {
        "use strict";
        return window.location.pathname.split("/")[4]
    },
    sendMacro: function() {},
    sendMicro: function(e, t) {}
}, window.FL = window.FL || {}, FL.Tealium = FL.Tealium || {}, FL.Tealium = jQuery.extend(!0, {
    iterationMax: 3,
    iterationTime: 3e3,
    init: function() {
        moment.tz.add(["America/New_York|LMT EST EDT EWT EPT|4U.2 50 40 40 40|012121212121212121212121212121212121212121212121213412121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121212121|-3tFH0 1nEe0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6"])
    },
    getBreadcrumbsForLabel: function(e, t) {
        var a = $(".grid-breadcrumbs"),
            i = [];
        return i.push(e), "search" === a.find("li:not(:first-child)").text().toLowerCase() ? i.push("Search") : a.find("li:not(:first-child):not(:last-child)").each(function(e, t) {
            var a = $(t).text().trim(),
                o = a.charAt(0).toUpperCase() + a.substring(1);
            i.push(o)
        }), i.push(t), i.join(":")
    },
    getCustomerEmail: function() {
        return utag_data.customer_email || ""
    },
    getDeviceType: function() {
        var e = $(window).width();
        return e <= 640 ? "Mobile" : e <= 1024 ? "Tablet" : "Desktop"
    },
    getLoginStatus: function() {
        return $("#myaccount-nav").data("transient") ? "Logged Out" : "Logged In"
    },
    getPageName: function() {
        return $(document).find("title").text()
    },
    getPageURL: function() {
        return window.location.href
    },
    getPageBreadcrumbs: function() {
        return $(".breadcrumbs")
    },
    getPageSectionByIndex: function(e) {
        var t, a = $(".breadcrumbs"),
            i = "";
        return a.length > 0 && (t = $(a.find("li").get(e)), t.length > 0 && (i = t.text().trim())), i
    },
    getParentText: function(e) {
        return e.clone().children().remove().end().text().trim()
    },
    getParentTextNoTimer: function(e) {
        return e.clone().children(".countdown-timer").remove().end().children(".umb-cta").remove().end().text().trim()
    },
    getPriceDiscount: function(e, t, a) {
        return 0 !== e ? 0 : Math.round(100 * (t - a)) / 100
    },
    getPrice: function(e, t) {
        return 0 !== e ? e : t
    },
    getPriceFloat: function(e) {
        return parseFloat(e.replace("$", "")) || 0
    },
    getReferer: function() {
        return document.referrer
    },
    getTimeParting: function() {
        return moment.tz("America/New_York").format("ddd MMM D H:mm:ss zz YYYY")
    },
    getWinnersCircleId: function() {
        return utag_data.winners_circle || ""
    },
    isSearchPage: function() {
        return $("h1").hasClass("search-terams")
    },
    link: function(e) {
        FL.Tealium.commit("link", 0, e)
    },
    view: function(e) {
        FL.Tealium.commit("view", 0, e)
    },
    commit: function(e, t, a) {
        var i = FL.Tealium;
        if ("undefined" == typeof utag) return void(t < i.iterationMax ? (t++, setTimeout(function() {
            i.commit(e, t, a)
        }, i.iterationTime)) : console.warn("FL.Tealium.commit: unavailable", e, t, a));
        try {
            utag[e](a)
        } catch (e) {
            console.warn(e)
        }
    },
    displayPromotionImpressions: function() {},
    displayQuickLookModal: function() {
        var e = FL.Tealium,
            t = $("#quickLookContent"),
            a = t.find("#colorDescription").find(".colorDescVariable:not(.hide)"),
            i = t.find("#productPrice").find(".priceVariable:not(.hide)"),
            o = t.find("#productTitle").find("a").text().trim(),
            r = t.find("#qlQuantity").val(),
            n = a.data("description"),
            s = FL.QuickLook.thisBrand,
            l = (FL.QuickLook.selectedProductId, a.data("styleid")),
            d = a.data("colorid"),
            c = l + "_" + d,
            u = e.getPriceFloat(i.find(".fullPrice").text().trim()),
            p = e.getPriceFloat(i.find(".nowPrice").text().trim()),
            h = e.getPriceFloat(i.find(".wasPrice").text().trim()),
            m = e.getPriceDiscount(u, h, p),
            f = e.getPrice(u, p),
            g = {
                event_flag: "quick_view",
                ga_category: "Products",
                ga_action: "Quickview",
                ga_label: "Quickview",
                page_name: e.getPageName(),
                page_type: "Quickview Product Detail Page",
                page_url: e.getPageURL(),
                page_section: e.getPageSectionByIndex(1),
                page_subsection: e.getPageSectionByIndex(2),
                page_subsection2: e.getPageSectionByIndex(3),
                time_parting: e.getTimeParting(),
                referrer: e.getReferer(),
                referring_url: e.getReferer(),
                previous_page: e.getReferer(),
                site_type: e.getDeviceType(),
                customer_email: e.getCustomerEmail(),
                login_status: e.getLoginStatus(),
                product_finding_method: e.isSearchPage() ? "Search" : "Browse",
                product_id: c,
                product_brand: s,
                product_category: "",
                product_color: n,
                product_discount: m,
                product_name: o,
                product_price: f,
                product_unit_price: f,
                product_quantity: r,
                product_sku: c,
                winners_circle: e.getWinnersCircleId()
            };
        FL.Tealium.view(g)
    },
    displaySlideoutCart: function() {
        var e = FL.Tealium,
            t = $("#cartSlide"),
            a = t.find("#subTotal").text().trim(),
            i = t.find("#orderSummaryOrderTotal").text().trim(),
            o = t.find(".checkout-bag-item"),
            r = [],
            n = [],
            s = [],
            l = [],
            d = [],
            c = [],
            u = [],
            p = [],
            h = [],
            m = [];
        o.each(function(e, t) {
            var a, i, o = $(t),
                f = o.find(".productName").text().trim(),
                g = o.find(".qty-display").first().text().trim(),
                v = o.data("vendor"),
                y = o.find(".colorDescription").text().trim(),
                b = o.data("styleid") + "_" + o.data("colorid"),
                C = parseFloat(o.find(".full-price").text().trim().replace("$", "")) || 0,
                k = parseFloat(o.find(".now-price").text().trim().replace("$", "")) || 0,
                L = parseFloat(o.find(".was-price").text().trim().replace("$", "")) || 0;
            a = 0 !== C ? 0 : Math.round(100 * (L - k)) / 100, i = 0 !== C ? C : k, r.push(b), n.push(v), s.push(""), l.push(y), d.push(a), c.push(f), u.push(i), p.push(i), h.push(g), m.push(b)
        });
        var f = {
            event_flag: "cart_slideout",
            ga_category: "Cart",
            ga_action: "Cart",
            ga_label: "Cart-Slideout",
            page_name: "Checkout:Cart",
            page_type: "Shopping Cart",
            page_url: e.getPageURL(),
            page_section: "Shopping Cart",
            page_subsection: "Shopping Cart: Checkout",
            page_subsection2: "Shopping Cart: Checkout",
            checkout_step: "1",
            time_parting: e.getTimeParting(),
            referrer: e.getReferer(),
            referring_url: e.getReferer(),
            previous_page: e.getReferer(),
            site_type: e.getDeviceType(),
            customer_email: e.getCustomerEmail(),
            login_status: e.getLoginStatus(),
            product_id: r,
            product_brand: n,
            product_category: s,
            product_color: l,
            product_discount: d,
            product_name: c,
            product_price: u,
            product_unit_price: p,
            product_quantity: h,
            product_sku: m,
            order_subtotal: a,
            order_tax: "TBD",
            order_total: i,
            winners_circle: e.getWinnersCircleId()
        };
        FL.isJDKiosk && (f.basket_confirmed_total = a.replace(/\$/g, ""), f.kiosk_store = getCookie("jdKioskStoreId")), FL.Tealium.view(f)
    },
    displayProductImpressions: function(e) {},
    clickCheckoutApplePay: function() {
        var e = {
            events: "Apple Pay",
            ga_category: "Cart",
            ga_action: "Apple Pay",
            ga_label: "Apple Pay-Billing",
            checkout_step: "4"
        };
        FL.Tealium.link(e)
    },
    clickCartCheckoutApplePay: function() {
        var e = {
            events: "Apple Pay",
            ga_category: "Cart",
            ga_action: "Apple Pay",
            ga_label: "Apple Pay-Cart",
            checkout_step: "2"
        };
        FL.Tealium.link(e)
    },
    clickSlideCheckoutApplePay: function() {
        var e = {
            events: "Apple Pay",
            ga_category: "Cart",
            ga_action: "Apple Pay",
            ga_label: "Apple Pay-Slideout",
            checkout_step: "2"
        };
        FL.Tealium.link(e)
    },
    clickAfterPayPDP: function() {
        var e = {
            events: "afterpay_pdp",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-PDP"
        };
        FL.Tealium.link(e)
    },
    clickAfterPayPDPModal: function() {
        var e = {
            events: "afterpay_pdp_modal",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-PDP-Modal"
        };
        FL.Tealium.link(e)
    },
    clickAfterPaySlideout: function() {
        var e = {
            events: "afterpay_slideout",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-Slideout"
        };
        FL.Tealium.link(e)
    },
    clickAfterPaySlideOutModal: function() {
        var e = {
            events: "afterpay_slideout_modal",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-Slideout-Modal"
        };
        FL.Tealium.link(e)
    },
    clickAfterPayCart: function() {
        var e = {
            events: "afterpay_cart",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-Cart"
        };
        FL.Tealium.link(e)
    },
    clickAfterPayCartModal: function() {
        var e = {
            events: "afterpay_cart_modal",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-Cart-Modal"
        };
        FL.Tealium.link(e)
    },
    clickAfterPayBilling: function() {
        var e = {
            events: "Afterpay",
            ga_category: "Products",
            ga_action: "Afterpay",
            ga_label: "Afterpay-Billing"
        };
        FL.Tealium.link(e)
    },
    clickCheckoutSaveCard: function() {
        var e = {
            events: "save_card_wallet",
            ga_category: "Checkout",
            ga_action: "Wallet",
            ga_label: "Save Card to Wallet"
        };
        FL.Tealium.link(e)
    },
    clickCheckoutNewBillingAddress: function() {
        var e = {
            events: "add_new_billing_address",
            ga_category: "Checkout",
            ga_action: "Wallet",
            ga_label: "Add New Billing Address"
        };
        FL.Tealium.link(e)
    },
    clickCheckoutNewCreditCard: function() {
        var e = {
            events: "add_new_card",
            ga_category: "Checkout",
            ga_action: "Wallet",
            ga_label: "Add a New Card"
        };
        FL.Tealium.link(e)
    },
    clickCheckoutNewCreditCardTime: function(e) {
        var t = {
            events: "billing",
            saved_card_time: e
        };
        FL.Tealium.link(t)
    },
    clickKioskBasketContinue: function() {
        var e = {
                events: "Kiosk Continue Click",
                ga_category: "Kiosk",
                ga_action: "Click",
                ga_label: "Basket Confirmed",
                basket_confirmed_total: 0,
                kiosk_store: getCookie("jdKioskStoreId")
            },
            t = $("#orderSummaryOrderTotal").text().trim().replace("$", "");
        e.basket_confirmed_total = t, FL.Tealium.link(e)
    },
    displayUseNewCreditCard: function(e) {
        var t, a = FL.Tealium,
            t = {
                event_flag: "add_new_card",
                page_name: "Save Card-Add New Card",
                page_type: "Checkout",
                page_url: a.getPageURL(),
                page_section: "Shopping Cart",
                page_subsection: "Shopping Cart: Save Card-Add New Card",
                page_subsection2: "Shopping Cart: Save Card-Add New Card",
                time_parting: a.getTimeParting(),
                referrer: a.getReferer(),
                referring_url: a.getReferer(),
                previous_page: a.getReferer(),
                site_type: a.getDeviceType(),
                customer_email: a.getCustomerEmail(),
                login_status: a.getLoginStatus(),
                winners_circle: a.getWinnersCircleId()
            };
        FL.Tealium.view(t)
    },
    displayCheckoutAddBillingAddress: function() {
        var e, t = FL.Tealium,
            e = {
                event_flag: "add_new_billing_address",
                page_name: "Save Card-Add Billing Address",
                page_type: "Checkout",
                page_url: t.getPageURL(),
                page_section: "Shopping Cart",
                page_subsection: "Shopping Cart: Save Card-Add Billing Address",
                page_subsection2: "Shopping Cart: Save Card-Add Billing Address",
                time_parting: t.getTimeParting(),
                referrer: t.getReferer(),
                referring_url: t.getReferer(),
                previous_page: t.getReferer(),
                site_type: t.getDeviceType(),
                customer_email: t.getCustomerEmail(),
                login_status: t.getLoginStatus(),
                winners_circle: t.getWinnersCircleId()
            };
        FL.Tealium.view(e)
    },
    displayCheckoutEditCreditCard: function() {
        var e, t = FL.Tealium,
            e = {
                event_flag: "edit_card",
                page_name: "Save Card-Edit Card",
                page_type: "Checkout",
                page_url: t.getPageURL(),
                page_section: "Shopping Cart",
                page_subsection: "Shopping Cart: Save Card-Edit Card",
                page_subsection2: "Shopping Cart: Save Card-Edit Card",
                time_parting: t.getTimeParting(),
                referrer: t.getReferer(),
                referring_url: t.getReferer(),
                previous_page: t.getReferer(),
                site_type: t.getDeviceType(),
                customer_email: t.getCustomerEmail(),
                login_status: t.getLoginStatus(),
                winners_circle: t.getWinnersCircleId()
            };
        FL.Tealium.view(e)
    },
    clickNavigation: function(e) {
        var t = {
            events: "Navigation click",
            ga_category: "Navigation",
            ga_action: "Clicks",
            ga_label: e
        };
        FL.Tealium.link(t)
    },
    clickQuicklookLink: function(e) {
        e = jQuery.extend({
            events: "quick_view_click",
            ga_category: "Products",
            ga_action: "Quickview",
            ga_label: "Quickview",
            product_id: "",
            product_brand: "",
            product_color: "",
            product_discount: "$0.00",
            product_name: "",
            product_price: "$0.00",
            product_unit_price: "$0.00",
            product_quantity: 0,
            product_sku: "",
            product_size: ""
        }, e), FL.Tealium.link(e)
    },
    clickQuicklooksAddToCart: function() {
        var e, t, a = $("#quickLookContent"),
            i = a.find("#colorDescription").find(".colorDescVariable:not(.hide)"),
            o = a.find("#productPrice").find(".priceVariable:not(.hide)"),
            r = a.find("#productSizes").find(".sizeVariable:not(.hide)"),
            n = a.find("#productTitle").find("a").text().trim(),
            s = a.find("#qlQuantity").val(),
            l = i.data("description"),
            d = FL.QuickLook.thisBrand,
            c = r.find("a.button.active").data("size"),
            u = i.data("styleid"),
            p = i.data("colorid"),
            h = u + "_" + p,
            m = parseFloat(o.find(".fullPrice").text().trim().replace("$", "")) || 0,
            f = parseFloat(o.find(".nowPrice").text().trim().replace("$", "")) || 0,
            g = parseFloat(o.find(".wasPrice").text().trim().replace("$", "")) || 0;
        e = 0 !== m ? 0 : Math.round(100 * (g - f)) / 100, t = 0 !== m ? m : f;
        var v = {
            events: "quickview_cart_add",
            ga_category: "Products",
            ga_action: "Add",
            ga_label: "Add Item-Quickview",
            product_id: h,
            product_brand: d,
            product_category: "",
            product_color: l,
            product_discount: e,
            product_name: n,
            product_price: t,
            product_unit_price: t,
            product_quantity: s,
            product_sku: h,
            product_size: c
        };
        FL.Tealium.link(v)
    },
    clickCartRemove: function() {
        var e, t, a = $("#removeItemForm"),
            i = a.find("#removeProductName"),
            o = a.find("#removeColorDescription"),
            r = i.data("vendor"),
            n = o.data("color"),
            s = i.text().trim(),
            l = i.data("quantity"),
            d = a.find("#removeSize").data("size"),
            c = i.data("styleid") + "_" + i.data("colorid"),
            u = Math.round(100 * i.data("nowprice")) / 100 || 0,
            p = Math.round(100 * i.data("wasprice")) / 100 || 0;
        e = Math.round(100 * (p - u)) / 100 || 0, t = u;
        var h = {
            events: "cart_remove",
            ga_category: "Cart",
            ga_action: "Remove",
            ga_label: "Remove Item",
            product_id: c,
            product_brand: r,
            product_category: "",
            product_color: n,
            product_discount: e,
            product_name: s,
            product_price: t,
            product_unit_price: t,
            product_quantity: l,
            product_sku: c,
            product_size: d
        };
        FL.Tealium.link(h)
    },
    clickMyAccountSignIn: function() {
        var e = {
            events: "sign_in",
            ga_category: "Account",
            ga_action: "Click",
            ga_label: "Sign In"
        };
        FL.Tealium.link(e)
    },
    clickMyAccountCreateAccount: function() {
        var e = {
            events: "create_account",
            ga_category: "Account",
            ga_action: "Click",
            ga_label: "Create Account"
        };
        FL.Tealium.link(e)
    },
    clickFavoritesSignIn: function() {
        var e = {
            events: "sign_in",
            ga_category: "Account",
            ga_action: "Click",
            ga_label: "Sign In"
        };
        FL.Tealium.link(e)
    },
    clickFavoritesCreateAccount: function() {
        var e = {
            events: "create_account",
            ga_category: "Account",
            ga_action: "Click",
            ga_label: "Creat Account"
        };
        FL.Tealium.link(e)
    },
    clickFavoritesGridAdd: function(e) {
        var t = e.closest(".product-card"),
            a = e.closest(".product-card__media-slide"),
            i = t.find(".product-name").text().trim(),
            o = t.data("brand"),
            r = (t.data("prodid"), a.data("styleid")),
            n = a.data("colorid"),
            s = {
                events: "favorites-grid",
                ga_category: "Products",
                ga_action: "Favorites Add:Grid",
                ga_label: "Favorites Add:Grid",
                page_name: FL.Tealium.getPageName(),
                product_id: r + "_" + n,
                product_brand: o,
                product_category: "",
                product_color: "",
                product_name: i,
                product_sku: r + "_" + n
            };
        FL.Tealium.link(s)
    },
    clickFavoritesPDPAdd: function(e) {
        var t = $("#title"),
            a = $("#styleColors"),
            i = t.text().trim(),
            o = t.data("vendor"),
            r = (t.data("productid"), a.find(".description").text().trim()),
            n = a.find(".styleColorIds").html().trim().replace("- ", "").replace("&nbsp;", "_"),
            s = {
                events: "favorites-pdp",
                ga_category: "Products",
                ga_action: "Favorites Add:PDP",
                ga_label: "Favorites Add:PDP",
                page_name: $(document).find("title").text(),
                product_id: n,
                product_brand: o,
                product_category: "",
                product_color: r,
                product_name: i,
                product_sku: n
            };
        FL.Tealium.link(s)
    },
    clickGridAdd: function(e) {
        var t, a = FL.Tealium,
            i = $(e),
            o = (i.parents(".product-card"), i.find(".product-card__details").find(".product-price")),
            r = a.getPriceFloat(o.find(".fullPrice").text().trim()),
            n = a.getPriceFloat(o.find(".nowPrice").text().trim()),
            s = a.getPriceFloat(o.find(".wasPrice").text().trim()),
            l = a.getPriceDiscount(r, s, n),
            d = a.getPrice(r, n);
        t = {
            events: "Product Click",
            ga_category: "Products",
            ga_action: "Click",
            ga_label: "Grid Product",
            product_id: i.data("styleid") + "_" + i.data("colorid"),
            product_brand: i.data("brand"),
            product_category: "",
            product_color: i.data("colordescription"),
            product_discount: l,
            product_name: i.find(".product-name").text().replace(/\r\n/g, "").trim(),
            product_price: d,
            product_unit_price: d,
            product_quantity: "",
            product_sku: i.data("styleid") + "_" + i.data("colorid"),
            product_size: ""
        }, FL.Tealium.link(t)
    },
    clickGridFilterOption: function(e) {
        var t = $(e),
            a = t.closest("ul").data("filter"),
            i = t.text().replace(/\r\n/g, "").trim(),
            o = FL.Tealium.getBreadcrumbsForLabel("Filter", a + ":" + i),
            r = {
                events: "Left Nav Filter",
                ga_category: "Filter",
                ga_action: "Left Nav Filter",
                ga_label: o
            };
        FL.Tealium.link(r)
    },
    clickPDPSelection: function(e) {
        var t, a, i = $("#title"),
            o = $("#styleColors"),
            r = $("#productPrices"),
            n = $("#productSizes"),
            s = i.text().trim(),
            l = parseInt($("#productQuantity option:selected").val()) || 1,
            d = i.data("vendor"),
            c = n.find("button.active").text().trim(),
            u = o.find(".description").text().trim(),
            p = o.find(".styleColorIds").html().trim().replace("- ", "").replace("&nbsp;", "_"),
            h = parseFloat(r.find(".fullPrice").text().trim().replace("$", "")) || 0,
            m = parseFloat(r.find(".nowPrice").text().trim().replace("$", "")) || 0,
            f = parseFloat(r.find(".wasPrice").text().trim().replace("$", "")) || 0;
        t = 0 !== h ? 0 : Math.round(100 * (f - m)) / 100, a = 0 !== h ? h : m;
        var g = {
            events: "Product Click",
            ga_category: "Products",
            ga_action: "Click",
            ga_label: e,
            product_id: p,
            product_brand: d,
            product_category: "",
            product_color: u,
            product_discount: t,
            product_name: s,
            product_price: a,
            product_unit_price: a,
            product_quantity: l,
            product_sku: p,
            product_size: c
        };
        FL.Tealium.link(g)
    },
    clickPDPAddToCart: function() {
        var e, t, a = $("#title"),
            i = $("#styleColors"),
            o = $("#productPrices"),
            r = $("#productSizes"),
            n = a.text().trim(),
            s = parseInt($("#productQuantity option:selected").val()) || 1,
            l = a.data("vendor"),
            d = r.find("button.active").text().trim(),
            c = i.find(".description").text().trim(),
            u = i.find(".styleColorIds").html().trim().replace("- ", "").replace("&nbsp;", "_"),
            p = parseFloat(o.find(".fullPrice").text().trim().replace("$", "")) || 0,
            h = parseFloat(o.find(".nowPrice").text().trim().replace("$", "")) || 0,
            m = parseFloat(o.find(".wasPrice").text().trim().replace("$", "")) || 0;
        e = 0 !== p ? 0 : Math.round(100 * (m - h)) / 100, t = 0 !== p ? p : h;
        var f = {
            events: "cart_add",
            ga_category: "Products",
            ga_action: "Add",
            ga_label: "Add Item-PDP",
            product_id: u,
            product_brand: l,
            product_category: "",
            product_color: c,
            product_discount: e,
            product_name: n,
            product_price: t,
            product_unit_price: t,
            product_quantity: s,
            product_sku: u,
            product_size: d
        };
        FL.isJDKiosk && (f.basket_confirmed_total = t, f.kiosk_store = getCookie("jdKioskStoreId")), FL.Tealium.link(f)
    },
    clickProductImpressions: function(e) {
        var t, a = $(e).find(".product-card-details");
        t = {
            product_click_brand: a.data("brand"),
            product_click_category: "",
            product_click_id: a.data("productid"),
            product_click_list: a.data("list"),
            product_click_name: a.data("name"),
            product_click_position: a.data("position"),
            product_click_price: a.data("price"),
            product_click_variant: a.data("styleid") + "_" + a.data("colorid")
        }, FL.Tealium.link(t)
    },
    clickPromotionImpressions: function(e) {
        var t, a = $(e);
        t = {
            promotion_creative: a.data("creative"),
            promotion_name: a.data("name"),
            promotion_id: a.attr("id"),
            promotion_position: a.data("position")
        }, FL.Tealium.link(t)
    },
    clickQuicklookColor: function() {
        var e = FL.Tealium,
            t = $("#quickLookContent"),
            a = t.find("#colorDescription").find(".colorDescVariable:not(.hide)"),
            i = t.find("#productPrice").find(".priceVariable:not(.hide)"),
            o = t.find("#productTitle").find("a").text().trim(),
            r = t.find("#qlQuantity").val(),
            n = a.data("description"),
            s = FL.QuickLook.thisBrand,
            l = a.data("styleid"),
            d = a.data("colorid"),
            c = l + "_" + d,
            u = e.getPriceFloat(i.find(".fullPrice").text().trim()),
            p = e.getPriceFloat(i.find(".nowPrice").text().trim()),
            h = e.getPriceFloat(i.find(".wasPrice").text().trim()),
            m = e.getPriceDiscount(u, h, p),
            f = e.getPrice(u, p),
            g = {
                events: "Product Click",
                ga_category: "Products",
                ga_action: "Click",
                ga_label: "Quickview",
                product_id: c,
                product_brand: s,
                product_category: "",
                product_color: n,
                product_discount: m,
                product_name: o,
                product_price: f,
                product_unit_price: f,
                product_quantity: r,
                product_sku: c,
                product_size: ""
            };
        FL.Tealium.link(g)
    },
    clickRegisterCreateAccount: function() {
        var e = {
            events: "create_account",
            ga_category: "Account",
            ga_action: "Click",
            ga_label: "Create Account"
        };
        FL.Tealium.link(e)
    },
    clickCartProceedCheckout: function(e) {
        e = jQuery.extend({
            isSlideout: !1
        }, e);
        var t = e.isSlideout ? "Checkout-Slideout" : "Checkout-Cart",
            a = {
                events: "cart_checkout",
                ga_category: "Cart",
                ga_action: "Checkout",
                ga_label: t
            };
        FL.Tealium.link(a)
    },
    clickCartProceedPayPal: function(e) {
        e = jQuery.extend({
            isSlideout: !1
        }, e);
        var t = e.isSlideout ? "Paypal-Slideout" : "Paypal-Cart",
            a = {
                events: "Paypal",
                ga_category: "Cart",
                ga_action: "Paypal",
                ga_label: t,
                checkout_step: "1"
            };
        FL.Tealium.link(a)
    },
    clickUMBPrevious: function() {
        var e = {
            events: "Carousel Click",
            ga_category: "Campaign",
            ga_action: "Small Carousel Click",
            ga_label: "Left Clicked"
        };
        FL.Tealium.link(e)
    },
    clickUMBNext: function() {
        var e = {
            events: "Carousel Click",
            ga_category: "Campaign",
            ga_action: "Small Carousel Click",
            ga_label: "Right Clicked"
        };
        FL.Tealium.link(e)
    },
    clickUMBSlide: function() {
        var e, t, a, i = $(this);
        i.hasClass("countdown-umb") ? t = FL.Tealium.getParentTextNoTimer(i) : (e = $(this).parent(".umb-message-container").find("a:not(.cta-text)"), t = FL.Tealium.getParentText(e)), a = {
            events: "Carousel Click",
            ga_category: "Campaign",
            ga_action: "Small Carousel Click",
            ga_label: t
        }, FL.Tealium.link(a)
    },
    selectGridSort: function() {
        var e, t = $("#fysSort"),
            a = t.find("option:selected").text().replace(/\r\n/g, "").trim();
        e = {
            events: "Sort",
            ga_category: "Sort",
            ga_action: "Sort Filter",
            ga_label: FL.Tealium.getBreadcrumbsForLabel("Sort", a)
        }, FL.Tealium.link(e)
    },
    clickSearchInput: function() {
        var e = {
            events: "Search Initiate",
            ga_category: "Search",
            ga_action: "Clicks",
            ga_label: "Search Initiated"
        };
        FL.Tealium.link(e)
    },
    clickSearchSuggestion: function(e, t) {
        var a = {
            events: "Search Suggestion",
            ga_category: "Search",
            ga_action: "Clicks",
            ga_label: e
        };
        FL.Tealium.link(a), setTimeout(function() {
            t()
        }, 170)
    },
    clickSearchProduct: function(e, t) {
        var a = {
            events: "Search Products Clicked",
            ga_category: "Search",
            ga_action: "Clicks",
            ga_label: e
        };
        FL.Tealium.link(a), setTimeout(function() {
            t()
        }, 170)
    }
}, FL.Tealium), window.FL = window.FL || {}, FL.Reflektion = FL.Reflektion || {};
var apiURL = FL.rfkApiURL,
    badgeImg = "",
    badgeText = [],
    loadingShimmer = '<div class="loading-shimmer" style="display: inline-block;width: 27px;height: 21px;"></div>';
FL.Reflektion = jQuery.extend(!0, {
    init: function() {
        if (!FL.setup.isHomePage) {
            if (document.location.hash) FL.Reflektion.toggleGlobalOverlay(), FL.Reflektion.paginationByParam(!0);
            else {
                var e = FL.Reflektion.getQueryKeyword(),
                    t = FL.Reflektion.generateQuery("rfkid_7", e, null, {
                        facets: "all"
                    });
                FL.Reflektion.generateResults(t, function(e) {
                    FL.Reflektion.populateDropDown(e), FL.Reflektion.checkPaginationBtns(e.page_number, e.total_page), FL.Reflektion.populateFilters(e.facet)
                })
            }
            FL.Reflektion.initSort(), FL.Reflektion.labelEvents()
        }
    },
    checkRrkCookie: function() {
        return getCookie("__rslct").indexOf("sp") >= 0
    },
    isRfkOn: function(e) {
        switch (e) {
            case 1:
                return "true" == FL.enableReflektion && FL.Reflektion.isSearchPage() && FL.Reflektion.checkRrkCookie();
            case 2:
                return "true" != FL.enableReflektion || "true" == FL.enableReflektion && !FL.Reflektion.isSearchPage();
            case 3:
                return "true" != FL.enableReflektion || !FL.Reflektion.checkRrkCookie();
            case 4:
                return "true" != FL.enableReflektion && !FL.Reflektion.isSearchPage();
            case 5:
                return !FL.Reflektion.checkRrkCookie();
            case 6:
                return "true" == FL.enableReflektion && !FL.Reflektion.checkRrkCookie() && FL.Reflektion.isSearchPage();
            case 7:
                return "true" == FL.enableReflektion;
            default:
                return "true" == FL.enableReflektion && FL.Reflektion.checkRrkCookie()
        }
    },
    rollOut: function() {
        $("#reflektionList").length && (FL.global.showOverlay(), $("#reflektionList .spinner-icon").remove(), $("#reflektionList").attr("id", ""), $("#rfk-title").text(FL.Reflektion.getQueryKeyword()), window.location.href = FL.Reflektion.replaceUrlParam(window.location.href, "isrfk", "false"))
    },
    rfkSignInEvent: function(e) {
        if (void 0 == localStorage.rfkEventFlag) {
            var t = $.trim($(".customeremail").val());
            e && (t = utag_data.customer_email);
            var a = {
                type: "user",
                name: "login",
                value: {
                    user: {
                        id: utag_data.order_customer_id || "",
                        eid: FL.Reflektion.md5(t)
                    }
                }
            };
            FL.Reflektion.isRfkOn(7) && (FL.Reflektion.isUUID(function() {
                console.log(a), rfk.push(["trackEvent", a])
            }), localStorage.rfkEventFlag = 1)
        }
    },
    rfkAccount: function() {
        location.href.indexOf("myaccount/profile.jsp") >= 0 ? FL.Reflektion.rfkSignInEvent() : location.href.indexOf("myaccount/login.jsp") >= 0 ? FL.Reflektion.clearSignEvent() : location.href.indexOf("/checkout") >= 0 && utag_data.customer_email.length && FL.Reflektion.rfkSignInEvent(!0)
    },
    clearSignEvent: function() {
        localStorage.removeItem("rfkEventFlag")
    },
    checkEventStatus: function() {
        location.href.toLocaleLowerCase().indexOf("logout") >= 0 && FL.Reflektion.clearSignEvent()
    },
    isUUID: function(e) {
        var t = setInterval(function() {
            void 0 !== window.rfk && void 0 !== window.rfk.uid && (e(), clearInterval(t))
        }, 10)
    },
    reOrderFilters: function() {
        var e = $(".filter-sidebar"),
            t = e.find(".genders.filter-section"),
            a = e.find(".brands.filter-section"),
            i = e.find(".sizes.filter-section"),
            o = e.find(".free_shipping.filter-section"),
            r = e.find(".price.filter-section"),
            n = e.find(".activities_list.filter-section");
        t.prependTo(".filter-sidebar"), a.insertAfter(t), i.insertAfter(a), r.insertAfter(i), n.insertAfter(r), o.insertAfter(e.find(".sku_facet_collection.filter-section"))
    },
    populateFilters: function(e) {
        var t = $(".filter-sidebar");
        t.html("");
        var a = "",
            i = "";
        for (var o in e) o.match(/(sale_flag|prod_id|review_count|style_color|review_rating|category_names|prod_team)/) || (a = "sizes" == o ? "row block-grid--filter-sizes small-up-5 medium-up-4 " : "colors" == o ? "row block-grid--colors small-up-8 medium-up-5 " : "brands" == o ? "brand filterOptions row block-grid--brands small-up-5 medium-up-3" : "", i += FL.Reflektion.generateFilterPanels(o, e[o].display_name, a));
        t.append(i), FL.Reflektion.generateCheckboxChildren(e.genders, "genders"), FL.Reflektion.generateCheckboxChildren(e.product_type_list, "product_type_list"), FL.Reflektion.generateCheckboxChildren(e.activities_list, "activities_list"), FL.Reflektion.generateCheckboxChildren(e.price_facet, "price_facet"), FL.Reflektion.generateCheckboxChildren(e.sizes, "sizes"), FL.Reflektion.generateCheckboxChildren(e.sku_facet_collection, "sku_facet_collection"), FL.Reflektion.generateCheckboxChildren(e.colors, "colors"), FL.Reflektion.generateCheckboxChildren(e.prod_age_facet, "prod_age_facet"), FL.Reflektion.generateCheckboxChildren(e.brands, "brands"), FL.Reflektion.generateCheckboxChildren(e.free_shipping, "free_shipping"), "mobile" != FL.footer.detectDevice() && FL.Reflektion.createFilterQuery(), $("dd").foundation()
    },
    selectedFilters: function() {
        if (FL.Reflektion.checkFilters(), "undefined" != typeof filterSelection)
            for (var e in filterSelection) $(".filter-" + e).find("a").removeClass("selected  active"), filterSelection[e].map(function(t) {
                $(".filter-" + e).find('[data-value="' + t + '"]').addClass("selected active")
            })
    },
    checkLabelFilters: function(e, t) {
        if ($(".appliedFiltersSection").find(".filterOptions").html(""), "undefined" != typeof filterSelection)
            for (var a in filterSelection) 0 == filterSelection[a].length && $("." + a + ".filter-section").removeClass("hide"), filterSelection[a].map(function(e) {
                var t = $('[data-filter="' + a + '"] [data-value="' + e + '"]:first');
                if (t.hasClass("checkbox-link")) var i = t.find(".checkbox-name").text();
                else if (t.hasClass("color-filter")) var i = t.find(".color-text").text();
                else if (t.hasClass("brand-filter")) var i = t.find(".brand-name").text();
                else if (t.hasClass("btn-size-rfk")) var i = "Size: " + t.find("span").text();
                var o = FL.Reflektion.generateCheckboxFilters(e, i, "label", a);
                $(".appliedFiltersSection").find(".filterOptions").append(o)
            })
    },
    labelEvents: function() {
        $(".appliedFiltersSection").on("click", ".label-rfk", function(e) {
            e.preventDefault();
            var t = $(this).data("value"),
                a = $(this).data("key");
            t && ($(".filter-sidebar").find('[data-filter="' + a + '"] [data-value="' + t + '"]').click(), "mobile" == FL.footer.detectDevice() && (FL.Reflektion.selectedFilters(), $("#offCanvasBottomSlider").foundation("close")))
        })
    },
    mobileLabelEvents: function() {
        $("#mobileAppliedFiltersSection").on("click", ".label-rfk", function(e) {
            e.preventDefault();
            var t = $(this).data("value");
            t && ($(".filter-sidebar").find('[data-filter="' + key + '"] [data-value="' + t + '"]').click(), "mobile" == FL.footer.detectDevice() && (FL.Reflektion.selectedFilters(), $("#offCanvasBottomSlider").foundation("close")))
        })
    },
    createFilterQuery: function() {
        FL.Reflektion.checkFilters(), $("#leftNavigationContent, #offCanvasBottomSlider").off("click").on("click", ".checkbox-link, .btn-rfk", function(e) {
            e.preventDefault();
            var t = $(this),
                a = t.closest(".filterOptions"),
                i = a.data("filter");
            t.toggleClass("selected active"), filterSelection[i] = filterSelection[i] ? filterSelection[i] : [], t.hasClass("selected active") ? filterSelection[i].indexOf(t.data("value")) < 0 && filterSelection[i].push(t.data("value")) : filterSelection[i] = filterSelection[i].filter(function(e) {
                return e != t.data("value")
            });
            var o = JSON.stringify(filterSelection);
            !$.isEmptyObject(filterSelection) && FL.Reflektion.updateUrlParams({
                filters: o
            });
            var r, n = "" == FL.Reflektion.params("No") ? 1 : parseInt(FL.Reflektion.params("No")),
                s = FL.Reflektion.getQueryKeyword(),
                l = FL.Reflektion.returnSortParams();
            r = $.isEmptyObject(FL.Reflektion.returnSortParams().sortOpts) ? {
                filters: filterSelection
            } : {
                filters: filterSelection,
                sort: l.sortOpts.sort
            };
            var d = FL.Reflektion.generateQuery("rfkid_7", s, n, r);
            FL.Reflektion.checkLabelFilters(), FL.Reflektion.toggleGlobalOverlay(!0), FL.Reflektion.generateResults(d, function(e) {
                $(window).scrollTop(0), FL.Reflektion.toggleGlobalOverlay(), FL.Reflektion.populateDropDown(e), FL.Reflektion.syncParamsUrl(e), FL.Reflektion.populateFilters(e.facet), FL.Reflektion.selectedFilters(), FL.Reflektion.checkLabelFilters()
            }), "mobile" == FL.footer.detectDevice() && $("#offCanvasBottomSlider").foundation("close")
        })
    },
    syncParamsUrl: function(e) {
        var t = e.page_number > e.total_page ? e.total_page : e.page_number;
        FL.Reflektion.selectOption(t), FL.Reflektion.updateUrlParams({
            No: t
        }), FL.Reflektion.checkPaginationBtns(t, e.total_page)
    },
    generateCheckboxChildren: function(e, t) {
        contentHTML = "", type = t.match(/(sizes|colors|brands|free_shipping)/) ? t : void 0, e && e.value.length > 0 && (e.value.map(function(e) {
            ("free_shipping" == type && "1" == e.text || "free_shipping" != type) && (contentHTML += FL.Reflektion.generateCheckboxFilters(e.id, e.text, type))
        }), $(".accordion-" + t).find(".filter-" + t).append(contentHTML))
    },
    generateFilterPanels: function(e, t, a) {
        return "product_type_list" == e && (t = "Category"), FL.Reflektion.templates.filterPanel.replace(/\[facet-key\]/g, e).replace(/\[facet-classes\]/g, a).replace(/\[facet-name\]/g, t)
    },
    generateCheckboxFilters: function(e, t, a, i) {
        if (void 0 === a) return FL.Reflektion.templates.checkBox.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, t).replace(/\[is-reverse\]/g, FL.global.isJDSport() ? "flex-dir-row-reverse" : "");
        if ("sizes" == a) {
            switch (t.toLowerCase()) {
                case "large":
                    t = "L";
                    break;
                case "med":
                    t = "M";
                    break;
                case "xlrg":
                    t = "xl";
                    break;
                case "small":
                    t = "s";
                    break;
                default:
                    t = t
            }
            return FL.Reflektion.templates.sizeItem.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, t)
        }
        if ("colors" == a) return FL.Reflektion.templates.colorItem.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, t.toLowerCase());
        if ("brands" == a) {
            switch (t.toLowerCase().replace(/\s/g, "")) {
                case "niketeam":
                    t = "nike"
            }
            return FL.Reflektion.templates.brandItem.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, t.toLowerCase().replace(/\s/g, ""))
        }
        return "label" == a ? FL.Reflektion.templates.labelItem.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, t).replace(/\[facet-key\]/g, i) : "free_shipping" == a && "1" == t ? FL.Reflektion.templates.checkBox.replace(/\[facet-id\]/g, e).replace(/\[facet-name\]/g, "Item qualifies for free shipping").replace(/\[is-reverse\]/g, FL.global.isJDSport() ? "flex-dir-row-reverse" : "") : void 0
    },
    clearDDSortParams: function() {
        FL.Reflektion.removeParam("price"), FL.Reflektion.removeParam("newest"), FL.Reflektion.removeParam("toprated")
    },
    checkSortDDValue: function(e) {
        switch (FL.Reflektion.clearDDSortParams(), e) {
            case "asc":
            case "lowprice":
                return $("#rfkSort").val("lowprice"), FL.Reflektion.updateUrlParams({
                    price: "asc"
                }), {
                    sort: {
                        price: "asc"
                    }
                };
            case "desc":
            case "highprice":
                return $("#rfkSort").val("highprice"), FL.Reflektion.updateUrlParams({
                    price: "desc"
                }), {
                    sort: {
                        price: "desc"
                    }
                };
            case "newest":
                return $("#rfkSort").val("newest"), FL.Reflektion.updateUrlParams({
                    newest: "newest"
                }), {
                    sort: {
                        newest: "newest"
                    }
                };
            case "toprated":
                return $("#rfkSort").val("toprated"), FL.Reflektion.updateUrlParams({
                    toprated: "toprated"
                }), {
                    sort: {
                        toprated: "toprated"
                    }
                };
            default:
                $("#rfkSort").val(""), FL.Reflektion.removeParam("price")
        }
    },
    initMobile: function() {
        var e = $("#mobileSelection");
        $("#offCanvasBottomSlider").off("click").on("click", ".control", function(t) {
            var a = $(this).find("input"),
                i = $(this).find(".control__indicator");
            selectionSort = a.val(), $(".control__indicator").removeClass("rfk-indicator"), $('[name="mobileSortRadios"]').attr("checked", !1), a.attr("checked", !0);
            var o = $("#offCanvasBottomSlider").html();
            $("#mobiledds").html(o), i.addClass("rfk-indicator"), $("#offCanvasBottomSlider").foundation("close"), e.text(a.data("text"));
            var r = FL.Reflektion.checkSortDDValue(selectionSort),
                n = "" == FL.Reflektion.params("No") ? 1 : parseInt(FL.Reflektion.params("No")),
                s = FL.Reflektion.getQueryKeyword(),
                l = FL.Reflektion.generateQuery("rfkid_7", s, n, r);
            FL.Reflektion.toggleGlobalOverlay(!0), FL.Reflektion.generateResults(l, function(e) {
                FL.Reflektion.toggleGlobalOverlay(), FL.Reflektion.populateDropDown(e), FL.Reflektion.checkPaginationBtns(e.page_number, e.total_page)
            })
        })
    },
    initSort: function() {
        $("#rfkSort").on("change", function() {
            var e = $(this).val(),
                t = FL.Reflektion.checkSortDDValue(e),
                a = "" == FL.Reflektion.params("No") ? 1 : parseInt(FL.Reflektion.params("No")),
                i = FL.Reflektion.getQueryKeyword(),
                o = FL.Reflektion.generateQuery("rfkid_7", i, a, t);
            FL.Reflektion.toggleGlobalOverlay(!0), FL.Reflektion.generateResults(o, function(e) {
                FL.Reflektion.toggleGlobalOverlay(), FL.Reflektion.populateDropDown(e), FL.Reflektion.checkPaginationBtns(e.page_number, e.total_page)
            })
        }), $("#mobileSortButton").off("click").on("click", function() {
            FL.Reflektion.initMobile(), FL.global.offCanvas.open("full", "bottom", "overlap", $("#mobiledds").html())
        })
    },
    mobileOpenBox: function() {
        $(".icon-close-x-rfk").on("click", function() {
            $(".rfk-results").hide(), FL.mainnav.Mobile.closeSearch()
        }), $("#mobileSearchBarSearchBox").on("keyup", function() {
            var e = $(this);
            setTimeout(function() {
                var t = e.val();
                globalSearchRfkTerm = t, FL.Reflektion.requestPreviewData(t)
            }, 200)
        })
    },
    TrendingCategories: function() {
        console.log("trending categories ran");
        var e = $(".header-main #searchBarSearchBox, #mobileHeaderSearch");
        e.on("click", function() {
            if (!$("#mobileHeaderSearch").hasClass("highlight") && "mobile" == FL.global.detectDevice()) return $(".rfk-results").hide(), !1;
            if (!e.val().length) {
                var t = FL.Reflektion.generateQuery("rfkid_6", "", null, {
                    trending: 1,
                    items: 6
                });
                $.ajax({
                    type: "POST",
                    headers: {
                        Authorization: "Bearer " + FL.rfkToken
                    },
                    dataType: "json",
                    data: JSON.stringify(t),
                    url: apiURL
                }).done(function(e) {
                    if (void 0 === e.suggestion) return !1;
                    FL.Reflektion.changePreviewTitle(!1), void 0 !== e.suggestion.trending_category && (FL.Reflektion.generatePreviewItem(e.suggestion.trending_category, !1), "mobile" != FL.global.detectDevice() && FL.Reflektion.generateRightProducts(e.content.product, !1), setTimeout(function() {
                        new Blazy({
                            selector: ".rfk-box .productImage"
                        })
                    }, 300))
                }), FL.Reflektion.appearRfkEvent("rfkid_6", "sb")
            }
        })
    },
    appearRfkEvent: function(e, t) {
        var a = {
            device: "desktop",
            type: "widget",
            app_type: "webview",
            name: "appear",
            value: {
                dn: window.location.hostname,
                rfkid: e,
                f: t
            }
        };
        rfk.push(["trackEvent", a])
    },
    checkIfOldURL: function() {
        return document.location.hash.indexOf("#/store/_/N-/?") >= 0
    },
    md5: function(e) {
        function t(e, t) {
            return e << t | e >>> 32 - t
        }

        function a(e, t) {
            var a, i, o, r, n;
            return o = 2147483648 & e, r = 2147483648 & t, a = 1073741824 & e, i = 1073741824 & t, n = (1073741823 & e) + (1073741823 & t), a & i ? 2147483648 ^ n ^ o ^ r : a | i ? 1073741824 & n ? 3221225472 ^ n ^ o ^ r : 1073741824 ^ n ^ o ^ r : n ^ o ^ r
        }

        function i(e, t, a) {
            return e & t | ~e & a
        }

        function o(e, t, a) {
            return e & a | t & ~a
        }

        function r(e, t, a) {
            return e ^ t ^ a
        }

        function n(e, t, a) {
            return t ^ (e | ~a)
        }

        function s(e, o, r, n, s, l, d) {
            return e = a(e, a(a(i(o, r, n), s), d)), a(t(e, l), o)
        }

        function l(e, i, r, n, s, l, d) {
            return e = a(e, a(a(o(i, r, n), s), d)), a(t(e, l), i)
        }

        function d(e, i, o, n, s, l, d) {
            return e = a(e, a(a(r(i, o, n), s), d)), a(t(e, l), i)
        }

        function c(e, i, o, r, s, l, d) {
            return e = a(e, a(a(n(i, o, r), s), d)), a(t(e, l), i)
        }

        function u(e) {
            var t, a, i = "",
                o = "";
            for (a = 0; a <= 3; a++) t = e >>> 8 * a & 255, o = "0" + t.toString(16), i += o.substr(o.length - 2, 2);
            return i
        }
        var p, h, m, f, g, v, y, b, $, C = Array();
        for (e = function(e) {
                e = e.replace(/\r\n/g, "\n");
                for (var t = "", a = 0; a < e.length; a++) {
                    var i = e.charCodeAt(a);
                    i < 128 ? t += String.fromCharCode(i) : i > 127 && i < 2048 ? (t += String.fromCharCode(i >> 6 | 192), t += String.fromCharCode(63 & i | 128)) : (t += String.fromCharCode(i >> 12 | 224), t += String.fromCharCode(i >> 6 & 63 | 128), t += String.fromCharCode(63 & i | 128))
                }
                return t
            }(e), C = function(e) {
                for (var t, a = e.length, i = a + 8, o = (i - i % 64) / 64, r = 16 * (o + 1), n = Array(r - 1), s = 0, l = 0; l < a;) t = (l - l % 4) / 4, s = l % 4 * 8, n[t] = n[t] | e.charCodeAt(l) << s, l++;
                return t = (l - l % 4) / 4, s = l % 4 * 8, n[t] = n[t] | 128 << s, n[r - 2] = a << 3, n[r - 1] = a >>> 29, n
            }(e), v = 1732584193, y = 4023233417, b = 2562383102, $ = 271733878, p = 0; p < C.length; p += 16) h = v, m = y, f = b, g = $, v = s(v, y, b, $, C[p + 0], 7, 3614090360), $ = s($, v, y, b, C[p + 1], 12, 3905402710), b = s(b, $, v, y, C[p + 2], 17, 606105819), y = s(y, b, $, v, C[p + 3], 22, 3250441966), v = s(v, y, b, $, C[p + 4], 7, 4118548399), $ = s($, v, y, b, C[p + 5], 12, 1200080426), b = s(b, $, v, y, C[p + 6], 17, 2821735955), y = s(y, b, $, v, C[p + 7], 22, 4249261313), v = s(v, y, b, $, C[p + 8], 7, 1770035416), $ = s($, v, y, b, C[p + 9], 12, 2336552879), b = s(b, $, v, y, C[p + 10], 17, 4294925233), y = s(y, b, $, v, C[p + 11], 22, 2304563134), v = s(v, y, b, $, C[p + 12], 7, 1804603682), $ = s($, v, y, b, C[p + 13], 12, 4254626195), b = s(b, $, v, y, C[p + 14], 17, 2792965006), y = s(y, b, $, v, C[p + 15], 22, 1236535329), v = l(v, y, b, $, C[p + 1], 5, 4129170786), $ = l($, v, y, b, C[p + 6], 9, 3225465664), b = l(b, $, v, y, C[p + 11], 14, 643717713), y = l(y, b, $, v, C[p + 0], 20, 3921069994), v = l(v, y, b, $, C[p + 5], 5, 3593408605), $ = l($, v, y, b, C[p + 10], 9, 38016083), b = l(b, $, v, y, C[p + 15], 14, 3634488961), y = l(y, b, $, v, C[p + 4], 20, 3889429448), v = l(v, y, b, $, C[p + 9], 5, 568446438), $ = l($, v, y, b, C[p + 14], 9, 3275163606), b = l(b, $, v, y, C[p + 3], 14, 4107603335), y = l(y, b, $, v, C[p + 8], 20, 1163531501), v = l(v, y, b, $, C[p + 13], 5, 2850285829), $ = l($, v, y, b, C[p + 2], 9, 4243563512), b = l(b, $, v, y, C[p + 7], 14, 1735328473), y = l(y, b, $, v, C[p + 12], 20, 2368359562), v = d(v, y, b, $, C[p + 5], 4, 4294588738), $ = d($, v, y, b, C[p + 8], 11, 2272392833), b = d(b, $, v, y, C[p + 11], 16, 1839030562), y = d(y, b, $, v, C[p + 14], 23, 4259657740), v = d(v, y, b, $, C[p + 1], 4, 2763975236), $ = d($, v, y, b, C[p + 4], 11, 1272893353), b = d(b, $, v, y, C[p + 7], 16, 4139469664), y = d(y, b, $, v, C[p + 10], 23, 3200236656), v = d(v, y, b, $, C[p + 13], 4, 681279174), $ = d($, v, y, b, C[p + 0], 11, 3936430074), b = d(b, $, v, y, C[p + 3], 16, 3572445317), y = d(y, b, $, v, C[p + 6], 23, 76029189), v = d(v, y, b, $, C[p + 9], 4, 3654602809), $ = d($, v, y, b, C[p + 12], 11, 3873151461), b = d(b, $, v, y, C[p + 15], 16, 530742520), y = d(y, b, $, v, C[p + 2], 23, 3299628645), v = c(v, y, b, $, C[p + 0], 6, 4096336452), $ = c($, v, y, b, C[p + 7], 10, 1126891415), b = c(b, $, v, y, C[p + 14], 15, 2878612391), y = c(y, b, $, v, C[p + 5], 21, 4237533241), v = c(v, y, b, $, C[p + 12], 6, 1700485571), $ = c($, v, y, b, C[p + 3], 10, 2399980690), b = c(b, $, v, y, C[p + 10], 15, 4293915773), y = c(y, b, $, v, C[p + 1], 21, 2240044497), v = c(v, y, b, $, C[p + 8], 6, 1873313359), $ = c($, v, y, b, C[p + 15], 10, 4264355552), b = c(b, $, v, y, C[p + 6], 15, 2734768916), y = c(y, b, $, v, C[p + 13], 21, 1309151649), v = c(v, y, b, $, C[p + 4], 6, 4149444226), $ = c($, v, y, b, C[p + 11], 10, 3174756917), b = c(b, $, v, y, C[p + 2], 15, 718787259), y = c(y, b, $, v, C[p + 9], 21, 3951481745), v = a(v, h), y = a(y, m), b = a(b, f), $ = a($, g);
        return (u(v) + u(y) + u(b) + u($)).toLowerCase()
    },
    generateResults: function(e, t) {
        FL.Reflektion.isRfkOn() && ($titleResultCount = $(".page-title>.results-count"), $totalPagsQty = $("span.qtyPages"), $paginationContainer = $(".paginationDiv"), $titleResultCount.html("(" + loadingShimmer + ")"), $("#rfk-title").html(loadingShimmer), FL.Reflektion.isSearchPage() && $.ajax({
            type: "POST",
            headers: {
                Authorization: "Bearer " + FL.rfkToken
            },
            dataType: "json",
            data: JSON.stringify(e),
            url: apiURL
        }).done(function(e) {
            if (e.redirect_url) return window.location.href = e.redirect_url, !1;
            var a = e.content.product.value;
            if (e.total_item <= 0) return location.href.indexOf("noResultsPage") < 0 && (location.href = "/store/noResultsPage/_/N-/Ntt-" + FL.Reflektion.getQueryKeyword() + "?isrfk=true"), !1;
            $totalPagsQty.text(e.total_page), $titleResultCount.find(".loading-shimmer").length && ($("#totalNumResults").val(e.total_item), $titleResultCount.html("(" + e.total_item + ")")), $("#rfk-title").text(FL.Reflektion.getQueryKeyword()), $paginationContainer.removeClass("hide"), $(".rfk-sort-group").removeClass("hide"), FL.Reflektion.populateMarkup(a), FL.Reflektion.pagination(e), FL.Grid.initHoverState(0), new Blazy({
                selector: ".rfk-box .productImage"
            }), FL.Reflektion.appearRfkEvent("rfkid_7", "sp"), FL.Reflektion.clickRfkProducts(), t && t(e);
            var i = {
                search_text: FL.Reflektion.getQueryKeyword(),
                product_click: ""
            };
            FL.optimove.reportEvent("search_bar", i)
        }).fail(function(e) {
            console.log(e)
        }))
    },
    clickRfkProducts: function() {
        $("#reflektionList").off("click").on("click", ".product-card", function(e) {
            if (e.preventDefault(), $(e.target).is(".productImage, .slick-slide, .slick-slide img, .product-name")) {
                var t = $(this).index(),
                    a = $(this),
                    i = {
                        sku: a.data("sku").toString(),
                        productId: a.data("prodid"),
                        price: parseFloat(a.data("final-price")),
                        price_original: parseFloat(a.data("price"))
                    };
                FL.Reflektion.clickRfkEvent("rfkid_7", "sp", t, i), setTimeout(function() {
                    window.location = a.find("a").attr("href")
                }, 400)
            }
        })
    },
    selectOption: function(e) {
        $(".pag-select option[value=" + e + "]").prop("selected", !0)
    },
    populateDropDown: function(e) {
        for (var t = "", a = $(".pag-select"), i = 1; i <= e.total_page; i++) t += '<option value="' + i + '" aria-label="Go To Page ' + i + '" title="Go To Page ' + i + '">' + i + "</option> ";
        a.html(""), a.append(t), FL.Reflektion.onChangeDropDown()
    },
    onChangeDropDown: function() {
        $(".pag-select").on("change", function() {
            var e = parseInt(this.value),
                t = FL.Reflektion.getQueryKeyword(),
                a = (FL.Reflektion.generateQuery("rfkid_7", t, e), FL.Reflektion.returnSortParams());
            a.No = e, FL.Reflektion.updateUrlParams({
                No: e
            }), FL.Reflektion.toggleGlobalOverlay(!0), FL.Reflektion.paginationQueryExecute(a)
        })
    },
    params: function(e) {
        return (location.hash.split(e + "=")[1] || "").split("&")[0]
    },
    toggleGlobalOverlay: function(e) {
        e ? $("body").addClass("show-overlay") : $("body").removeClass("show-overlay")
    },
    checkIfSortOption: function() {
        var e = location.hash.match(/(relevance|price|newest|toprated)/);
        return e ? e[0] : ""
    },
    checkFilters: function() {
        FL.Reflektion.params("filters").length > 0 ? filterSelection = JSON.parse(decodeURI(FL.Reflektion.params("filters"))) : filterSelection = {}
    },
    paginationByParam: function(e) {
        if (document.location.hash) {
            FL.Reflektion.checkFilters();
            var t = FL.Reflektion.returnSortParams(),
                a = FL.Reflektion.params("No");
            FL.Reflektion.checkIfOldURL() && (a = a / 40 + 1), isNaN(a) || (a = parseInt(a), t.No = a), FL.Reflektion.paginationQueryExecute(t, e)
        }
    },
    paginationQueryExecute: function(e, t) {
        var a = FL.Reflektion.getQueryKeyword(),
            i = FL.Reflektion.generateQuery("rfkid_7", a, e.No, e.sortOpts);
        FL.Reflektion.generateResults(i, function(e) {
            void 0 === t ? (FL.Reflektion.toggleGlobalOverlay(), $(window).scrollTop(0)) : (FL.Reflektion.populateDropDown(e), FL.Reflektion.populateFilters(e.facet), FL.Reflektion.selectedFilters(), FL.Reflektion.createFilterQuery(), FL.Reflektion.mobileLabelEvents()), FL.Reflektion.selectedFilters(), FL.Reflektion.checkLabelFilters(), FL.Reflektion.syncParamsUrl(e)
        })
    },
    updateHash: function(e) {
        history.pushState ? history.pushState(null, null, "#" + e) : location.hash = e
    },
    replaceUrlParam: function(e, t, a) {
        var e = e || location.hash;
        null == a && (a = "");
        var i = new RegExp("\\b(" + t + "=).*?(&|#|$)");
        return e.search(i) >= 0 ? e.replace(i, "$1" + a + "$2") : (e = e.replace(/[?#]$/, "")) + (e.indexOf("?") >= 0 ? "&" : "?") + t + "=" + a
    },
    updateUrlParams: function(e) {
        var t = location.hash.split("#")[1];
        for (var a in e) t = FL.Reflektion.replaceUrlParam(t, a, e[a]);
        FL.Reflektion.updateHash(t)
    },
    removeParam: function(e) {
        if (location.hash.length > 0) {
            var t = location.hash.split("#")[1],
                a = t.split("?")[0],
                i = [],
                o = -1 !== t.indexOf("?") ? t.split("?")[1] : "";
            if ("" !== o) {
                i = o.split("&");
                for (var r = i.length - 1; r >= 0; r -= 1) i[r].split("=")[0] === e && i.splice(r, 1);
                a = a + "?" + i.join("&")
            }
            FL.Reflektion.updateHash(a)
        }
    },
    checkPaginationBtns: function(e, t) {
        t <= 1 ? ($(".pag-button.prev").attr("disabled", !0), $(".pag-button.next").attr("disabled", !0)) : e == t ? ($(".pag-button.prev").attr("disabled", !1), $(".pag-button.next").attr("disabled", !0)) : 1 != e ? ($(".pag-button.prev").attr("disabled", !1), $(".pag-button.next").attr("disabled", !1)) : ($(".pag-button.prev").attr("disabled", !0), $(".pag-button.next").attr("disabled", !1))
    },
    returnSortParams: function() {
        var e = {},
            t = FL.Reflektion.checkIfSortOption(),
            a = FL.Reflektion.params(t);
        return e.sortOpts = FL.Reflektion.checkSortDDValue(a), e
    },
    pagination: function(e) {
        $pageButtons = $('.pag-button:not(".disabled")'), $pageButtons.off("click"), $pageButtons.on("click", function(t) {
            if (FL.Reflektion.toggleGlobalOverlay(!0), t.preventDefault(), e.total_page > 1) {
                var a = e.page_number > e.total_page ? e.total_page : e.page_number;
                if ($(this).hasClass("prev")) var i = a - 1;
                else var i = a + 1;
                FL.Reflektion.checkFilters();
                var o = FL.Reflektion.returnSortParams();
                o.No = i, FL.Reflektion.paginationQueryExecute(o), FL.Reflektion.updateUrlParams({
                    No: i
                })
            }
        })
    },
    isSearchPage: function() {
        return location.href.indexOf("/Ntt-") >= 0 || location.href.indexOf("Ntt=") >= 0
    },
    getQueryKeyword: function() {
        var e = "";
        return e = location.href.indexOf("#") > 0 ? location.href.indexOf("Ntt=") > 0 ? location.href.split("Ntt=")[1].split("&")[0].replace(/%20/g, " ").split("#")[0] : location.href.split("/Ntt-")[1].split("#")[0].replace(/%20/g, " ") : location.href.indexOf("Ntt=") > 0 ? location.href.split("Ntt=")[1].split("&")[0].replace(/%20/g, " ") : location.href.split("/Ntt-")[1].replace(/%20/g, " "), location.href.indexOf("?") > 0 && (e = e.split("?")[0]), decodeURIComponent(e)
    },
    parseURL: function(e) {
        if (e.indexOf("styleId") >= 0 && e.indexOf("colorId") >= 0) return e.split("/")[6].replace("?styleId=", ":").replace("&colorId=", ":")
    },
    requestCatalogData: function(e, t) {
        var a = e.map(function(e) {
            return FL.Reflektion.parseURL(e.url) + ":" + e.sku
        });
        a = a.join("|"), $.ajax({
            data: {
                products: a
            },
            dataType: "json",
            type: "POST",
            url: "/store/browse/searchProduct.jsp",
            success: function(e) {
                var a = e.products;
                FL.Reflektion.populateMarkup(a), t && t()
            },
            error: function(e, t) {
                console.log(e), console.log(t)
            }
        })
    },
    populateColorWay: function(e, t) {
        var a = e.available_style_colors.split(","),
            i = e.style_color,
            o = "",
            r = t ? FL.Reflektion.templates.slideItem : FL.Reflektion.templates.colorStyle;
        a.sort(function(e, t) {
            return e == i ? -1 : t == i ? 1 : 0
        });
        var n = e.BADGE_ITEM;
        return n ? FL.Reflektion.Badge.mapFilter(n) : (badgeImg = "", badgeText = []), $.each(a, function(t, a) {
            var s = a.split("_")[0],
                l = a.split("_")[1],
                d = FL.global.isJDSport() ? "https://media.jdsports.com/s/jdsports/" : "https://media.finishline.com/s/finishline/";
            imgUrl = d + a, mainImg = n && i == a ? imgUrl + "?$default$&" + badgeImg + "&layer0=[h=245&w=245&bg=rgb(237,237,237)]&h=245&w=245" : imgUrl + "?bg=rgb(237,237,237)&w=245&$default$", isShoe = e.name.toLocaleLowerCase().match(/(shoe|sandal|boot)/) ? "isShoe" : "", isAccesory = !!e.name.toLocaleLowerCase().match(/(sock|hat|bag|wipe|care|kit|backpack|hip pack|waist pack|crossbody)/) && "isAccessory", isOnModel = 1 == e.on_model ? "isOnModel" : "", finalClass = isAccesory || isShoe + " " + isOnModel, mainImgTemp = mainImg.replace(/\&/g, "[yy]").replace(/\$/g, "[ss]"), o += r.replace(/\[style-id\]/g, s).replace(/\[color-id\]/g, l).replace(/\[product-name\]/g, e.name).replace(/\[img-url\]/g, imgUrl).replace(/\[main-img\]/g, mainImgTemp).replace(/\[primary-fav\]/g, 0 == t ? "primary-fav" : "").replace("$PRODCLASS", finalClass)
        }), o
    },
    Badge: {
        mapFilter: function(e) {
            var t = new Map,
                a = e,
                i = a.replace(/\./g, ":"),
                o = i.split(",");
            FL.Reflektion.Badge.getBadgeMap(o, t), t.keys(), t.size, t.forEach(FL.Reflektion.Badge.dateFilter)
        },
        getBadgeMap: function(e, t) {
            $(e).each(function() {
                var e = this.split("||");
                if (2 == e.length) {
                    var a = e[0].trim(),
                        i = e[1].trim();
                    if (t.has(a)) {
                        var o = t.get(a);
                        o.includes(i) || o.push(i), t.set(a, o)
                    } else {
                        var o = [];
                        o.push(i), t.set(a, o)
                    }
                }
            })
        },
        dateFilter: function(e, t) {
            var a = e;
            if (badgeImg = "", badgeText = [], 0 == badgeText.length) {
                var i = !0;
                $(a).each(function() {
                    var e = this.split("|"),
                        t = e[2].trim(),
                        a = e[3].trim(),
                        o = FL.Reflektion.Badge.dateIsFutureDate(t),
                        r = FL.Reflektion.Badge.dateIsEndDate(a);
                    if (!o && !r)
                        if (1 == i) i = !1, badgeImg = e[0].trim();
                        else if (e[1].trim().length > 0 && (badgeText.push(e[1].trim()), 2 == badgeText.length)) return
                })
            }
        },
        dateIsFutureDate: function(e) {
            var t = !1;
            return "null" != e && "null" != e && function(e) {
                return Date.parse(e) > (new Date).valueOf()
            }(e) && (t = !0), t
        },
        dateIsEndDate: function(e) {
            var t = !1;
            return "null" != e && "null" != e && function(e) {
                return Date.parse(e) < (new Date).valueOf()
            }(e) && (t = !0), t
        }
    },
    populateMarkup: function(e) {
        var t, a, i, o = "",
            r = "";
        $.each(e, function(e, n) {
            n.color_count = n.color_count || "1", n.review_rating = n.review_rating || "", n.review_count = n.review_count || 0, t = 1 === n.count ? "Color" : "Colors", i = n.price, a = FL.Reflektion.loadPrice(n.price, n.final_price, n.price_masked, n.sale_flag);
            var s = FL.Reflektion.populateColorWay(n, !1),
                l = FL.Reflektion.populateColorWay(n, !0),
                d = FL.global.isJDSport() ? "https://www.jdsports.com/" : "https://www.finishline.com/",
                c = FL.global.isJDSport() ? '<span class="icon icon-tiny icon-jd-checkout"></span>' : "",
                u = "";
            n.BADGE_ITEM ? badgeText.length > 0 && void 0 == n.sales_text ? u = '<div class="specialSalesText">' + badgeText.join("<br/>") + "</div>" : void 0 != n.sales_text && badgeText.length > 0 ? u = '<div class="specialSalesText">' + badgeText[0] + "<br/>" + n.sales_text[0] + "</div>" : void 0 != n.sales_text && 0 == badgeText.length && (u = '<div class="specialSalesText">' + n.sales_text.join("<br/>") + "</div>") : void 0 != n.sales_text && (u = '<div class="specialSalesText">' + n.sales_text.join("<br/>") + "</div>"), o = FL.Reflektion.templates.product.replace(/\[slides-colors\]/g, l).replace(/\[quick-view-fnl\]/g, FL.global.isJDSport() ? "" : FL.Reflektion.templates.quickView).replace(/\[quick-view-jd\]/g, FL.global.isJDSport() ? FL.Reflektion.templates.quickView : "").replace(/\[quick-icon\]/g, c).replace(/\[product-name\]/g, n.name).replace(/\[style-id\]/g, n.style_id).replace(/\[color-id\]/g, n.color_id).replace(/\[product-id\]/g, n.prod_id).replace(/\[sku-id\]/g, n.sku).replace("$PRICE", a).replace(/\[avg-rating\]/g, n.review_rating).replace(/\[product-url\]/g, "/" + n.url.split(d)[1]).replace(/\[base-url\]/g, "/" + n.url.split("?")[0].split(d)[1] + "?").replace(/\[seo-url\]/g, "/" + n.url.split("?")[0].split(d)[1]).replace(/\[review-count\]/g, n.review_count).replace(/\[product-count\]/g, n.color_count).replace(/\[product-plural\]/g, t).replace(/\[product-brand\]/g, "").replace(/\[special-text\]/g, u).replace(/\[color-way\]/g, s).replace(/\[price\]/g, i).replace(/\[final-price\]/g, n.final_price).replace(/\[the-colors\]/g, n.colors && n.colors.join("/")).replace(/\[jd-stars\]/g, FL.global.isJDSport() ? "primary" : "").replace("product-card-stars", 0 == n.review_count ? "hide" : "product-card-stars").replace(/\[is-free-shipping\]/g, "1" !== n.free_shipping ? "hide" : "").replace(/\[yy\]/g, "&").replace(/\[ss\]/g, "$"), r += o
        }), "" != r && ($("#reflektionList").html(r), FL.QuickLook.init(), FL.Grid.Reviews.init(0), FL.global.Favorites.init(), FL.global.Favorites.favoritesHighlight(), setTimeout(function() {
            FL.bLazy.Grid.init()
        }, 100), $(".product-card").each(function(e) {
            e >= 12 && FL.bLazy.controller.load($(this).find(".product-card__media-slide").first().find(".b-lazy"), !0)
        }))
    },
    requestPreviewData: function(e, t) {
        var a = FL.Reflektion.generateQuery("rfkid_6", e, null, {
            suggestion: 10,
            items: 6
        });
        $.ajax({
            type: "POST",
            headers: {
                Authorization: "Bearer " + FL.rfkToken
            },
            dataType: "json",
            data: JSON.stringify(a),
            url: apiURL
        }).done(function(a) {
            if (t) FL.Reflektion.generateRightProducts(a.content.product, e);
            else {
                if (void 0 === a.suggestion) return !1;
                FL.Reflektion.changePreviewTitle(e), void 0 !== a.suggestion.keyphrase ? (FL.Reflektion.generatePreviewItem(a.suggestion.keyphrase, e), "mobile" != FL.global.detectDevice() && FL.Reflektion.generateRightProducts(a.content.product, e)) : FL.autoSuggest.hide()
            }
            setTimeout(function() {
                FL.bLazy.Grid.init()
            }, 300)
        })
    },
    bolder: function(e, t) {
        return e.replace(new RegExp("(^|)(" + t + ")(|$)", "ig"), "$1<b>$2</b>$3")
    },
    generateLinkPreview: function(e, t, a) {
        return '<a itemprop="item" class=" " href="' + t + '"><span itemprop="name">' + FL.Reflektion.bolder(e, a) + "</span></a>"
    },
    highlightItems: function() {
        var e = "tablet" == FL.global.detectDevice() ? "click" : "mouseover",
            t = "";
        $(".rfk-item").on(e, function(a) {
            var i = $(this).find("a").attr("href");
            "click" == e && t != i && window.innerHeight < window.innerWidth && (a.preventDefault(), t = i), $(".rfk-item").removeClass("highlighted"), $(this).toggleClass("highlighted");
            var o = $(this).text();
            FL.Reflektion.requestPreviewData(o, !0)
        })
    },
    changePreviewTitle: function(e) {
        console.log("searchTerm ", e), $autoSuggestBox = $(".autosuggest-box"), topCatText = "<li class='rfk-top-cat'>Top Category Results for “" + e + "”</li>", "mobile" == FL.global.detectDevice() && ($autoSuggestBox = $(".rfk-results"), topCatText = "<li class='rfk-top-cat'>Top Results for “" + e + "”</li>");
        var t = topCatText;
        0 == e ? (topCatText = "<li class='rfk-top-cat'>Trending Categories</li>", globalSearchRfkTerm = 0) : 0 == e.length ? (globalSearchRfkTerm = 0, FL.autoSuggest.hide()) : $autoSuggestBox.find(".autosuggest-list ul").html(t)
    },
    generatePreviewItem: function(e, t) {
        var a = topCatText;
        if (e.length > 0) {
            var i = e;
            $.each(i, function(e) {
                var o = i[e].text,
                    r = (t.length, typeof i[e].url);
                if (void 0 === i[e].url) {
                    var r = FL.contextPath + "/_/N-/Ntt-" + o.toLocaleLowerCase();
                    r = FL.Reflektion.replaceUrlParam(r, "isrfk", "true")
                }
                var n = FL.Reflektion.generateLinkPreview(o, r, t);
                a += "<li class='rfk-item'>" + n + "</li>"
            }), FL.Tealium.clickSearchInput(), a && ($autoSuggestBox.show(), $autoSuggestBox.find(".autosuggest-list ul").html(a), window.innerHeight > window.innerWidth && ($(".rfk-box").find(".column.br-medium-gray").removeClass("small-5 br-medium-gray"), $(".autosuggest-products").hide()), FL.Reflektion.highlightItems(), FL.Reflektion.checkRfkItemClick()), FL.autoSuggest.resetSearchBox()
        }
    },
    checkRfkItemClick: function() {
        $(".rfk-item").off("click").on("click", function(e) {
            e.preventDefault();
            var t = $(this).find("span").text(),
                a = $(this).index() - 1;
            $self = $(this), FL.Reflektion.clickRfkCatEvent("rfkid_6", "sb", a, "suggestion", t), FL.Tealium.clickSearchSuggestion(t, function() {
                window.location = $self.find("a").attr("href")
            })
        }), $(".autosuggest-products").off("click").on("click", "a:not(.view-all-rfk)", function(e) {
            e.preventDefault();
            var t = $(this).find(".autosuggest-product-name").text().trim(),
                a = $(this),
                i = $(this).index() - 1,
                o = {
                    sku: a.data("sku").toString(),
                    productId: a.data("product-id"),
                    price: parseFloat(a.data("final-price")),
                    price_original: parseFloat(a.data("price"))
                };
            FL.Reflektion.clickRfkEvent("rfkid_6", "sb", i, o), FL.Tealium.clickSearchProduct(t, function() {
                window.location = a.attr("href")
            });
            var r = {
                search_text: "",
                product_click: t
            };
            FL.optimove.reportEvent("search_bar", r)
        })
    },
    clickRfkEvent: function(e, t, a, i) {
        var o = {
            device: "desktop",
            type: "widget",
            app_type: "webview",
            name: "click",
            value: {
                dn: window.location.hostname,
                rfkid: e,
                f: t,
                index: a,
                products: [i]
            }
        };
        console.log(JSON.stringify(o)), rfk.push(["trackEvent", o])
    },
    clickRfkCatEvent: function(e, t, a, i, o) {
        var r = "",
            n = "trending_category";
        "undefined" != typeof globalSearchRfkTerm ? 0 == globalSearchRfkTerm ? n = "trending_category" : (r = globalSearchRfkTerm, n = "keyphrase") : n = "trending_category";
        var s = {
            device: "desktop",
            type: "widget",
            app_type: "webview",
            name: "click",
            value: {
                dn: window.location.hostname,
                rfkid: e,
                f: t,
                index: a,
                w: i,
                text: o,
                type: n,
                kw: "" == r ? o : r,
                m: o
            }
        };
        rfk.push(["trackEvent", s])
    },
    generateRightProducts: function(e, t) {
        var a = '<div class="autosuggest-products-header">';
        if (t) {
            a += '<div class="rfk-top-cat left">Top Results for “' + t + '"</div>';
            var i = FL.contextPath + "/_/N-/Ntt-" + t;
            a += '<a class="view-all-rfk" href="' + i + '">View All</a>'
        } else a += '<div class="rfk-top-cat left">Trending Products</div>';
        if (a += "</div>", e.n_item > 0) {
            var o = e.value;
            $.each(o, function(e) {
                var t = FL.Reflektion.generatePreviewCard(o[e]);
                a += t
            }), $autoSuggestBox.find(".autosuggest-products").html(a)
        }
    },
    priceFormatPreviewCard: function(e, t) {
        return e === t ? '<span data-productid="[product-id]" class="fullPrice">' + e + "</span>" : '<span data-productid="[product-id]" class="wasPrice">' + e + '</span><span data-productid="[product-id]" class="nowPrice">$' + t + "</span>"
    },
    generatePreviewCard: function(e) {
        var t = FL.Reflektion.generateRatingMarkup(e.prod_review_rating, e.prod_review_count),
            a = e.image_url.replace(/\$Main\$/g, "bg=rgb(237,237,237)&w=75&h=75&$default$").replace(/\$Main_onModel\$/g, "bg=rgb(237,237,237)&w=75&h=75&$default$").replace(/\$Small\$/g, "bg=rgb(237,237,237)&w=75&h=75&$default$"),
            i = e.url.replace("https://www.finishline.com", "").replace("https://www.jdsports.com/", ""),
            o = FL.Reflektion.priceFormatPreviewCard(e.price, e.final_price),
            e = FL.Reflektion.templates.rightCard.replace(/\[product-name\]/g, e.name).replace(/\[style-color\]/g, e.style_color).replace(/\[product-url\]/g, i).replace(/\[product-img\]/g, a).replace(/\[product-price\]/g, o).replace(/\[product-id\]/g, e.prod_id).replace(/\[sku-id\]/g, e.sku).replace(/\[price\]/g, e.price).replace(/\[final-price\]/g, e.final_price).replace(/\[rating\]/g, t);
        return e
    },
    generateRatingMarkup: function(e, t) {
        var a, e = e || 0,
            t = t || 0,
            i = parseInt(e),
            o = e - i;
        o > 0 && (o < .2 ? a = "icon-star-20-percent" : o < .45 ? a = "icon-star-40-percent" : o < .55 ? a = "icon-star-50-percent" : o < .8 ? a = "icon-star-60-percent" : o >= .8 && (a = "icon-star-80-percent"));
        for (var r = '<div class="rating-stars">', n = 0; n < 5; n++) r += i > 0 && n < i ? '    <span class="icon icon-star-filled"></span>' : e > 0 && n === i && a ? '    <span class="icon ' + a + '"></span>' : '    <span class="icon icon-star"></span>';
        return r += "</div>", r += '<div class="total-reviews">    (' + t + ")</div>"
    },
    generateQuery: function(e, t, a, i) {
        var t = {
            data: {
                context: {
                    page: {
                        uri: location.origin + location.pathname.split("_/")[0]
                    },
                    browser: {
                        app_type: "browser"
                    },
                    user: {
                        uuid: "undefined" == typeof rfk ? "" : rfk.uid()
                    }
                },
                widget: {
                    rfkid: e
                },
                n_item: 40,
                query: {
                    keyphrase: {
                        value: [t]
                    }
                },
                content: {
                    product: {}
                }
            }
        };
        if (a && (t.data.page_number = a), i) {
            if (i.items && (t.data.n_item = i.items), i.categories) {
                var o = {
                    all: !0,
                    max: -1
                };
                t.data.facet = o
            }
            i.suggestion && (t.data.suggestion = {
                keyphrase: {
                    max: i.suggestion
                }
            }), i.trending && (t.data.suggestion = {
                keyphrase: {},
                trending_category: {
                    max: 10
                }
            }), i.facets && (t.data.facet = {
                all: !0,
                max: -1
            }), i.sort && (t.data.sort = {
                value: []
            }, i.sort.price && t.data.sort.value.push({
                type: "price",
                order: i.sort.price
            }), i.sort.newest && t.data.sort.value.push({
                type: "newest",
                order: "asc"
            }), i.sort.toprated && t.data.sort.value.push({
                type: "rating",
                order: "desc"
            }))
        }
        if (("undefined" != typeof filterSelection || a || i) && "rfkid_6" != e && (t.data.facet = {
                all: !0,
                max: -1
            }), "undefined" != typeof filterSelection && "rfkid_6" != e && !$.isEmptyObject(filterSelection)) {
            t.data.filter = {};
            for (key in filterSelection) filterSelection[key].length && (t.data.filter[key] = {
                value: filterSelection[key]
            })
        }
        return $.isEmptyObject(t.data.filter) && delete t.data.filter, t
    },
    autosuggestInit: function() {},
    loadPrice: function(e, t, a, i) {
        var o = "";
        return o = -1 === t ? '<span class="soldOut">SOLD OUT</span>' : parseFloat(t) < parseFloat(e) ? FL.global.isJDSport() ? '<span class="wasPrice">$' + e + '</span><span class="nowPrice">Now $' + t + "</span>" : '<span class="wasPrice">$' + e + '</span><span class="nowPrice">$' + t + "</span>" : '<span class="fullPrice">$' + t + "</span>", 1 == i && 1 == a && (o = '<span class="wasSeePrice">$' + e + '</span><span class="seePrice" style="margin-right:6px">See price in ' + (FL.global.isJDSport() ? "basket" : "cart") + '</span><span class="tooltip-help top red small" data-tooltip title="The suspense is killer. Add this to your cart and find your price."></span>'), o
    },
    templates: {
        rightCard: '<a href="[product-url]" data-stylecolorid="[style-color]" data-sku="[sku-id]" data-product-id="[product-id]" data-price="[price]" data-final-price="[final-price]">    <div class="row">        <div class="column shrink autosuggest-product-image">            <img class="productImage b-lazy" alt="[product-name]" src="/store/assets/images/loading-spinner.gif" data-src="[product-img]">        </div>        <div class="column autosuggest-product-details">            <div class="autosuggest-product-name">                [product-name]            </div>            <div>                $[product-price]            </div>            <div class="rating">                [rating]            </div>        </div>    </div></a>',
        product: '<div class="product-card" data-sku=[sku-id] id="item[product-id]" data-brand="[product-brand]" data-prodid="[product-id]" data-productid="[product-id][style-id][color-id]" data-baseurl="[base-url]" data-styleid="[style-id]" data-colorid="[color-id]" data-price="[price]" data-final-price="[final-price]">    <a id="item[product-id]" href="[product-url]" data-original="[product-url]">                             <div class="product-card__media" data-original-image-id="[style-id]_[color-id]" data-original-free-shipping="[is-free-shipping]">[slides-colors]</div> </a>         <div class="product-card-dots-bg show-for-small-only"></div>                    <small class="small-color-count text-center">[product-count]&nbsp;[product-plural]</small>                <strong class="color-count hide-for-small-only">[product-count]&nbsp;[product-plural]</strong>     <div class="px-3">        <div class="product-card__colors">            <div class="product-card-color-slider">               [color-way]</div> </div> </div>     <div class="product-card__details">        <hr class="divider hide-for-small-only">        <a href="[product-url]" class="hover-underline">            <h2 class="product-name">[product-name]</h2> </a>                         <div data-productid="[product-id]" class="product-price">                            $PRICE </div>         <div class="loading-shimmer hide">            <div class="background-mask price-mask"></div>            <div class="background-mask after-price-mask"></div>        </div><div data-user-rating="[avg-rating]" class="product-card-stars">    <div class="rating-stars [jd-stars]">                  <span class="icon icon-star"></span>            <span class="icon icon-star"></span>            <span class="icon icon-star"></span>            <span class="icon icon-star"></span>            <span class="icon icon-star"></span>       </div> <span class="rating-count">([review-count])</span> </div><div class="special-text">[special-text]    </div>[quick-view-fnl]</div> [quick-view-jd]</div>',
        colorStyle: '<a href="#" data-styleid="[style-id]" data-colorid="[color-id]"><img class="b-lazy slick-active" src="[img-url]?h=52&w=52&bg=rgb(237,237,237)&$default$" alt="[product-name]" > </a>',
        slideItem: '<div class="product-card__media-slide $PRODCLASS"  data-styleid="[style-id]" data-colorid="[color-id]"><svg  class="fav-heart-ico [primary-fav] hoverable"  viewBox="-1 -1 38 38"  version="1.1"  xmlns="http://www.w3.org/2000/svg"  xmlns:xlink="http://www.w3.org/1999/xlink">  <path    d="M 0 9C 0 4 4 0 8.5 0C 13 0 17 5.5 17 5.5C 18.5 2.3 22 0 25.5 0C 30.2 0 34 4 34 9C 34 21.4 17 33.8 17 33.8C 17 33.8 0 21.4 0 9Z"  ></path></svg><img  class="productImage b-lazy"  alt="[product-name]"src="/store/assets/images/loading-spinner.gif" data-src="[main-img]" /></div>',
        filterPanel: '<dd class="[facet-key] filter-section"> <ul        class="accordion mb-0 accordion-[facet-key] filter-accordion"        data-accordion=""        data-allow-all-closed="true"        id="desktopFilterAccordion"        role="tablist"        data-t="pvg8lz-t"      >        <li          class="accordion-item is-active"          data-accordion-item=""          id="item_[facet-key]"          aria-expanded="true"          aria-selected="true"        >          <a            href="javascript:void(0)"            class="flex-container accordion-title p-0 pt-1 pb-1"            aria-controls="nga6n5-accordion"            role="tab"            id="item_[facet-key]"            aria-expanded="false"            aria-selected="false"          >            <span class="align-self-middle filter-title">[facet-name]</span>            <span              class="icon icon-plus align-self-middle"              alt="Expand section"            ></span>            <span              class="icon icon-minus align-self-middle"              alt="Collapse section"            ></span>          </a>          <div            class="accordion-content p-0 pb-4 pt-1"            data-tab-content=""            role="tabpanel"            aria-labelledby="item_[facet-key]"            aria-hidden="false"            id="nga6n5-accordion"            style="display: block;"          >            <div class="filter-panel">              <ul                class="[facet-key] filterOptions no-bullet filter-[facet-key] [facet-classes]"                data-filter="[facet-key]"              >                              </ul>            </div>          </div>        </li>      </ul> </dd>',
        checkBox: '<li class="mb-0 mb-medium-1">                  <a                    rel="nofollow"                    href=""                    data-value="[facet-id]"                    class="checkbox-link  py-1 py-medium-0"                  >                    <div class="row [is-reverse]">                      <div class="column">                        <span class="checkbox-name">[facet-name]</span>                      </div>                      <div class="column shrink">                        <span class="checkbox-control"></span>                      </div>                    </div>                  </a>                </li>',
        sizeItem: '<li class="column"><a rel="nofollow" href="" data-value="[facet-id]" class="button btn-size-rfk hollow button--grid expanded btn-rfk "> <span>[facet-name]</span>  </a> </li>',
        colorItem: '<li class="column">   <a rel="nofollow" href="" data-value="[facet-id]" class="color-filter btn-rfk [facet-name]">       <span class="icon icon-checkmark"></span>       <span class="color-text">[facet-name]</span> </a> </li>',
        brandItem: '<li class="column"><a rel="nofollow" href="" data-value="[facet-id]" class=" btn-rfk [facet-name] button grid-button expanded brand-filter">    <span class="brand-name">[facet-name]</span>             <span class="icon icon-[facet-name]"></span> </a> </li>',
        labelItem: '<li class="selected-filters no-bullet"><a href="" class="label-rfk" data-value="[facet-id]" data-key="[facet-key]">[facet-name]<span class="icon icon-remove-x"></span></a></li>',
        quickView: '<div class="product-card__quick-view">                    <a href="javascript:void(0)" class="arrow quickLookButton" data-vendorname="[product-brand]" data-colordescription="[the-colors]" data-productid="[product-id]" data-stylecolorid="[style-id]-[color-id]" data-styleid="[style-id]" data-colorid="[color-id]" data-seourl="[seo-url]">[quick-icon]Quick View<span></span></a>    </div>'
    }
}, FL.Reflektion), window.FL = window.FL || {}, FL.footer = FL.footer || {}, FL.footer = jQuery.extend(!0, {
    init: function() {
        var e = $(".footerEmailSignupForm"),
            t = e.find(".footer-email-icon, .btn-submit"),
            a = e.find(".btn-submit"),
            i = ($("#footerEmailSignupDesktop"), e.find('input[type="email"]')),
            o = $("#footerEmailSignupButton"),
            r = $("#signupEmailForm");
        e.each(FL.footer.applyValidation), r.each(FL.footer.applyValidation), FL.global.isJDSport() && !FL.isJDKiosk && (FL.footer.cookieModalHandler(), o.on("click", function() {
            return e.submit(), !1
        })), i.on("change", function() {
            var e = e || window._smtr || [];
            e.push(["onEmail", {
                email: $(this).val(),
                type: "marketing"
            }])
        });
        var n = FL.footer.detectDevice();
        "desktop" == n ? (i.on("focus", function() {
            i.addClass("left"), e.find(".icon-email").addClass("hide"), t.removeClass("hide")
        }), i.on("blur", function() {
            t.css("opacity", 0), setTimeout(function() {
                t.addClass("hide"), e.find(".icon-email").removeClass("hide"), t.css("opacity", 1)
            }, 300), i.removeClass("left")
        })) : (i.on("focus", function() {
            t.removeClass("hide")
        }), i.on("blur", function() {
            setTimeout(function() {
                t.addClass("hide")
            }, 300)
        })), i.on("keyup", function() {
            totalContent = "desktop" == n ? e.closest("#footerEmailSignupDesktop").find("input").val().length : e.closest("#footerEmailSignupMobile").find("input").val().length, totalContent > 0 ? (t.addClass("highlighted"), a.prop("disabled", !1)) : (t.removeClass("highlighted"), a.prop("disabled", !0))
        }), $(".footer-main a").on("click", function(e) {
            var t = $(this).attr("aria-label");
            t || (t = $(this).text());
            var a = {
                link_name: t
            };
            FL.optimove.reportEvent("footer_click_links", a)
        }), $(".footer-main .tile-content").on("click", function(e) {
            var t = $(this).find(".tile-title").text(),
                a = {
                    link_name: t
                };
            FL.optimove.reportEvent("footer_click_links", a)
        })
    },
    detectDevice: function() {
        return /iphone|ipad|android|ie|blackberry|fennec|windows phone|SymbianOS|webOS/.test(navigator.userAgent.toLowerCase()) ? $(window).width() < 768 ? "mobile" : "tablet" : "desktop"
    },
    cookieModalHandler: function() {
        function e() {
            if (localStorage.pageNumber = Number.parseInt(localStorage.pageNumber) + 1, localStorage.pageNumber == t) {
                var e = window.location.href;
                notShowPagesList = "cart|myaccount|checkout|shipping|customerservice|UTM_medium=email|corporate";
                var i = new RegExp("(" + notShowPagesList + ")");
                e.match(i) ? localStorage.pageNumber = Number.parseInt(localStorage.pageNumber) - 1 : setTimeout(function() {
                    $("#emailSignUpPopup").foundation("open")
                }, a)
            }
        }
        var t = 2,
            a = 2e3;
        $(".my-account-signout").length || (getCookie("showemailpopup") ? void 0 !== localStorage.pageNumber && e() : (setCookie("showemailpopup", "true", 14), localStorage.pageNumber = 1, FL.setup.isHomePage && e()))
    },
    applyValidation: function() {
        $(this).validate(FL.footer.validateOptions)
    },
    validateOptions: {
        rules: {
            email: {
                required: !0,
                email: !0
            }
        },
        messages: {
            email: {
                required: "A valid email adddress is required.",
                email: "Please enter a valid email address."
            }
        },
        highlight: function(e, t, a) {
            $(e.form).find("label[for=" + e.name + "]").attr("role", "alert")
        },
        submitHandler: function(e) {
            var t = $(e).find('input[name="email"]').val(),
                a = $(e).find(".footer-email-callout"),
                i = $(".footer-email-icon, .btn-submit"),
                o = FL.footer.detectDevice();
            return isMainPopup = $(e).hasClass("signupEmailPopup"), jQuery.ajax({
                url: "/store/global/gadgets/emailSignupresponse.jsp",
                dataType: "json",
                data: {
                    email: t
                },
                type: "POST",
                success: function(r) {
                    if (r.error) {
                        var n = "",
                            s = "You're already on the list",
                            l = '<span class="icon icon-checkmark"></span> You&#8217;re already on the list';
                        n = FL.global.isJDSport() ? "<p>In other words, you're good to go.</p> <p>If you&#8217;re not receiving JD Sports emails be sure to add jdsports@news.jdsports.com to your address book or safe sender list. You can also use another email.</p>" : "<p>In other words, you're good to go.</p> <p>If you&#8217;re not receiving Finish Line emails be sure to add finishline@news.finishline.com to your address book or safe sender list. You can also use another email.</p>"
                    } else {
                        var n = "<p>From now on you will get emails about new releases, deals, events, and more.</p>",
                            s = "You're on the list",
                            l = '<span class="icon icon-checkmark"></span> You&#8217;re on the list';
                        DY.API("event", {
                            name: "newsletter",
                            properties: {
                                dyType: "newsletter-subscription-v1",
                                hashedEmail: sha256(t)
                            }
                        })
                    }
                    $(e).find('input[name="email"]').val(""), "mobile" != o || isMainPopup ? (FL.global.isJDSport() || a.removeClass("hide").show().find(".content").html(l), $("#theEmailModal").foundation().find(".h1").html(s).end().find(".messageContent").html(n).end().foundation("open")) : a.removeClass("hide").show().find(".content").html(l), i.removeClass("highlighted")
                },
                error: function(e) {
                    $("#theEmailModal").foundation().find(".messageContent").html("Your Email could not be submitted at this time. Please try again later.").end().foundation("open")
                }
            }), !1
        }
    }
}, FL.footer), window.FL = window.FL || {}, FL.kiosk = FL.kiosk || {}, FL.kiosk = jQuery.extend(!0, {
    isDebug: !1,
    init: function() {
        FL.kiosk.updateCookie(), FL.kiosk.Timer.init()
    },
    debug: function(e) {
        FL.kiosk.isDebug && console.log(e)
    },
    getBasketCount: function() {
        return FL.kiosk.debug(["FL.kiosk.getBasketCount", $("#basket-nav").find(".js-count").text() || 0]), $("#basket-nav").find(".js-count").text() || 0
    },
    updateCookie: function() {
        FL.kiosk.debug("FL.kiosk.updateCookie"), "" !== FL.kioskStoreId && setCookie("jdKioskStoreId", FL.kioskStoreId, 30)
    },
    Modal: {
        selectors: {
            buttonContinue: "#kioskSessionContinueButton",
            buttonRemove: "#kioskSessionRemoveAllFromCart",
            buttonRestart: "#kioskSessionRestartButton",
            countdown: "#kioskSessionSeconds",
            modal: "#kioskSessionModal"
        },
        init: function() {
            FL.kiosk.debug("FL.kiosk.Modal.init");
            var e = FL.kiosk.Modal;
            0 === $(e.selectors.modal).length ? e.loadModal() : e.openModal()
        },
        initHomePage: function() {
            FL.kiosk.debug("FL.kiosk.Modal.initHomePage"), 0 === FL.kiosk.getBasketCount() ? FL.kiosk.Timer.executePageTimeout() : FL.kiosk.Modal.init()
        },
        loadModal: function() {
            $.ajax({
                url: "/store/browse/modals/kioskSessionModal.jsp",
                dataType: "html",
                success: FL.kiosk.Modal.loadModalSuccess,
                error: FL.kiosk.Timer.executePageTimeout
            })
        },
        loadModalSuccess: function(e) {
            var t = FL.kiosk.Modal;
            $(t.selectors.modal).remove(), $("body").append(e), $(document).foundation(), $(t.selectors.modal).on("closed.zf.reveal", t.onClose), FL.kiosk.Modal.openModal()
        },
        onClickContinue: function() {
            FL.kiosk.debug("FL.kiosk.Modal.onClickContinue");
            var e = FL.kiosk.Modal;
            $(e.selectors.modal).foundation("close")
        },
        onClose: function() {
            FL.kiosk.debug("FL.kiosk.Modal.onClose"), $(FL.kiosk.Modal.selectors.countdown).countdown("stop")
        },
        onCountdown: function(e) {
            FL.kiosk.debug(["FL.kiosk.Modal.onCountdown", e]);
            var t = parseInt(e.strftime("%S")),
                a = 1 === t ? " second" : " seconds";
            $(this).text(t + a), "finish" === e.type && FL.kiosk.Timer.executePageTimeout()
        },
        openModal: function() {
            FL.kiosk.debug("FL.kiosk.Modal.openModal");
            var e = FL.kiosk.Modal,
                t = new Date;
            t.setSeconds(t.getSeconds() + 30), $(e.selectors.modal).foundation("open").on("closed.zf.reveal", e.onClose), $(e.selectors.buttonContinue).on("click", e.onClickContinue), $(e.selectors.buttonRestart).on("click", FL.kiosk.Timer.executePageTimeout), $(e.selectors.countdown).countdown(t, e.onCountdown)
        }
    },
    Timer: {
        resetTimer: null,
        timeToWait: null,
        waitDefaultTime: 3e4,
        waitEmptyCartTime: 1e4,
        waitHomeTime: 18e4,
        waitModalTime: 3e4,
        init: function() {
            FL.kiosk.debug("FL.kiosk.Timer.init");
            var e = FL.kiosk.Timer;
            e.isCartPage() || (e.timeToWait = e.waitDefaultTime, e.isHomePage() && (e.timeToWait = e.waitHomeTime), $("*").on("touchstart", e.setResetTimer), e.setResetTimer())
        },
        executePageTimeout: function() {
            FL.kiosk.debug("FL.kiosk.Timer.executePageTimeout");
            var e = $(FL.kiosk.Modal.selectors.buttonRemove);
            e.length > 0 ? e.click() : window.location = FL.JDKioskRedirect
        },
        isCartPage: function() {
            return FL.kiosk.debug(["FL.kiosk.Timer.isCartPage", "cart" === $("body").attr("id") && 0 === $("#empty-cart-flag").length]), "cart" === $("body").attr("id") && 0 === $("#empty-cart-flag").length
        },
        isEmptyCartPage: function() {
            return FL.kiosk.debug(["FL.kiosk.Timer.isEmptyCart", "cart" === $("body").attr("id") && $("#empty-cart-flag").length > 0]), "cart" === $("body").attr("id") && $("#empty-cart-flag").length > 0
        },
        isHomePage: function() {
            return FL.kiosk.debug(["FL.kiosk.Timer.isHomePage", "home nogrid " === $("body").attr("id")]), "home nogrid " === $("body").attr("id")
        },
        setResetTimer: function() {
            FL.kiosk.debug("FL.kiosk.Timer.setResetTimer");
            var e = FL.kiosk.Timer,
                t = FL.kiosk.Modal;
            clearTimeout(e.resetTimer), e.isEmptyCartPage() ? e.resetTimer = setTimeout(e.executePageTimeout, e.waitEmptyCartTime) : e.isHomePage() ? e.resetTimer = setTimeout(t.initHomePage, e.timeToWait) : e.resetTimer = setTimeout(t.init, e.timeToWait)
        }
    }
}, FL.kiosk), window.FL = window.FL || {}, FL.mainnav = FL.mainnav || {}, FL.mainnav = jQuery.extend(!0, {
    mobileNavContent: "",
    init: function() {
        FL.mainnav.Convert.init(), FL.mainnav.Mobile.init(), FL.mainnav.Desktop.init()
    },
    Convert: {
        init: function() {
            var e = FL.mainnav.Convert,
                t = $("#headerMainMenu"),
                a = t.find(".kidsSidePromo:not(.hide-for-responsive)"),
                i = t.find(".kidsPromo:not(.hide-for-responsive)");
            a.each(function() {
                e.convertToResponsive(this, 2)
            }), i.each(function() {
                e.convertToResponsive(this, 3)
            })
        },
        convertToResponsive: function(e, t) {
            var a = $(e);
            a.parent("div").addClass("medium-" + t + " columns promo-item").attr("data-columns", t).html(a.html())
        }
    },
    Desktop: {
        init: function() {
            $("#desktop-mainmenu").find("li a").on("touchstart", FL.mainnav.Desktop.touch), $("html").click().on("touchstart", FL.mainnav.Desktop.close), $(".menu-dropdown").on("touchstart", function(e) {
                e.stopPropagation()
            }), FL.mainnav.Desktop.bind()
        },
        vars: {
            hiddenNav: null,
            megaMenuBoss: $("#megaMenuBoss").length ? $("#megaMenuBoss") : "",
            megaMenuBossInner: $("#megaMenuBoss").length ? $(megaMenuBoss).children("#containerMenuBoss") : ""
        },
        bind: function() {
            var e = FL.global.detectDevice();
            $("#desktop-mainmenu").find("[data-mainitem]").each(function(e, t) {
                var a = $(t),
                    i = a.attr("data-mainitem");
                a.find(".menu-dropdown-row").attr("data-mainitem", i)
            }), "desktop" == e && ($("#desktop-mainmenu").hoverIntent(function(e) {
                FL.mainnav.Desktop.showMeganav()
            }, function() {
                0 === $("#headerMainMenu:hover").length && FL.mainnav.Desktop.closeMeganav()
            }), $("#desktop-mainmenu > li").hover(function(e) {
                FL.mainnav.Desktop.populateMeganav(e)
            })), $("#desktop-mainmenu").find("a").off("click").on("click", FL.mainnav.Desktop.attachMeganavAnalyticsClick)
        },
        attachMeganavAnalyticsClick: function() {
            var e, t, a, i, o, r = $(this);
            void 0 !== r.attr("data-toplayer") ? a = r.text().trim() : (e = r.parents("[data-mainitem]").data("mainitem"), "brands" === e ? a = e + ":" + r.attr("title") : (o = r.parents("ul.menu.vertical"), i = o.find("li").index(r.parent()), t = $(o.find("li").get(0)).text().trim(), a = e + ":" + t, i > 0 && (a += ":" + r.text().trim()))), FL.Tealium.clickNavigation(a)
        },
        populateMeganav: function(e, t) {
            if (t = t || void 0) var a = e.find(".menu-dropdown");
            else var a = $(e.currentTarget).find(".menu-dropdown");
            if (0 == a.length) return $(FL.mainnav.Desktop.vars.megaMenuBossInner).html(""), FL.mainnav.Desktop.vars.hiddenNav = !0, void FL.mainnav.Desktop.closeMeganav();
            $(FL.mainnav.Desktop.vars.megaMenuBossInner).html($(a).html()), t ? (FL.mainnav.Desktop.vars.hiddenNav = !1, FL.mainnav.Desktop.showMeganav()) : !0 === FL.mainnav.Desktop.vars.hiddenNav && (FL.mainnav.Desktop.vars.hiddenNav = !1, FL.mainnav.Desktop.showMeganav()), $("#desktop-mainmenu").find("a").off("click").on("click", FL.mainnav.Desktop.attachMeganavAnalyticsClick);
            var i = $(FL.mainnav.Desktop.vars.megaMenuBossInner).find(".navigation-promo-slider");
            i.length > 0 && FL.mainnav.Promos.init(i)
        },
        showMeganav: function() {
            $(FL.mainnav.Desktop.vars.megaMenuBoss).addClass("show");
            var e = $(FL.mainnav.Desktop.vars.megaMenuBossInner).find(".navigation-promo-slider");
            e.length > 0 && FL.mainnav.Promos.init(e)
        },
        closeMeganav: function() {
            $(FL.mainnav.Desktop.vars.megaMenuBoss).is(":visible") && $(FL.mainnav.Desktop.vars.megaMenuBoss).removeClass("show")
        },
        touch: function(e) {
            var t = $(this),
                a = t.parent(),
                i = a.hasClass("medium-click");
            if (FL.mainnav.Desktop.close(), a.find(".menu-dropdown").length > 0 && !i) return e.preventDefault(), a.addClass("medium-click"), FL.mainnav.Desktop.populateMeganav(a, !0), !1
        },
        close: function() {
            $("#desktop-mainmenu>li").removeClass("medium-click")
        }
    },
    Mobile: {
        init: function() {
            var e = FL.mainnav.Mobile,
                t = FL.mainnav.Template;
            $("body").on("keyup", $("#mobileSearchBarSearchBox"), e.checkInput), $("#mobileHeaderShop").on("click", e.clickShop), $("#mobileHeaderSearch").on("click", e.clickSearch), $("#mobileSearchWrapper").find(".icon-close-x").on("click", e.clickClear), $("#mobileHeaderAccount").on("click", e.clickAccount), FL.mainnav.mobileNavContent = t.getContent(), $("#offCanvasMobileMenu").html(t.getContent()), e.attach()
        },
        checkInput: function() {
            var e = $("#mobileSearchBarSearchBox"),
                t = $(".header-mobile-search #searchBarSearchButton"),
                a = $(".header-mobile-search .icon-circled"),
                i = $(".header-mobile-search .icon-close-x");
            e.val().length > 0 && !a.hasClass("highlighted") ? (a.addClass("highlighted"), i.addClass("highlighted"), t.prop("disabled", !1)) : 0 === e.val().length && (a.removeClass("highlighted"), i.removeClass("highlighted"), t.prop("disabled", !0))
        },
        adjustWidth: function() {
            var e = $("#mobileMainMenu"),
                t = e.find(".menu-section-wrapper"),
                a = $("#offCanvasMobileMenu").width();
            e.find(".menu-section").width(a - 40), t.width(2 * a), parseInt(t.css("margin-left")) < 0 && t.css("margin-left", "-" + a + "px")
        },
        attach: function() {
            var e = FL.mainnav.Mobile,
                t = $("#mobileMainMenu"),
                a = t.find("a").has(".icon-chevron-right"),
                i = t.find(".link-back");
            $("#offCanvasMobileMenu").width(), a.on("click", FL.mainnav.Mobile.clickSectionLink), i.on("click", FL.mainnav.Mobile.clickSectionLink), e.adjustWidth(), $(window).resize(e.adjustWidth), t.find(".accordion-submenu").each(function() {
                new Foundation.AccordionMenu($(this))
            }), t.find(".icon-close-x").on("click", e.clickClose)
        },
        clickClear: function(e) {
            $("#mobileSearchBarSearchBox").val("").focus(), FL.mainnav.Mobile.checkInput()
        },
        clickShop: function(e) {
            var t = FL.mainnav.Mobile;
            t.closeSearch(), t.closeAccount(), $("#offCanvasMobileMenu").foundation("open"), t.adjustWidth()
        },
        clickClose: function(e) {
            $("#offCanvasMobileMenu").foundation("close")
        },
        clickSearch: function(e) {
            return $("#mobileHeaderSearch").hasClass("highlight") ? FL.mainnav.Mobile.closeSearch() : (FL.mainnav.Mobile.closeAccount(), FL.mainnav.Mobile.openSearch(), e.preventDefault(), $("#mobileSearchBarSearchBox").focus()), !1
        },
        openSearch: function() {
            var e = $("#mobileHeaderSearch"),
                t = e.parent().find(".diamond"),
                a = $("#mobileSearchWrapper");
            e.addClass("highlight"), a.show().find("ul").stop().animate({
                height: "46px"
            }, 100, function() {
                t.show()
            })
        },
        closeSearch: function() {
            var e = $("#mobileHeaderSearch"),
                t = e.parent().find(".diamond"),
                a = $("#mobileSearchWrapper");
            e.removeClass("highlight"), t.hide(), a.find("ul").stop().animate({
                height: 0
            }, 100, function() {
                a.hide()
            })
        },
        clickSectionLink: function(e) {
            var t = $(".menu-section-wrapper"),
                a = $(this).attr("data-section").toLowerCase(),
                i = $("#offCanvasMobileMenu").width();
            "main" === a ? t.find(".link-back").hide().end().animate({
                marginLeft: "0"
            }, 200, function(e) {
                t.find(".menu-section.open-section:not(.main-section)").removeClass("open-section").end().find(".link-back").show().end()
            }) : t.find(".link-back").hide().end().find('.menu-section[data-type="' + a + '"]').addClass("open-section").end().animate({
                marginLeft: "-" + i + "px"
            }, 200, function(e) {
                t.find(".link-back").show()
            });
            var o = t.find('.menu-section[data-type="' + a + '"]').find(".navigation-promo-slider");
            return FL.mainnav.Promos.init(o), !1
        },
        clickAccount: function(e) {
            $("#mobileHeaderAccount").hasClass("highlight") ? FL.mainnav.Mobile.closeAccount() : (FL.mainnav.Mobile.closeSearch(), FL.mainnav.Mobile.openAccount())
        },
        openAccount: function() {
            var e = $("#mobileHeaderAccount"),
                t = e.parent().find(".diamond"),
                a = $("#mobileAccountWrapper");
            e.addClass("highlight");
            var i = "240px";
            a.find(".row.signed-out").length > 0 && (i = "193px"), a.show().find(".mobile-account-links").stop().animate({
                height: i
            }, 200, function() {
                t.show()
            })
        },
        closeAccount: function() {
            var e = $("#mobileHeaderAccount"),
                t = e.parent().find(".diamond"),
                a = $("#mobileAccountWrapper");
            e.removeClass("highlight"), t.hide(), a.find(".mobile-account-links").stop().animate({
                height: 0
            }, 200, function() {
                a.hide()
            })
        }
    },
    Template: {
        encodeCategory: function(e) {
            return e.toLowerCase().replace(/ /g, "_")
        },
        getSectionData: function(e) {
            return ' data-section="' + FL.mainnav.Template.encodeCategory(e) + '"'
        },
        getContent: function() {
            var e = FL.mainnav.Template,
                t = "";
            return t = e.getMenuTop(), t += e.getMainSection(), t += e.getCategorySections(), t += e.getMenuBottom()
        },
        getMenuTop: function() {
            return '<div id="mobileMainMenu"><div class="menu-section-wrapper">'
        },
        getMenuBottom: function() {
            return '<div class="icon icon-close-x"></div></div></div>'
        },
        getMainSection: function() {
            var e = FL.mainnav.Template,
                t = $("#desktop-mainmenu"),
                a = "";
            return a = '<div class="menu-section open-section main-section" data-type="main"><ul class="mobile-mainnav-main menu vertical"><li class="menu-header"><a href="/store/">Home</a></li>', t.find("> li").each(function() {
                a += e.getMainCategory(this)
            }), a += "</ul></div>"
        },
        getMainCategory: function(e) {
            var t = FL.mainnav.Template,
                a = $(e),
                i = a.find(">a "),
                o = a.has(".menu-dropdown").length > 0,
                r = i.text(),
                n = o ? t.getSectionData(r) + '"' : "";
            return r = r.toLowerCase().replace(/\b[a-z]/g, function(e) {
                return e.toUpperCase()
            }), content = '<li><a href="' + i.attr("href") + '"' + n + ">" + r, o && (content += '<div class="icon icon-chevron-right"></div>'), content += "</a></li>", content
        },
        getCategorySections: function() {
            var e = FL.mainnav.Template,
                t = $("#desktop-mainmenu"),
                a = "";
            return t.find("> li").has(".menu-dropdown").each(function() {
                a += e.getCategorySection(this)
            }), a
        },
        getCategorySection: function(e) {
            var t = FL.mainnav.Template,
                a = $(e),
                i = a.find(">a"),
                o = a.find(">.homeCategoryOverride"),
                r = a.find(">.moveHomeLinktoTop"),
                n = i.text(),
                s = a.find(".menu-dropdown"),
                l = "",
                d = "",
                c = "";
            return c = i.text() + " Home", "" != o.val().replace(" ", "") && (c = o.val()), "brands" === i.text() && (c = "All Brands"), l = '<div class="menu-section" data-type="' + t.encodeCategory(n) + '"><div class="menu-header non-main-header"><a href="#" class="link-back"' + t.getSectionData("main") + '"><div class="icon icon-chevron-left"></div>Back</a> ' + n + '</a></div><ul class="accordion-submenu vertical menu" data-accordion-menu data-multi-open="false">', "true" == r.val() && (s.find(".navigation-promo-container").length || (l += '<li class="category-link"><a href="' + i.attr("href") + '">' + c + "</a></li>")), s.find(".menu:not(.icon-list)").each(function() {
                l += t.getCategoryAccordion(this)
            }), s.find(".icon-list:not(.view-all-brands)").each(function() {
                l += t.getCategoryIconList(this)
            }), "true" != r.val() && (s.find(".navigation-promo-container").length || (l += '<li class="category-link"><a href="' + i.attr("href") + '">' + c + "</a></li>")), s.find(".navigation-promo-container").each(function() {
                d = '<div class="category-link navigation-promo-cta"><a href="' + i.attr("href") + '">' + c + "</a></div>", l += '<li class="subcategory-navigation-promo-container navigation-promo-container">', "true" == r.val() && (l += d), l += $(this).html(), "true" != r.val() && (l += d), l += "</li>"
            }), s.find(".promo-item").each(function() {
                l += '<div class="subcategory-promo align-center">' + $(this).html() + "</div>"
            }), s.find(".navigation-promo").each(function() {
                l += '<div class="subcategory-navigation-promo navigation-promo">' + $(this).html() + "</div>"
            }), l += "</div>"
        },
        getCategoryAccordion: function(e) {
            var t = FL.mainnav.Template,
                a = $(e),
                i = "";
            return i = '<li><a href="#" class="flex-container accordion-header"><strong class="align-self-middle">' + a.find("strong").text() + '</strong><span class="icon icon-plus" alt="Expand Menu"></span><span class="icon icon-minus" alt="Collapse Menu"></span></a><ul class="menu vertical nested">', a.find("a").each(function() {
                $(this).hasClass("moveLinkTopMobile") && (i += t.getCategoryAccordionLink(this))
            }), a.find("a").each(function() {
                $(this).hasClass("moveLinkTopMobile") || (i += t.getCategoryAccordionLink(this))
            }), i += "</ul></li>"
        },
        getCategoryAccordionLink: function(e) {
            var t = $(e),
                a = "";
            return 0 !== t.find("strong").length || t.hasClass("hasOverrideTitle") || (a = '<li><a href="' + t.attr("href") + '">' + t.text() + "</a></li>"), a
        },
        getCategoryIconList: function(e) {
            var t = FL.mainnav.Template,
                a = $(e),
                i = "";
            return a.find("li").each(function() {
                i += t.getCategoryIconItem(this)
            }), a.find("div").each(function() {
                i += t.getCategoryIconItem(this)
            }), i
        },
        getCategoryIconItem: function(e) {
            var t, a = $(e),
                i = a.find("a"),
                o = i.attr("href"),
                r = (i.text(), i.attr("title"));
            return a.hasClass("feature") ? (t = a.attr("class"), t = t.replace("medium-1 feature ", ""), '<li><a href="' + o + '">' + t + "</a></li>") : '<li><a href="' + o + '">' + r + "</a></li>"
        }
    },
    Promos: {
        init: function(e, t) {
            $(e).on("init", function(e, a) {
                var i = $(this).find(".slick-dots > li");
                1 === i.length && i.hide(), null != t && "function" == typeof t && t()
            }), $(e).hasClass("slick-initialized") ? $(e).slick("refresh") : $(e).slick({
                arrows: !0,
                dots: !0,
                infinite: !0,
                autoplay: !0,
                autoplaySpeed: 7e3,
                pauseOnFocus: !1,
                pauseOnHover: !1,
                nextArrow: '<span class="icon icon-chevron-right slick-next-icon"></span>',
                prevArrow: '<span class="icon icon-chevron-left  slick-prev-icon"></span>'
            })
        }
    }
}, FL.mainnav), window.FL = window.FL || {}, FL.Cartridges = FL.Cartridges || {}, FL.Cartridges = jQuery.extend(!0, {
    init: function() {
        var e = FL.Cartridges;
        e.initCarousels(), e.initRecommendations(), e.initPromoCountdowns(), e.initRenderers(), e.initListeners(), e.initMobileFilterNavigation()
    },
    initCarousels: function() {
        var e = $(".carousel.carousel-1");
        e.css({
            display: "block"
        }).outerWidth(), e.css({
            opacity: "1"
        }), e.on("init", function(e, t) {
            var a = t.$slides.get(t.currentSlide);
            FL.Cartridges.lazyLoadImageForSlide(a), $(this).find("video").each(function() {
                this.play()
            })
        }), e.on("beforeChange", function(e, t, a, i) {
            var o = t.$slides.get(i);
            FL.Cartridges.lazyLoadImageForSlide(o)
        }), e.slick({
            dots: !0,
            infinite: !0,
            autoplay: !0,
            autoplaySpeed: 7e3,
            accessibility: !0,
            pauseOnFocus: !0,
            pauseOnHover: !1,
            focusOnSelect: !0,
            nextArrow: '<button role="button" aria-label="next slide" class="icon icon-chevron-right slick-next-icon"></button>',
            prevArrow: '<button role="button" aria-label="previous slide" class="icon icon-chevron-left  slick-prev-icon"></button>',
            responsive: [{
                breakpoint: 640,
                settings: {
                    arrows: !1
                }
            }, {
                breakpoint: 1024,
                settings: {
                    arrows: !1
                }
            }]
        }), $indexDots = $(".carousel").find("ul.slick-dots li"), $slideInfo = $(".carousel").find(".slick-slide").hasClass("slick-current"), $indexDots.attr("tabindex", "0"), $indexDots.focus(function() {
            $(this).click()
        }), $indexDots.keyup(function(e) {
            13 === e.keyCode && $(this).parents(".carousel").find(".slick-current").focus()
        }), $(".hero-promotion").not($(".carousel .hero-promotion")).addClass("lazy-load")
    },
    initRecommendations: function() {
        var e = $(".xm-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        })
    },
    initPromoCountdowns: function() {
        $(".countdown-timer").each(function() {
            var e = $(this).attr("data-date"),
                t = $(this).attr("data-time");
            if (e.indexOf("/") > 0 && t.indexOf(":") > 0) {
                var a = e.split("/"),
                    i = t.split(":"),
                    o = new Date(Date.UTC(a[2], parseInt(a[0]) - 1, a[1], i[0], i[1]));
                $(this).countdown(o, function(e) {
                    $(this).text(e.strftime("%I:%M:%S"))
                })
            }
        })
    },
    initRenderers: function() {
        $(".htmlBodyClassPath").each(function() {
            var e = $(this).attr("data-js");
            e = e.replace("http:", "https:"), $.getScript(e)
        })
    },
    initListeners: function() {
        $(window).on("resize orientationchange", function(e) {
            $(".carousel.carousel-1").slick("resize")
        })
    },
    initMobileFilterNavigation: function() {
        $(".mobile-filter-display").each(FL.Cartridges.loadFilterNavigation)
    },
    lazyLoadImageForSlide: function(e) {
        var t = e || document;
        $(t).find(".hero-promotion").each(function() {
            $(this).addClass("lazy-load")
        })
    },
    loadFilterNavigation: function(e) {
        var t = $("#leftNavigationContent"),
            a = $(this);
        t.find(".linkCombination").each(function() {
            a.append(['<div class="column small-6 linkCombination mt-5">', $(this).html(), "</div>"].join(""))
        })
    }
}, FL.Cartridges), window.FL = window.FL || {}, FL.bLazy = FL.bLazy || {}, FL.bLazy = jQuery.extend(!0, {
    controller: null,
    init: function() {}
}, FL.bLazy), FL.bLazy.Grid = FL.bLazy.Grid || {}, FL.bLazy.Grid = jQuery.extend(!0, {
    init: function() {
        FL.bLazy.controller = new Blazy({
            offset: 500,
            success: FL.bLazy.Grid.loadSuccess,
            error: FL.bLazy.Grid.loadError
        })
    },
    isQuickLooksImage: function(e) {
        return e.parents("#quickLookContent").length > 0
    },
    loadError: function(e, t) {},
    loadSuccess: function(e) {
        var t = $(e);
        FL.bLazy.Grid.isQuickLooksImage(t) ? "productImg" === t.attr("id") ? FL.bLazy.Grid.displayMainForQuickLooks(t) : t.hasClass("alt-thumbnails") && FL.bLazy.Grid.displayAltThumbForQuickLooks(t) : FL.bLazy.Grid.displayForGrid(t)
    },
    displayAltThumbForQuickLooks: function(e) {},
    displayMainForQuickLooks: function(e) {},
    displayForGrid: function(e) {
        var t = new Image;
        t.onload = function() {
            var a = t.height === t.width,
                i = t.width > t.height,
                o = e.hasClass("grid-thumb"),
                r = Math.abs(t.height - t.width),
                n = o ? 2 : 20,
                s = e.parents(".product-card__media-slide").hasClass("isOnModel"),
                l = e.parents(".product-card__media-slide").hasClass("isShoe"),
                d = e.parents(".product-card__media-slide").hasClass("isAccessory");
            o || a || (r = i ? r / t.width * 100 + "%" : r / t.height * 50 + "%"), e.width() === e.height() || d || l || (e.width() <= 190 || e.height() <= 215 ? (e.parents(".product-card__media-slide").removeClass("isOnModel"), e.css("display", "inline-block"), n = 10) : (e.parents(".product-card__media-slide").addClass("isOnModel"), e.css("display", "inline-block"), n = 0)), s && (n = 0), a || (e.css("padding", n), i && !o && "mobile" != FL.footer.detectDevice() ? (e.parents(".product-card__media-slide").addClass("align-middle flex-card"), e.css("padding", "16px 20px 0")) : i && !o && "mobile" == FL.footer.detectDevice() ? e.css("paddingTop", r) : i || o || "mobile" != FL.footer.detectDevice() || (e.css("paddingLeft", r), e.css("paddingRight", r)))
        }, t.src = e.attr("src")
    }
}, FL.bLazy.Grid), FL.bLazy.QuickLooks = FL.bLazy.QuickLooks || {}, FL.bLazy.QuickLooks = jQuery.extend(!0, {
    initAlternateImages: function() {
        var e = $("#quickLookAltImages").find("img"),
            t = $(e[e.length > 1 ? 1 : 0]),
            a = new Image;
        a.onload = function() {
            a.height !== a.width && FL.bLazy.QuickLooks.updateAlternateImagesToPresets(), FL.bLazy.controller.load(e, !0), FL.QuickLook.onAlternateImageLoad()
        }, a.src = t.attr("data-src")
    },
    updateAlternateImagesToPresets: function() {
        $("#quickLookAltImages").find("img").each(function(e, t) {
            var a = $(t),
                i = a.attr("data-nonsquare"),
                o = -1 != a.parents("a").attr("data-large").indexOf("&layer"),
                r = "",
                n = "";
            o ? (r = a.attr("data-src").split("?")[0] + "?" + i,
                n = a.parents("a").attr("data-large") + "&" + i) : (r = a.attr("data-src").split("?")[0] + "?" + i, n = a.attr("data-src").split("?")[0] + "?" + i), a.attr("data-src", r + "&w=73&h=73"), a.parents("a").attr("data-large", n)
        })
    }
}, FL.bLazy.QuickLooks), FL.bLazy.PDP = FL.bLazy.PDP || {}, FL.bLazy.PDP = jQuery.extend(!0, {
    init: function() {
        FL.bLazy.PDP.initMainImages(), FL.bLazy.PDP.initMobileImages()
    },
    initBlazyOrLoad: function(e) {
        null === FL.bLazy.controller ? FL.bLazy.controller = new Blazy({
            offset: 500
        }) : FL.bLazy.controller.load(e, !0)
    },
    initAltColorImages: function() {
        $("#alternateColors").find("img").each(FL.bLazy.PDP.loadAltColorImage)
    },
    initMainImages: function() {
        var e = $("#productImageLayout").find("img").not(".is-video"),
            t = $(e[e.length > 2 ? 2 : 0]),
            a = new Image;
        a.onload = function() {
            a.height !== a.width && e.each(FL.bLazy.PDP.updateImageToPreset), FL.bLazy.PDP.initBlazyOrLoad(e), FL.bLazy.PDP.initAltColorImages(a.height !== a.width)
        }, a.src = t.attr("data-src").split("?")[0] + "?w=100"
    },
    initMobileImages: function() {
        var e = $("#imageSliderContainer").find("img.b-lazy-mobile"),
            t = $(e[e.length > 2 ? 2 : 0]),
            a = new Image;
        a.onload = function() {
            a.height !== a.width && e.each(FL.bLazy.PDP.updateImageToPreset), e.removeClass("b-lazy-mobile").addClass("b-lazy"), FL.bLazy.PDP.initBlazyOrLoad(e)
        }, a.src = t.attr("data-src").split("?")[0] + "?w=100"
    },
    loadAltColorImage: function(e, t) {
        var a = $(t),
            i = new Image;
        i.onload = function() {
            var e, t = a.attr("data-nonsquare"),
                o = a.attr("data-src").split("?")[0] + "?",
                r = a.attr("data-src").split("?")[1];
            i.height !== i.width && ("" === t ? e = r + "&h=87" : (e = t, a.parents(".color-image").addClass("traditional")), a.attr("data-src", o + e)), FL.bLazy.PDP.initBlazyOrLoad(a)
        }, i.src = a.attr("data-src")
    },
    updateImageToPreset: function(e, t) {
        var a = $(t),
            i = a.attr("data-nonsquare"),
            o = -1 != a.attr("data-src").indexOf("&layer"),
            r = "";
        r = o ? a.attr("data-src") + "&" + i : a.attr("data-src").split("?")[0] + "?" + i, a.attr("data-src", r), a.parents(".pdp-image").attr("data-large", r)
    }
}, FL.bLazy.PDP), window.FL = window.FL || {}, FL.modal = FL.modal || {}, FL.modal = jQuery.extend(!0, {
    init: function() {
        FL.modal.ajaxModal()
    },
    ajaxModal: function() {
        $(document).foundation(), $("a[data-modal-ajax]").each(function() {
            var e = $(this).attr("data-modal-ajax"),
                t = $(this).attr("data-modal-size");
            $(this).on("click", function() {
                $("#globalModal").removeClass().addClass("reveal " + t), $.ajax(e).done(function(e) {
                    $("#globalModal").html(e).foundation("open"), $("div.reveal-overlay").scrollTop(0)
                })
            })
        })
    },
    open: function(e, t, a) {
        $("#globalModal").removeClass().addClass("reveal " + t), $.ajax(e).done(function(e) {
            $("#globalModal").html(e).foundation("open"), $("div.reveal-overlay").scrollTop(0), a && a()
        })
    },
    close: function() {
        $("#globalModal").foundation("close")
    }
}, FL.modal), window.FL = window.FL || {}, FL.form = FL.form || {}, FL.form = jQuery.extend(!0, {
    init: function(e) {
        e = "#" + e;
        var t = $(e).attr("data-form"),
            a = $(e).attr("data-form-success"),
            i = $(e).attr("data-form-error");
        $(e).on("click", function() {
            FL.form.submit(t, a, i)
        })
    },
    initAll: function() {
        $("[data-form]").each(function() {
            var e = $(this).attr("id");
            FL.form.init(e)
        })
    },
    submit: function(e, t, a) {
        var i = FL.form.getCallbackFunction(t),
            o = FL.form.getCallbackFunction(a);
        $.ajax({
            url: $("#" + e).attr("action"),
            data: $("#" + e).serialize(),
            success: i,
            error: o
        })
    },
    getCallbackFunction: function(e) {
        function t(e, t) {
            return e[t]
        }
        try {
            return e.split(".").reduce(t, window)
        } catch (e) {
            return null
        }
    }
}, FL.form), window.FL = window.FL || {}, FL.ajax = FL.ajax || {}, FL.ajax = jQuery.extend(!0, {
    reloadComponent: function(e, t, a) {
        e = "#" + e, $.ajax({
            type: "GET",
            url: t,
            success: function(t) {
                $(e).html(t), $(e).foundation(), a && a()
            },
            error: function() {}
        })
    },
    reloadFormComponent: function(e, t, a) {
        e = "#" + e, $.ajax({
            type: "GET",
            url: t,
            success: function(t) {
                $(e).replaceWith($(t).find(e)), $(e).foundation(), a && a()
            },
            error: function() {}
        })
    },
    postFormComponent: function(e, t) {
        e = "#" + e, $.ajax({
            type: "POST",
            url: $(e).attr("action"),
            data: $(e).serialize(),
            success: function(a) {
                $(e).replaceWith($(a).find(e)), $(e).foundation(), t && t()
            },
            error: function() {}
        })
    }
}, FL.ajax), window.FL = window.FL || {}, FL.mask = FL.mask || {}, FL.mask = jQuery.extend(!0, {
    init: function() {
        $(".mask-phone").mask("000-000-0000"), $(".mask-zip").mask("00000-9999"), $(".mask-date").mask("00/00/0000"), $(".mask-card").mask("XXXX XXXX XXXX 0000", {
            translation: {
                X: {
                    pattern: /([0-9]|(x|X))/
                }
            }
        }), $(".mask-card-exp").mask("00/0000"), $(".mask-card-cvv").mask("0000")
    }
}, FL.mask), $.validator.addMethod("pattern", function(e, t, a) {
    return !!this.optional(t) || "[0-9]*" === a || ("string" == typeof a && (a = new RegExp("^(?:" + a + ")$")), a.test(e))
}, "Invalid format."), $.validator.addMethod("billingExpirationDate", function(e, t, a) {
    var i = (new Date).getFullYear(),
        o = (new Date).getMonth();
    return !(parseInt($("#billingExpirationYear").val()) === i && parseInt(e) < o)
}, "Expiration date must not be in the past");
var FlSliderObject = function(e) {
    this.id = e.id, this.slideWidth = e.slideWidth || 100, this.slidePadding = e.slidePadding || 10, this.slideCount = 0, this.init()
};
FlSliderObject.prototype.init = function() {
        $("#" + this.id).hide(), $("#" + this.id).addClass("fl-slider");
        var e = $("#" + this.id).html();
        $("#" + this.id).html("<div class='fl-slider-track'></div>"), $("#" + this.id + " .fl-slider-track").html(e);
        var t = $("#" + this.id + " .fl-slider-track>div").length;
        this.slideCount = t;
        var a = 1;
        $("#" + this.id + ">.fl-slider-track>div").each(function() {
            $(this).attr("data-slide-num", a), $(this).addClass("fl-slide"), a++
        }), $("#" + this.id + " .fl-slider-track .fl-slide").css("width", this.slideWidth + "px"), $("#" + this.id + " .fl-slider-track .fl-slide:not(:first-child)").css("margin-left", this.slidePadding + "px");
        var i = 0;
        this.slideCount > 0 && (i = this.slideCount * this.slideWidth + this.slidePadding * (this.slideCount - 1)), $("#" + this.id + " .fl-slider-track").css("width", i + "px"), $("#" + this.id + " img[data-lazy]").each(function() {
            $(this).attr("src", $(this).attr("data-lazy"))
        }), $("#" + this.id).show()
    }, FlSliderObject.prototype.goToSlide = function(e) {}, FLSlider = {}, FLSlider.init = function(e) {
        return new FlSliderObject(e)
    },
    function(e) {
        e.fn.gaugeMeter = function(t) {
            var a = e.extend({
                id: "",
                percent: 0,
                used: 0,
                total: 100,
                size: 100,
                prepend: "",
                append: "",
                theme: "Red-Gold-Green",
                color: "",
                back: "RGBa(0,0,0,.06)",
                width: 3,
                style: "Full",
                stripe: "0",
                animationstep: 1,
                animate_gauge_colors: "0",
                animate_text_colors: "0",
                label: "",
                label_color: "Black"
            }, t);
            return this.each(function() {
                function t(e) {
                    var t = "#2C94E0";
                    return e || (e = 1e-14), "Red-Gold-Green" == s.theme && (e > 0 && (t = "#d90000"), e > 10 && (t = "#e32100"), e > 20 && (t = "#f35100"), e > 30 && (t = "#ff8700"), e > 40 && (t = "#ffb800"), e > 50 && (t = "#ffd900"), e > 60 && (t = "#dcd800"), e > 70 && (t = "#a6d900"), e > 80 && (t = "#69d900"), e > 90 && (t = "#32d900")), "Green-Gold-Red" == s.theme && (e > 0 && (t = "#32d900"), e > 10 && (t = "#69d900"), e > 20 && (t = "#a6d900"), e > 30 && (t = "#dcd800"), e > 40 && (t = "#ffd900"), e > 50 && (t = "#ffb800"), e > 60 && (t = "#ff8700"), e > 70 && (t = "#f35100"), e > 80 && (t = "#e32100"), e > 90 && (t = "#d90000")), "Green-Red" == s.theme && (e > 0 && (t = "#32d900"), e > 10 && (t = "#41c900"), e > 20 && (t = "#56b300"), e > 30 && (t = "#6f9900"), e > 40 && (t = "#8a7b00"), e > 50 && (t = "#a75e00"), e > 60 && (t = "#c24000"), e > 70 && (t = "#db2600"), e > 80 && (t = "#f01000"), e > 90 && (t = "#ff0000")), "Red-Green" == s.theme && (e > 0 && (t = "#ff0000"), e > 10 && (t = "#f01000"), e > 20 && (t = "#db2600"), e > 30 && (t = "#c24000"), e > 40 && (t = "#a75e00"), e > 50 && (t = "#8a7b00"), e > 60 && (t = "#6f9900"), e > 70 && (t = "#56b300"), e > 80 && (t = "#41c900"), e > 90 && (t = "#32d900")), "DarkBlue-LightBlue" == s.theme && (e > 0 && (t = "#2c94e0"), e > 10 && (t = "#2b96e1"), e > 20 && (t = "#2b99e4"), e > 30 && (t = "#2a9ce7"), e > 40 && (t = "#28a0e9"), e > 50 && (t = "#26a4ed"), e > 60 && (t = "#25a8f0"), e > 70 && (t = "#24acf3"), e > 80 && (t = "#23aff5"), e > 90 && (t = "#21b2f7")), "LightBlue-DarkBlue" == s.theme && (e > 0 && (t = "#21b2f7"), e > 10 && (t = "#23aff5"), e > 20 && (t = "#24acf3"), e > 30 && (t = "#25a8f0"), e > 40 && (t = "#26a4ed"), e > 50 && (t = "#28a0e9"), e > 60 && (t = "#2a9ce7"), e > 70 && (t = "#2b99e4"), e > 80 && (t = "#2b96e1"), e > 90 && (t = "#2c94e0")), "DarkRed-LightRed" == s.theme && (e > 0 && (t = "#d90000"), e > 10 && (t = "#dc0000"), e > 20 && (t = "#e00000"), e > 30 && (t = "#e40000"), e > 40 && (t = "#ea0000"), e > 50 && (t = "#ee0000"), e > 60 && (t = "#f30000"), e > 70 && (t = "#f90000"), e > 80 && (t = "#fc0000"), e > 90 && (t = "#ff0000")), "LightRed-DarkRed" == s.theme && (e > 0 && (t = "#ff0000"), e > 10 && (t = "#fc0000"), e > 20 && (t = "#f90000"), e > 30 && (t = "#f30000"), e > 40 && (t = "#ee0000"), e > 50 && (t = "#ea0000"), e > 60 && (t = "#e40000"), e > 70 && (t = "#e00000"), e > 80 && (t = "#dc0000"), e > 90 && (t = "#d90000")), "DarkGreen-LightGreen" == s.theme && (e > 0 && (t = "#32d900"), e > 10 && (t = "#33db00"), e > 20 && (t = "#34df00"), e > 30 && (t = "#34e200"), e > 40 && (t = "#36e700"), e > 50 && (t = "#37ec00"), e > 60 && (t = "#38f100"), e > 70 && (t = "#38f600"), e > 80 && (t = "#39f900"), e > 90 && (t = "#3afc00")), "LightGreen-DarkGreen" == s.theme && (e > 0 && (t = "#3afc00"), e > 10 && (t = "#39f900"), e > 20 && (t = "#38f600"), e > 30 && (t = "#38f100"), e > 40 && (t = "#37ec00"), e > 50 && (t = "#36e700"), e > 60 && (t = "#34e200"), e > 70 && (t = "#34df00"), e > 80 && (t = "#33db00"), e > 90 && (t = "#32d900")), "DarkGold-LightGold" == s.theme && (e > 0 && (t = "#ffb800"), e > 10 && (t = "#ffba00"), e > 20 && (t = "#ffbd00"), e > 30 && (t = "#ffc200"), e > 40 && (t = "#ffc600"), e > 50 && (t = "#ffcb00"), e > 60 && (t = "#ffcf00"), e > 70 && (t = "#ffd400"), e > 80 && (t = "#ffd600"), e > 90 && (t = "#ffd900")), "LightGold-DarkGold" == s.theme && (e > 0 && (t = "#ffd900"), e > 10 && (t = "#ffd600"), e > 20 && (t = "#ffd400"), e > 30 && (t = "#ffcf00"), e > 40 && (t = "#ffcb00"), e > 50 && (t = "#ffc600"), e > 60 && (t = "#ffc200"), e > 70 && (t = "#ffbd00"), e > 80 && (t = "#ffba00"), e > 90 && (t = "#ffb800")), "White" == s.theme && (t = "#fff"), "Black" == s.theme && (t = "#000"), t
                }

                function i(t) {
                    var a = "";
                    if ("1" == s.animate_text_colors) var a = s.fgcolor;
                    e("<span></span>").appendTo(t).html(r).css({
                        "line-height": s.size + "px",
                        "font-size": .22 * s.size + "px",
                        color: a
                    })
                }

                function o(a) {
                    if ("1" == s.animate_gauge_colors || "1" == s.animate_text_colors) var i = t($);
                    "1" == s.animate_gauge_colors && (s.fgcolor = i, "1" == s.animate_text_colors && e("SPAN", "#" + s.id).html("<s>" + s.prepend + "</s>" + Math.floor($).toString() + "<u>" + s.append + "</u>").css({
                        color: i
                    })), m.clearRect(0, 0, h.width, h.height), m.beginPath(), m.arc(f, g, v, b, y, !1), m.strokeStyle = s.back, s.stripe > parseInt(0) ? m.setLineDash([s.stripe], 1) : m.lineCap = "round", m.stroke(), c && (m.fillStyle = s.fill, m.fill()), m.beginPath(), m.arc(f, g, v, -L, k * a - L, !1), m.lineWidth = s.width < 1 || isNaN(s.width) ? s.size / 20 : s.width, m.strokeStyle = s.fgcolor, m.stroke(), l > $ && ($ += C, requestAnimationFrame(function() {
                        o(Math.min($, l) / 100)
                    }, d))
                }
                e(this).attr("data-id", e(this).attr("id"));
                var r, n = ["id", "percent", "used", "total", "size", "prepend", "append", "theme", "color", "back", "width", "style", "stripe", "animationstep", "animate_gauge_colors", "animate_text_colors", "label", "label_color"],
                    s = {},
                    l = 0,
                    d = e(this),
                    c = !1;
                d.addClass("gaugeMeter"),
                    function(t) {
                        e.each(n, function(i, o) {
                            s[o] = void 0 != t.data(o) ? t.data(o) : e(a).attr(o), "fill" == o && void 0 != t.data("fill") && (c = !0)
                        })
                    }(d);
                var u = parseInt(s.percent);
                if (s.fgcolor = t(u), s.color && (s.fgcolor = s.color), void 0 != d.data("text") ? (r = void 0 != d.data("append") || "" != d.data("append") && null != d.data("append") ? d.data("text").toString() + "<u>" + d.data("append") + "</u>" : d.data("text"), (void 0 != d.data("prepend") || "" != d.data("prepend") && null != d.data("prepend")) && (r = "<s>" + d.data("prepend") + "</s>" + r.toString()), i(d)) : (void 0 != d.data("prepend") || "" != d.data("prepend") && null != d.data("prepend") ? (r = "<s>" + d.data("prepend") + "</s>" + d.data("percent").toString(), (void 0 != d.data("append") || "" != d.data("append") && null != d.data("append")) && (r = r.toString() + "<u>" + d.data("append") + "</u>")) : (r = d.data("percent"), (void 0 != d.data("append") || "" != d.data("append") && null != d.data("append")) && (r = r.toString() + "<u>" + d.data("append") + "</u>")), i(d)), void 0 != e(this).data("total") && void 0 != e(this).data("used")) {
                    var p = e(this).data("total") / 100;
                    percent = (e(this).data("used") / p / 100).toFixed(3), l = (e(this).data("used") / p).toFixed(3)
                } else void 0 != e(this).data("percent") ? (percent = e(this).data("percent") / 100, l = e(this).data("percent")) : percent = a.percent / 100;
                void 0 != e(this).data("label") && (label = e(this).data("label"), e(this).data("style"), function(t, a) {
                    e("<b></b>").appendTo(t).html(label).css({
                        "font-size": a + "px",
                        "line-height": s.size + 5 * a + "px",
                        color: s.label_color
                    })
                }(d, s.size / 13)), e(this).width(s.size + "px");
                var h = e("<canvas></canvas>").attr({
                        width: s.size,
                        height: s.size
                    }).appendTo(e(this)).get(0),
                    m = h.getContext("2d"),
                    f = h.width / 2,
                    g = h.height / 2,
                    v = (s.percent, Math.PI, h.width / 2.5),
                    y = 2.3 * Math.PI,
                    b = 0,
                    $ = 0 === s.animationstep ? l : 0,
                    C = Math.max(s.animationstep, 0),
                    k = 2 * Math.PI,
                    L = Math.PI / 2,
                    F = "";
                if (void 0 != e(this).data("style")) {
                    if ("Semi" == (F = e(this).data("style"))) var y = 2 * Math.PI,
                        b = 3.13,
                        k = 1 * Math.PI,
                        L = Math.PI / .996;
                    if ("Arch" == F) var y = 2.195 * Math.PI,
                        b = 1,
                        b = 655.99999,
                        k = 1.4 * Math.PI,
                        L = Math.PI / .8335
                }
                o($ / 100)
            })
        }
    }(jQuery), window.FL = window.FL || {}, FL.autoSuggest = {
        debugOn: !1,
        id: "",
        ajaxUrl: "/store/assembler",
        contentCollection: "/content/Shared/Auto-Suggest%20Panels",
        siteContextPath: "",
        minInputLength: 3,
        searchBoxId: ".hide-for-small-only #searchBarSearchBox",
        submitButtonId: "#searchBarSearchButton",
        animationDuration: 500,
        totalSuggestions: 0,
        userInput: "",
        currentLinkIndex: 0,
        connections: new Array,
        templatePath: "template/autoSuggest.txt",
        templateString: "",
        xhr: "",
        data: null,
        timer: null,
        closeTimer: null,
        init: function() {
            var e = $(FL.autoSuggest.searchBoxId),
                t = $(".header-navigation .search-form-container");
            $("#searchBarSearchButton"), e.on("keyup", this.handleKeyup), e.on("keypress", this.handleKeypress), $(document).mouseup(function(e) {
                t.is(e.target) || 0 !== t.has(e.target).length ? FL.autoSuggest.showSearchButton() : (FL.autoSuggest.hideSearchButton(), $(".autosuggest-box.rfk-box").hide())
            }), $(document).on("mouseenter", "div.autosuggest-box", function() {
                clearTimeout(FL.autoSuggest.closeTimer)
            }), $(document).on("mouseleave", "div.autosuggest-box", function() {
                FL.autoSuggest.closeTimer = setTimeout(function() {
                    FL.autoSuggest.hide()
                }, 1e3)
            })
        },
        hideSearchButton: function() {
            $(".header-main").find(".navigation-search-button").addClass("hide")
        },
        showSearchButton: function() {
            $(".header-main").find(".navigation-search-button").removeClass("hide")
        },
        handleKeyup: function(e) {
            switch (e.which) {
                case 40:
                case 38:
                    (FL.autoSuggest.totalSuggestions > 0 || FL.Reflektion.isRfkOn()) && FL.autoSuggest.selectSuggestedItem(e.keyCode);
                    break;
                case 37:
                case 39:
                    break;
                case 13:
                    e.preventDefault();
                    var t = $("div.autosuggest-box .autosuggest-list li.highlighted a");
                    t.length > 0 && ($(FL.autoSuggest.searchBoxId).val(t.text()), $(FL.autoSuggest.submitButtonId).click());
                    break;
                default:
                    if (FL.Reflektion.isRfkOn()) {
                        var a = FL.autoSuggest.getUserSearchTerm();
                        "" != a ? FL.Reflektion.isUUID(function() {
                            globalSearchRfkTerm = a, FL.Reflektion.requestPreviewData(a)
                        }) : FL.autoSuggest.hide()
                    } else FL.autoSuggest.doSearch()
            }
        },
        handleKeypress: function(e) {
            switch (e.keyCode) {
                case 40:
                case 38:
                    e.preventDefault();
                    break;
                case 27:
                    FL.autoSuggest.closeSuggestionList(), FL.autoSuggest.saveUserSearchTerm(FL.autoSuggest.getUserSearchTerm())
            }
        },
        doSearch: function() {
            var e = this.getUserSearchTerm();
            e != this.userInput && (e.length >= this.minInputLength ? this.requestData(e) : (this.cancelRequest(), this.hide()), this.saveUserSearchTerm(e))
        },
        getUserSearchTerm: function() {
            return $.trim($(FL.autoSuggest.searchBoxId).val())
        },
        saveUserSearchTerm: function(e) {
            this.userInput = e.toLocaleLowerCase()
        },
        requestData: function(e) {
            this.cancelRequest();
            var t = -1 === this.ajaxUrl.indexOf("?") ? "?" : "&",
                a = this.ajaxUrl + t + "Dy=1&assemblerContentCollection=" + this.contentCollection + "&Ntt=" + e + "*",
                i = this;
            this.xhr = $.get(a, function(e, t) {
                i.createListHtml(e, t)
            }).fail(function(e, t) {
                i.handleError(e, t)
            })
        },
        requestTypeAheadData: function(e) {
            this.cancelRequest(), $(".autosuggest-box").find(".autosuggest-products").html("");
            var t = null;
            void 0 != e && null != e && (t = e);
            var a = t,
                i = this;
            this.xhr = $.get(a, function(e, t) {
                i.handleSearchResponse(e, t), setTimeout(function() {
                    new Blazy({
                        selector: ".rfk-box .productImage"
                    })
                }, 300)
            }).fail(function(e, t) {
                i.handleError(e, t)
            })
        },
        cancelRequest: function() {
            this.xhr && this.xhr.abort()
        },
        createListHtml: function(e, t) {
            var a = $(".autosuggest-box"),
                i = this,
                o = "";
            if (e && e.length > 0 && $(e).find("div.topResult") && $(e).find("div.topResult").length > 0) {
                var r = $(e).find("div.topResult li");
                $.each(r, function(e) {
                    var t = $(this).find("span"),
                        a = t.text(),
                        r = i.userInput.length,
                        n = a.substring(0, r),
                        s = a.substring(r);
                    t.html("<b>" + n + "</b>" + s), o += "<li>" + $(this).html() + "</li>"
                })
            }
            o ? (a.find(".autosuggest-list").html(o), $.each(a.find(".autosuggest-list li a"), function(e) {
                var t = $(this);
                $(this).on("click", function(e) {
                    $(i.searchBoxId).val(t.text()), $(i.submitButtonId).click()
                }), $(this).on("mouseover", function(e) {
                    clearTimeout(FL.autoSuggest.timer), FL.autoSuggest.timer = setTimeout(function() {
                        $("div.autosuggest-box .autosuggest-list li").removeClass("highlighted"), t.parent().addClass("highlighted"), i.currentLinkIndex = t.parent().index();
                        var e = t.attr("href");
                        e = e.replace("http:", "https:"), e = e.replace("localhost", "localhost:8003"), i.requestTypeAheadData(e)
                    }, 500)
                }), i.totalSuggestions++
            }), i.currentLinkIndex = null, i.selectLink(), i.show()) : i.hide()
        },
        handleSearchResponse: function(e, t) {
            var a = $(".autosuggest-box"),
                i = "";
            if (e && e.length > 0) {
                var o = $(e).find(".product-grid .product-card");
                $.each(o, function(e) {
                    var t = $(this).find(".product-card__media .product-card__media-slide:first").html(),
                        a = $(this).find(".product-card__details a").attr("href"),
                        o = $(this).find(".product-card__details .product-name").html(),
                        r = $(this).find(".product-card__details .product-price").html(),
                        n = $(this).find(".product-card__media").attr("data-original-image-id");
                    if (t = t.replace("amp;", "").replace("&w=245", "&w=75&h=75"), i += "<a href='" + a + "' data-stylecolorid='" + n + "'><div class='row mb-2'><div class='column shrink autosuggest-product-image'>" + t + "</div><div class='column autosuggest-product-details'><div class='autosuggest-product-name'>" + o + "</div><div>" + r + "</div></div></div></a>", e > 2) return !1
                })
            }
            a.find(".autosuggest-products").html(i)
        },
        handleError: function(e, t) {
            console.debug("AutoSuggest: in handleError, xhrGet failed")
        },
        show: function() {
            $("div.autosuggest-box").fadeIn(), this.currentLinkIndex = null
        },
        hide: function() {
            var e = $("div.autosuggest-box");
            e.fadeOut("fast", function() {
                e.find(".autosuggest-list ul").html(""), e.find(".autosuggest-products").html("")
            }), this.totalSuggestions = 0
        },
        resetSearchBox: function() {
            var e = $(FL.autoSuggest.searchBoxId);
            e.value = this.userInput, e.focus(), this.currentLinkIndex = null
        },
        closeSuggestionList: function() {
            $(FL.autoSuggest.searchBoxId).focus(), this.hide()
        },
        selectSuggestedItem: function(e) {
            var t = $("div.autosuggest-box .autosuggest-list li:not('.rfk-top-cat')"),
                a = t.length - 1,
                i = this;
            switch (e) {
                case 38:
                    if (null === i.currentLinkIndex) return;
                    0 === i.currentLinkIndex ? i.currentLinkIndex = null : i.currentLinkIndex -= 1, i.selectLink();
                    break;
                case 40:
                    null === i.currentLinkIndex ? i.currentLinkIndex = 0 : i.currentLinkIndex === a ? i.currentLinkIndex = 0 : i.currentLinkIndex += 1, i.selectLink()
            }
        },
        selectLink: function() {
            var e = this,
                t = $("div.autosuggest-box .autosuggest-list li:not('.rfk-top-cat')");
            if (t.removeClass("highlighted"), null !== this.currentLinkIndex) $(t[this.currentLinkIndex]).addClass("highlighted"), $(t[this.currentLinkIndex]).find("a").trigger("mouseover");
            else if (t.length > 0) {
                var a = $(t[0]).find("a"),
                    i = a.attr("href");
                i = i.replace("http:", "https:"), i = i.replace("localhost", "localhost:8003"), e.requestTypeAheadData(i)
            }
        }
    },
    function(e) {
        var t = {
            settings: {
                barWidth: 1,
                barHeight: 50,
                moduleSize: 5,
                showHRI: !0,
                addQuietZone: !0,
                marginHRI: 5,
                bgColor: "#FFFFFF",
                color: "#000000",
                fontSize: 10,
                output: "css",
                posX: 0,
                posY: 0
            },
            intval: function(e) {
                var t = typeof e;
                return "string" == t ? (e = e.replace(/[^0-9-.]/g, ""), e = parseInt(1 * e, 10), isNaN(e) || !isFinite(e) ? 0 : e) : "number" == t && isFinite(e) ? Math.floor(e) : 0
            },
            i25: {
                encoding: ["NNWWN", "WNNNW", "NWNNW", "WWNNN", "NNWNW", "WNWNN", "NWWNN", "NNNWW", "WNNWN", "NWNWN"],
                compute: function(e, a, i) {
                    if (a) {
                        "int25" == i && e.length % 2 == 0 && (e = "0" + e);
                        for (var o, r = !0, n = 0, s = e.length - 1; s > -1; s--) {
                            if (o = t.intval(e.charAt(s)), isNaN(o)) return "";
                            n += r ? 3 * o : o, r = !r
                        }
                        e += ((10 - n % 10) % 10).toString()
                    } else e.length % 2 != 0 && (e = "0" + e);
                    return e
                },
                getDigit: function(e, t, a) {
                    if ("" == (e = this.compute(e, t, a))) return "";
                    result = "";
                    var i, o;
                    if ("int25" == a) {
                        result += "1010";
                        var r, n;
                        for (i = 0; i < e.length / 2; i++)
                            for (r = e.charAt(2 * i), n = e.charAt(2 * i + 1), o = 0; o < 5; o++) result += "1", "W" == this.encoding[r].charAt(o) && (result += "1"), result += "0", "W" == this.encoding[n].charAt(o) && (result += "0");
                        result += "1101"
                    } else if ("std25" == a) {
                        result += "11011010";
                        var s;
                        for (i = 0; i < e.length; i++)
                            for (s = e.charAt(i), o = 0; o < 5; o++) result += "1", "W" == this.encoding[s].charAt(o) && (result += "11"), result += "0";
                        result += "11010110"
                    }
                    return result
                }
            },
            ean: {
                encoding: [
                    ["0001101", "0100111", "1110010"],
                    ["0011001", "0110011", "1100110"],
                    ["0010011", "0011011", "1101100"],
                    ["0111101", "0100001", "1000010"],
                    ["0100011", "0011101", "1011100"],
                    ["0110001", "0111001", "1001110"],
                    ["0101111", "0000101", "1010000"],
                    ["0111011", "0010001", "1000100"],
                    ["0110111", "0001001", "1001000"],
                    ["0001011", "0010111", "1110100"]
                ],
                first: ["000000", "001011", "001101", "001110", "010011", "011001", "011100", "010101", "010110", "011010"],
                getDigit: function(e, a) {
                    var i = "ean8" == a ? 7 : 12;
                    if (e = e.substring(0, i), e.length != i) return "";
                    for (var o, r = 0; r < e.length; r++)
                        if ((o = e.charAt(r)) < "0" || o > "9") return "";
                    e = this.compute(e, a);
                    var n = "101";
                    if ("ean8" == a) {
                        for (var r = 0; r < 4; r++) n += this.encoding[t.intval(e.charAt(r))][0];
                        n += "01010";
                        for (var r = 4; r < 8; r++) n += this.encoding[t.intval(e.charAt(r))][2]
                    } else {
                        for (var s = this.first[t.intval(e.charAt(0))], r = 1; r < 7; r++) n += this.encoding[t.intval(e.charAt(r))][t.intval(s.charAt(r - 1))];
                        n += "01010";
                        for (var r = 7; r < 13; r++) n += this.encoding[t.intval(e.charAt(r))][2]
                    }
                    return n += "101"
                },
                compute: function(e, a) {
                    var o = "ean13" == a ? 12 : 7;
                    e = e.substring(0, o);
                    var r = 0,
                        n = !0;
                    for (i = e.length - 1; i > -1; i--) r += (n ? 3 : 1) * t.intval(e.charAt(i)), n = !n;
                    return e + ((10 - r % 10) % 10).toString()
                }
            },
            upc: {
                getDigit: function(e) {
                    return e.length < 12 && (e = "0" + e), t.ean.getDigit(e, "ean13")
                },
                compute: function(e) {
                    return e.length < 12 && (e = "0" + e), t.ean.compute(e, "ean13").substr(1)
                }
            },
            msi: {
                encoding: ["100100100100", "100100100110", "100100110100", "100100110110", "100110100100", "100110100110", "100110110100", "100110110110", "110100100100", "110100100110"],
                compute: function(e, t) {
                    return "object" == typeof t ? ("mod10" == t.crc1 ? e = this.computeMod10(e) : "mod11" == t.crc1 && (e = this.computeMod11(e)), "mod10" == t.crc2 ? e = this.computeMod10(e) : "mod11" == t.crc2 && (e = this.computeMod11(e))) : "boolean" == typeof t && t && (e = this.computeMod10(e)), e
                },
                computeMod10: function(e) {
                    var a, i = e.length % 2,
                        o = 0,
                        r = 0;
                    for (a = 0; a < e.length; a++) i ? o = 10 * o + t.intval(e.charAt(a)) : r += t.intval(e.charAt(a)), i = !i;
                    var n = (2 * o).toString();
                    for (a = 0; a < n.length; a++) r += t.intval(n.charAt(a));
                    return e + ((10 - r % 10) % 10).toString()
                },
                computeMod11: function(e) {
                    for (var a = 0, i = 2, o = e.length - 1; o >= 0; o--) a += i * t.intval(e.charAt(o)), i = 7 == i ? 2 : i + 1;
                    return e + ((11 - a % 11) % 11).toString()
                },
                getDigit: function(e, t) {
                    var a = 0,
                        o = "";
                    for (e = this.compute(e, !1), o = "110", i = 0; i < e.length; i++) {
                        if ((a = "0123456789".indexOf(e.charAt(i))) < 0) return "";
                        o += this.encoding[a]
                    }
                    return o += "1001"
                }
            },
            code11: {
                encoding: ["101011", "1101011", "1001011", "1100101", "1011011", "1101101", "1001101", "1010011", "1101001", "110101", "101101"],
                getDigit: function(e) {
                    var t, a, i = "0123456789-",
                        o = "";
                    for (o = "10110010", t = 0; t < e.length; t++) {
                        if ((a = i.indexOf(e.charAt(t))) < 0) return "";
                        o += this.encoding[a] + "0"
                    }
                    var r = 0,
                        n = 0,
                        s = 1,
                        l = 0;
                    for (t = e.length - 1; t >= 0; t--) r = 10 == r ? 1 : r + 1, s = 10 == s ? 1 : s + 1, a = i.indexOf(e.charAt(t)), n += r * a, l += s * a;
                    var d = n % 11;
                    l += d;
                    var c = l % 11;
                    return o += this.encoding[d] + "0", e.length >= 10 && (o += this.encoding[c] + "0"), o += "1011001"
                }
            },
            code39: {
                encoding: ["101001101101", "110100101011", "101100101011", "110110010101", "101001101011", "110100110101", "101100110101", "101001011011", "110100101101", "101100101101", "110101001011", "101101001011", "110110100101", "101011001011", "110101100101", "101101100101", "101010011011", "110101001101", "101101001101", "101011001101", "110101010011", "101101010011", "110110101001", "101011010011", "110101101001", "101101101001", "101010110011", "110101011001", "101101011001", "101011011001", "110010101011", "100110101011", "110011010101", "100101101011", "110010110101", "100110110101", "100101011011", "110010101101", "100110101101", "100100100101", "100100101001", "100101001001", "101001001001", "100101101101"],
                getDigit: function(e) {
                    var t, a, i = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%*",
                        o = "";
                    if (e.indexOf("*") >= 0) return "";
                    for (e = ("*" + e + "*").toUpperCase(), t = 0; t < e.length; t++) {
                        if ((a = i.indexOf(e.charAt(t))) < 0) return "";
                        t > 0 && (o += "0"), o += this.encoding[a]
                    }
                    return o
                }
            },
            code93: {
                encoding: ["100010100", "101001000", "101000100", "101000010", "100101000", "100100100", "100100010", "101010000", "100010010", "100001010", "110101000", "110100100", "110100010", "110010100", "110010010", "110001010", "101101000", "101100100", "101100010", "100110100", "100011010", "101011000", "101001100", "101000110", "100101100", "100010110", "110110100", "110110010", "110101100", "110100110", "110010110", "110011010", "101101100", "101100110", "100110110", "100111010", "100101110", "111010100", "111010010", "111001010", "101101110", "101110110", "110101110", "100100110", "111011010", "111010110", "100110010", "101011110"],
                getDigit: function(e, t) {
                    var a, o = "0123456789ABCDEFGHIJKLMNOPQRSTUVWXYZ-. $/+%____*",
                        r = "";
                    if (e.indexOf("*") >= 0) return "";
                    for (e = e.toUpperCase(), r += this.encoding[47], i = 0; i < e.length; i++) {
                        if (a = e.charAt(i), index = o.indexOf(a), "_" == a || index < 0) return "";
                        r += this.encoding[index]
                    }
                    if (t) {
                        var n = 0,
                            s = 0,
                            l = 1,
                            d = 0;
                        for (i = e.length - 1; i >= 0; i--) n = 20 == n ? 1 : n + 1, l = 15 == l ? 1 : l + 1, index = o.indexOf(e.charAt(i)), s += n * index, d += l * index;
                        var a = s % 47;
                        d += a;
                        var c = d % 47;
                        r += this.encoding[a], r += this.encoding[c]
                    }
                    return r += this.encoding[47], r += "1"
                }
            },
            code128: {
                encoding: ["11011001100", "11001101100", "11001100110", "10010011000", "10010001100", "10001001100", "10011001000", "10011000100", "10001100100", "11001001000", "11001000100", "11000100100", "10110011100", "10011011100", "10011001110", "10111001100", "10011101100", "10011100110", "11001110010", "11001011100", "11001001110", "11011100100", "11001110100", "11101101110", "11101001100", "11100101100", "11100100110", "11101100100", "11100110100", "11100110010", "11011011000", "11011000110", "11000110110", "10100011000", "10001011000", "10001000110", "10110001000", "10001101000", "10001100010", "11010001000", "11000101000", "11000100010", "10110111000", "10110001110", "10001101110", "10111011000", "10111000110", "10001110110", "11101110110", "11010001110", "11000101110", "11011101000", "11011100010", "11011101110", "11101011000", "11101000110", "11100010110", "11101101000", "11101100010", "11100011010", "11101111010", "11001000010", "11110001010", "10100110000", "10100001100", "10010110000", "10010000110", "10000101100", "10000100110", "10110010000", "10110000100", "10011010000", "10011000010", "10000110100", "10000110010", "11000010010", "11001010000", "11110111010", "11000010100", "10001111010", "10100111100", "10010111100", "10010011110", "10111100100", "10011110100", "10011110010", "11110100100", "11110010100", "11110010010", "11011011110", "11011110110", "11110110110", "10101111000", "10100011110", "10001011110", "10111101000", "10111100010", "11110101000", "11110100010", "10111011110", "10111101110", "11101011110", "11110101110", "11010000100", "11010010000", "11010011100", "11000111010"],
                getDigit: function(e) {
                    var a = " !\"#$%&'()*+,-./0123456789:;<=>?@ABCDEFGHIJKLMNOPQRSTUVWXYZ[\\]^_`abcdefghijklmnopqrstuvwxyz{|}~",
                        i = "",
                        o = 0,
                        r = 0,
                        n = 0,
                        s = 0,
                        l = 0;
                    for (n = 0; n < e.length; n++)
                        if (-1 == a.indexOf(e.charAt(n))) return "";
                    var d = e.length > 1,
                        c = "";
                    for (n = 0; n < 3 && n < e.length; n++) c = e.charAt(n), d &= c >= "0" && c <= "9";
                    for (o = d ? 105 : 104, i = this.encoding[o], n = 0; n < e.length;) {
                        if (d)(n == e.length || e.charAt(n) < "0" || e.charAt(n) > "9" || e.charAt(n + 1) < "0" || e.charAt(n + 1) > "9") && (d = !1, i += this.encoding[100], o += 100 * ++r);
                        else {
                            for (s = 0; n + s < e.length && e.charAt(n + s) >= "0" && e.charAt(n + s) <= "9";) s++;
                            (d = s > 5 || n + s - 1 == e.length && s > 3) && (i += this.encoding[99], o += 99 * ++r)
                        }
                        d ? (l = t.intval(e.charAt(n) + e.charAt(n + 1)), n += 2) : (l = a.indexOf(e.charAt(n)), n += 1), i += this.encoding[l], o += ++r * l
                    }
                    return i += this.encoding[o % 103], i += this.encoding[106], i += "11"
                }
            },
            codabar: {
                encoding: ["101010011", "101011001", "101001011", "110010101", "101101001", "110101001", "100101011", "100101101", "100110101", "110100101", "101001101", "101100101", "1101011011", "1101101011", "1101101101", "1011011011", "1011001001", "1010010011", "1001001011", "1010011001"],
                getDigit: function(e) {
                    var t, a, i = "";
                    for (i += this.encoding[16] + "0", t = 0; t < e.length; t++) {
                        if ((a = "0123456789-$:/.+".indexOf(e.charAt(t))) < 0) return "";
                        i += this.encoding[a] + "0"
                    }
                    return i += this.encoding[16]
                }
            },
            datamatrix: {
                lengthRows: [10, 12, 14, 16, 18, 20, 22, 24, 26, 32, 36, 40, 44, 48, 52, 64, 72, 80, 88, 96, 104, 120, 132, 144, 8, 8, 12, 12, 16, 16],
                lengthCols: [10, 12, 14, 16, 18, 20, 22, 24, 26, 32, 36, 40, 44, 48, 52, 64, 72, 80, 88, 96, 104, 120, 132, 144, 18, 32, 26, 36, 36, 48],
                dataCWCount: [3, 5, 8, 12, 18, 22, 30, 36, 44, 62, 86, 114, 144, 174, 204, 280, 368, 456, 576, 696, 816, 1050, 1304, 1558, 5, 10, 16, 22, 32, 49],
                solomonCWCount: [5, 7, 10, 12, 14, 18, 20, 24, 28, 36, 42, 48, 56, 68, 84, 112, 144, 192, 224, 272, 336, 408, 496, 620, 7, 11, 14, 18, 24, 28],
                dataRegionRows: [8, 10, 12, 14, 16, 18, 20, 22, 24, 14, 16, 18, 20, 22, 24, 14, 16, 18, 20, 22, 24, 18, 20, 22, 6, 6, 10, 10, 14, 14],
                dataRegionCols: [8, 10, 12, 14, 16, 18, 20, 22, 24, 14, 16, 18, 20, 22, 24, 14, 16, 18, 20, 22, 24, 18, 20, 22, 16, 14, 24, 16, 16, 22],
                regionRows: [1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 4, 4, 4, 4, 4, 4, 6, 6, 6, 1, 1, 1, 1, 1, 1],
                regionCols: [1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 2, 2, 2, 2, 4, 4, 4, 4, 4, 4, 6, 6, 6, 1, 2, 1, 2, 2, 2],
                interleavedBlocks: [1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 1, 2, 2, 4, 4, 4, 4, 6, 6, 8, 8, 1, 1, 1, 1, 1, 1],
                logTab: [-255, 255, 1, 240, 2, 225, 241, 53, 3, 38, 226, 133, 242, 43, 54, 210, 4, 195, 39, 114, 227, 106, 134, 28, 243, 140, 44, 23, 55, 118, 211, 234, 5, 219, 196, 96, 40, 222, 115, 103, 228, 78, 107, 125, 135, 8, 29, 162, 244, 186, 141, 180, 45, 99, 24, 49, 56, 13, 119, 153, 212, 199, 235, 91, 6, 76, 220, 217, 197, 11, 97, 184, 41, 36, 223, 253, 116, 138, 104, 193, 229, 86, 79, 171, 108, 165, 126, 145, 136, 34, 9, 74, 30, 32, 163, 84, 245, 173, 187, 204, 142, 81, 181, 190, 46, 88, 100, 159, 25, 231, 50, 207, 57, 147, 14, 67, 120, 128, 154, 248, 213, 167, 200, 63, 236, 110, 92, 176, 7, 161, 77, 124, 221, 102, 218, 95, 198, 90, 12, 152, 98, 48, 185, 179, 42, 209, 37, 132, 224, 52, 254, 239, 117, 233, 139, 22, 105, 27, 194, 113, 230, 206, 87, 158, 80, 189, 172, 203, 109, 175, 166, 62, 127, 247, 146, 66, 137, 192, 35, 252, 10, 183, 75, 216, 31, 83, 33, 73, 164, 144, 85, 170, 246, 65, 174, 61, 188, 202, 205, 157, 143, 169, 82, 72, 182, 215, 191, 251, 47, 178, 89, 151, 101, 94, 160, 123, 26, 112, 232, 21, 51, 238, 208, 131, 58, 69, 148, 18, 15, 16, 68, 17, 121, 149, 129, 19, 155, 59, 249, 70, 214, 250, 168, 71, 201, 156, 64, 60, 237, 130, 111, 20, 93, 122, 177, 150],
                aLogTab: [1, 2, 4, 8, 16, 32, 64, 128, 45, 90, 180, 69, 138, 57, 114, 228, 229, 231, 227, 235, 251, 219, 155, 27, 54, 108, 216, 157, 23, 46, 92, 184, 93, 186, 89, 178, 73, 146, 9, 18, 36, 72, 144, 13, 26, 52, 104, 208, 141, 55, 110, 220, 149, 7, 14, 28, 56, 112, 224, 237, 247, 195, 171, 123, 246, 193, 175, 115, 230, 225, 239, 243, 203, 187, 91, 182, 65, 130, 41, 82, 164, 101, 202, 185, 95, 190, 81, 162, 105, 210, 137, 63, 126, 252, 213, 135, 35, 70, 140, 53, 106, 212, 133, 39, 78, 156, 21, 42, 84, 168, 125, 250, 217, 159, 19, 38, 76, 152, 29, 58, 116, 232, 253, 215, 131, 43, 86, 172, 117, 234, 249, 223, 147, 11, 22, 44, 88, 176, 77, 154, 25, 50, 100, 200, 189, 87, 174, 113, 226, 233, 255, 211, 139, 59, 118, 236, 245, 199, 163, 107, 214, 129, 47, 94, 188, 85, 170, 121, 242, 201, 191, 83, 166, 97, 194, 169, 127, 254, 209, 143, 51, 102, 204, 181, 71, 142, 49, 98, 196, 165, 103, 206, 177, 79, 158, 17, 34, 68, 136, 61, 122, 244, 197, 167, 99, 198, 161, 111, 222, 145, 15, 30, 60, 120, 240, 205, 183, 67, 134, 33, 66, 132, 37, 74, 148, 5, 10, 20, 40, 80, 160, 109, 218, 153, 31, 62, 124, 248, 221, 151, 3, 6, 12, 24, 48, 96, 192, 173, 119, 238, 241, 207, 179, 75, 150, 1],
                champGaloisMult: function(e, t) {
                    return e && t ? this.aLogTab[(this.logTab[e] + this.logTab[t]) % 255] : 0
                },
                champGaloisDoub: function(e, t) {
                    return e ? t ? this.aLogTab[(this.logTab[e] + t) % 255] : e : 0
                },
                champGaloisSum: function(e, t) {
                    return e ^ t
                },
                selectIndex: function(e, t) {
                    if ((e < 1 || e > 1558) && !t) return -1;
                    if ((e < 1 || e > 49) && t) return -1;
                    var a = 0;
                    for (t && (a = 24); this.dataCWCount[a] < e;) a++;
                    return a
                },
                encodeDataCodeWordsASCII: function(e) {
                    var t, a, i = new Array,
                        o = 0;
                    for (t = 0; t < e.length; t++) a = e.charCodeAt(t), a > 127 ? (i[o] = 235, a -= 127, o++) : a >= 48 && a <= 57 && t + 1 < e.length && e.charCodeAt(t + 1) >= 48 && e.charCodeAt(t + 1) <= 57 ? (a = 10 * (a - 48) + (e.charCodeAt(t + 1) - 48), a += 130, t++) : a++, i[o] = a, o++;
                    return i
                },
                addPadCW: function(e, t, a) {
                    if (!(t >= a)) {
                        e[t] = 129;
                        var i, o;
                        for (o = t + 1; o < a; o++) i = 149 * (o + 1) % 253 + 1, e[o] = (129 + i) % 254
                    }
                },
                calculSolFactorTable: function(e) {
                    var t, a, i = new Array;
                    for (t = 0; t <= e; t++) i[t] = 1;
                    for (t = 1; t <= e; t++)
                        for (a = t - 1; a >= 0; a--) i[a] = this.champGaloisDoub(i[a], t), a > 0 && (i[a] = this.champGaloisSum(i[a], i[a - 1]));
                    return i
                },
                addReedSolomonCW: function(e, t, a, i, o) {
                    var r, n, s, l = 0,
                        d = e / o,
                        c = new Array;
                    for (s = 0; s < o; s++) {
                        for (r = 0; r < d; r++) c[r] = 0;
                        for (r = s; r < a; r += o)
                            for (l = this.champGaloisSum(i[r], c[d - 1]), n = d - 1; n >= 0; n--) c[n] = l ? this.champGaloisMult(l, t[n]) : 0, n > 0 && (c[n] = this.champGaloisSum(c[n - 1], c[n]));
                        for (n = a + s, r = d - 1; r >= 0; r--) i[n] = c[r], n += o
                    }
                    return i
                },
                getBits: function(e) {
                    for (var t = new Array, a = 0; a < 8; a++) t[a] = e & 128 >> a ? 1 : 0;
                    return t
                },
                next: function(e, t, a, i, o, r) {
                    var n = 0,
                        s = 4,
                        l = 0;
                    do {
                        s == t && 0 == l ? (this.patternShapeSpecial1(o, r, i[n], t, a), n++) : e < 3 && s == t - 2 && 0 == l && a % 4 != 0 ? (this.patternShapeSpecial2(o, r, i[n], t, a), n++) : s == t - 2 && 0 == l && a % 8 == 4 ? (this.patternShapeSpecial3(o, r, i[n], t, a), n++) : s == t + 4 && 2 == l && a % 8 == 0 && (this.patternShapeSpecial4(o, r, i[n], t, a), n++);
                        do {
                            s < t && l >= 0 && 1 != r[s][l] && (this.patternShapeStandard(o, r, i[n], s, l, t, a), n++), s -= 2, l += 2
                        } while (s >= 0 && l < a);
                        s += 1, l += 3;
                        do {
                            s >= 0 && l < a && 1 != r[s][l] && (this.patternShapeStandard(o, r, i[n], s, l, t, a), n++), s += 2, l -= 2
                        } while (s < t && l >= 0);
                        s += 3, l += 1
                    } while (s < t || l < a)
                },
                patternShapeStandard: function(e, t, a, i, o, r, n) {
                    this.placeBitInDatamatrix(e, t, a[0], i - 2, o - 2, r, n), this.placeBitInDatamatrix(e, t, a[1], i - 2, o - 1, r, n), this.placeBitInDatamatrix(e, t, a[2], i - 1, o - 2, r, n), this.placeBitInDatamatrix(e, t, a[3], i - 1, o - 1, r, n), this.placeBitInDatamatrix(e, t, a[4], i - 1, o, r, n), this.placeBitInDatamatrix(e, t, a[5], i, o - 2, r, n), this.placeBitInDatamatrix(e, t, a[6], i, o - 1, r, n), this.placeBitInDatamatrix(e, t, a[7], i, o, r, n)
                },
                patternShapeSpecial1: function(e, t, a, i, o) {
                    this.placeBitInDatamatrix(e, t, a[0], i - 1, 0, i, o), this.placeBitInDatamatrix(e, t, a[1], i - 1, 1, i, o), this.placeBitInDatamatrix(e, t, a[2], i - 1, 2, i, o), this.placeBitInDatamatrix(e, t, a[3], 0, o - 2, i, o), this.placeBitInDatamatrix(e, t, a[4], 0, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[5], 1, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[6], 2, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[7], 3, o - 1, i, o)
                },
                patternShapeSpecial2: function(e, t, a, i, o) {
                    this.placeBitInDatamatrix(e, t, a[0], i - 3, 0, i, o), this.placeBitInDatamatrix(e, t, a[1], i - 2, 0, i, o), this.placeBitInDatamatrix(e, t, a[2], i - 1, 0, i, o), this.placeBitInDatamatrix(e, t, a[3], 0, o - 4, i, o), this.placeBitInDatamatrix(e, t, a[4], 0, o - 3, i, o), this.placeBitInDatamatrix(e, t, a[5], 0, o - 2, i, o), this.placeBitInDatamatrix(e, t, a[6], 0, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[7], 1, o - 1, i, o)
                },
                patternShapeSpecial3: function(e, t, a, i, o) {
                    this.placeBitInDatamatrix(e, t, a[0], i - 3, 0, i, o), this.placeBitInDatamatrix(e, t, a[1], i - 2, 0, i, o), this.placeBitInDatamatrix(e, t, a[2], i - 1, 0, i, o), this.placeBitInDatamatrix(e, t, a[3], 0, o - 2, i, o), this.placeBitInDatamatrix(e, t, a[4], 0, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[5], 1, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[6], 2, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[7], 3, o - 1, i, o)
                },
                patternShapeSpecial4: function(e, t, a, i, o) {
                    this.placeBitInDatamatrix(e, t, a[0], i - 1, 0, i, o), this.placeBitInDatamatrix(e, t, a[1], i - 1, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[2], 0, o - 3, i, o), this.placeBitInDatamatrix(e, t, a[3], 0, o - 2, i, o), this.placeBitInDatamatrix(e, t, a[4], 0, o - 1, i, o), this.placeBitInDatamatrix(e, t, a[5], 1, o - 3, i, o), this.placeBitInDatamatrix(e, t, a[6], 1, o - 2, i, o), this.placeBitInDatamatrix(e, t, a[7], 1, o - 1, i, o)
                },
                placeBitInDatamatrix: function(e, t, a, i, o, r, n) {
                    i < 0 && (i += r, o += 4 - (r + 4) % 8), o < 0 && (o += n, i += 4 - (n + 4) % 8), 1 != t[i][o] && (e[i][o] = a, t[i][o] = 1)
                },
                addFinderPattern: function(e, t, a, i, o) {
                    var r = (i + 2) * t,
                        n = (o + 2) * a,
                        s = new Array;
                    s[0] = new Array;
                    for (var l = 0; l < n + 2; l++) s[0][l] = 0;
                    for (var d = 0; d < r; d++) {
                        s[d + 1] = new Array, s[d + 1][0] = 0, s[d + 1][n + 1] = 0;
                        for (var l = 0; l < n; l++) d % (i + 2) == 0 ? s[d + 1][l + 1] = l % 2 == 0 ? 1 : 0 : d % (i + 2) == i + 1 ? s[d + 1][l + 1] = 1 : l % (o + 2) == o + 1 ? s[d + 1][l + 1] = d % 2 == 0 ? 0 : 1 : l % (o + 2) == 0 ? s[d + 1][l + 1] = 1 : (s[d + 1][l + 1] = 0, s[d + 1][l + 1] = e[d - 1 - 2 * parseInt(d / (i + 2))][l - 1 - 2 * parseInt(l / (o + 2))])
                    }
                    s[r + 1] = new Array;
                    for (var l = 0; l < n + 2; l++) s[r + 1][l] = 0;
                    return s
                },
                getDigit: function(e, t) {
                    var a = this.encodeDataCodeWordsASCII(e),
                        i = a.length,
                        o = this.selectIndex(i, t),
                        r = this.dataCWCount[o],
                        n = this.solomonCWCount[o],
                        s = r + n,
                        l = this.lengthRows[o],
                        d = this.lengthCols[o],
                        c = this.regionRows[o],
                        u = this.regionCols[o],
                        p = this.dataRegionRows[o],
                        h = this.dataRegionCols[o],
                        m = l - 2 * c,
                        f = d - 2 * u,
                        g = this.interleavedBlocks[o],
                        v = n / g;
                    this.addPadCW(a, i, r);
                    var y = this.calculSolFactorTable(v);
                    this.addReedSolomonCW(n, y, r, a, g);
                    for (var b = new Array, $ = 0; $ < s; $++) b[$] = this.getBits(a[$]);
                    for (var C = new Array, k = new Array, $ = 0; $ < f; $++) C[$] = new Array, k[$] = new Array;
                    return m * f % 8 == 4 && (C[m - 2][f - 2] = 1, C[m - 1][f - 1] = 1, C[m - 1][f - 2] = 0, C[m - 2][f - 1] = 0, k[m - 2][f - 2] = 1, k[m - 1][f - 1] = 1, k[m - 1][f - 2] = 1, k[m - 2][f - 1] = 1), this.next(0, m, f, b, C, k), C = this.addFinderPattern(C, c, u, p, h)
                }
            },
            lec: {
                cInt: function(e, t) {
                    for (var a = "", i = 0; i < t; i++) a += String.fromCharCode(255 & e), e >>= 8;
                    return a
                },
                cRgb: function(e, t, a) {
                    return String.fromCharCode(a) + String.fromCharCode(t) + String.fromCharCode(e)
                },
                cHexColor: function(e) {
                    var t = parseInt("0x" + e.substr(1)),
                        a = 255 & t;
                    t >>= 8;
                    var i = 255 & t,
                        o = t >> 8;
                    return this.cRgb(o, i, a)
                }
            },
            hexToRGB: function(e) {
                var t = parseInt("0x" + e.substr(1)),
                    a = 255 & t;
                return t >>= 8, {
                    r: t >> 8,
                    g: 255 & t,
                    b: a
                }
            },
            isHexColor: function(e) {
                var t = new RegExp("#[0-91-F]", "gi");
                return e.match(t)
            },
            base64Encode: function(e) {
                for (var t, a, i, o, r, n, s, l = "", d = "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=", c = 0; c < e.length;) t = e.charCodeAt(c++), a = e.charCodeAt(c++), i = e.charCodeAt(c++), o = t >> 2, r = (3 & t) << 4 | a >> 4, n = (15 & a) << 2 | i >> 6, s = 63 & i, isNaN(a) ? n = s = 64 : isNaN(i) && (s = 64), l += d.charAt(o) + d.charAt(r) + d.charAt(n) + d.charAt(s);
                return l
            },
            bitStringTo2DArray: function(e) {
                var t = [];
                t[0] = [];
                for (var a = 0; a < e.length; a++) t[0][a] = e.charAt(a);
                return t
            },
            resize: function(e, t) {
                return e.css("padding", "0px").css("overflow", "auto").css("width", t + "px").html(""), e
            },
            digitToBmpRenderer: function(e, t, a, i, o, r) {
                var n = a.length,
                    s = a[0].length,
                    l = 0,
                    d = this.isHexColor(t.bgColor) ? this.lec.cHexColor(t.bgColor) : this.lec.cRgb(255, 255, 255),
                    c = this.isHexColor(t.color) ? this.lec.cHexColor(t.color) : this.lec.cRgb(0, 0, 0),
                    u = "",
                    p = "";
                for (l = 0; l < o; l++) u += d, p += c;
                var h = (4 - o * s * 3 % 4) % 4,
                    m = (o * s + h) * r * n,
                    f = "";
                for (l = 0; l < h; l++) f += "\0";
                for (var g = "BM" + this.lec.cInt(54 + m, 4) + "\0\0\0\0" + this.lec.cInt(54, 4) + this.lec.cInt(40, 4) + this.lec.cInt(o * s, 4) + this.lec.cInt(r * n, 4) + this.lec.cInt(1, 2) + this.lec.cInt(24, 2) + "\0\0\0\0" + this.lec.cInt(m, 4) + this.lec.cInt(2835, 4) + this.lec.cInt(2835, 4) + this.lec.cInt(0, 4) + this.lec.cInt(0, 4), v = n - 1; v >= 0; v--) {
                    for (var y = "", b = 0; b < s; b++) y += "0" == a[v][b] ? u : p;
                    y += f;
                    for (var $ = 0; $ < r; $++) g += y
                }
                var C = document.createElement("object");
                C.setAttribute("type", "image/bmp"), C.setAttribute("data", "data:image/bmp;base64," + this.base64Encode(g)), this.resize(e, o * s + h).append(C)
            },
            digitToBmp: function(e, a, i, o) {
                var r = t.intval(a.barWidth),
                    n = t.intval(a.barHeight);
                this.digitToBmpRenderer(e, a, this.bitStringTo2DArray(i), o, r, n)
            },
            digitToBmp2D: function(e, a, i, o) {
                var r = t.intval(a.moduleSize);
                this.digitToBmpRenderer(e, a, i, o, r, r)
            },
            digitToCssRenderer: function(e, t, a, i, o, r) {
                for (var n, s, l = a.length, d = a[0].length, c = "", u = '<div style="float: left; font-size: 0px; background-color: ' + t.bgColor + "; height: " + r + 'px; width: &Wpx"></div>', p = '<div style="float: left; font-size: 0px; width:0; border-left: &Wpx solid ' + t.color + "; height: " + r + 'px;"></div>', h = 0; h < l; h++) {
                    n = 0, s = a[h][0];
                    for (var m = 0; m < d; m++) s == a[h][m] ? n++ : (c += ("0" == s ? u : p).replace("&W", n * o), s = a[h][m], n = 1);
                    n > 0 && (c += ("0" == s ? u : p).replace("&W", n * o))
                }
                t.showHRI && (c += '<div style="clear:both; width: 100%; background-color: ' + t.bgColor + "; color: " + t.color + "; text-align: center; font-size: " + t.fontSize + "px; margin-top: " + t.marginHRI + 'px;">' + i + "</div>"), this.resize(e, o * d).html(c)
            },
            digitToCss: function(e, a, i, o) {
                var r = t.intval(a.barWidth),
                    n = t.intval(a.barHeight);
                this.digitToCssRenderer(e, a, this.bitStringTo2DArray(i), o, r, n)
            },
            digitToCss2D: function(e, a, i, o) {
                var r = t.intval(a.moduleSize);
                this.digitToCssRenderer(e, a, i, o, r, r)
            },
            digitToSvgRenderer: function(e, a, i, o, r, n) {
                var s = i.length,
                    l = i[0].length,
                    d = r * l,
                    c = n * s;
                if (a.showHRI) {
                    var u = t.intval(a.fontSize);
                    c += t.intval(a.marginHRI) + u
                }
                var p = '<svg xmlns="http://www.w3.org/2000/svg" version="1.1" width="' + d + '" height="' + c + '">';
                p += '<rect width="' + d + '" height="' + c + '" x="0" y="0" fill="' + a.bgColor + '" />';
                for (var h, m, f = '<rect width="&W" height="' + n + '" x="&X" y="&Y" fill="' + a.color + '" />', g = 0; g < s; g++) {
                    h = 0, m = i[g][0];
                    for (var v = 0; v < l; v++) m == i[g][v] ? h++ : ("1" == m && (p += f.replace("&W", h * r).replace("&X", (v - h) * r).replace("&Y", g * n)), m = i[g][v], h = 1);
                    h > 0 && "1" == m && (p += f.replace("&W", h * r).replace("&X", (l - h) * r).replace("&Y", g * n))
                }
                a.showHRI && (p += '<g transform="translate(' + Math.floor(d / 2) + ' 0)">', p += '<text y="' + (c - Math.floor(u / 2)) + '" text-anchor="middle" style="font-family: Arial; font-size: ' + u + 'px;" fill="' + a.color + '">' + o + "</text>", p += "</g>"), p += "</svg>";
                var y = document.createElement("object");
                y.setAttribute("type", "image/svg+xml"), y.setAttribute("data", "data:image/svg+xml," + p), this.resize(e, d).append(y)
            },
            digitToSvg: function(e, a, i, o) {
                var r = t.intval(a.barWidth),
                    n = t.intval(a.barHeight);
                this.digitToSvgRenderer(e, a, this.bitStringTo2DArray(i), o, r, n)
            },
            digitToSvg2D: function(e, a, i, o) {
                var r = t.intval(a.moduleSize);
                this.digitToSvgRenderer(e, a, i, o, r, r)
            },
            digitToCanvasRenderer: function(e, t, a, i, o, r, n, s) {
                var l = e.get(0);
                if (l && l.getContext) {
                    var d = a.length,
                        c = a[0].length,
                        u = l.getContext("2d");
                    u.lineWidth = 1, u.lineCap = "butt", u.fillStyle = t.bgColor, u.fillRect(o, r, c * n, d * s), u.fillStyle = t.color;
                    for (var p = 0; p < d; p++) {
                        for (var h = 0, m = a[p][0], f = 0; f < c; f++) m == a[p][f] ? h++ : ("1" == m && u.fillRect(o + (f - h) * n, r + p * s, n * h, s), m = a[p][f], h = 1);
                        h > 0 && "1" == m && u.fillRect(o + (c - h) * n, r + p * s, n * h, s)
                    }
                    if (t.showHRI) {
                        var g = u.measureText(i);
                        u.fillText(i, o + Math.floor((c * n - g.width) / 2), r + d * s + t.fontSize + t.marginHRI)
                    }
                }
            },
            digitToCanvas: function(e, a, i, o) {
                var r = t.intval(a.barWidth),
                    n = t.intval(a.barHeight),
                    s = t.intval(a.posX),
                    l = t.intval(a.posY);
                this.digitToCanvasRenderer(e, a, this.bitStringTo2DArray(i), o, s, l, r, n)
            },
            digitToCanvas2D: function(e, a, i, o) {
                var r = t.intval(a.moduleSize),
                    n = t.intval(a.posX),
                    s = t.intval(a.posY);
                this.digitToCanvasRenderer(e, a, i, o, n, s, r, r)
            }
        };
        e.fn.extend({
            barcode: function(a, i, o) {
                var r = "",
                    n = "",
                    s = "",
                    l = !0,
                    d = !1,
                    c = !1;
                if ("string" == typeof a ? s = a : "object" == typeof a && (s = "string" == typeof a.code ? a.code : "", l = void 0 === a.crc || a.crc, d = void 0 !== a.rect && a.rect), "" == s) return !1;
                void 0 === o && (o = []);
                for (var u in t.settings) void 0 == o[u] && (o[u] = t.settings[u]);
                switch (i) {
                    case "std25":
                    case "int25":
                        r = t.i25.getDigit(s, l, i), n = t.i25.compute(s, l, i);
                        break;
                    case "ean8":
                    case "ean13":
                        r = t.ean.getDigit(s, i), n = t.ean.compute(s, i);
                        break;
                    case "upc":
                        r = t.upc.getDigit(s), n = t.upc.compute(s);
                        break;
                    case "code11":
                        r = t.code11.getDigit(s), n = s;
                        break;
                    case "code39":
                        r = t.code39.getDigit(s), n = s;
                        break;
                    case "code93":
                        r = t.code93.getDigit(s, l), n = s;
                        break;
                    case "code128":
                        r = t.code128.getDigit(s), n = s;
                        break;
                    case "codabar":
                        r = t.codabar.getDigit(s), n = s;
                        break;
                    case "msi":
                        r = t.msi.getDigit(s, l), n = t.msi.compute(s, l);
                        break;
                    case "datamatrix":
                        r = t.datamatrix.getDigit(s, d), n = s, c = !0
                }
                if (0 == r.length) return e(this);
                !c && o.addQuietZone && (r = "0000000000" + r + "0000000000");
                var p = e(this),
                    h = "digitTo" + o.output.charAt(0).toUpperCase() + o.output.substr(1) + (c ? "2D" : "");
                return "function" == typeof t[h] && t[h](p, o, r, n), p
            }
        })
    }(jQuery),
    function(e) {
        e.fn.qrcode = function(t) {
            function a(e) {
                this.mode = s, this.data = e
            }

            function i(e, t) {
                this.typeNumber = e, this.errorCorrectLevel = t, this.modules = null, this.moduleCount = 0, this.dataCache = null, this.dataList = []
            }

            function o(e, t) {
                if (void 0 == e.length) throw Error(e.length + "/" + t);
                for (var a = 0; a < e.length && 0 == e[a];) a++;
                this.num = Array(e.length - a + t);
                for (var i = 0; i < e.length - a; i++) this.num[i] = e[i + a]
            }

            function r(e, t) {
                this.totalCount = e, this.dataCount = t
            }

            function n() {
                this.buffer = [], this.length = 0
            }
            var s;
            a.prototype = {
                getLength: function() {
                    return this.data.length
                },
                write: function(e) {
                    for (var t = 0; t < this.data.length; t++) e.put(this.data.charCodeAt(t), 8)
                }
            }, i.prototype = {
                addData: function(e) {
                    this.dataList.push(new a(e)), this.dataCache = null
                },
                isDark: function(e, t) {
                    if (0 > e || this.moduleCount <= e || 0 > t || this.moduleCount <= t) throw Error(e + "," + t);
                    return this.modules[e][t]
                },
                getModuleCount: function() {
                    return this.moduleCount
                },
                make: function() {
                    if (1 > this.typeNumber) {
                        for (var e = 1, e = 1; 40 > e; e++) {
                            for (var t = r.getRSBlocks(e, this.errorCorrectLevel), a = new n, i = 0, o = 0; o < t.length; o++) i += t[o].dataCount;
                            for (o = 0; o < this.dataList.length; o++) t = this.dataList[o], a.put(t.mode, 4), a.put(t.getLength(), l.getLengthInBits(t.mode, e)), t.write(a);
                            if (a.getLengthInBits() <= 8 * i) break
                        }
                        this.typeNumber = e
                    }
                    this.makeImpl(!1, this.getBestMaskPattern())
                },
                makeImpl: function(e, t) {
                    this.moduleCount = 4 * this.typeNumber + 17, this.modules = Array(this.moduleCount);
                    for (var a = 0; a < this.moduleCount; a++) {
                        this.modules[a] = Array(this.moduleCount);
                        for (var o = 0; o < this.moduleCount; o++) this.modules[a][o] = null
                    }
                    this.setupPositionProbePattern(0, 0), this.setupPositionProbePattern(this.moduleCount - 7, 0), this.setupPositionProbePattern(0, this.moduleCount - 7), this.setupPositionAdjustPattern(), this.setupTimingPattern(), this.setupTypeInfo(e, t), 7 <= this.typeNumber && this.setupTypeNumber(e), null == this.dataCache && (this.dataCache = i.createData(this.typeNumber, this.errorCorrectLevel, this.dataList)), this.mapData(this.dataCache, t)
                },
                setupPositionProbePattern: function(e, t) {
                    for (var a = -1; 7 >= a; a++)
                        if (!(-1 >= e + a || this.moduleCount <= e + a))
                            for (var i = -1; 7 >= i; i++) - 1 >= t + i || this.moduleCount <= t + i || (this.modules[e + a][t + i] = 0 <= a && 6 >= a && (0 == i || 6 == i) || 0 <= i && 6 >= i && (0 == a || 6 == a) || 2 <= a && 4 >= a && 2 <= i && 4 >= i)
                },
                getBestMaskPattern: function() {
                    for (var e = 0, t = 0, a = 0; 8 > a; a++) {
                        this.makeImpl(!0, a);
                        var i = l.getLostPoint(this);
                        (0 == a || e > i) && (e = i, t = a)
                    }
                    return t
                },
                createMovieClip: function(e, t, a) {
                    for (e = e.createEmptyMovieClip(t, a), this.make(), t = 0; t < this.modules.length; t++)
                        for (var a = 1 * t, i = 0; i < this.modules[t].length; i++) {
                            var o = 1 * i;
                            this.modules[t][i] && (e.beginFill(0, 100), e.moveTo(o, a), e.lineTo(o + 1, a), e.lineTo(o + 1, a + 1), e.lineTo(o, a + 1), e.endFill())
                        }
                    return e
                },
                setupTimingPattern: function() {
                    for (var e = 8; e < this.moduleCount - 8; e++) null == this.modules[e][6] && (this.modules[e][6] = 0 == e % 2);
                    for (e = 8; e < this.moduleCount - 8; e++) null == this.modules[6][e] && (this.modules[6][e] = 0 == e % 2)
                },
                setupPositionAdjustPattern: function() {
                    for (var e = l.getPatternPosition(this.typeNumber), t = 0; t < e.length; t++)
                        for (var a = 0; a < e.length; a++) {
                            var i = e[t],
                                o = e[a];
                            if (null == this.modules[i][o])
                                for (var r = -2; 2 >= r; r++)
                                    for (var n = -2; 2 >= n; n++) this.modules[i + r][o + n] = -2 == r || 2 == r || -2 == n || 2 == n || 0 == r && 0 == n
                        }
                },
                setupTypeNumber: function(e) {
                    for (var t = l.getBCHTypeNumber(this.typeNumber), a = 0; 18 > a; a++) {
                        var i = !e && 1 == (t >> a & 1);
                        this.modules[Math.floor(a / 3)][a % 3 + this.moduleCount - 8 - 3] = i
                    }
                    for (a = 0; 18 > a; a++) i = !e && 1 == (t >> a & 1), this.modules[a % 3 + this.moduleCount - 8 - 3][Math.floor(a / 3)] = i
                },
                setupTypeInfo: function(e, t) {
                    for (var a = l.getBCHTypeInfo(this.errorCorrectLevel << 3 | t), i = 0; 15 > i; i++) {
                        var o = !e && 1 == (a >> i & 1);
                        6 > i ? this.modules[i][8] = o : 8 > i ? this.modules[i + 1][8] = o : this.modules[this.moduleCount - 15 + i][8] = o
                    }
                    for (i = 0; 15 > i; i++) o = !e && 1 == (a >> i & 1), 8 > i ? this.modules[8][this.moduleCount - i - 1] = o : 9 > i ? this.modules[8][15 - i - 1 + 1] = o : this.modules[8][15 - i - 1] = o;
                    this.modules[this.moduleCount - 8][8] = !e
                },
                mapData: function(e, t) {
                    for (var a = -1, i = this.moduleCount - 1, o = 7, r = 0, n = this.moduleCount - 1; 0 < n; n -= 2)
                        for (6 == n && n--;;) {
                            for (var s = 0; 2 > s; s++)
                                if (null == this.modules[i][n - s]) {
                                    var d = !1;
                                    r < e.length && (d = 1 == (e[r] >>> o & 1)), l.getMask(t, i, n - s) && (d = !d), this.modules[i][n - s] = d, -1 == --o && (r++, o = 7)
                                } if (0 > (i += a) || this.moduleCount <= i) {
                                i -= a, a = -a;
                                break
                            }
                        }
                }
            }, i.PAD0 = 236, i.PAD1 = 17, i.createData = function(e, t, a) {
                for (var t = r.getRSBlocks(e, t), o = new n, s = 0; s < a.length; s++) {
                    var d = a[s];
                    o.put(d.mode, 4), o.put(d.getLength(), l.getLengthInBits(d.mode, e)), d.write(o)
                }
                for (s = e = 0; s < t.length; s++) e += t[s].dataCount;
                if (o.getLengthInBits() > 8 * e) throw Error("code length overflow. (" + o.getLengthInBits() + ">" + 8 * e + ")");
                for (o.getLengthInBits() + 4 <= 8 * e && o.put(0, 4); 0 != o.getLengthInBits() % 8;) o.putBit(!1);
                for (; !(o.getLengthInBits() >= 8 * e || (o.put(i.PAD0, 8), o.getLengthInBits() >= 8 * e));) o.put(i.PAD1, 8);
                return i.createBytes(o, t)
            }, i.createBytes = function(e, t) {
                for (var a = 0, i = 0, r = 0, n = Array(t.length), s = Array(t.length), d = 0; d < t.length; d++) {
                    var c = t[d].dataCount,
                        u = t[d].totalCount - c,
                        i = Math.max(i, c),
                        r = Math.max(r, u);
                    n[d] = Array(c);
                    for (var p = 0; p < n[d].length; p++) n[d][p] = 255 & e.buffer[p + a];
                    for (a += c, p = l.getErrorCorrectPolynomial(u), c = new o(n[d], p.getLength() - 1).mod(p), s[d] = Array(p.getLength() - 1), p = 0; p < s[d].length; p++) u = p + c.getLength() - s[d].length, s[d][p] = 0 <= u ? c.get(u) : 0
                }
                for (p = d = 0; p < t.length; p++) d += t[p].totalCount;
                for (a = Array(d), p = c = 0; p < i; p++)
                    for (d = 0; d < t.length; d++) p < n[d].length && (a[c++] = n[d][p]);
                for (p = 0; p < r; p++)
                    for (d = 0; d < t.length; d++) p < s[d].length && (a[c++] = s[d][p]);
                return a
            }, s = 4;
            for (var l = {
                    PATTERN_POSITION_TABLE: [
                        [],
                        [6, 18],
                        [6, 22],
                        [6, 26],
                        [6, 30],
                        [6, 34],
                        [6, 22, 38],
                        [6, 24, 42],
                        [6, 26, 46],
                        [6, 28, 50],
                        [6, 30, 54],
                        [6, 32, 58],
                        [6, 34, 62],
                        [6, 26, 46, 66],
                        [6, 26, 48, 70],
                        [6, 26, 50, 74],
                        [6, 30, 54, 78],
                        [6, 30, 56, 82],
                        [6, 30, 58, 86],
                        [6, 34, 62, 90],
                        [6, 28, 50, 72, 94],
                        [6, 26, 50, 74, 98],
                        [6, 30, 54, 78, 102],
                        [6, 28, 54, 80, 106],
                        [6, 32, 58, 84, 110],
                        [6, 30, 58, 86, 114],
                        [6, 34, 62, 90, 118],
                        [6, 26, 50, 74, 98, 122],
                        [6, 30, 54, 78, 102, 126],
                        [6, 26, 52, 78, 104, 130],
                        [6, 30, 56, 82, 108, 134],
                        [6, 34, 60, 86, 112, 138],
                        [6, 30, 58, 86, 114, 142],
                        [6, 34, 62, 90, 118, 146],
                        [6, 30, 54, 78, 102, 126, 150],
                        [6, 24, 50, 76, 102, 128, 154],
                        [6, 28, 54, 80, 106, 132, 158],
                        [6, 32, 58, 84, 110, 136, 162],
                        [6, 26, 54, 82, 110, 138, 166],
                        [6, 30, 58, 86, 114, 142, 170]
                    ],
                    G15: 1335,
                    G18: 7973,
                    G15_MASK: 21522,
                    getBCHTypeInfo: function(e) {
                        for (var t = e << 10; 0 <= l.getBCHDigit(t) - l.getBCHDigit(l.G15);) t ^= l.G15 << l.getBCHDigit(t) - l.getBCHDigit(l.G15);
                        return (e << 10 | t) ^ l.G15_MASK
                    },
                    getBCHTypeNumber: function(e) {
                        for (var t = e << 12; 0 <= l.getBCHDigit(t) - l.getBCHDigit(l.G18);) t ^= l.G18 << l.getBCHDigit(t) - l.getBCHDigit(l.G18);
                        return e << 12 | t
                    },
                    getBCHDigit: function(e) {
                        for (var t = 0; 0 != e;) t++, e >>>= 1;
                        return t
                    },
                    getPatternPosition: function(e) {
                        return l.PATTERN_POSITION_TABLE[e - 1]
                    },
                    getMask: function(e, t, a) {
                        switch (e) {
                            case 0:
                                return 0 == (t + a) % 2;
                            case 1:
                                return 0 == t % 2;
                            case 2:
                                return 0 == a % 3;
                            case 3:
                                return 0 == (t + a) % 3;
                            case 4:
                                return 0 == (Math.floor(t / 2) + Math.floor(a / 3)) % 2;
                            case 5:
                                return 0 == t * a % 2 + t * a % 3;
                            case 6:
                                return 0 == (t * a % 2 + t * a % 3) % 2;
                            case 7:
                                return 0 == (t * a % 3 + (t + a) % 2) % 2;
                            default:
                                throw Error("bad maskPattern:" + e)
                        }
                    },
                    getErrorCorrectPolynomial: function(e) {
                        for (var t = new o([1], 0), a = 0; a < e; a++) t = t.multiply(new o([1, d.gexp(a)], 0));
                        return t
                    },
                    getLengthInBits: function(e, t) {
                        if (1 <= t && 10 > t) switch (e) {
                            case 1:
                                return 10;
                            case 2:
                                return 9;
                            case s:
                            case 8:
                                return 8;
                            default:
                                throw Error("mode:" + e)
                        } else if (27 > t) switch (e) {
                            case 1:
                                return 12;
                            case 2:
                                return 11;
                            case s:
                                return 16;
                            case 8:
                                return 10;
                            default:
                                throw Error("mode:" + e)
                        } else {
                            if (!(41 > t)) throw Error("type:" + t);
                            switch (e) {
                                case 1:
                                    return 14;
                                case 2:
                                    return 13;
                                case s:
                                    return 16;
                                case 8:
                                    return 12;
                                default:
                                    throw Error("mode:" + e)
                            }
                        }
                    },
                    getLostPoint: function(e) {
                        for (var t = e.getModuleCount(), a = 0, i = 0; i < t; i++)
                            for (var o = 0; o < t; o++) {
                                for (var r = 0, n = e.isDark(i, o), s = -1; 1 >= s; s++)
                                    if (!(0 > i + s || t <= i + s))
                                        for (var l = -1; 1 >= l; l++) 0 > o + l || t <= o + l || 0 == s && 0 == l || n == e.isDark(i + s, o + l) && r++;
                                5 < r && (a += 3 + r - 5)
                            }
                        for (i = 0; i < t - 1; i++)
                            for (o = 0; o < t - 1; o++) r = 0, e.isDark(i, o) && r++, e.isDark(i + 1, o) && r++, e.isDark(i, o + 1) && r++, e.isDark(i + 1, o + 1) && r++, (0 == r || 4 == r) && (a += 3);
                        for (i = 0; i < t; i++)
                            for (o = 0; o < t - 6; o++) e.isDark(i, o) && !e.isDark(i, o + 1) && e.isDark(i, o + 2) && e.isDark(i, o + 3) && e.isDark(i, o + 4) && !e.isDark(i, o + 5) && e.isDark(i, o + 6) && (a += 40);
                        for (o = 0; o < t; o++)
                            for (i = 0; i < t - 6; i++) e.isDark(i, o) && !e.isDark(i + 1, o) && e.isDark(i + 2, o) && e.isDark(i + 3, o) && e.isDark(i + 4, o) && !e.isDark(i + 5, o) && e.isDark(i + 6, o) && (a += 40);
                        for (o = r = 0; o < t; o++)
                            for (i = 0; i < t; i++) e.isDark(i, o) && r++;
                        return e = Math.abs(100 * r / t / t - 50) / 5, a + 10 * e
                    }
                }, d = {
                    glog: function(e) {
                        if (1 > e) throw Error("glog(" + e + ")");
                        return d.LOG_TABLE[e]
                    },
                    gexp: function(e) {
                        for (; 0 > e;) e += 255;
                        for (; 256 <= e;) e -= 255;
                        return d.EXP_TABLE[e]
                    },
                    EXP_TABLE: Array(256),
                    LOG_TABLE: Array(256)
                }, c = 0; 8 > c; c++) d.EXP_TABLE[c] = 1 << c;
            for (c = 8; 256 > c; c++) d.EXP_TABLE[c] = d.EXP_TABLE[c - 4] ^ d.EXP_TABLE[c - 5] ^ d.EXP_TABLE[c - 6] ^ d.EXP_TABLE[c - 8];
            for (c = 0; 255 > c; c++) d.LOG_TABLE[d.EXP_TABLE[c]] = c;
            return o.prototype = {
                get: function(e) {
                    return this.num[e]
                },
                getLength: function() {
                    return this.num.length
                },
                multiply: function(e) {
                    for (var t = Array(this.getLength() + e.getLength() - 1), a = 0; a < this.getLength(); a++)
                        for (var i = 0; i < e.getLength(); i++) t[a + i] ^= d.gexp(d.glog(this.get(a)) + d.glog(e.get(i)));
                    return new o(t, 0)
                },
                mod: function(e) {
                    if (0 > this.getLength() - e.getLength()) return this;
                    for (var t = d.glog(this.get(0)) - d.glog(e.get(0)), a = Array(this.getLength()), i = 0; i < this.getLength(); i++) a[i] = this.get(i);
                    for (i = 0; i < e.getLength(); i++) a[i] ^= d.gexp(d.glog(e.get(i)) + t);
                    return new o(a, 0).mod(e)
                }
            }, r.RS_BLOCK_TABLE = [
                [1, 26, 19],
                [1, 26, 16],
                [1, 26, 13],
                [1, 26, 9],
                [1, 44, 34],
                [1, 44, 28],
                [1, 44, 22],
                [1, 44, 16],
                [1, 70, 55],
                [1, 70, 44],
                [2, 35, 17],
                [2, 35, 13],
                [1, 100, 80],
                [2, 50, 32],
                [2, 50, 24],
                [4, 25, 9],
                [1, 134, 108],
                [2, 67, 43],
                [2, 33, 15, 2, 34, 16],
                [2, 33, 11, 2, 34, 12],
                [2, 86, 68],
                [4, 43, 27],
                [4, 43, 19],
                [4, 43, 15],
                [2, 98, 78],
                [4, 49, 31],
                [2, 32, 14, 4, 33, 15],
                [4, 39, 13, 1, 40, 14],
                [2, 121, 97],
                [2, 60, 38, 2, 61, 39],
                [4, 40, 18, 2, 41, 19],
                [4, 40, 14, 2, 41, 15],
                [2, 146, 116],
                [3, 58, 36, 2, 59, 37],
                [4, 36, 16, 4, 37, 17],
                [4, 36, 12, 4, 37, 13],
                [2, 86, 68, 2, 87, 69],
                [4, 69, 43, 1, 70, 44],
                [6, 43, 19, 2, 44, 20],
                [6, 43, 15, 2, 44, 16],
                [4, 101, 81],
                [1, 80, 50, 4, 81, 51],
                [4, 50, 22, 4, 51, 23],
                [3, 36, 12, 8, 37, 13],
                [2, 116, 92, 2, 117, 93],
                [6, 58, 36, 2, 59, 37],
                [4, 46, 20, 6, 47, 21],
                [7, 42, 14, 4, 43, 15],
                [4, 133, 107],
                [8, 59, 37, 1, 60, 38],
                [8, 44, 20, 4, 45, 21],
                [12, 33, 11, 4, 34, 12],
                [3, 145, 115, 1, 146, 116],
                [4, 64, 40, 5, 65, 41],
                [11, 36, 16, 5, 37, 17],
                [11, 36, 12, 5, 37, 13],
                [5, 109, 87, 1, 110, 88],
                [5, 65, 41, 5, 66, 42],
                [5, 54, 24, 7, 55, 25],
                [11, 36, 12],
                [5, 122, 98, 1, 123, 99],
                [7, 73, 45, 3, 74, 46],
                [15, 43, 19, 2, 44, 20],
                [3, 45, 15, 13, 46, 16],
                [1, 135, 107, 5, 136, 108],
                [10, 74, 46, 1, 75, 47],
                [1, 50, 22, 15, 51, 23],
                [2, 42, 14, 17, 43, 15],
                [5, 150, 120, 1, 151, 121],
                [9, 69, 43, 4, 70, 44],
                [17, 50, 22, 1, 51, 23],
                [2, 42, 14, 19, 43, 15],
                [3, 141, 113, 4, 142, 114],
                [3, 70, 44, 11, 71, 45],
                [17, 47, 21, 4, 48, 22],
                [9, 39, 13, 16, 40, 14],
                [3, 135, 107, 5, 136, 108],
                [3, 67, 41, 13, 68, 42],
                [15, 54, 24, 5, 55, 25],
                [15, 43, 15, 10, 44, 16],
                [4, 144, 116, 4, 145, 117],
                [17, 68, 42],
                [17, 50, 22, 6, 51, 23],
                [19, 46, 16, 6, 47, 17],
                [2, 139, 111, 7, 140, 112],
                [17, 74, 46],
                [7, 54, 24, 16, 55, 25],
                [34, 37, 13],
                [4, 151, 121, 5, 152, 122],
                [4, 75, 47, 14, 76, 48],
                [11, 54, 24, 14, 55, 25],
                [16, 45, 15, 14, 46, 16],
                [6, 147, 117, 4, 148, 118],
                [6, 73, 45, 14, 74, 46],
                [11, 54, 24, 16, 55, 25],
                [30, 46, 16, 2, 47, 17],
                [8, 132, 106, 4, 133, 107],
                [8, 75, 47, 13, 76, 48],
                [7, 54, 24, 22, 55, 25],
                [22, 45, 15, 13, 46, 16],
                [10, 142, 114, 2, 143, 115],
                [19, 74, 46, 4, 75, 47],
                [28, 50, 22, 6, 51, 23],
                [33, 46, 16, 4, 47, 17],
                [8, 152, 122, 4, 153, 123],
                [22, 73, 45, 3, 74, 46],
                [8, 53, 23, 26, 54, 24],
                [12, 45, 15, 28, 46, 16],
                [3, 147, 117, 10, 148, 118],
                [3, 73, 45, 23, 74, 46],
                [4, 54, 24, 31, 55, 25],
                [11, 45, 15, 31, 46, 16],
                [7, 146, 116, 7, 147, 117],
                [21, 73, 45, 7, 74, 46],
                [1, 53, 23, 37, 54, 24],
                [19, 45, 15, 26, 46, 16],
                [5, 145, 115, 10, 146, 116],
                [19, 75, 47, 10, 76, 48],
                [15, 54, 24, 25, 55, 25],
                [23, 45, 15, 25, 46, 16],
                [13, 145, 115, 3, 146, 116],
                [2, 74, 46, 29, 75, 47],
                [42, 54, 24, 1, 55, 25],
                [23, 45, 15, 28, 46, 16],
                [17, 145, 115],
                [10, 74, 46, 23, 75, 47],
                [10, 54, 24, 35, 55, 25],
                [19, 45, 15, 35, 46, 16],
                [17, 145, 115, 1, 146, 116],
                [14, 74, 46, 21, 75, 47],
                [29, 54, 24, 19, 55, 25],
                [11, 45, 15, 46, 46, 16],
                [13, 145, 115, 6, 146, 116],
                [14, 74, 46, 23, 75, 47],
                [44, 54, 24, 7, 55, 25],
                [59, 46, 16, 1, 47, 17],
                [12, 151, 121, 7, 152, 122],
                [12, 75, 47, 26, 76, 48],
                [39, 54, 24, 14, 55, 25],
                [22, 45, 15, 41, 46, 16],
                [6, 151, 121, 14, 152, 122],
                [6, 75, 47, 34, 76, 48],
                [46, 54, 24, 10, 55, 25],
                [2, 45, 15, 64, 46, 16],
                [17, 152, 122, 4, 153, 123],
                [29, 74, 46, 14, 75, 47],
                [49, 54, 24, 10, 55, 25],
                [24, 45, 15, 46, 46, 16],
                [4, 152, 122, 18, 153, 123],
                [13, 74, 46, 32, 75, 47],
                [48, 54, 24, 14, 55, 25],
                [42, 45, 15, 32, 46, 16],
                [20, 147, 117, 4, 148, 118],
                [40, 75, 47, 7, 76, 48],
                [43, 54, 24, 22, 55, 25],
                [10, 45, 15, 67, 46, 16],
                [19, 148, 118, 6, 149, 119],
                [18, 75, 47, 31, 76, 48],
                [34, 54, 24, 34, 55, 25],
                [20, 45, 15, 61, 46, 16]
            ], r.getRSBlocks = function(e, t) {
                var a = r.getRsBlockTable(e, t);
                if (void 0 == a) throw Error("bad rs block @ typeNumber:" + e + "/errorCorrectLevel:" + t);
                for (var i = a.length / 3, o = [], n = 0; n < i; n++)
                    for (var s = a[3 * n + 0], l = a[3 * n + 1], d = a[3 * n + 2], c = 0; c < s; c++) o.push(new r(l, d));
                return o
            }, r.getRsBlockTable = function(e, t) {
                switch (t) {
                    case 1:
                        return r.RS_BLOCK_TABLE[4 * (e - 1) + 0];
                    case 0:
                        return r.RS_BLOCK_TABLE[4 * (e - 1) + 1];
                    case 3:
                        return r.RS_BLOCK_TABLE[4 * (e - 1) + 2];
                    case 2:
                        return r.RS_BLOCK_TABLE[4 * (e - 1) + 3]
                }
            }, n.prototype = {
                get: function(e) {
                    return 1 == (this.buffer[Math.floor(e / 8)] >>> 7 - e % 8 & 1)
                },
                put: function(e, t) {
                    for (var a = 0; a < t; a++) this.putBit(1 == (e >>> t - a - 1 & 1))
                },
                getLengthInBits: function() {
                    return this.length
                },
                putBit: function(e) {
                    var t = Math.floor(this.length / 8);
                    this.buffer.length <= t && this.buffer.push(0), e && (this.buffer[t] |= 128 >>> this.length % 8), this.length++
                }
            }, "string" == typeof t && (t = {
                text: t
            }), t = e.extend({}, {
                render: "canvas",
                width: 256,
                height: 256,
                typeNumber: -1,
                correctLevel: 2,
                background: "#ffffff",
                foreground: "#000000"
            }, t), this.each(function() {
                var a;
                if ("canvas" == t.render) {
                    a = new i(t.typeNumber, t.correctLevel), a.addData(t.text), a.make();
                    var o = document.createElement("canvas");
                    o.width = t.width, o.height = t.height;
                    for (var r = o.getContext("2d"), n = t.width / a.getModuleCount(), s = t.height / a.getModuleCount(), l = 0; l < a.getModuleCount(); l++)
                        for (var d = 0; d < a.getModuleCount(); d++) {
                            r.fillStyle = a.isDark(l, d) ? t.foreground : t.background;
                            var c = Math.ceil((d + 1) * n) - Math.floor(d * n),
                                u = Math.ceil((l + 1) * n) - Math.floor(l * n);
                            r.fillRect(Math.round(d * n), Math.round(l * s), c, u)
                        }
                } else
                    for (a = new i(t.typeNumber, t.correctLevel), a.addData(t.text), a.make(), o = e("<table></table>").css("width", t.width + "px").css("height", t.height + "px").css("border", "0px").css("border-collapse", "collapse").css("background-color", t.background), r = t.width / a.getModuleCount(), n = t.height / a.getModuleCount(), s = 0; s < a.getModuleCount(); s++)
                        for (l = e("<tr></tr>").css("height", n + "px").appendTo(o), d = 0; d < a.getModuleCount(); d++) e("<td></td>").css("width", r + "px").css("background-color", a.isDark(s, d) ? t.foreground : t.background).appendTo(l);
                a = o, jQuery(a).appendTo(this)
            })
        }
    }(jQuery), window.FL = window.FL || {}, FL.recommendation = FL.recommendation || {}, FL.recommendation = jQuery.extend(!0, {
        $cartridge: null,
        sliderOptions: {},
        sliderIdIndex: 1,
        largeDisplay: "",
        lg_slidesToScroll: 4,
        md_slidesToScroll: 3,
        showRecommendationsFlag: !0,
        isJD: !1,
        init: function(e) {
            FL.recommendation.isJD = $("body.jdsports-page").length > 0, FL.recommendation.$cartridge = e, $(function() {
                FL.recommendation.sentTrackingData()
            })
        },
        sentTrackingData: function() {
            var e = FL.recommendation.$cartridge.find(".recommendation-params"),
                t = (FL.recommendation.$cartridge.find(".recommended-products"), e.find(".scheme").val()),
                a = e.find(".pageType").val();
            FL.recommendation.largeDisplay = e.find(".largeDisplay").val(), FL.recommendation.showRecommendationsFlag = e.find(".showRecommendationsFlag").val();
            var i = e.find(".itemid").val(),
                o = (e.find(".customerid").val(), e.find(".customeremail").val()),
                r = e.find(".qty").val(),
                n = e.find(".price").val(),
                s = e.find(".total").val(),
                l = e.find(".transactionid").val();
            "true" == FL.recommendation.showRecommendationsFlag && (FL.recommendation.showRecommendationsFlag = !0), "false" == FL.recommendation.showRecommendationsFlag && (FL.recommendation.showRecommendationsFlag = !1), window.certona = {
                pagetype: a,
                devicetype: FL.recommendation.detectDevice(),
                recommendations: FL.recommendation.showRecommendationsFlag
            }, "categorylanding" == a && (certona.gender = t.replace("landing1_rr", "")), "nosearch" == a && (certona.searchterm = FL.Reflektion.getQueryKeyword()), "product" != a && "cart" != a && "purchase" != a && "quickview" != a || (certona.itemid = i), "cart" != a && "emptycart" != a && "purchase" != a && "account" != a && "favorites" != a || "" != o && (certona.customerid = FL.Reflektion.md5(o)), "purchase" == a && (certona.qty = r, certona.price = n, certona.total = s, certona.transactionid = l), FL.recommendation.setSliderOptions(a, e), FL.recommendation.callCertonaFunction(), 0 == FL.recommendation.showRecommendationsFlag && (FL.recommendation.$cartridge.hide(), "product" == a && $("#recentlyViewedProductsSection").hide())
        },
        callCertonaFunction: function() {
            "function" != typeof callCertona ? setTimeout(function() {
                FL.recommendation.callCertonaFunction()
            }, 100) : callCertona()
        },
        populateMarkup: function(e, t, a, i) {
            var o, r, n, s = a.find(".recommended-products"),
                l = "";
            e.length < 1 ? a.hide() : a.show(), $.each(e, function(e, a) {
                function s(e) {
                    d = d + e + "<br />"
                }
                a.count = a.count || "0", r = 1 === a.count ? "Color" : "Colors", n = FL.recommendation.loadPrice(a.price), i && "0" != a.count || (a.count = "", r = "");
                var d = "",
                    c = "",
                    u = a.attributeSalesText;
                "" != u && u.indexOf(",") >= 0 ? (c = u.split(","), c.forEach(s)) : "" != u && (d = u), a.image = a.image.replace(/\&/g, "[yy]").replace(/\$/g, "[ss]");
                var p = a.image.indexOf("Model") >= 0 ? "" : "&bg=rgb(237,237,237)",
                    h = a.image.indexOf("layer") >= 0 ? " badgeImage" : "";
                o = FL.recommendation.templates.product.replace(/\[product-list\]/g, t).replace(/\[product-position\]/g, e + 1).replace(/\[product-brand\]/g, a.vendorName).replace(/\[product-class\]/g, a.productClass + h).replace(/\[product-url\]/g, a.url + "&rrec=true").replace(/\[product-image\]/g, a.image + p).replace(/\[product-name\]/g, a.displayName).replace(/\[product-count\]/g, a.count).replace(/\[product-plural\]/g, r).replace(/\[product-price\]/g, n).replace(/\[product-data-price\]/g, FL.recommendation.loadPriceForTracking(a.price)).replace(/\[style-id\]/g, a.styleId).replace(/\[color-id\]/g, a.colorId).replace(/\[product-id\]/g, a.productId).replace(/\[avg-rating\]/g, a.avgRating).replace(/\[review-count\]/g, a.reviewCount).replace(/\[is-exclusive\]/g, "true" !== a.exclusive ? "hide" : "").replace(/\[is-free-shipping\]/g, "true" !== a.freeShipping ? "hide" : "").replace(/\[attribute-sales-text\]/g, d).replace(/\[yy\]/g, "&").replace(/\[ss\]/g, "$"), l += o
            }), "" !== l && s.html('<div class="row align-center"><div class="recommendation-slider ' + FL.recommendation.sliderOptions.sliderClass + '">' + l + "</div></div>"), s.find(".recommendation-slider").on("init", function() {
                a.find(".reco-title").html(t), s.next(".loading-spinner").hide()
            }), "grid" === FL.recommendation.largeDisplay && (s.find(".slide-wrapper").each(function() {
                a.find(".recommended-products-grid").append("<div class='recommendation-grid-item'>" + $(this).html() + "</div>")
            }), a.find(".recommended-products-grid").find(".productImage").each(function() {
                $(this).attr("src", $(this).attr("data-lazy"))
            })), Foundation.MediaQuery.is("small only") && a.find(".reco-title").html(t), FL.recommendation.initSlider(s.find(".recommendation-slider"), null, s.next(".loading-spinner")), s.foundation(), FL.Tealium.displayProductImpressions({
                $container: a,
                products: e,
                title: t
            }), a.find(".product-card").on("click", function() {
                FL.Tealium.clickProductImpressions(this)
            })
        },
        detectDevice: function() {
            return /iphone|ipad|android|ie|blackberry|fennec|windows phone|SymbianOS|webOS/.test(navigator.userAgent.toLowerCase()) ? $(window).width() < 768 ? "mobile" : "tablet" : "desktop"
        },
        getProductsData: function(e) {
            e.forEach(function(e) {
                var t, a = e.items,
                    i = "",
                    o = !0,
                    r = "https://www.finishline.com/store/browse/productDetail.jsp?",
                    n = "/store/recommendations/json/productRecommendationsEndecaJson.jsp";
                switch (FL.pdp.isPDPPage() && $("#cartRecbommendationSection").length <= 0 ? n += "?renderType=pdp" : FL.Grid.isGridPage() && $("#quickLookModal").is(":visible") ? n += "?renderType=quicklook" : $("#ResponsiveCertonaRecommendation_1").length > 0 && (n += "?renderType=grid"), $("body.jdsports-page").length > 0 && (r = "https://www.jdsports.com/store/browse/productDetail.jsp?"), e.scheme) {
                    case "pdp3_rr":
                        t = $("#pdp3_rr");
                        break;
                    case "pdprv1_rr":
                        t = $("#recentlyViewedProductsSection");
                        break;
                    default:
                        t = FL.recommendation.$cartridge
                }
                a.length > 0 ? (a.forEach(function(e) {
                    var t = e.detailurl.replace(r, "").replace("?rrec=true", "").split("&amp;"),
                        a = t[0].replace("productId=", "") + ":" + t[1].replace("styleId=", "") + ":" + t[2].replace("colorId=", "") + "|";
                    i += a
                }), $.ajax({
                    data: {
                        products: i
                    },
                    dataType: "json",
                    type: "POST",
                    url: n,
                    success: function(a) {
                        "pdprv1_rr" == e.scheme && (o = !1), FL.recommendation.populateMarkup(a.productsArray, e.explanation, t, o)
                    },
                    error: function(e, t) {
                        console.log(e), console.log(t)
                    }
                })) : t.hide()
            })
        },
        loadPrice: function(e) {
            var t = "";
            return 0 != e.masked ? (t = '<span class="wasSeePrice">$' + e.wasPrice + '</span><span class="seePrice" style="margin-right:6px">See price in cart</span><span class="tooltip-help top red small" data-tooltip title="The suspense is killer. Add this to your cart and find your price."></span>', window.location.href.indexOf("jdsports") > -1 && (t = '<span class="wasSeePrice">$' + e.wasPrice + '</span><span class="seePrice" style="margin-right:6px">See price in basket</span><span class="tooltip-help top red small" data-tooltip title="The suspense is killer. Add this to your basket and find your price."></span>')) : t = -1 === e.nowPrice ? '<span class="soldOut">SOLD OUT</span>' : parseFloat(e.nowPrice) < parseFloat(e.wasPrice) ? $("body.jdsports-page").length > 0 ? '<span class="wasPrice">$' + e.wasPrice + '</span><span class="nowPrice">Now $' + e.nowPrice + "</span>" : '<span class="wasPrice">$' + e.wasPrice + '</span><span class="nowPrice">$' + e.nowPrice + "</span>" : '<span class="fullPrice">$' + e.nowPrice + "</span>", t = '<div class="recommendedProductPrice">' + t + "</div>"
        },
        loadPriceForTracking: function(e) {
            var t = "";
            return 0 != e.masked ? (t = "See Price in Cart", window.location.href.indexOf("jdsports") > -1 && (t = "See Price in basket")) : t = -1 === e.nowPrice ? "SOLD OUT" : e.nowPrice, t
        },
        initSlider: function(e, t, a) {
            if (Foundation.MediaQuery.is("small only")) {
                var i = $(e).attr("id");
                i || (i = "recommendationSlider" + FL.recommendation.sliderIdIndex, $(e).attr("id", i), FL.recommendation.sliderIdIndex++), FLSlider.init({
                    id: i,
                    slideWidth: 221,
                    slidePadding: 4
                }), a.hide()
            } else $(e).slick({
                slidesToShow: FL.recommendation.lg_slidesToScroll,
                slidesToScroll: FL.recommendation.lg_slidesToScroll,
                variableWidth: !0,
                infinite: !1,
                lazyLoad: "ondemand",
                nextArrow: "<button role='button' class='icon icon-chevron-right slick-next-icon' tabindex='0' aria-label='Next Product'></button>",
                prevArrow: "<button role='button' class='icon icon-chevron-left slick-prev-icon' tabindex='0' aria-label='Previous Product'></button>",
                responsive: t || [{
                    breakpoint: 1340,
                    settings: {
                        slidesToShow: FL.recommendation.md_slidesToScroll,
                        slidesToScroll: FL.recommendation.md_slidesToScroll,
                        variableWidth: !0,
                        infinite: !1
                    }
                }, {
                    breakpoint: 1024,
                    settings: {
                        dots: !0,
                        arrows: !1,
                        swipeToSlide: !0,
                        infinite: !0,
                        slidesToScroll: 2
                    }
                }, {
                    breakpoint: 640,
                    settings: {
                        dots: !0,
                        arrows: !1,
                        swipeToSlide: !0,
                        variableWidth: !0,
                        centerMode: !0,
                        centerPadding: "40px",
                        infinite: !0,
                        slidesToScroll: 1
                    }
                }]
            })
        },
        setSliderOptions: function(e, t) {
            FL.recommendation.sliderOptions.sliderClass = "product" == e ? "pdp" : "cart" == e || "emptycart" == e ? t.find(".sliderClass").val() : "quickview" == e ? "quicklook" : "xm-reco",
                "categorylanding" != e && "quickview" != e && "cart-slide" != FL.recommendation.sliderOptions.sliderClass || (FL.recommendation.lg_slidesToScroll = 3, FL.recommendation.md_slidesToScroll = 2)
        },
        templates: {
            product: '<div class="slide-wrapper"><div class="product-card-wrapper"><div class="product-card" id="item[product-id]" data-vendor="[product-brand]" data-prodid="[product-id]" data-productid="[product-id][style-id][color-id]"><div class="product-card-details" style="display:none" data-list="[product-list]" data-brand="[product-brand]" data-productid="[product-id]" data-styleid="[style-id]" data-colorid="[color-id]" data-name="[product-name]" data-position="[product-position]" data-price="[product-data-price]" /><a href="[product-url]" title="[product-name]"><div class="image-card-wrapper [product-class]-wrapper"><div class="product-card__media "><div class="product-card__media-slide [product-class]"><img data-lazy="[product-image]" class="productImage" alt="[product-name]"/></div></div></div><div class="product-card__details"><div class="small-reco-color-count show-for-small-only">[product-count]&nbsp;[product-plural]</div><strong class="color-count hide-for-small-only">[product-count]&nbsp;[product-plural]</strong><hr class="divider" /><strong class="product-name">[product-name]</strong><div class="product-price">[product-price]</div><div class="product-card-stars hide" data-rating="[avg-rating]"><span class="rating-stars" data-rating="[avg-rating]"><span class="icon icon-star-filled"></span><span class="icon icon-star-filled"></span><span class="icon icon-star-filled"></span><span class="icon icon-star-filled"></span><span class="icon icon-star"></span></span><span class="rating-stars">([review-count])</span></div><div class="special-text muted [is-exclusive]">Finish Line Exclusive</div><div class="special-text">[attribute-sales-text]</div></div></a></div></div></div>'
        }
    }, FL.recommendation), window.FL = window.FL || {}, FL.cart = FL.cart || {}, FL.cart = jQuery.extend(!0, {
        init: function() {
            if (FL.cart.initQtyButtons(), FL.cart.initStatusRewardInfo(), FL.cart.initRemoveModal(), FL.cart.checkForAppExclusive(), FL.cart.afterPayClickModal(), FL.pdp.afterPayClickModal(), FL.checkout.orderSummary.init(), "true" === $("h1").attr("data-empty")) {
                var e = e || window._smtr || [];
                e.push(["onCartEmpty"])
            } else FL.cart.SmarterHQ.init();
            FL.cart.initRecommendations(), FL.applePay.supportedByDevice() && $("#ApplePayOption").show(), FL.applePay.init(), $(".click_event_cart").on("click", function() {
                $("body").css({
                    position: "",
                    width: ""
                })
            }), FL.cart.initClearCart(), FL.cart.closeModalCallback()
        },
        initClearCart: function() {
            if (FL.cart.isCartPage()) {
                var e = window.location.href;
                e.indexOf("timeouterror=true") > -1 && (e.indexOf("cartCleared=true") > -1 || $.ajax({
                    url: FL.contextPath + "/cart/clearCart.jsp",
                    success: function(e) {
                        window.location.href += "&cartCleared=true", FL.ajax.reloadComponent("cartPageContent", FL.contextPath + "/cart/cartInner.jsp")
                    }
                }))
            }
        },
        initQtyButtons: function() {
            $("body").off("click").on("click", ".js-decrement-qty, .js-increment-qty", function(e) {
                e.preventDefault(), e.stopPropagation();
                var t = $(this),
                    a = t.parents(".checkout-bag-item"),
                    i = t.data("skuid");
                if (i) {
                    var o = t.data("prodid");
                    t.hasClass("js-decrement-qty") ? FL.cart.decrementQty(a, i, o) : FL.cart.incrementQty(a, i, o);
                    var r = t.closest(".checkout-bag-item").attr("data-commerceItem");
                    $.ajax({
                        url: FL.contextPath + "/cart/cartSlide.jsp",
                        async: !0,
                        success: function(e) {
                            var t = $(e).find(".checkout-bag-item[data-commerceItem=" + r + "] .cart-price").html();
                            $(".checkout-bag-item[data-commerceItem=" + r + "] .cart-price").html(t)
                        }
                    })
                }
            })
        },
        initRemoveModal: function() {
            $(".js-icon-remove").on("click", function(e) {
                e.preventDefault();
                var t = $(this).attr("data-item-id"),
                    a = FL.contextPath + "/cart/modals/removeItem.jsp?removeCommerceItemId=" + t;
                FL.modal.open(a, "custom-medium")
            })
        },
        initRemoveButtons: function() {
            $(".js-remove-cart-item").on("click", function(e) {
                e.preventDefault(), FL.modal.close(), FL.global.showOverlay(), $("#styleIdColorIdSpan").text(), FL.Tealium.clickCartRemove();
                var t = $("#removeItemForm"),
                    a = t.find("#removeProductName"),
                    i = {
                        product_id: a.data("productid").toString(),
                        style_id: a.data("styleid").toString(),
                        color_id: a.data("colorid").toString(),
                        size: t.find("#removeSize").data("size").toString(),
                        quantitiy: parseFloat(a.data("quantity")),
                        price: parseFloat(a.data("nowprice"))
                    };
                console.log(i), FL.optimove.reportEvent("remove_cart", i), FL.form.submit("removeItemForm", "FL.cart.removeItemSuccess", "FL.cart.removeItemError")
            }), $(".js-add-cart-item-to-wishlist").on("click", FL.cart.clickAddToWishList)
        },
        removeItemSuccess: function(e) {
            FL.cart.isCartPage() ? window.location = FL.contextPath + "/cart/cart.jsp" : (FL.global.updateBagCount(), FL.cart.updateSlideOut(), FL.DynamicCart.updateDynamicCart(), FL.global.hideOverlay())
        },
        removeItemError: function() {
            FL.global.hideOverlay()
        },
        clickAddToWishList: function(e) {
            e.preventDefault(), FL.modal.close(), FL.global.showOverlay(), $("#addToWishListFromCart").submit()
        },
        decrementQty: function(e, t, a) {
            var i = $("#quantity_form"),
                o = i.find("input[name='" + t + "']"),
                r = parseInt(o.val());
            if (1 === r) return void e.find(".js-icon-remove").click();
            if (r--, $(".bgwItemPrice").length > 0) {
                if (2 === r) return void e.find(".js-icon-remove").click();
                r--
            }
            o.val(r), $("#cart_form").find("input[name='" + t + "']").val(r), e.find(".js-qty").text(r), FL.form.submit("quantity_form", "FL.cart.updateQuantityResponse")
        },
        incrementQty: function(e, t, a) {
            var i = parseInt(e.find(".js-max-qty").val()),
                o = $("#quantity_form"),
                r = o.find("input[name='" + t + "']");
            if ("true" == FL.pdp.Cart.selectedBogo) {
                console.log("bogo");
                var n = parseInt(r.val()) + 1
            } else {
                console.log("normal");
                var n = parseInt(r.val())
            }
            if (n >= i) return $("#maxQuantityErrorModal").find(".contents").html("This item is limited to " + i + " per customer."), void $("#maxQuantityErrorModal").foundation("open");
            n++, r.val(n), $("#cart_form").find("input[name='" + t + "']").val(n), e.find(".js-qty").text(n), FL.form.submit("quantity_form", "FL.cart.updateQuantityResponse")
        },
        updateQuantityResponse: function(e) {
            if (e && e.success) {
                var t = FL.cart.isCartPage() ? "page" : "slide";
                FL.checkout.orderSummary.reload("cart", t), FL.global.updateBagCount(), FL.cart.SmarterHQ.waitForUpdate()
            } else FL.global.addErrorMessage("You have requested a quantity for one or more items that is greater than our available inventory. The quantity for the item(s) has been updated to reflect the greatest quantity that you can purchase based on our availability.")
        },
        slideOut: function(e) {
            if (FL.cart.isCartPage()) return window.location.reload();
            var t = FL.contextPath + "/cart/cartSlide.jsp";
            e && (t += "?stage=" + e, paramSeparator = "&");
            var a = "Back";
            if ("pdp" == e && Foundation.MediaQuery.is("large") && (a = "Continue Shopping"), $("#cartSlideShell").find(".nav-link-text").html(a), Foundation.MediaQuery.is("large")) var i = FL.global.offCanvas.open("large", "right", "overlap", $("#cartSlideShell").html());
            else if (Foundation.MediaQuery.is("medium")) {
                var i = FL.global.offCanvas.open("small", "right", "overlap", $("#cartSlideShell").html());
                $("#offCanvasRightSlider").off("swiperight")
            } else {
                var i = FL.global.offCanvas.open("full", "right", "overlap", $("#cartSlideShell").html());
                $("#offCanvasRightSlider").off("swiperight")
            }
            if ($("div[id=removeAllItemsModal]").remove(), i.load(t, function() {
                    i.foundation(), FL.cart.init(), FL.Tealium.displaySlideoutCart(), FL.applePay.init()
                }), FL.cart.afterPayClickModal(), $("body").hasClass("PDP")) var o = $("#styleColors").find(".styleColorIds").text(),
                r = $("#productPrices").find(".nowPrice").text(),
                n = $("#productPrices").find(".fullPrice").text(),
                s = $("#productPrices").find(".wasPrice").text(),
                l = $("#styleColors").find(".description").text(),
                d = o.replace(" - ", "").replace(/\u00A0/g, "_"),
                c = $("#title").text(),
                u = r.replace("$", ""),
                p = $("#productQuantity :selected").text(),
                h = ($("#cartSlide").find(".js-decrement-qty").attr("data-skuid"), n.replace("$", "")),
                m = s.replace("$", "");
            else if ($("body").hasClass("grid")) var f = $("#productTitle a").attr("href").split("?").pop().split("&"),
                o = f[0].replace("styleId=", ""),
                l = f[1].replace("colorId=", ""),
                r = $(".priceVariable").not(".hide").find(".nowPrice").text().replace("$", ""),
                n = $(".priceVariable").not(".hide").find(".fullPrice").text().replace("$", ""),
                s = $(".priceVariable").not(".hide").find(".wasPrice").text().replace("$", ""),
                d = o + "_" + l,
                c = $("#productTitle a").text(),
                u = r,
                p = $("#qlQuantity").val(),
                h = ($(".sizeVariable .button.active").data("sku"), n),
                m = s;
            if ($(window).width() <= 1024 && ($("#offCanvasRightSlider.is-open").length > 0 && $("body").css({
                    position: "fixed",
                    width: "100%"
                }), $("body").on("click", ".click_event_cart, .js-off-canvas-overlay", function(e) {
                    e.preventDefault(), $("body").css("position", "inherit")
                })), "" === h) var h = s.replace("$", "");
            FL.Tealium.link({
                events: "Cart Add",
                product_color: l,
                product_id: d,
                product_name: c,
                product_price: u,
                product_quantity: p,
                product_unit_price: h,
                pre_discounted_item_price: m
            })
        },
        updateSlideOut: function(e) {
            var t = FL.contextPath + "/cart/cartSlide.jsp";
            e && (t += "?stage=" + e);
            var a = $(".off-canvas.is-open");
            a.load(t, function() {
                a.foundation(), FL.cart.init()
            }), FL.applePay.supportedByDevice() && $("#ApplePayOption").show(), FL.applePay.init()
        },
        winnersCircle: {
            reload: function() {
                $.ajax({
                    type: "GET",
                    url: FL.contextPath + "/global/gadgets/winnersCircle.jsp",
                    success: function(e) {
                        $(".winners-circle").html(e)
                    }
                })
            }
        },
        updateBagCount: function(e) {
            var t = FL.contextPath + "/cart/gadgets/miniCart.jsp";
            return $.ajax({
                dataType: "html",
                type: "GET",
                url: t,
                success: function(t) {
                    var a = $(t).find("#totalQuantity").val();
                    !isNaN(a) && a > 0 && e.text(a).show(), FlAjaxresult = t
                }
            }).done(function() {
                FL.global.initHeader(), FL.DynamicCart.updateDynamicCart();
                var e = $(".loyalty2flag").val(),
                    t = $(".loyaltyType").val();
                e && "WC" !== t ? setTimeout(function() {
                    FL.cart.initStatusRewardInfo()
                }, 500) : FL.cart.winnersCircle.reload()
            }), FlAjaxresult
        },
        isCartPage: function() {
            var e = window.location.href;
            return !(!e || !e.indexOf || -1 === e.indexOf("cart"))
        },
        checkForAppExclusive: function() {
            $("#itemExclusiveModal").length > 0 && $("#itemExclusiveModal").attr("data-style-id").length > 0 && $("#itemExclusiveModal").foundation("open")
        },
        initStatusRewardInfo: function() {
            if (!FL.global.isJDSport()) {
                var e = "Get points. Gain access. Boost your status.";
                e += "false" === $(".hasWCNumber").val() ? '<br><a href="/status">Join Status Now.</a>' : "";
                var t = 0,
                    t = Math.floor(Number($("#subTotal").text().trim().replace(/[$,]/g, "")));
                if (isNaN(t) || 0 === t || "false" == $(".hasWCNumber").val()) $(".StatusRewardInfo").html(e);
                else {
                    var a = $(".customerid").val(),
                        i = FL.loyaltyProgram.getPotentialLoyaltyPoints(a, t),
                        o = "Get <strong>" + (0 === i ? "" : i) + "</strong> Status points with this purchase. More points means more rewards.";
                    $(".StatusRewardInfo").html(o)
                }
            }
        },
        initRecommendations: function() {
            var e = $(".cart-recommendation-container");
            $.each(e, function(e, t) {
                FL.recommendation.init($(t))
            })
        },
        afterPayClickModal: function() {
            $("body").on("click", ".afterpay-info-cart", function() {
                FL.cart.isCartPage() ? $("#modalAfterpay_Cart").foundation("open") : $("#modalAfterpay_Pdp").foundation("open"), $("#cartSlide").length > 0 ? FL.Tealium.clickAfterPaySlideout() : FL.Tealium.clickAfterPayCart()
            }), $("body").on("open.zf.reveal", "#modalAfterpay_Cart[data-reveal]", function() {
                $("#cartSlide").length > 0 ? FL.Tealium.clickAfterPaySlideOutModal() : (console.log("cart modal opened"), FL.Tealium.clickAfterPayCartModal())
            })
        },
        initJDXOffer: function() {
            $(".JDXOffer").empty();
            var e = !$("#myaccount-nav").data("transient"),
                t = Math.floor(Number($("#subTotal").text().trim().replace(/[$,]/g, ""))),
                a = '<span tabindex="0" aria-label="Earn %%pts%% points towards a reward with this purchase. Get $5 back every time you reach $100.">Earn %%pts%% points towards a reward with this purchase. Get $5 back every time you reach $100. </span>';
            a = a.replace(/%%pts%%/g, t), e || (a += '<a href="/JDX">Join Today.</a>'), $(".JDXOffer").append(a)
        },
        closeModalCallback: function() {
            $("body").off("closed.zf.offcanvas", "#offCanvasRightSlider").on("closed.zf.offcanvas", "#offCanvasRightSlider", function() {
                "CATEGORY" == dynamicYieldPageType ? FL.DynamicYield.updateSpaEvent("CATEGORY", [dynamicYieldCategoryLevel]) : FL.DynamicYield.updateSpaEvent("PRODUCT", [FL.pdp.Cart.selectedSku])
            })
        },
        SmarterHQ: {
            cartTotal: 0,
            init: function() {
                var e = e || window._smtr || [],
                    t = [],
                    a = $("#orderSummaryOrderTotal").html() || "0";
                FL.cart.SmarterHQ.cartTotal = a, a = $.trim(a.replace("$", "")), $(".checkout-bag-item").each(function() {
                    var e = $(this),
                        a = e.attr("data-stylecolor"),
                        i = e.find(".qty-display").html(),
                        o = e.find(".sale-price").length > 0 ? e.find(".sale-price").html() : e.find(".cart-price").text();
                    i = $.trim(i), o = $.trim(o.replace("$", "")), t.push({
                        productId: a,
                        sku: a,
                        qty: i,
                        price: o
                    })
                }), e.push(["pageView", {
                    pageType: "cart",
                    cartItems: t,
                    cartTotal: a
                }])
            },
            waitForUpdate: function() {
                var e = FL.cart.SmarterHQ;
                e.cartTotal !== $("#orderSummaryOrderTotal").html() ? e.init() : setTimeout(e.waitForUpdate, 1e3)
            }
        }
    }, FL.cart), window.FL = window.FL || {}, FL.applePay = FL.applePay || {}, FL.applePay = jQuery.extend(!0, {
        init: function() {
            var e = FL.applePay.getMerchantIdentifier();
            e ? FL.applePay.supportedByDevice() && (!0 === ApplePaySession.canMakePayments() ? FL.applePay.showButton() : ApplePaySession.canMakePaymentsWithActiveCard(e).then(function(e) {
                !0 === e ? FL.applePay.showButton() : FL.applePay.supportsSetup() || FL.applePay.showError("Apple Pay cannot be used at this time. If using macOS you need to be paired with a device that supports at least TouchID.")
            })) : FL.applePay.showError("No Apple Pay merchant certificate is configured.")
        },
        beginPayment: function(e) {
            e.preventDefault(), $("#cartSlide").length > 0 ? FL.Tealium.clickSlideCheckoutApplePay() : FL.Tealium.clickCartCheckoutApplePay(), FL.applePay.gatherValues(), FL.applePay.calculateInstorePickupTax(), FL.applePay.generatePaymentRequest();
            var t = new ApplePaySession(1, FL.applePay.paymentRequest);
            t.onvalidatemerchant = function(e) {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/applePayMerchantVerifyJson.jsp",
                    data: {
                        validationUrl: e.validationURL
                    }
                }).then(function(e) {
                    t.completeMerchantValidation(JSON.parse(e.appleSession))
                })
            }, t.onshippingmethodselected = function(e) {
                var a = e.shippingMethod;
                $.ajax({
                    type: "post",
                    dataType: "text",
                    url: FL.contextPath + "/checkout/json/updateShippingMethodJson.jsp",
                    data: {
                        shippingMethod: a.identifier.split("=")[0]
                    }
                }).then(function(e) {
                    var a, i;
                    $.ajax({
                        type: "post",
                        dataType: "json",
                        url: FL.contextPath + "/checkout/json/detailedOrderJson.jsp"
                    }).then(function(e) {
                        a = e.order.priceInfo.tax, i = e.order.priceInfo.shipping;
                        for (x in FL.applePay.paymentRequest.lineItems) item = FL.applePay.paymentRequest.lineItems[x], "Tax" == item.label && (item.amount = a, taxupdated = !0), "Shipping" == item.label && (item.amount = parseFloat(i));
                        taxupdated || FL.applePay.paymentRequest.lineItems.push({
                            label: "Tax",
                            amount: a,
                            type: "final"
                        });
                        var o;
                        o = 0;
                        for (var r = 0; r < FL.applePay.paymentRequest.lineItems.length; r++) {
                            var n = FL.applePay.paymentRequest.lineItems[r];
                            o += Number(n.amount)
                        }
                        $("meta[name='apple-pay-store-name']").attr("content"), FL.applePay.paymentRequest.total.amount = o.toFixed(2);
                        var s = {
                            newTotal: FL.applePay.paymentRequest.total,
                            newLineItems: FL.applePay.paymentRequest.lineItems
                        };
                        t.completeShippingMethodSelection(s)
                    })
                })
            }, t.onshippingcontactselected = function(e) {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/getShippingGroupsJson.jsp",
                    data: {
                        shippingGroupTypes: "hardgoodShippingGroup,inStorePickupShippingGroup"
                    }
                }).then(function(a) {
                    "" == $("#appleCartIsInstore").val() && $.ajax({
                        type: "post",
                        dataType: "html",
                        url: FL.contextPath + "/checkout/json/applyShippingGroupsForGuestUserJson.jsp",
                        data: {
                            state: e.shippingContact.administrativeArea,
                            country: e.shippingContact.countryCode,
                            city: e.shippingContact.locality,
                            postalCode: e.shippingContact.postalCode
                        }
                    }).then(function(a) {
                        var i, o = ApplePaySession.STATUS_SUCCESS;
                        $.ajax({
                            type: "post",
                            dataType: "json",
                            url: FL.contextPath + "/checkout/json/detailedOrderJson.jsp"
                        }).then(function(a) {
                            i = a.order.priceInfo.tax, $.ajax({
                                type: "post",
                                dataType: "json",
                                url: FL.contextPath + "/checkout/json/availableShippingGroupsJson.jsp",
                                data: {
                                    selectedState: e.shippingContact.administrativeArea
                                }
                            }).then(function(e) {
                                for (var a = e.shipPriceMap.replace("{", "").replace("}", "").split(","), r = e.defaultShippingMethod, n = 0, s = [], l = 0; l < a.length; l++) {
                                    var d = a[l].trim(),
                                        c = d.split("=")[0].trim(),
                                        u = d.split("=")[1].trim();
                                    s.push({
                                        label: c + " Shipping",
                                        amount: u,
                                        detail: "",
                                        identifier: d
                                    }), c == r && (n = u)
                                }
                                var p = s,
                                    h = !1,
                                    m = !1;
                                for (x in FL.applePay.paymentRequest.lineItems) item = FL.applePay.paymentRequest.lineItems[x], "Shipping" == item.label && (h = !0), "Tax" == item.label && (item.amount = i, m = !0);
                                void 0 == r && (r = "Economy"), $.ajax({
                                    type: "post",
                                    dataType: "text",
                                    url: FL.contextPath + "/checkout/json/updateShippingMethodJson.jsp",
                                    data: {
                                        shippingMethod: r
                                    }
                                }).then(function(e) {}), h || FL.applePay.paymentRequest.lineItems.push({
                                    label: "Shipping",
                                    amount: n,
                                    type: "final"
                                }), m || FL.applePay.paymentRequest.lineItems.push({
                                    label: "Tax",
                                    amount: i,
                                    type: "final"
                                });
                                var f;
                                f = 0;
                                for (var l = 0; l < FL.applePay.paymentRequest.lineItems.length; l++) {
                                    var g = FL.applePay.paymentRequest.lineItems[l];
                                    f += Number(g.amount)
                                }
                                var v = $("meta[name='apple-pay-store-name']").attr("content");
                                FL.applePay.paymentRequest.total.amount = f.toFixed(2);
                                var y = {
                                    type: "final",
                                    label: v,
                                    amount: f.toFixed(2)
                                };
                                t.completeShippingContactSelection(o, p, y, FL.applePay.paymentRequest.lineItems)
                            })
                        })
                    })
                })
            }, t.onpaymentmethodselected = function(e) {
                var a;
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/detailedOrderJson.jsp"
                }).then(function(e) {
                    a = e.order.priceInfo.tax;
                    var i = !1;
                    for (x in FL.applePay.paymentRequest.lineItems) item = FL.applePay.paymentRequest.lineItems[x], "Tax" == item.label && (item.amount = a, i = !0);
                    i || FL.applePay.paymentRequest.lineItems.push({
                        label: "Tax",
                        amount: a,
                        type: "final"
                    });
                    var o;
                    o = 0;
                    for (var r = 0; r < FL.applePay.paymentRequest.lineItems.length; r++) {
                        var n = FL.applePay.paymentRequest.lineItems[r];
                        o += Number(n.amount)
                    }
                    var s = $("meta[name='apple-pay-store-name']").attr("content");
                    FL.applePay.paymentRequest.total.amount = o.toFixed(2);
                    var l = {
                        type: "final",
                        label: s,
                        amount: o.toFixed(2)
                    };
                    t.completePaymentMethodSelection(l, FL.applePay.paymentRequest.lineItems)
                })
            }, t.onpaymentauthorized = function(e) {
                var a = e.payment.billingContact,
                    i = e.payment.shippingContact,
                    o = (e.payment.token.paymentData, {
                        status: ApplePaySession.STATUS_SUCCESS,
                        errors: []
                    });
                t.completePayment(o), FL.applePay.showSuccess();
                var r = e.payment.token,
                    n = {
                        transactionIdentifier: r.transactionIdentifier,
                        paymentMethod: {
                            displayName: r.paymentMethod.displayName,
                            network: r.paymentMethod.network,
                            type: r.paymentMethod.type
                        },
                        paymentData: {
                            header: {
                                ephemeralPublicKey: r.paymentData.header.ephemeralPublicKey,
                                publicKeyHash: r.paymentData.header.publicKeyHash,
                                transactionId: r.paymentData.header.transactionId
                            },
                            signature: r.paymentData.signature,
                            data: r.paymentData.data,
                            version: r.paymentData.version
                        }
                    };
                if (a.addressLines) var s = a.addressLines[0];
                else var s = "";
                if (i.addressLines) {
                    var l = i.addressLines[0],
                        d = "";
                    i.addressLines.length > 1 && (d = i.addressLines[1])
                } else var l = "",
                    d = "";
                n.billingContact = {
                    phoneNumber: i.phoneNumber,
                    emailAddress: i.emailAddress,
                    givenName: a.givenName,
                    familyName: a.familyName,
                    addressLines: [s],
                    locality: a.locality,
                    administrativeArea: a.administrativeArea,
                    postalCode: a.postalCode,
                    country: a.countryCode
                }, n.shippingContact = {
                    phoneNumber: i.phoneNumber,
                    emailAddress: i.emailAddress,
                    givenName: i.givenName,
                    familyName: i.familyName,
                    addressLines: [l, d],
                    locality: i.locality,
                    administrativeArea: i.administrativeArea,
                    postalCode: i.postalCode,
                    country: i.country
                }, $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/applePayDecryptTokenJson.jsp",
                    data: {
                        billingContact: JSON.stringify(n.billingContact),
                        paymentMethod: JSON.stringify(n.paymentMethod),
                        paymentData: JSON.stringify(n.paymentData),
                        shippingContact: JSON.stringify(n.shippingContact),
                        applepayCart: !0
                    }
                }).then(function(e) {
                    window.location.href = "/store/checkout/confirm.jsp"
                }, function(e) {
                    window.location.href = "/store/checkout/confirm.jsp"
                })
            }, t.begin()
        },
        calculateInstorePickupTax: function() {
            "" == $("#appleCartIsInstore").val() || "instore" != $("#appleShipMethod").val() && "In-Store Pick Up" != $("#appleShipMethod").val() || $.ajax({
                type: "post",
                dataType: "json",
                url: FL.contextPath + "/checkout/json/getShippingGroupsJson.jsp",
                data: {
                    shippingGroupTypes: "inStorePickupShippingGroup"
                }
            }).then(function(e) {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/shipToInstorePickUpJson.jsp",
                    data: {
                        locationId: $("#appleCartIsInstore").val(),
                        instorePickupEmail: "instorePickupEmail@abc.com"
                    }
                }).then(function(e) {
                    var t;
                    $.ajax({
                        type: "post",
                        dataType: "json",
                        url: FL.contextPath + "/checkout/json/detailedOrderJson.jsp"
                    }).then(function(e) {
                        t = e.order.priceInfo.tax;
                        var a = !1;
                        for (x in FL.applePay.lineItemsForDelivery) item = FL.applePay.lineItemsForDelivery[x], "Tax" == item.label && (item.amount = t, a = !0);
                        a || FL.applePay.lineItemsForDelivery.push({
                            label: "Tax",
                            amount: t,
                            type: "final"
                        });
                        var i;
                        i = 0;
                        for (var o = 0; o < FL.applePay.lineItemsForDelivery.length; o++) {
                            var r = FL.applePay.lineItemsForDelivery[o];
                            i += Number(r.amount)
                        }
                        FL.applePay.totalForDelivery.amount = i.toFixed(2)
                    })
                })
            })
        },
        generatePaymentRequest: function() {
            FL.applePay.paymentRequest = {
                countryCode: FL.applePay.countryCode,
                currencyCode: FL.applePay.currencyCode,
                merchantCapabilities: ["supports3DS"],
                supportedNetworks: ["amex", "masterCard", "visa", "discover"],
                lineItems: FL.applePay.lineItemsForDelivery,
                total: FL.applePay.totalForDelivery,
                requiredBillingContactFields: ["email", "name", "phone", "postalAddress"],
                requiredShippingContactFields: ["phone", "email", "name", "postalAddress"],
                shippingType: "shipping",
                shippingMethods: [],
                supportedCountries: [FL.applePay.countryCode]
            }, "In-Store Pick Up" == $("#appleShipMethod").val() || "instore" == $("#appleShipMethod").val() ? ($("#appleShipMethod").val(), FL.applePay.paymentRequest.shippingMethods.push({
                label: "In-Store Pick Up",
                amount: 0,
                identifier: "In-Store Pick Up",
                detail: ""
            }), FL.applePay.paymentRequest.requiredShippingContactFields.splice(2, 4), FL.applePay.paymentRequest.shippingType = "storePickup") : $("#appleShipMethod").val(), FL.applePay.paymentRequest.billingContact = {}, FL.applePay.paymentRequest.shippingContact = {}
        },
        gatherValues: function() {
            var e, t = parseFloat($("#appleCartSubtotal").val().replace("$", ""));
            void 0 !== $("#appleShip").val() && (e = parseFloat($("#appleShip").val().replace("$", ""))), isNaN(e) && (e = 0);
            var a = parseFloat($("#appleTax").val().replace("$", ""));
            if (isNaN(a) && (a = 0), $("#appleDonation").val()) var i = parseFloat($("#appleDonation").val().replace("$", ""));
            if (isNaN(i) || ($("#addDonationId").val(!1), $("#donation-server-error").addClass("hide").html(""), FL.cart.disableSubmit(), FL.form.submit("donation_form", "FL.checkout.billing.donationSuccess", "FL.checkout.billing.donationError")), $("#appleCoupon").val()) var o = parseFloat($("#appleCoupon").val().replace("$", ""));
            if (!isNaN(o)) var r = parseFloat(Number(r) - Number(o)).toFixed(2);
            if ($("#applePromotionDiscount").val()) var n = parseFloat($("#applePromotionDiscount").val().replace("$", ""));
            if (!isNaN(n)) var r = parseFloat(Number(r) - Number(n)).toFixed(2);
            if ($("#appleReward").val()) var s = parseFloat($("#appleReward").val().replace("$", ""));
            if (!isNaN(s)) var r = parseFloat(Number(r) - Number(s)).toFixed(2);
            if ($("#gctotal").val() > 0) var l = parseFloat($("#gctotal").val().replace("$", ""));
            if (isNaN(l)) var r = parseFloat(Number(t) + Number(a) + Number(e)).toFixed(2);
            else var r = parseFloat(Number(t) + Number(a) - Number(l) + Number(e)).toFixed(2);
            if (isNaN(t) || isNaN(e) || isNaN(r)) return void alert("Some values couldn't be used");
            FL.applePay.countryCode = $("meta[name='payment-country-code']").attr("content") || "US", FL.applePay.currencyCode = $("meta[name='payment-currency-code']").attr("content") || "USD";
            var d = $("meta[name='apple-pay-store-name']").attr("content");
            FL.applePay.totalForDelivery = {
                label: d,
                amount: r
            }, FL.applePay.lineItemsForDelivery = [{
                label: "Subtotal",
                amount: t,
                type: "final"
            }, {
                label: "Shipping",
                amount: e,
                type: "final"
            }, {
                label: "Tax",
                amount: a,
                type: "final"
            }], isNaN(o) || FL.applePay.lineItemsForDelivery.push({
                label: "Coupon",
                amount: -o,
                type: "final"
            }), isNaN(n) || FL.applePay.lineItemsForDelivery.push({
                label: "Promotional Discount:",
                amount: -n,
                type: "final"
            }), isNaN(l) || FL.applePay.lineItemsForDelivery.push({
                label: "Gift Card",
                amount: -l,
                type: "final"
            })
        },
        hideCharity: function() {
            if ($("#appleDonation").val()) var e = parseFloat($("#appleDonation").val().replace("$", ""));
            isNaN(e) || ($("#addDonationId").val(!1), $("#donation-server-error").addClass("hide").html(""), FL.cart.disableSubmit(), FL.form.submit("donation_form", "FL.checkout.billing.donationSuccess", "FL.checkout.billing.donationError")), $("#donationCheckbox").prop("checked", !1), $("#donationBlock").addClass("hide")
        },
        setupApplePay: function() {
            var e = FL.applePay.getMerchantIdentifier();
            ApplePaySession.openPaymentSetup(e).then(function(e) {
                e ? (FL.applePay.hideSetupButton(), FL.applePay.showButton()) : FL.applePay.showError("Failed to set up Apple Pay.")
            }).catch(function(e) {
                FL.applePay.showError("Failed to set up Apple Pay. " + e)
            })
        },
        showButton: function() {
            var e = $("#apple-pay-button, #apple-pay-button-mobile");
            e.each(function(e) {
                $(this).removeClass("hide"), $(this).attr("lang", FL.applePay.getPageLanguage()), $(this).on("click", FL.applePay.beginPayment)
            }), FL.applePay.supportsSetup() ? (e.addClass("apple-pay-button-with-text"), e.addClass("apple-pay-button-black-with-text")) : (e.addClass("apple-pay-button"), e.addClass("apple-pay-button-white"))
        },
        hideButton: function() {
            $("#apple-pay-button, #apple-pay-button-mobile").each(function(e) {
                $(this).off("click", FL.applePay.beginPayment), $(this).addClass("hide")
            })
        },
        showSetupButton: function() {
            var e = $("#set-up-apple-pay-button");
            e.attr("lang", FL.applePay.getPageLanguage()), e.on("click", $.proxy(FL.applePay, "setupApplePay")), e.removeClass("hide")
        },
        hideSetupButton: function() {
            var e = $("#set-up-apple-pay-button");
            e.addClass("hide"), e.off("click")
        },
        showError: function(e) {
            var t = $(".apple-pay-error");
            t.text(e), t.removeClass("hide")
        },
        showSuccess: function() {
            $(".apple-pay-success").removeClass("hide")
        },
        supportedByDevice: function() {
            return "ApplePaySession" in window
        },
        supportsSetup: function() {
            return "openPaymentSetup" in ApplePaySession
        },
        getPageLanguage: function() {
            return $("html").attr("lang") || "en"
        },
        getMerchantIdentifier: function() {
            return $("meta[name='apple-pay-merchant-id']").attr("content")
        }
    }, FL.applePay), window.FL = window.FL || {}, FL.amplience = FL.amplience || {}, FL.amplience = jQuery.extend(!0, {
        SDK: {
            clientId: "finishline",
            basePath: "https://i8.amplience.net/",
            init: function() {
                amp.init({
                    client_id: FL.amplience.clientId,
                    di_basepath: FL.amplience.basePath
                })
            }
        }
    }, FL.amplience),
    function(e, t) {
        function a(t, a) {
            var o, r, n, s = t.nodeName.toLowerCase();
            return "area" === s ? (o = t.parentNode, r = o.name, !(!t.href || !r || "map" !== o.nodeName.toLowerCase()) && !!(n = e("img[usemap=#" + r + "]")[0]) && i(n)) : (/input|select|textarea|button|object/.test(s) ? !t.disabled : "a" === s ? t.href || a : a) && i(t)
        }

        function i(t) {
            return e.expr.filters.visible(t) && !e(t).parents().addBack().filter(function() {
                return "hidden" === e.css(this, "visibility")
            }).length
        }
        var o = 0,
            r = /^ui-id-\d+$/;
        e.ui = e.ui || {}, e.extend(e.ui, {
            version: "1.10.3",
            keyCode: {
                BACKSPACE: 8,
                COMMA: 188,
                DELETE: 46,
                DOWN: 40,
                END: 35,
                ENTER: 13,
                ESCAPE: 27,
                HOME: 36,
                LEFT: 37,
                NUMPAD_ADD: 107,
                NUMPAD_DECIMAL: 110,
                NUMPAD_DIVIDE: 111,
                NUMPAD_ENTER: 108,
                NUMPAD_MULTIPLY: 106,
                NUMPAD_SUBTRACT: 109,
                PAGE_DOWN: 34,
                PAGE_UP: 33,
                PERIOD: 190,
                RIGHT: 39,
                SPACE: 32,
                TAB: 9,
                UP: 38
            }
        }), e.fn.extend({
            focus: function(t) {
                return function(a, i) {
                    return "number" == typeof a ? this.each(function() {
                        var t = this;
                        setTimeout(function() {
                            e(t).focus(), i && i.call(t)
                        }, a)
                    }) : t.apply(this, arguments)
                }
            }(e.fn.focus),
            scrollParent: function() {
                var t;
                return t = e.ui.ie && /(static|relative)/.test(this.css("position")) || /absolute/.test(this.css("position")) ? this.parents().filter(function() {
                    return /(relative|absolute|fixed)/.test(e.css(this, "position")) && /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0) : this.parents().filter(function() {
                    return /(auto|scroll)/.test(e.css(this, "overflow") + e.css(this, "overflow-y") + e.css(this, "overflow-x"))
                }).eq(0), /fixed/.test(this.css("position")) || !t.length ? e(document) : t
            },
            zIndex: function(t) {
                if (void 0 !== t) return this.css("zIndex", t);
                if (this.length)
                    for (var a, i, o = e(this[0]); o.length && o[0] !== document;) {
                        if (("absolute" === (a = o.css("position")) || "relative" === a || "fixed" === a) && (i = parseInt(o.css("zIndex"), 10), !isNaN(i) && 0 !== i)) return i;
                        o = o.parent()
                    }
                return 0
            },
            uniqueId: function() {
                return this.each(function() {
                    this.id || (this.id = "ui-id-" + ++o)
                })
            },
            removeUniqueId: function() {
                return this.each(function() {
                    r.test(this.id) && e(this).removeAttr("id")
                })
            }
        }), e.extend(e.expr[":"], {
            data: e.expr.createPseudo ? e.expr.createPseudo(function(t) {
                return function(a) {
                    return !!e.data(a, t)
                }
            }) : function(t, a, i) {
                return !!e.data(t, i[3])
            },
            focusable: function(t) {
                return a(t, !isNaN(e.attr(t, "tabindex")))
            },
            tabbable: function(t) {
                var i = e.attr(t, "tabindex"),
                    o = isNaN(i);
                return (o || i >= 0) && a(t, !o)
            }
        }), e("<a>").outerWidth(1).jquery || e.each(["Width", "Height"], function(t, a) {
            function i(t, a, i, r) {
                return e.each(o, function() {
                    a -= parseFloat(e.css(t, "padding" + this)) || 0, i && (a -= parseFloat(e.css(t, "border" + this + "Width")) || 0), r && (a -= parseFloat(e.css(t, "margin" + this)) || 0)
                }), a
            }
            var o = "Width" === a ? ["Left", "Right"] : ["Top", "Bottom"],
                r = a.toLowerCase(),
                n = {
                    innerWidth: e.fn.innerWidth,
                    innerHeight: e.fn.innerHeight,
                    outerWidth: e.fn.outerWidth,
                    outerHeight: e.fn.outerHeight
                };
            e.fn["inner" + a] = function(t) {
                return void 0 === t ? n["inner" + a].call(this) : this.each(function() {
                    e(this).css(r, i(this, t) + "px")
                })
            }, e.fn["outer" + a] = function(t, o) {
                return "number" != typeof t ? n["outer" + a].call(this, t) : this.each(function() {
                    e(this).css(r, i(this, t, !0, o) + "px")
                })
            }
        }), e.fn.addBack || (e.fn.addBack = function(e) {
            return this.add(null == e ? this.prevObject : this.prevObject.filter(e))
        }), e("<a>").data("a-b", "a").removeData("a-b").data("a-b") && (e.fn.removeData = function(t) {
            return function(a) {
                return arguments.length ? t.call(this, e.camelCase(a)) : t.call(this)
            }
        }(e.fn.removeData)), e.ui.ie = !!/msie [\w.]+/.exec(navigator.userAgent.toLowerCase()), e.support.selectstart = "onselectstart" in document.createElement("div"), e.fn.extend({
            disableSelection: function() {
                return this.bind((e.support.selectstart ? "selectstart" : "mousedown") + ".ui-disableSelection", function(e) {
                    e.preventDefault()
                })
            },
            enableSelection: function() {
                return this.unbind(".ui-disableSelection")
            }
        }), e.extend(e.ui, {
            plugin: {
                add: function(t, a, i) {
                    var o, r = e.ui[t].prototype;
                    for (o in i) r.plugins[o] = r.plugins[o] || [], r.plugins[o].push([a, i[o]])
                },
                call: function(e, t, a) {
                    var i, o = e.plugins[t];
                    if (o && e.element[0].parentNode && 11 !== e.element[0].parentNode.nodeType)
                        for (i = 0; i < o.length; i++) e.options[o[i][0]] && o[i][1].apply(e.element, a)
                }
            },
            hasScroll: function(t, a) {
                if ("hidden" === e(t).css("overflow")) return !1;
                var i = a && "left" === a ? "scrollLeft" : "scrollTop",
                    o = !1;
                return t[i] > 0 || (t[i] = 1, o = t[i] > 0, t[i] = 0, o)
            }
        })
    }(jQuery),
    function(e, t) {
        var a = 0,
            i = Array.prototype.slice,
            o = e.cleanData;
        e.cleanData = function(t) {
            for (var a, i = 0; null != (a = t[i]); i++) try {
                e(a).triggerHandler("remove")
            } catch (e) {}
            o(t)
        }, e.widget = function(t, a, i) {
            var o, r, n, s, l = {},
                d = t.split(".")[0];
            t = t.split(".")[1], o = d + "-" + t, i || (i = a, a = e.Widget), e.expr[":"][o.toLowerCase()] = function(t) {
                return !!e.data(t, o)
            }, e[d] = e[d] || {}, r = e[d][t], n = e[d][t] = function(e, t) {
                if (!this._createWidget) return new n(e, t);
                arguments.length && this._createWidget(e, t)
            }, e.extend(n, r, {
                version: i.version,
                _proto: e.extend({}, i),
                _childConstructors: []
            }), s = new a, s.options = e.widget.extend({}, s.options), e.each(i, function(t, i) {
                if (!e.isFunction(i)) return void(l[t] = i);
                l[t] = function() {
                    var e = function() {
                            return a.prototype[t].apply(this, arguments)
                        },
                        o = function(e) {
                            return a.prototype[t].apply(this, e)
                        };
                    return function() {
                        var t, a = this._super,
                            r = this._superApply;
                        return this._super = e, this._superApply = o, t = i.apply(this, arguments), this._super = a, this._superApply = r, t
                    }
                }()
            }), n.prototype = e.widget.extend(s, {
                widgetEventPrefix: r ? s.widgetEventPrefix : t
            }, l, {
                constructor: n,
                namespace: d,
                widgetName: t,
                widgetFullName: o
            }), r ? (e.each(r._childConstructors, function(t, a) {
                var i = a.prototype;
                e.widget(i.namespace + "." + i.widgetName, n, a._proto)
            }), delete r._childConstructors) : a._childConstructors.push(n), e.widget.bridge(t, n)
        }, e.widget.extend = function(t) {
            for (var a, o, r = i.call(arguments, 1), n = 0, s = r.length; n < s; n++)
                for (a in r[n]) o = r[n][a], r[n].hasOwnProperty(a) && void 0 !== o && (e.isPlainObject(o) ? t[a] = e.isPlainObject(t[a]) ? e.widget.extend({}, t[a], o) : e.widget.extend({}, o) : t[a] = o);
            return t
        }, e.widget.bridge = function(t, a) {
            var o = a.prototype.widgetFullName || t;
            e.fn[t] = function(r) {
                var n = "string" == typeof r,
                    s = i.call(arguments, 1),
                    l = this;
                return r = !n && s.length ? e.widget.extend.apply(null, [r].concat(s)) : r, n ? this.each(function() {
                    var a, i = e.data(this, o);
                    return i ? e.isFunction(i[r]) && "_" !== r.charAt(0) ? (a = i[r].apply(i, s),
                        a !== i && void 0 !== a ? (l = a && a.jquery ? l.pushStack(a.get()) : a, !1) : void 0) : e.error("no such method '" + r + "' for " + t + " widget instance") : e.error("cannot call methods on " + t + " prior to initialization; attempted to call method '" + r + "'")
                }) : this.each(function() {
                    var t = e.data(this, o);
                    t ? t.option(r || {})._init() : e.data(this, o, new a(r, this))
                }), l
            }
        }, e.Widget = function() {}, e.Widget._childConstructors = [], e.Widget.prototype = {
            widgetName: "widget",
            widgetEventPrefix: "",
            defaultElement: "<div>",
            options: {
                disabled: !1,
                create: null
            },
            _createWidget: function(t, i) {
                i = e(i || this.defaultElement || this)[0], this.element = e(i), this.uuid = a++, this.eventNamespace = "." + this.widgetName + this.uuid, this.options = e.widget.extend({}, this.options, this._getCreateOptions(), t), this.bindings = e(), this.hoverable = e(), this.focusable = e(), i !== this && (e.data(i, this.widgetFullName, this), this._on(!0, this.element, {
                    remove: function(e) {
                        e.target === i && this.destroy()
                    }
                }), this.document = e(i.style ? i.ownerDocument : i.document || i), this.window = e(this.document[0].defaultView || this.document[0].parentWindow)), this._create(), this._trigger("create", null, this._getCreateEventData()), this._init()
            },
            _getCreateOptions: e.noop,
            _getCreateEventData: e.noop,
            _create: e.noop,
            _init: e.noop,
            destroy: function() {
                this._destroy(), this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(e.camelCase(this.widgetFullName)), this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName + "-disabled ui-state-disabled"), this.bindings.unbind(this.eventNamespace), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")
            },
            _destroy: e.noop,
            widget: function() {
                return this.element
            },
            option: function(t, a) {
                var i, o, r, n = t;
                if (0 === arguments.length) return e.widget.extend({}, this.options);
                if ("string" == typeof t)
                    if (n = {}, i = t.split("."), t = i.shift(), i.length) {
                        for (o = n[t] = e.widget.extend({}, this.options[t]), r = 0; r < i.length - 1; r++) o[i[r]] = o[i[r]] || {}, o = o[i[r]];
                        if (t = i.pop(), void 0 === a) return void 0 === o[t] ? null : o[t];
                        o[t] = a
                    } else {
                        if (void 0 === a) return void 0 === this.options[t] ? null : this.options[t];
                        n[t] = a
                    } return this._setOptions(n), this
            },
            _setOptions: function(e) {
                var t;
                for (t in e) this._setOption(t, e[t]);
                return this
            },
            _setOption: function(e, t) {
                return this.options[e] = t, "disabled" === e && (this.widget().toggleClass(this.widgetFullName + "-disabled ui-state-disabled", !!t).attr("aria-disabled", t), this.hoverable.removeClass("ui-state-hover"), this.focusable.removeClass("ui-state-focus")), this
            },
            enable: function() {
                return this._setOption("disabled", !1)
            },
            disable: function() {
                return this._setOption("disabled", !0)
            },
            _on: function(t, a, i) {
                var o, r = this;
                "boolean" != typeof t && (i = a, a = t, t = !1), i ? (a = o = e(a), this.bindings = this.bindings.add(a)) : (i = a, a = this.element, o = this.widget()), e.each(i, function(i, n) {
                    function s() {
                        if (t || !0 !== r.options.disabled && !e(this).hasClass("ui-state-disabled")) return ("string" == typeof n ? r[n] : n).apply(r, arguments)
                    }
                    "string" != typeof n && (s.guid = n.guid = n.guid || s.guid || e.guid++);
                    var l = i.match(/^(\w+)\s*(.*)$/),
                        d = l[1] + r.eventNamespace,
                        c = l[2];
                    c ? o.delegate(c, d, s) : a.bind(d, s)
                })
            },
            _off: function(e, t) {
                t = (t || "").split(" ").join(this.eventNamespace + " ") + this.eventNamespace, e.unbind(t).undelegate(t)
            },
            _delay: function(e, t) {
                function a() {
                    return ("string" == typeof e ? i[e] : e).apply(i, arguments)
                }
                var i = this;
                return setTimeout(a, t || 0)
            },
            _hoverable: function(t) {
                this.hoverable = this.hoverable.add(t), this._on(t, {
                    mouseenter: function(t) {
                        e(t.currentTarget).addClass("ui-state-hover")
                    },
                    mouseleave: function(t) {
                        e(t.currentTarget).removeClass("ui-state-hover")
                    }
                })
            },
            _focusable: function(t) {
                this.focusable = this.focusable.add(t), this._on(t, {
                    focusin: function(t) {
                        e(t.currentTarget).addClass("ui-state-focus")
                    },
                    focusout: function(t) {
                        e(t.currentTarget).removeClass("ui-state-focus")
                    }
                })
            },
            _trigger: function(t, a, i) {
                var o, r, n = this.options[t];
                if (i = i || {}, a = e.Event(a), a.type = (t === this.widgetEventPrefix ? t : this.widgetEventPrefix + t).toLowerCase(), a.target = this.element[0], r = a.originalEvent)
                    for (o in r) o in a || (a[o] = r[o]);
                return this.element.trigger(a, i), !(e.isFunction(n) && !1 === n.apply(this.element[0], [a].concat(i)) || a.isDefaultPrevented())
            }
        }, e.each({
            show: "fadeIn",
            hide: "fadeOut"
        }, function(t, a) {
            e.Widget.prototype["_" + t] = function(i, o, r) {
                "string" == typeof o && (o = {
                    effect: o
                });
                var n, s = o ? !0 === o || "number" == typeof o ? a : o.effect || a : t;
                o = o || {}, "number" == typeof o && (o = {
                    duration: o
                }), n = !e.isEmptyObject(o), o.complete = r, o.delay && i.delay(o.delay), n && e.effects && e.effects.effect[s] ? i[t](o) : s !== t && i[s] ? i[s](o.duration, o.easing, r) : i.queue(function(a) {
                    e(this)[t](), r && r.call(i[0]), a()
                })
            }
        })
    }(jQuery);
var amp = amp || {};
! function() {
    function e(e) {
        var t = [];
        for (var a in e) e.hasOwnProperty(a) && t.push(a + "=" + e[a]);
        return t.join("&")
    }

    function t(e, t) {
        for (var a = e.split("&"), i = [], o = 0; o < a.length; o++) {
            var r = a[o].split("="),
                n = {};
            t ? t(r, n) : n[r[0]] = r[1], i.push(n)
        }
        return i
    }

    function a(e) {
        return "[object Array]" === Object.prototype.toString.call(e)
    }
    amp.di = {}, amp.stats = {},
        function() {
            for (var e = 0, t = ["webkit", "moz"], a = 0; a < t.length && !window.requestAnimationFrame; ++a) window.requestAnimationFrame = window[t[a] + "RequestAnimationFrame"], window.cancelAnimationFrame = window[t[a] + "CancelAnimationFrame"] || window[t[a] + "CancelRequestAnimationFrame"];
            window.requestAnimationFrame || (window.requestAnimationFrame = function(t, a) {
                var i = (new Date).getTime(),
                    o = Math.max(0, 16 - (i - e)),
                    r = window.setTimeout(function() {
                        t(i + o)
                    }, o);
                return e = i + o, r
            }), window.cancelAnimationFrame || (window.cancelAnimationFrame = function(e) {
                clearTimeout(e)
            })
        }();
    var i = i || {};
    i.stringify = i.stringify || function(e) {
            var t = typeof e;
            if ("object" != t || null === e) return "string" == t && (e = '"' + e + '"'), String(e);
            var a, o, r = [],
                n = e && e.constructor == Array;
            for (a in e) e.hasOwnProperty(a) && (o = e[a], t = typeof o, "string" == t ? o = '"' + o + '"' : "object" == t && null !== o && (o = i.stringify(o)), r.push((n ? "" : '"' + a + '":') + String(o)));
            return (n ? "[" : "{") + String(r) + (n ? "]" : "}")
        }, i.parse = i.parse || function(e) {
            if ("string" != typeof e || !e) return null;
            var t = /^[\],:{}\s]*$/,
                a = /\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,
                i = /"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,
                o = /(?:^|:|,)(?:\s*\[)+/g,
                r = /^\s+|\s+$/g;
            return t.test(e.replace(r, "").replace(a, "@").replace(i, "]").replace(o, "")) ? new Function("return " + e)() : void 0
        },
        function() {
            var e, t, a, i;
            ! function() {
                var o = {},
                    r = {};
                e = function(e, t, a) {
                    o[e] = {
                        deps: t,
                        callback: a
                    }
                }, i = a = t = function(e) {
                    if (i._eak_seen = o, r[e]) return r[e];
                    if (r[e] = {}, !o[e]) throw new Error("Could not find module " + e);
                    for (var a, n = o[e], s = n.deps, l = n.callback, d = [], c = 0, u = s.length; u > c; c++) "exports" === s[c] ? d.push(a = {}) : d.push(t(function(t) {
                        if ("." !== t.charAt(0)) return t;
                        for (var a = t.split("/"), i = e.split("/").slice(0, -1), o = 0, r = a.length; r > o; o++) {
                            var n = a[o];
                            if (".." === n) i.pop();
                            else {
                                if ("." === n) continue;
                                i.push(n)
                            }
                        }
                        return i.join("/")
                    }(s[c])));
                    var p = l.apply(this, d);
                    return r[e] = a || p
                }
            }(), e("promise/all", ["./utils", "exports"], function(e, t) {
                "use strict";

                function a(e) {
                    var t = this;
                    if (!i(e)) throw new TypeError("You must pass an array to all.");
                    return new t(function(t, a) {
                        function i(e, a) {
                            n[e] = a, 0 == --s && t(n)
                        }
                        var r, n = [],
                            s = e.length;
                        0 === s && t([]);
                        for (var l = 0; l < e.length; l++) r = e[l], r && o(r.then) ? r.then(function(e) {
                            return function(t) {
                                i(e, t)
                            }
                        }(l), a) : i(l, r)
                    })
                }
                var i = e.isArray,
                    o = e.isFunction;
                t.all = a
            }), e("promise/asap", ["exports"], function(e) {
                "use strict";

                function t() {
                    for (var e = 0; e < s.length; e++) {
                        var t = s[e];
                        (0, t[0])(t[1])
                    }
                    s = []
                }

                function a(e, t) {
                    1 === s.push([e, t]) && i()
                }
                var i, o = "undefined" != typeof window ? window : {},
                    r = o.MutationObserver || o.WebKitMutationObserver,
                    n = "undefined" != typeof global ? global : void 0 === this ? window : this,
                    s = [];
                i = "undefined" != typeof process && "[object process]" === {}.toString.call(process) ? function() {
                    return function() {
                        process.nextTick(t)
                    }
                }() : r ? function() {
                    var e = 0,
                        a = new r(t),
                        i = document.createTextNode("");
                    return a.observe(i, {
                            characterData: !0
                        }),
                        function() {
                            i.data = e = ++e % 2
                        }
                }() : function() {
                    return function() {
                        n.setTimeout(t, 1)
                    }
                }(), e.asap = a
            }), e("promise/config", ["exports"], function(e) {
                "use strict";

                function t(e, t) {
                    return 2 !== arguments.length ? a[e] : void(a[e] = t)
                }
                var a = {
                    instrument: !1
                };
                e.config = a, e.configure = t
            }), e("promise/polyfill", ["./promise", "./utils", "exports"], function(e, t, a) {
                "use strict";

                function i() {
                    var e;
                    "Promise" in (e = "undefined" != typeof global ? global : "undefined" != typeof window && window.document ? window : self) && "resolve" in e.Promise && "reject" in e.Promise && "all" in e.Promise && "race" in e.Promise && function() {
                        var t;
                        return new e.Promise(function(e) {
                            t = e
                        }), r(t)
                    }() || (e.Promise = o)
                }
                var o = e.Promise,
                    r = t.isFunction;
                a.polyfill = i
            }), e("promise/promise", ["./config", "./utils", "./all", "./race", "./resolve", "./reject", "./asap", "exports"], function(e, t, a, i, o, r, n, s) {
                "use strict";

                function l(e) {
                    if (!C(e)) throw new TypeError("You must pass a resolver function as the first argument to the promise constructor");
                    if (!(this instanceof l)) throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.");
                    this._subscribers = [], d(e, this)
                }

                function d(e, t) {
                    function a(e) {
                        m(t, e)
                    }

                    function i(e) {
                        g(t, e)
                    }
                    try {
                        e(a, i)
                    } catch (e) {
                        i(e)
                    }
                }

                function c(e, t, a, i) {
                    var o, r, n, s, l = C(a);
                    if (l) try {
                        o = a(i), n = !0
                    } catch (e) {
                        s = !0, r = e
                    } else o = i, n = !0;
                    h(t, o) || (l && n ? m(t, o) : s ? g(t, r) : e === P ? m(t, o) : e === A && g(t, o))
                }

                function u(e, t, a, i) {
                    var o = e._subscribers,
                        r = o.length;
                    o[r] = t, o[r + P] = a, o[r + A] = i
                }

                function p(e, t) {
                    for (var a, i, o = e._subscribers, r = e._detail, n = 0; n < o.length; n += 3) a = o[n], i = o[n + t], c(t, a, i, r);
                    e._subscribers = null
                }

                function h(e, t) {
                    var a, i = null;
                    try {
                        if (e === t) throw new TypeError("A promises callback cannot return that same promise.");
                        if ($(t) && (i = t.then, C(i))) return i.call(t, function(i) {
                            return !!a || (a = !0, void(t !== i ? m(e, i) : f(e, i)))
                        }, function(t) {
                            return !!a || (a = !0, void g(e, t))
                        }), !0
                    } catch (t) {
                        return !!a || (g(e, t), !0)
                    }
                    return !1
                }

                function m(e, t) {
                    e === t ? f(e, t) : h(e, t) || f(e, t)
                }

                function f(e, t) {
                    e._state === x && (e._state = _, e._detail = t, b.async(v, e))
                }

                function g(e, t) {
                    e._state === x && (e._state = _, e._detail = t, b.async(y, e))
                }

                function v(e) {
                    p(e, e._state = P)
                }

                function y(e) {
                    p(e, e._state = A)
                }
                var b = e.config,
                    $ = (e.configure, t.objectOrFunction),
                    C = t.isFunction,
                    k = (t.now, a.all),
                    L = i.race,
                    F = o.resolve,
                    w = r.reject,
                    S = n.asap;
                b.async = S;
                var x = void 0,
                    _ = 0,
                    P = 1,
                    A = 2;
                l.prototype = {
                    constructor: l,
                    _state: void 0,
                    _detail: void 0,
                    _subscribers: void 0,
                    then: function(e, t) {
                        var a = this,
                            i = new this.constructor(function() {});
                        if (this._state) {
                            var o = arguments;
                            b.async(function() {
                                c(a._state, i, o[a._state - 1], a._detail)
                            })
                        } else u(this, i, e, t);
                        return i
                    },
                    catch: function(e) {
                        return this.then(null, e)
                    }
                }, l.all = k, l.race = L, l.resolve = F, l.reject = w, s.Promise = l
            }), e("promise/race", ["./utils", "exports"], function(e, t) {
                "use strict";

                function a(e) {
                    var t = this;
                    if (!i(e)) throw new TypeError("You must pass an array to race.");
                    return new t(function(t, a) {
                        for (var i, o = 0; o < e.length; o++) i = e[o], i && "function" == typeof i.then ? i.then(t, a) : t(i)
                    })
                }
                var i = e.isArray;
                t.race = a
            }), e("promise/reject", ["exports"], function(e) {
                "use strict";

                function t(e) {
                    return new this(function(t, a) {
                        a(e)
                    })
                }
                e.reject = t
            }), e("promise/resolve", ["exports"], function(e) {
                "use strict";

                function t(e) {
                    return e && "object" == typeof e && e.constructor === this ? e : new this(function(t) {
                        t(e)
                    })
                }
                e.resolve = t
            }), e("promise/utils", ["exports"], function(e) {
                "use strict";

                function t(e) {
                    return a(e) || "object" == typeof e && null !== e
                }

                function a(e) {
                    return "function" == typeof e
                }

                function i(e) {
                    return "[object Array]" === Object.prototype.toString.call(e)
                }
                var o = Date.now || function() {
                    return (new Date).getTime()
                };
                e.objectOrFunction = t, e.isFunction = a, e.isArray = i, e.now = o
            }), t("promise/polyfill").polyfill()
        }(), amp.conf = {
            cache_window: 216e5,
            default_size: 190,
            client_id: null,
            di_basepath: "http://i1.adis.ws/",
            content_basepath: "http://c1.adis.ws/",
            err_img: null
        },
        function() {
            amp.init = function(e) {
                for (var t in e) amp.conf.hasOwnProperty(t) && (amp.conf[t] = e[t])
            }
        }();
    var o = amp.indexOf = function(e, t) {
            "use strict";
            if (null == e) throw new TypeError;
            var a = Object(e),
                i = a.length >>> 0;
            if (0 === i) return -1;
            var o = 0;
            if (arguments.length > 1 && (o = Number(arguments[2]), o != o ? o = 0 : 0 != o && o != 1 / 0 && o != -1 / 0 && (o = (o > 0 || -1) * Math.floor(Math.abs(o)))), o >= i) return -1;
            for (var r = o >= 0 ? o : Math.max(i - Math.abs(o), 0); i > r; r++)
                if (r in a && a[r] === t) return r;
            return -1
        },
        r = function() {
            var e = Object.prototype.hasOwnProperty,
                t = !{
                    toString: null
                }.propertyIsEnumerable("toString"),
                a = ["toString", "toLocaleString", "valueOf", "hasOwnProperty", "isPrototypeOf", "propertyIsEnumerable", "constructor"],
                i = a.length;
            return function(o) {
                if ("object" != typeof o && ("function" != typeof o || null === o)) throw new TypeError("Object.keys called on non-object");
                var r, n, s = [];
                for (r in o) e.call(o, r) && s.push(r);
                if (t)
                    for (n = 0; i > n; n++) e.call(o, a[n]) && s.push(a[n]);
                return s
            }
        }();
    ! function() {
        function t(e) {
            var t = 0;
            for (var a in e) e.hasOwnProperty(a) && ++t;
            return t
        }
        amp.getAssetURL = function(e) {
            return amp.conf.di_basepath + e.type + "/" + amp.conf.client_id + "/" + e.name
        };
        var i = function(e) {
                var t = [];
                if (e.items || e.set && e.set.items)
                    for (var a = e.items || e.set.items, o = 0; o < a.length; o++) {
                        var r = a[o];
                        "video" == r.type ? t.push({
                            name: r.name,
                            type: "v"
                        }) : (r.items || r.set && r.set.items) && (t = t.concat(i(r)))
                    }
                return t
            },
            r = function(e, t) {
                for (var a = [], i = 0; i < e.length; i++) {
                    for (var o = e[i], r = !1, n = 0; n < t.length; n++) {
                        var s = t[n];
                        if (s.name === o.name && s.type === o.type) {
                            r = !0;
                            break
                        }
                    }
                    r || a.push(o)
                }
                return a
            },
            n = function(e, t, a) {
                for (var i in t)
                    if (t.hasOwnProperty(i)) {
                        if (-1 != o(a, i)) continue;
                        e[i] = t[i]
                    } return e
            },
            s = function(e) {
                for (var t in e)
                    if (e.hasOwnProperty(t))
                        for (var a = e[t], i = 0; i < a.media.length; i++) a.media[i].htmlCodec = amp.videoToFormat(a.media[i]);
                return e
            },
            l = function(e, t) {
                for (var a in e)
                    if (e.hasOwnProperty(a)) {
                        var i = e[a];
                        i.media = amp.sortVideoSource(i.media, t)
                    } return e
            },
            d = function(e, t) {
                for (var a in e) {
                    if (e.hasOwnProperty(a)) var i = e[a],
                        o = function(e, t) {
                            if (e.items || e.set && e.set.items)
                                for (var a = e.items || e.set.items, i = 0; i < a.length; i++) {
                                    var r = a[i];
                                    "video" == r.type && r.name == t.name ? r = n(r, t, ["url"]) : (r.items || r.set && r.set.items) && (r = o(r, t))
                                }
                            return e
                        };
                    t = o(t, i)
                }
                return t
            },
            c = function(e, t) {
                for (var a in e) {
                    if (e.hasOwnProperty(a)) var i = e[a],
                        o = function(e, t) {
                            if (e.items || e.set && e.set.items)
                                for (var a = e.items || e.set.items, i = 0; i < a.length; i++) {
                                    var r = a[i];
                                    "video" == r.type ? a.splice(i, 1) : (r.items || r.set && r.set.items) && (r = o(r, t))
                                }
                            return e
                        };
                    t = o(t, i)
                }
                return t
            };
        amp.get = function(e, o, n, u, p, h) {
            var m = 0,
                f = !0,
                v = {},
                y = {},
                b = 0,
                p = p || 6e4,
                $ = function(t) {
                    return function(a, o) {
                        var n = i(o),
                            f = r(n, e),
                            g = function() {
                                m++, v[a] = o, v[a].url = t, v[a].name = v[a].name ? v[a].name : a, m == b && k()
                            };
                        f.length ? amp.get(f, function(e) {
                            e = s(e), u && (e = l(e, u)), o = d(e, o), g()
                        }, function(e) {
                            o = c(e, o), g()
                        }, !1, p, h || !1) : (o.media && (o = s({
                            d: o
                        }).d, u && (o = l({
                            d: o
                        }, u).d)), g())
                    }
                },
                C = function(e) {
                    return function(t, a) {
                        m++, y[t] = a, y[t].url = e, f = !0, m == b && k()
                    }
                },
                k = function() {
                    t(v) > 0 && o && (h && "function" == typeof h && (v = h(v)), o(v)), t(y) > 0 && n && (h && "function" == typeof h && (y = h(y)), n(y))
                },
                L = function(e) {
                    return !!(e && e.type && e.name)
                };
            if (a(e)) {
                b = e.length;
                for (var F = 0; b > F; F++)
                    if (L(e[F])) {
                        var w = amp.getAssetURL(e[F]);
                        g(w + ".js", e[F].name, $(w), C(w), e.transform, p)
                    }
            } else {
                if (b = 1, !L(e)) return;
                var w = amp.getAssetURL(e);
                g(amp.getAssetURL(e) + ".js", e.name, $(w), C(w), e.transform, p)
            }
        };
        var u = function() {
                var e = new Date;
                return e -= e % amp.conf.cache_window
            },
            p = function(e) {
                var t = m[e];
                t && t.dispose(), delete h[e], delete f[e], delete m[e]
            },
            h = [],
            m = [],
            f = [];
        amp.jsonCache = {}, amp.jsonReturn = function(e, t) {
            if (h[e]) {
                clearTimeout(f[e]);
                for (var a = 0; a < h[e].length; a++) {
                    var i = h[e][a];
                    "error" == t.status ? i.fail && i.fail(e, t) : (amp.jsonCache[e] = t, i.win && i.win(e, t))
                }
                p(e)
            }
        }, amp.get.createScript = function(e, t) {
            var a = document.createElement("script");
            return a.src = e, a.onerror = t, a.dispose = function() {
                document.body.removeChild(a)
            }, document.body.appendChild(a), a
        }, amp.clearJsonCache = function() {
            amp.jsonCache = {}
        };
        var g = amp.jsonp = function(t, a, i, o, r, n) {
            var n = n || 6e4;
            if (r ? r += "&" : r = "", amp.jsonCache[a]) return void i(a, amp.jsonCache[a]);
            if (h[a]) return void h[a].push({
                win: i,
                fail: o
            });
            h[a] = [{
                win: i,
                fail: o
            }], f[a] = setTimeout(function() {
                amp.jsonReturn(a, {
                    status: "error",
                    code: 404,
                    message: "Not Found",
                    name: a
                })
            }, n);
            var s = t + "?" + r + e({
                    deep: !0,
                    timestamp: u(),
                    arg: "'" + a + "'",
                    func: "amp.jsonReturn"
                }),
                l = amp.get.createScript(s, function(e) {
                    amp.jsonReturn(a, {
                        status: "error",
                        code: 404,
                        message: "Not Found",
                        name: a
                    })
                });
            m[a] = l
        }
    }(),
    function() {
        amp.content = function(t, o, r, n) {
            var n = n || 6e4;
            a(t) || (t = [t]), i(t, n, function(t, a) {
                t.length > 0 && o(e(t)), a.length > 0 && r(a)
            })
        };
        var e = function(e) {
                for (var t = [], a = 0; a < e.length; a++)
                    for (var i = e[a].result.payload, o = 0; o < i.length; o++) {
                        var r = i[o];
                        r.name = r.key.split("/"), r.name = r.name[r.name.length - 1], t.push(r)
                    }
                return t
            },
            t = function(e) {
                return amp.conf.content_basepath + "p/" + amp.conf.client_id + "/[" + o(e) + "].js"
            },
            i = function(e, a, i) {
                for (var o = [], r = [], n = Math.ceil(e.length / 10), s = function(e, t) {
                        o.push({
                            name: e,
                            result: t
                        }), d()
                    }, l = function(e, t) {
                        r.push({
                            name: e,
                            result: t
                        }), d()
                    }, d = function() {
                        o.length + r.length === n && i && i(o, r)
                    }, c = 0; n > c; c++) {
                    var u = e.slice(10 * c, 10 * c + 10);
                    amp.jsonp(t(e), u.join(","), s, l, a)
                }
            },
            o = function(e) {
                for (var t = [], a = 0; a < e.length; a++) t.push('"/c//' + e[a] + '"');
                return t.join(",")
            }
    }(),
    function() {
        amp.genHTML = function(e, t, o, r) {
            if (e) {
                var n = {},
                    s = function(e) {
                        var a = i(e, o, r);
                        n[e.name] = a, t && t.appendChild && t.appendChild(a)
                    };
                if (a(e))
                    for (var l = 0; l < e.length; l++) s(e[l]);
                else {
                    if ("object" != typeof e) return;
                    s(e)
                }
                return n
            }
        };
        var e = function(e) {
            if (!e || !e.src && !e.url) return !1;
            for (var t = e.isImage ? e.url : e.src, a = amp.di.get(t), i = 0; i < a.length; i++) {
                var o = a[i];
                if (o.width && "undefined" != o.width || o.height && "undefined" != o.height) return !0
            }
            return !1
        };
        amp.videoToFormat = function(e) {
            if (e) {
                var t = e.format,
                    a = "",
                    i = "";
                switch (t && t.toLowerCase()) {
                    case "flash video":
                        t = "flv";
                        break;
                    case "mpeg4":
                        t = "mp4"
                }
                switch (e["video.codec"] && e["video.codec"].toLowerCase()) {
                    case "h264":
                        break;
                    case "theora":
                        a = "theora";
                        break;
                    case "vp8":
                        a = "vp8"
                }
                switch (e["audio.codec"] && e["audio.codec"].toLowerCase()) {
                    case "aac":
                        "mp4" == t && (i = "mp4a.40.2");
                        break;
                    case "vorbis":
                        i = "vorbis"
                }
                var o = t ? "video/" + t : o;
                return "" != a && (o += '; codecs="', o += a, "" != i && (o += ", " + i), o += '"'), o
            }
        }, amp.genVideoHTML = function(t, a) {
            t.src || (t.src = t.url);
            var i = document.createElement("div");
            i.setAttribute("id", t.name);
            var o = document.createElement("video");
            e(t) ? o.setAttribute("poster", t.src) : o.setAttribute("poster", amp.di.width(t.src, amp.conf.default_size));
            try {
                o.setAttribute("preload", "auto")
            } catch (e) {}
            o.setAttribute("controls", "");
            var r, n = t.media;
            if (r = a ? amp.sortVideoSource(n, a) : n)
                for (var s = 0; s < r.length; s++) {
                    var n = r[s],
                        l = document.createElement("source");
                    l.setAttribute("src", n.src), l.setAttribute("res", n.bitrate), l.setAttribute("label", n.profileLabel), l.setAttribute("type", amp.videoToFormat(n)), o.appendChild(l)
                }
            return i.appendChild(o), i
        }, amp.sortVideoSource = function(e, t) {
            if (a(t)) {
                if (t.length > 0) {
                    for (var i = e.length, r = [], n = 0; n < t.length; n++)
                        for (var s = 0; i > s; s++)(t[n] == e[s].profile || t[n] == e[s].profileLabel) && r.push(e[s]);
                    for (var s = 0; i > s; s++) - 1 == o(t, e[s].profile) && -1 == o(t, e[s].profileLabel) && r.push(e[s]);
                    return r
                }
            } else if (!isNaN(t)) return e.sort(function(e, a) {
                return Math.abs(t - parseInt(e.bitrate)) - Math.abs(t - parseInt(a.bitrate))
            });
            return e
        };
        var t = function(e) {
                var t = e.split("/");
                return t[t.length - 1].split("?")[0]
            },
            i = function(a, o, n) {
                var s;
                if (a.isImage || "img" == a.type) {
                    var s = document.createElement("img"),
                        l = a.isImage ? a.url : a.src;
                    e(a) || (l = l + "?" + r(a)), o ? s.setAttribute("data-amp-src", l) : s.setAttribute("src", l), s.setAttribute("class", "amp-main-img"), a.name ? s.setAttribute("id", a.name) : s.setAttribute("id", t(l))
                } else if ("video" == a.type || a.media) s = amp.genVideoHTML(a, n);
                else if (a.items || a.set.items) {
                    var d = a.items || a.set.items,
                        s = document.createElement("ul");
                    s.setAttribute("id", a.name);
                    for (var c = 0; c < d.length; c++) {
                        var u = document.createElement("li");
                        s.appendChild(u);
                        var p = d[c];
                        p.url = a.url, u.appendChild(i(p, o))
                    }
                }
                return s
            },
            r = function(e) {
                return e.width > e.height ? "w=" + amp.conf.default_size : "h=" + amp.conf.default_size
            }
    }(),
    function() {
        var i = [{
                shortName: "cs",
                fullName: "grayscale",
                val: "gray"
            }, {
                shortName: "dpi",
                fullName: "dpi",
                type: "number"
            }, {
                shortName: "dpiFilter",
                fullName: "dpiFilter",
                type: "string"
            }, {
                shortName: "resize",
                fullName: "resize",
                type: "boolean"
            }, {
                shortName: "filter",
                fullName: "filter",
                type: "string"
            }, {
                shortName: "upscale",
                fullName: "upscale",
                type: "boolean"
            }, {
                shortName: "bg",
                fullName: "background",
                type: "string"
            }, {
                shortName: "qlt",
                fullName: "quality",
                type: "number"
            }, {
                shortName: "cm",
                fullName: "compositeMode",
                type: "string"
            }, {
                shortName: "cs",
                fullName: "colourSpace",
                type: "string"
            }, {
                shortName: "maxW",
                fullName: "maxWidth",
                type: "number"
            }, {
                shortName: "maxH",
                fullName: "maxHeight",
                type: "number"
            }, {
                shortName: "template",
                fullName: "template",
                type: "array"
            }, {
                shortName: "w",
                fullName: "width",
                type: "number"
            }, {
                shortName: "h",
                fullName: "height",
                type: "number"
            }, {
                shortName: "fmt",
                fullName: "format",
                type: "string"
            }, {
                shortName: "unsharp",
                fullName: "sharpen",
                type: "string"
            }, {
                shortName: "crop",
                fullName: "crop",
                type: "string"
            }, {
                shortName: "pcrop",
                fullName: "preCrop",
                type: "string"
            }, {
                shortName: "img404",
                fullName: "missingImage",
                type: "string"
            }, {
                shortName: "sm",
                fullName: "scaleMode",
                type: "string"
            }, {
                shortName: "strip",
                fullName: "strip",
                type: "boolean"
            }, {
                shortName: "orig",
                fullName: "original",
                type: "boolean"
            }],
            o = function(e, t, a) {
                for (var o = 0; o < e.length; o++) {
                    "object" == typeof e[o] && r(e[o]);
                    for (var n in e[o])
                        if (e[o].hasOwnProperty(n))
                            for (var s = 0; s < i.length; s++) i[s][t] == n && (i[s].val && (e[o][i[s][t]] = i[s].val), i[s][a] != i[s][t] && (e[o][i[s][a]] = e[o][n], delete e[o][n]))
                }
                return e
            },
            n = function(e) {
                for (var t = {}, a = e.length; a--;) {
                    var i = "object" == typeof e[a] && r(e[a]);
                    t[i] && "template" != i && e.splice(a, 1), t[i] = !0
                }
                return e
            },
            s = function(a, i, o) {
                var s = a.split("?"),
                    l = s[1] ? t(s[1], function(e, t) {
                        e[1] ? t[e[0]] = e[1] : t.template = e[0]
                    }) : [];
                if (!l) return !1;
                if (!i && !o) return n(l);
                if (l = n(l), !i && o) {
                    for (var d = [], c = 0; c < l.length; c++)
                        if (l[c][o]) {
                            if ("template" != o) return l[c][o];
                            d.push(l[c][o])
                        } return d.length > 0 && d
                }
                l = n(l.concat(i));
                for (var u = [], c = 0; c < l.length; c++) {
                    var p = r(l[c]);
                    if ("template" == p) {
                        var h = l[c][p];
                        if ("[object Array]" === Object.prototype.toString.call(h))
                            for (var m = 0; m < h.length; m++) u.push(h[m]);
                        else u.push(h)
                    } else u.push(e(l[c]))
                }
                return s[0] + "?" + u.join("&")
            },
            l = function(e, t, a, i) {
                for (var o in e)
                    if (e.hasOwnProperty(o))
                        if (null != e[o] && "object" == typeof e[o]) {
                            if (("img" == e[o].type || "set" == e[o].type || "video" == e[o].type) && a && a.exclude) {
                                for (var r = !1, n = 0; n < a.exclude.length; n++) e[o].name == a.exclude[n] && (r = !0);
                                if (r) continue
                            }
                            l(e[o], t, a, i)
                        } else("src" == o && ("img" == e.type || "set" == e.type || "video" == e.type) || "url" == o && e.isImage) && (e[o] = s(e[o], t, i));
                return e
            };
        amp.di.get = function(e) {
                return !!e && o(s(e), "shortName", "fullName")
            }, amp.di.set = function(e, t, i, r) {
                return t && (t = a(t) ? o(t, "fullName", "shortName") : o([t], "fullName", "shortName")), "string" != typeof e ? l(e, t, i, r) : s(e, t, r)
            },
            function() {
                for (var e = 0; e < i.length; e++) ! function(e) {
                    amp.di[e.fullName] = function(t, a) {
                        if (t) {
                            var i = "grayscale" != e.fullName ? e.shortName : null,
                                o = void 0 !== e.val ? e.val : a;
                            if (void 0 !== o) {
                                var r = {};
                                return r[e.shortName] = o, amp.di.set(t, r, null, i)
                            }
                            var n = amp.di.set(t, null, null, i);
                            switch (e.type) {
                                case "number":
                                    return Number(n);
                                case "boolean":
                                    if ("true" == n) return !0;
                                    if ("false" == n) return !1;
                                case "string":
                                default:
                                    return n
                            }
                        }
                    }
                }(i[e])
            }()
    }(),
    function() {
        var e = [];
        e.all = [], amp.stats.bind = function(i) {
            if ("function" == typeof i) return void e.all.push(i);
            if (a(i))
                for (var o = 0; o < i.length; o++) amp.stats.bind(i[o]);
            else "object" == typeof i && i.cb && (i.type && i.event ? t(i.type + "." + i.event, i.cb) : i.type ? t(i.type, i.cb) : i.event && t(i.event, i.cb))
        };
        var t = function(t, a) {
            e[t] ? e[t].push(a) : e[t] = [a]
        };
        amp.stats.event = function(t, a, i, o) {
            var r = [];
            r = r.concat(e.all, e[a] ? e[a] : [], e[i] ? e[i] : [], e[a + "." + i] ? e[a + "." + i] : []);
            for (var n = 0; n < r.length; n++) r[n](t, a, i, o)
        }
    }()
}(),
function(e) {
    e.widget("amp.ampStack", {
        options: {
            delay: 3e3,
            autoplay: !1,
            loop: !0,
            fade: !1,
            start: 1,
            responsive: !0,
            center: !1,
            parentSize: !1,
            gesture: {
                enabled: !1,
                fingers: 1,
                dir: "horz",
                distance: 50
            },
            states: {
                selected: "amp-selected",
                seen: "amp-seen"
            }
        },
        _getCreateOptions: function() {
            var t = this.element.data().ampStack;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            var t = this,
                a = this._children = this.element.children();
            this.canTouch = !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), this.element.addClass("amp"), this.element.addClass("amp-stack"), this.count = this._children.length, this._index = Math.max(1, Math.min(this.options.start, this.count)), a.addClass("amp-layer"), a.css({
                display: "none"
            }), a.eq(this._index - 1).css("display", "block"), a.eq(this._index - 1).addClass(this.options.states.selected + " " + this.options.states.seen), this._addGestures(), this.options.autoplay && this.play(), setTimeout(function(e) {
                return function() {
                    return e._calcSize()
                }
            }(t), 1), e(window).bind("resize", function(t) {
                return function() {
                    return setTimeout(e.proxy(t._calcSize, t), 1)
                }
            }(t)), this._track("created", {
                index: this._index,
                canNext: this.canNext(),
                canPrev: this.canPrev()
            })
        },
        _addGestures: function() {
            this.options.gesture.enabled && this.canTouch && (this._startG = function(t) {
                if (t.originalEvent && t.originalEvent.touches && t.originalEvent.touches[0] && t.originalEvent.touches.length != this.options.gesture.fingers) return !0;
                if (t.originalEvent && t.originalEvent.target && "range" === t.originalEvent.target.type) return !0;
                this.changed = !1, this.moved = !1, this.startTouchEvent = t;
                var t = this._getEvent(t);
                return this.startPos = "horz" == this.options.gesture.dir ? t.pageX - t.target.offsetLeft : t.pageY - t.target.offsetTop, e(window).on("touchmove", e.proxy(this._moveG, this)), e(window).on("touchcancel", e.proxy(this._stopG, this)), e(window).on("touchend", e.proxy(this._stopG, this)), !0
            }, this._getEvent = function(e) {
                return ("touchend" == e.type || "touchcancel" == e.type) && (e = this.lastEvent), e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
            }, this._moveG = function(e) {
                return !(!(e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && e.originalEvent.touches.length != this.options.gesture.fingers) && (!e.originalEvent || !e.originalEvent.target || "range" !== e.originalEvent.target.type) && (this.moved = !0, this.lastEvent = e, e = this._getEvent(e), "horz" == this.options.gesture.dir ? e.pageX - this.startPos : e.pageY - this.startPos != 0))
            }, this._stopG = function(t) {
                if (e(window).off("touchmove", e.proxy(this._moveG, this)), e(window).off("touchcancel", e.proxy(this._stopG, this)), e(window).off("touchend", e.proxy(this._stopG, this)), this.moved && !this.changed) {
                    this.changed = !0, t = this._getEvent(t);
                    var a = "horz" == this.options.gesture.dir ? t.pageX - t.target.offsetLeft : t.pageY - t.target.offsetTop,
                        i = a - this.startPos;
                    if (Math.abs(i) < this.options.gesture.distance) return;
                    i > 0 ? this.prev() : this.next()
                }
            }, this._children.on("touchstart", e.proxy(this._startG, this)))
        },
        _getIndex: function(e) {
            var t = this._children;
            if (e > t.length) {
                if (!this.options.loop) return e;
                for (; e > t.length;) e -= t.length
            } else if (1 > e) {
                if (!this.options.loop) return e;
                for (; 1 > e;) e += t.length
            }
            return e
        },
        play: function() {
            var e = this;
            clearInterval(this.interval), this.interval = setInterval(function() {
                e.next()
            }, this.options.delay), this._track("play", null)
        },
        pause: function() {
            clearInterval(this.interval), this._track("pause", null)
        },
        next: function() {
            this.goTo(this._index + 1)
        },
        prev: function() {
            this.goTo(this._index - 1)
        },
        redraw: function() {
            this._calcSize()
        },
        _calcSize: function() {
            var e, t;
            if (this.options.responsive && this.options.width && this.options.height && "auto" != this.options.width && "auto" != this.options.height) this.options.parentSize ? (e = Math.round(this.element.parent().width()), t = Math.round(e * (this.options.height / this.options.width)), t > this.element.parent().height() && (t = this.element.parent().height(), e = Math.round(t * (this.options.width / this.options.height))), this.element.width(e), this.element.height(t)) : (e = Math.round(this.element.width()), t = Math.round(e * (this.options.height / this.options.width)), this.element.height(t)), this.options.center && (this.element.css("margin-left", this.element.parent().width() / 2 - e / 2 + "px"), this.element.css("margin-top", this.element.parent().height() / 2 - t / 2 + "px"));
            else {
                if (this.options.width && "auto" != this.options.width) this.element.width(this.options.width);
                else if ("auto" == this.options.width) {
                    for (var a = 0, i = 0; i < this.count; i++)
                        for (var i = 0; i < this.count; i++) {
                            var o = this._children.eq(i),
                                r = o.css("display");
                            o.css("display", "block"), a = Math.max(o.outerWidth(!0), a), o.css("display", r)
                        }
                    this.element.width(a)
                }
                if (this.options.height && "auto" != this.options.height) this.element.height(this.options.height);
                else if ("auto" == this.options.height) {
                    for (var a = 0, i = 0; i < this.count; i++)
                        for (var i = 0; i < this.count; i++) {
                            var o = this._children.eq(i),
                                r = o.css("display");
                            o.css("display", "block");
                            var t = o.outerHeight(!0);
                            a = Math.max(o.outerHeight(!0), a), o.css("display", r)
                        }
                    this.element.height(a)
                }
            }
        },
        _onFinish: function() {
            for (var e = 1, t = this; 0 != this._asyncMethods.length;) {
                var a = this._asyncMethods.splice(0, 1)[0];
                a.func && a.args && (setTimeout(function() {
                    a && a.func && a.func.apply(t, a.args)
                }, e), e++)
            }
        },
        visible: function(e, t) {
            e != this._visible && (this._track("visible", {
                visible: e
            }), this._visible = e, this.callChildMethod(this._children.eq(this._index - 1), "visible", e), e && this._calcSize())
        },
        callChildMethod: function(t, a, i) {
            var o = function(t) {
                for (var r = 0; r < t.length; r++) {
                    var n = !1,
                        s = e(t[r]),
                        l = s.data();
                    for (var d in l)
                        if (l.hasOwnProperty(d)) {
                            var c = l[d];
                            c[a] && "function" == typeof c[a] && "amp" == d.substring(0, 3) && (c[a](i), n = !0)
                        } n || o(s.children())
                }
            };
            o(t.children())
        },
        goTo: function(e, t, a) {
            if (e = parseInt(e), !isNaN(e)) {
                if (this._animating) return void this._asyncMethods.push({
                    func: this.goTo,
                    args: arguments
                });
                if (t || this._exeBinds(e, "goTo"), this._getIndex(e) != this._index) {
                    if (e > this.count) {
                        if (!this.options.loop) return;
                        for (; e > this.count;) e -= this.count;
                        this._track("looped", "forwards")
                    } else if (1 > e) {
                        if (!this.options.loop) return;
                        for (; 1 > e;) e += this.count;
                        this._track("looped", "backwards")
                    }
                    a || this._animate(e)
                }
            }
        },
        _exeBinds: function(t, a) {
            if (this._boundArray)
                for (var i = 0; i < this._boundArray.length; i++) {
                    var o = this._boundArray[i];
                    if (!a || a == o.on) {
                        var r = e(o.selector),
                            n = r.data();
                        for (var s in n)
                            if (n.hasOwnProperty(s)) {
                                var l = n[s];
                                l[o.action] && "amp" == s.substring(0, 3) && l[o.action](t, !0)
                            }
                    }
                }
        },
        _numToIndex: function(e) {
            if (e > this.count) {
                if (!this.options.loop) return this.count;
                for (; e > this.count;) e -= this.count
            } else if (1 > e) {
                if (!this.options.loop) return 1;
                for (; 1 > e;) e += this.count
            }
            return e
        },
        bind: function(e) {
            this._boundArray || (this._boundArray = []), this._boundArray.push(e)
        },
        canPrev: function() {
            return this.options.loop || this._index > 1
        },
        canNext: function() {
            return this.options.loop || this._index < this.count
        },
        _animate: function(e) {
            var t = this.element,
                a = t.children("li").eq(this._index - 1),
                i = t.children("li").eq(e - 1);
            a.removeClass(this.options.states.selected), this.options.fade ? a.fadeOut() : a.css("display", "none"), i.addClass(this.options.states.selected + " " + this.options.states.seen), this.options.fade ? i.fadeIn() : i.css("display", "block"), this._setIndex(e)
        },
        _setIndex: function(e, t) {
            if (!t) {
                var a = this._children.eq(this._index - 1),
                    i = this._children.eq(e - 1);
                this.callChildMethod(i, "visible", !0), this.callChildMethod(a, "visible", !1)
            }
            this._index = e, this._track("change", {
                index: e,
                canPrev: this.canPrev(),
                canNext: this.canNext()
            })
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "stack", e, t)
        },
        _destroy: function() {
            this.element.removeClass("amp"), this.element.removeClass("amp-stack"), this._removeEmptyAttributeHelper(this.element);
            var t = this._children;
            t.removeClass("amp-layer"), t.removeClass(this.options.states.selected), t.removeClass(this.options.states.seen), t.css("display", "");
            for (var a = 0, i = t.length; i > a; a++) this._removeEmptyAttributeHelper(e(t[a]))
        },
        _removeEmptyAttributeHelper: function(e, t) {
            for (var a = t || ["class", "style"], i = 0, o = a.length; o > i; i++) e.attr(a[i]) && e.prop(a[i]) || e.removeAttr(a[i])
        }
    })
}(jQuery),
function(e) {
    e.widget("amp.ampCarousel", e.amp.ampStack, {
            options: {
                animDuration: 250,
                easing: "",
                dir: "horz",
                animate: !0,
                layout: "standard",
                start: 1,
                preferForward: !1,
                no3D: !1,
                thumbWidthExceed: 0,
                gesture: {
                    enabled: !1,
                    fingers: 2,
                    distance: 50
                },
                onActivate: {
                    select: !0,
                    goTo: !0
                },
                preloadNext: !0,
                responsive: !0,
                states: {
                    visible: "amp-visible",
                    partiallyVisible: "amp-partially-visible"
                },
                animationStartCallback: function() {},
                animationEndCallback: function() {}
            },
            _getCreateOptions: function() {
                var t = this.element.data().ampCarousel;
                return t ? e.extend(!0, {}, this.options, t) : this.options
            },
            _layoutManagers: {},
            _create: function() {
                this._elms = [], this._visible = 0, this._asyncMethods = [], this._canNext = !0, this._movedCounter = 0;
                var t = this;
                if (this.options.delay = Math.max(this.options.delay, this.options.animDuration + 1), this.options.animDuration = this.options.animate ? this.options.animDuration : 1, this.canTouch = !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), this.element.addClass("amp"), this.element.addClass("amp-carousel"), this.element.wrapInner("<div class='amp-anim-container' style='width:100%;height:100%;position:absolute'></div>"),
                    this._container = this.element.children().eq(0), this._containerPos = 0, this._children = this.element.children().eq(0).children(), this.count = this._children.length, this._checkCSS3(), this._index = Math.max(1, Math.min(this.options.start, this.count)), this._selectedIndex = this._index, this._children.addClass("amp-slide"), this._calcSize(), this._chooseLayoutManager(), this._children.eq(this._index - 1).addClass(this.options.states.selected), this.options.onActivate.goTo || this.options.onActivate.select)
                    for (var a = 0; a < this.count; a++) {
                        var i = function() {
                                t.moved = !1, setTimeout(function() {
                                    e(window).on(this.canTouch ? "touchmove" : "mousemove", e.proxy(o, t))
                                }, 1)
                            },
                            o = function(e) {
                                t._movedCounter += 1, t._movedCounter >= 7 && (t.moved = !0)
                            },
                            r = function(a) {
                                var i = t;
                                return function(r) {
                                    return e(window).off(this.canTouch ? "touchmove" : "mousemove", e.proxy(o, t)), !!i.moved || (i.options.onActivate.goTo && i.goTo(a), i.options.onActivate.select && i.select(a), !0)
                                }
                            }(a + 1);
                        this._children.eq(a).on(this.canTouch ? "touchstart" : "mousedown", e.proxy(i, t)), this._children.eq(a).on(this.canTouch ? "touchend" : "mouseup", e.proxy(r, t))
                    }
                this._calcSize(), setTimeout(e.proxy(this._calcSize, this), 1), this.options.responsive && e(window).bind("resize", function(t) {
                    return function() {
                        return setTimeout(e.proxy(t.redraw, t), 1)
                    }
                }(t)), this.options.autoplay && this.play(), this._preloadNext(), this._track("created", {
                    index: this._index,
                    canNext: this.canNext(),
                    canPrev: this.canPrev(),
                    visible: this._visible,
                    count: this.count
                })
            },
            _chooseLayoutManager: function() {
                var e, t;
                if ("[object Array]" === Object.prototype.toString.call(this.options.layout)) {
                    for (var a = 0; a < this.options.layout.length; a++)
                        if (t = this._layoutManagers[this.options.layout[a]], this.checkFeatures(t)) {
                            e = t;
                            break
                        }
                } else t = this._layoutManagers[this.options.layout], this.checkFeatures(t) && (e = t);
                e || (e = this._layoutManagers.standard), this._layoutManager = e.create(this)
            },
            _calcSize: function() {
                this._super(), this._layoutManager && this._layoutManager.layout(this._index), this._track("resized", {
                    index: this._index,
                    canNext: this.canNext(),
                    canPrev: this.canPrev(),
                    visible: this._visible,
                    count: this.count
                })
            },
            _firstCharLowerCase: function(e) {
                return e.substr(0, 1).toLowerCase() + e.substr(1)
            },
            _dashConvert: function(e) {
                for (var t = "", a = 0; a < e.length; a++) {
                    var i = e.substr(a, 1);
                    t += i === i.toUpperCase() ? "-" + i.toLowerCase() : i
                }
                return t
            },
            _checkCSS3: function() {
                var e = ["", "Webkit", "Moz", "O", "ms", "Khtml"],
                    t = [{
                        name: "transform",
                        dom: "Transform"
                    }, {
                        name: "transition",
                        dom: "Transition"
                    }, {
                        name: "transitionDuration",
                        dom: "TransitionDuration"
                    }, {
                        name: "transitionTimingFunction",
                        dom: "TransitionTimingFunction"
                    }, {
                        name: "anim",
                        dom: "AnimationName"
                    }],
                    a = this.element[0],
                    i = document.createElement("p");
                this._canCSS3 = {}, document.body.insertBefore(i, null);
                for (var o = 0; o < e.length; o++)
                    for (var r = e[o], n = 0; n < t.length; n++) {
                        var s = t[n];
                        this._canCSS3[s.name] || (void 0 !== a.style[r + s.dom] && (this._canCSS3[s.name] = r + s.dom), void 0 !== a.style[r + this._firstCharLowerCase(s.dom)] && (this._canCSS3[s.name] = r + this._firstCharLowerCase(s.dom)))
                    }
                if (this._canCSS3.transform && !this.options.no3D && void 0 !== i.style[this._canCSS3.transform]) {
                    i.style[this._canCSS3.transform] = "translate3d(1px,1px,1px)";
                    var l = window.getComputedStyle(i).getPropertyValue(this._dashConvert(this._canCSS3.transform));
                    this._canCSS3.can3D = null != l && "" != l
                }
                document.body.removeChild(i)
            },
            _direction: function(e) {
                if (!this.options.loop) return e > this._index;
                var t = 0,
                    a = 0;
                this._index = Math.min(this._index, this.count);
                for (var i = this._index; i != e;) i > this.count ? i = 1 : (i++, t++);
                for (i = this._index; i != e;) 1 > i ? i = this.count : (i--, a++);
                return !!(this.options.preferForward && t > 1 && a > 1) || a >= t
            },
            _loopIndex: function(e, t, a) {
                for (var i = e ? 1 : -1, o = t, r = 0; a > r; r++) o + i > this.count ? o = 1 : 1 > o + i ? o = this.count : o += i;
                return o
            },
            _loopCount: function(e, t, a) {
                a = Math.min(a, this.count);
                for (var i = e ? 1 : -1, o = t, r = 0; o != a;) r++, o + i > this.count ? o = 1 : 1 > o + i ? o = this.count : o += i;
                return r
            },
            _resetPos: function(e) {
                this._canCSS3.transform && this._canCSS3.transition ? e.css(this._canCSS3.transform, "") : "horz" == this.options.dir ? e.css("left", "") : e.css("top", "")
            },
            _removeStates: function() {
                this._children.removeClass(this.options.states.visible), this._children.removeClass(this.options.states.partiallyVisible)
            },
            _setState: function(e, t) {
                switch (t) {
                    case "visible":
                        e.addClass(this.options.states.visible), e.addClass(this.options.states.seen), this.callChildMethod(e, "visible", !0);
                        break;
                    case "invisible":
                        e.removeClass(this.options.states.visible), this.callChildMethod(e, "visible", !1);
                        break;
                    case "partial":
                        e.addClass(this.options.states.partiallyVisible), this.callChildMethod(e, "visible", !1)
                }
            },
            _posElm: function(e, t, a, i) {
                this._elms[a] || (this._elms[a] = 0);
                var o = i ? this._elms[a] + t : t;
                this._canCSS3.transform && this._canCSS3.transition ? this._canCSS3.can3D ? "horz" == this.options.dir ? e.css(this._canCSS3.transform, "translate3d(" + o + "px,0,0)") : e.css(this._canCSS3.transform, "translate3d(0," + o + "px,0)") : "horz" == this.options.dir ? e.css(this._canCSS3.transform, "translate(" + o + "px,0)") : e.css(this._canCSS3.transform, "translate(0," + o + "px)") : "horz" == this.options.dir ? e.css("left", o + "px") : e.css("top", o + "px"), this._elms[a] = o
            },
            _preloadNext: function() {
                if (this.options.preloadNext) {
                    var e = this._visible + (this._index - 1),
                        t = this._loopIndex(!0, e, 1),
                        a = this._children.eq(t - 1);
                    this.callChildMethod(a, "preload", !0)
                }
            },
            _measureElements: function(e, t, a) {
                for (var i = 0, o = (this.options.dir, 0); a > o; o++) {
                    var r = e ? t + o : t - o;
                    r > this.count && (r = 1), 1 > r && (r = this.count), i += this._measureElement(r - 1)
                }
                return e ? 0 - i : i
            },
            _moveElements: function(e, t, a) {
                var i = this._container,
                    o = this;
                if (this._containerPos == e) return o._canCSS3.transform && o._canCSS3.transitionDuration && (i.css(o._canCSS3.transitionTimingFunction, ""), i.css(o._canCSS3.transitionDuration, "")), void(t && t());
                if (this._containerPos = e, o.options.animationStartCallback(), !a) {
                    if (o._canCSS3.transform && o._canCSS3.transitionDuration) {
                        var r = o._canCSS3.can3D ? "horz" == o.options.dir ? "translate3d(" + e + "px,0,0)" : "translate3d(0, " + e + "px,0)" : "horz" == o.options.dir ? "translateX(" + e + "px)" : "translateY(" + e + "px";
                        i.css(o._canCSS3.transform, r)
                    } else "horz" == o.options.dir ? i.css("left", e + "px") : i.css("top", e + "px");
                    return void(t && t())
                }
                if (o._canCSS3.transform && o._canCSS3.transitionDuration) {
                    var r = o._canCSS3.can3D ? "horz" == o.options.dir ? "translate3d(" + e + "px,0,0)" : "translate3d(0, " + e + "px,0)" : "horz" == o.options.dir ? "translateX(" + e + "px)" : "translateY(" + e + "px";
                    i.css(o._canCSS3.transform, r), i.css(o._canCSS3.transitionTimingFunction, o.options.easing), i.css(o._canCSS3.transitionDuration, o.options.animDuration + "ms"), i.off().on("transitionend webkitTransitionEnd oTransitionEnd otransitionend MSTransitionEnd", function() {
                        i.css(o._canCSS3.transitionTimingFunction, ""), i.css(o._canCSS3.transitionDuration, ""), t && t(), o.options.animationEndCallback()
                    })
                } else {
                    var n = {};
                    "horz" == o.options.dir ? n.left = e + "px" : n.top = e + "px", i.animate(n, o.options.animDuration, "swing", function() {
                        t && t(), o.options.animationEndCallback()
                    })
                }
            },
            _measureElement: function(e) {
                var t, a = "horz" == this.options.dir,
                    i = this._children.eq(e),
                    o = i[0].getBoundingClientRect().height;
                return i.css("display", "block"), a ? t = i.outerWidth(!0) : (t = i.outerHeight(!0), o && 1 >= t - o && (t = o), o || (t = i.outerHeight(!0) - 1)), i.css("display", ""), t
            },
            _elmSize: function() {
                return "horz" == this.options.dir ? this.element.width() : this.element.height()
            },
            _animate: function(e) {
                var t = this;
                this._animating = !0, this._layoutManager.focus(e, !0, function() {
                    t._setIndex(e)
                })
            },
            _setIndex: function(e) {
                this._index = e, this._track("change", {
                    index: this._index,
                    canNext: this.canNext(),
                    canPrev: this.canPrev(),
                    visible: this._visible,
                    count: this.count
                }), this._animating = !1, this._preloadNext(), this._onFinish()
            },
            _track: function(e, t) {
                this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "carousel", e, t)
            },
            _destroy: function() {
                this.element.removeClass("amp"), this.element.removeClass("amp-carousel"), this._removeEmptyAttributeHelper(this.element);
                var e = this._children;
                e.removeClass("amp-slide"), e.removeClass(this.options.states.visible), e.removeClass(this.options.states.partiallyVisible), e.removeClass(this.options.states.selected), e.removeClass(this.options.states.seen);
                for (var t = 0; t < e.length; t++) {
                    var a = e.eq(t);
                    this._resetPos(a, 0), this._removeEmptyAttributeHelper(a)
                }
                this._container.replaceWith(e)
            },
            checkFeatures: function(e) {
                if (e) {
                    if (e.requiredFeatures) {
                        for (var t = !0, a = 0; a < e.requiredFeatures.length; a++) {
                            var i = e.requiredFeatures[a];
                            this._canCSS3[i] || (t = !1)
                        }
                        return t
                    }
                    return !0
                }
                return !1
            },
            canNext: function() {
                return this.options.loop || this._canNext && this._index + this._visible <= this.count
            },
            redraw: function() {
                return this._animating ? void this._asyncMethods.push({
                    func: self._calcSize,
                    args: arguments
                }) : this._calcSize()
            },
            select: function(e, t) {
                var a = this._numToIndex(e),
                    i = this._children.eq(this._selectedIndex - 1),
                    o = this._children.eq(a - 1);
                i.removeClass(this.options.states.selected), o.addClass(this.options.states.selected + " " + this.options.states.seen), this._selectedIndex = a, o.hasClass(this.options.states.visible) || this.goTo(a, t), t || this._exeBinds(a, "select"), this._preloadNext(), this._track("selected", {
                    index: a
                })
            }
        }),
        function() {
            var t = function(t, a) {
                function i() {
                    this.name = "standard", this.options = a, this.duplicated = []
                }
                var o = i.prototype;
                o.init = function() {
                    t.canTouch && t.options.gesture.enabled ? t._children.on("touchstart", e.proxy(this.start, this)) : t._children.on("mousedown", e.proxy(this.start, this))
                }, o.start = function(a) {
                    if (!this.animating) {
                        if (a.originalEvent && a.originalEvent.touches && a.originalEvent.touches[0] && a.originalEvent.touches.length != t.options.gesture.fingers) return !0;
                        this.duplicationOffsets = {}, this.duplicationOffsets.left = 0, this.duplicationOffsets.leftSize = 0, this.duplicationOffsets.right = 0, this.duplicationOffsets.rightSize = 0, this.changed = !1, this.startPos = t._containerPos, this.moved = !1, this.startTouchEvent = a;
                        var a = this.getEvent(a);
                        return this.xo = a.pageX - t._containerPos, this.yo = a.pageY - t._containerPos, this.xo2 = a.pageX, this.yo2 = a.pageY, e(window).on("touchmove", e.proxy(this.move, this)), e(window).on("touchcancel", e.proxy(this.stop, this)), e(window).on("touchend", e.proxy(this.stop, this)), e(window).on("mouseup", e.proxy(this.stop, this)), !0
                    }
                }, o.move = function(e) {
                    if (e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && e.originalEvent.touches.length != t.options.gesture.fingers) return !0;
                    this.moved = !0, this.lastEvent = e, e = this.getEvent(e);
                    var a = e.pageX - this.xo,
                        i = e.pageY - this.yo,
                        o = e.pageX - this.xo2,
                        r = e.pageY - this.yo2;
                    if (this.moveDir || (Math.abs(o) < Math.abs(r) ? this.moveDir = "vert" : Math.abs(o) > Math.abs(r) ? this.moveDir = "horz" : this.moveDir = t.options.dir), t.options.dir != this.moveDir) return !0;
                    var n = "horz" == t.options.dir ? a : i;
                    return t._moveElements(n, null, !1), t.options.loop && this.checkDuplicate(n), t.options.dir != this.moveDir && void 0
                }, o.checkDuplicate = function(e) {
                    e - this.metrics[this.lastOne - 1].size < 0 - (this.allSize - t._elmSize()) && this.duplicateSlide(!0), 0 - e - this.metrics[0].size <= 0 - this.duplicationOffsets.leftSize && this.duplicateSlide(!1)
                }, o.duplicateSlide = function(e) {
                    if (e) {
                        var a = t._numToIndex(t._index - 1 + t.count + this.duplicationOffsets.right + 1) - 1,
                            i = t._children.eq(a),
                            o = i.clone();
                        t._container.append(o);
                        var r = "horz" == t.options.dir ? o.width() : o.height(),
                            n = this.allSize;
                        t._posElm(o, n, this.count + this.duplicated.length), this.duplicated.push(o), this.duplicationOffsets.right++, this.duplicationOffsets.rightSize += r, this.lastOne = a + 1, this.allSize += r
                    } else {
                        var a = t._numToIndex(t._index - 1 - this.duplicationOffsets.left) - 1,
                            i = t._children.eq(a),
                            o = i.clone();
                        t._container.append(o);
                        var r = "horz" == t.options.dir ? o.width() : o.height(),
                            n = 0 - this.duplicationOffsets.leftSize - r;
                        t._posElm(o, n, this.count + this.duplicated.length), this.duplicated.push(o), this.duplicationOffsets.left++, this.duplicationOffsets.leftSize += r
                    }
                }, o.stop = function(a) {
                    if (t._movedCounter = 0, e(window).off("touchmove", e.proxy(this.move, this)), e(window).off("touchcancel", e.proxy(this.stop, this)), e(window).off("touchend", e.proxy(this.stop, this)), e(window).off("mouseup", e.proxy(this.stop, this)), this.moveDir = null, this.moved && !this.changed) {
                        var i = this.findNearest(),
                            o = i.index + 1;
                        if (o == t._index) {
                            var r = this.startPos - t._containerPos;
                            return Math.abs(r) >= t.options.gesture.distance ? r > 0 ? t.canNext() ? t.next() : t._moveElements(this.startPos, null, !0) : t.canPrev() ? t.prev() : t._moveElements(this.startPos, null, !0) : t._moveElements(this.startPos, null, !0), this.changed = !0, void(t.options.loop && (t._containerPos = 0))
                        }
                        t.options.loop ? (this.animating = !0, t._moveElements(i.pos, e.proxy(function() {
                            this.allSize = this.oAllSize, this.focus(o, !1), t._containerPos = 0, t._setIndex(o), t.goTo(o, null, !0), this.changed = !0, this.animating = !1
                        }, this), !0)) : (this.changed = !0, t.goTo(o))
                    }
                }, o.getEvent = function(e) {
                    return ("touchend" == e.type || "touchcancel" == e.type) && (e = this.startTouchEvent), e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
                }, o.findNearest = function() {
                    var e = 0,
                        a = t._containerPos,
                        i = this.oAllSize,
                        o = 0;
                    if (t.options.loop) {
                        for (; a < 0 - this.oAllSize;) a += this.oAllSize, o--;
                        for (; a > 0;) a -= this.oAllSize, o++
                    }
                    for (var r = 0; r < this.metrics.length; r++) {
                        var n = Math.abs(a + this.metrics[r].pos);
                        i > n && (i = n, e = r)
                    }
                    var s = t._numToIndex(t._index + t.count - 1) - 1,
                        n = Math.abs(a + (this.metrics[s].pos + this.metrics[s].size));
                    return i > n && (i = n, e = t._index - 1, a += this.oAllSize), {
                        index: e,
                        pos: a >= 0 ? this.metrics[e].pos + this.oAllSize * (o - 1) : 0 - this.metrics[e].pos + this.oAllSize * o
                    }
                }, o.layout = function(e) {
                    t.options.loop ? (this.arrange(e), this.focusLoop(e, !1)) : (this.arrange(1), this.focusNoLoop(e, !1))
                }, o.focus = function(e, a, i) {
                    t.options.loop ? this.focusLoop(e, a, i) : (this.focusNoLoop(e, a), i && i())
                }, o.focusNoLoop = function(e, a) {
                    var i = 0 - this.metrics[e - 1].pos,
                        o = 0 - (this.allSize - t._elmSize());
                    i = Math.min(Math.max(o, i), 0), this.setVisibleStates(e, i), t._moveElements(i, null, a)
                }, o.setVisibleStates = function(e, a) {
                    var a = Math.abs(a);
                    t._removeStates();
                    for (var i = 0, o = 0; o < this.metrics.length; o++) {
                        var r = this.metrics[o].pos,
                            n = t._children.eq(o),
                            s = this.metrics[o].size,
                            l = 2 * parseFloat(t._children.eq(o).css("margin-right"));
                        r >= a && r + s - t.options.thumbWidthExceed - l - a <= t._elmSize() ? (t._setState(n, "visible"), i++) : r + s - l > a && r + s - l - a < t._elmSize() || r > a && r - a < t._elmSize() ? t._setState(n, "partial") : t._setState(n, "invisible")
                    }
                    t._visible = i
                }, o.focusLoop = function(e, a, i) {
                    var o = this,
                        r = t._direction(e),
                        n = r ? 0 - this.metrics[e - 1].pos : this.allSize - this.metrics[e - 1].pos;
                    t._loopCount(r, t._index, e), this.duplicate(r), this.setVisibleStates(e, n), t._moveElements(n, function() {
                        for (t._container[0].style[t._canCSS3.transform] = "", "horz" === t.options.dir ? t._container[0].style.left = "" : t._container[0].style.top = "", o.arrange(e); o.duplicated.length > 0;) {
                            var a = o.duplicated.splice(0, 1);
                            a[0].remove(), delete a[0]
                        }
                        i && i()
                    }, a)
                }, o.duplicate = function(e) {
                    for (var a = 0; a < t.count; a++) {
                        var i = t._children.eq(a),
                            o = i.clone();
                        t._container.append(o);
                        var r = e ? this.metrics[a].pos + this.allSize : this.metrics[a].pos - this.allSize;
                        t._posElm(o, r, this.count + this.duplicated.length), this.duplicated.push(o);
                        var n = "border-box" == i.css("box-sizing") ? i.css("borderBottomWidth") + i.css("borderTopWidth") : 0,
                            s = n ? i.css("borderLeftWidth") + i.css("borderRightWidth") : 0;
                        o.css({
                            width: i.width() + n,
                            height: i.height() + s
                        })
                    }
                }, o.arrange = function(e) {
                    var a = 0,
                        i = [],
                        o = [];
                    t._removeStates();
                    for (var r = 0; r < t.count; r++) {
                        var n = r;
                        if (void 0 !== e)
                            for (n += e - 1; n >= t.count;) n -= t.count;
                        var s = t._children.eq(n),
                            l = t._measureElement(n);
                        l + a <= t._elmSize() ? t._setState(s, "visible") : a < t._elmSize() ? t._setState(s, "partial") : t._setState(s, "invisible"), i[n] = {}, i[n].size = l, i[n].pos = a, t._posElm(s, a, n), o[n] = l, a += l
                    }
                    return t.options.loop && (t._containerPos = 0), this.lastOne = e, delete this.metrics, this.metrics = i, this.allSize = a, this.oAllSize = a, {
                        allSize: a,
                        metrics: i
                    }
                };
                var r = new i;
                return r.init(), r
            };
            e.amp.ampCarousel.prototype._layoutManagers.standard = {
                requiredFeatures: null,
                create: t
            }
        }(),
        function() {
            var t = function(t, a) {
                function i() {
                    this.name = "carousel3D", this.options = a, this.styles = [], this.angles = []
                }
                var o = t._canCSS3.transform,
                    r = i.prototype;
                r.init = function() {
                    var a = this;
                    this.element = t._container[0], this.rotation = 0, this.panelCount = t.count, this.totalPanelCount = this.element.children.length, this.theta = 0, this.isHorizontal = "horz" == t.options.dir, t._container.css("perspective", "1000px"), this.modify(), setTimeout(function() {
                        a.animation(!0)
                    }, 10), t.canTouch && t.options.gesture.enabled && t._children.on("touchstart", e.proxy(this.start, this))
                }, r.animation = function(e) {
                    e ? (t._children.css("transitionTimingFunction", t.options.easing), t._children.css("transitionDuration", t.options.animDuration + "ms")) : (t._children.css("transitionTimingFunction", ""), t._children.css("transitionDuration", ""))
                }, r.start = function(a) {
                    if (a.originalEvent && a.originalEvent.touches && a.originalEvent.touches[0] && a.originalEvent.touches.length != t.options.gesture.fingers) return !0;
                    var a = this.getEvent(a);
                    this.xo = a.pageX - a.target.offsetLeft, this.yo = a.pageY - a.target.offsetTop, this.changed = !1, this.moved = !1, this.animation(!1), this.startPos = this.rotation, e(window).on("touchmove", e.proxy(this.move, this)), e(window).on("touchcancel", e.proxy(this.stop, this)), e(window).on("touchend", e.proxy(this.stop, this))
                }, r.move = function(e) {
                    if (e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && e.originalEvent.touches.length != t.options.gesture.fingers) return !0;
                    this.lastEvent = e, this.moved = !0, e = this.getEvent(e);
                    var a = e.pageX - this.xo,
                        i = this.yo - e.pageY,
                        o = "horz" == t.options.dir ? a : i;
                    return o = o > 0 ? Math.min(this.theta / 2, o / 10) : Math.max(0 - this.theta / 2, o / 10), this.rotation = this.startPos + o, this.transform(), !1
                }, r.getEvent = function(e) {
                    return ("touchend" == e.type || "touchcancel" == e.type) && (e = this.lastEvent), e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
                }, r.stop = function(a) {
                    if (e(window).off("touchmove", e.proxy(this.move, this)), e(window).off("touchcancel", e.proxy(this.stop, this)), e(window).off("touchend", e.proxy(this.stop, this)), this.animation(!0), this.moved && !this.changed) {
                        a = this.getEvent(a);
                        var i = a.pageX - this.xo,
                            o = this.yo - a.pageY,
                            r = "horz" == t.options.dir ? i : o;
                        if (this.rotation = this.startPos, Math.abs(r) >= t.options.gesture.distance)
                            if (0 > r) {
                                if (t.canNext()) return void t.next()
                            } else if (t.canPrev()) return void t.prev();
                        this.transform(), this.changed = !0
                    }
                }, r.modify = function() {
                    var e, a, i;
                    for (this.xOffset = t._container.width() / 2 - t._children.eq(0).width() / 2, this.yOffset = t._container.height() / 2 - t._children.eq(0).height() / 2, this.panelSize = this.isHorizontal ? t._children.eq(0).width() : t._children.eq(0).height(), this.rotateFn = this.isHorizontal ? "rotateY" : "rotateX", this.theta = 360 / this.panelCount, this.radius = Math.round(this.panelSize / 2 / Math.tan(Math.PI / this.panelCount)), delete this.styles, delete this.angles, this.styles = [], this.angles = [], i = 0; i < this.panelCount; i++)(e = this.element.children[i]) && (a = this.theta * i, this.angles[i] = a, this.styles[i] = this.rotateFn + "(" + a + "deg) translateZ(" + this.radius + "px)", e.style[o] = this.styles[i], "horz" == t.options.dir ? e.style.left = this.xOffset + "px" : e.style.top = this.yOffset + "px");
                    for (; i < this.totalPanelCount; i++)(e = this.element.children[i]) && (e.style.opacity = 0, e.style[o] = "none");
                    this.rotation = Math.round(this.rotation / this.theta) * this.theta, this.transform()
                }, r.transform = function() {
                    for (var e = 0; e < this.panelCount; e++)
                        if (this.element.children[e]) {
                            for (var t = this.angles[e] + this.rotation; t > 360;) t -= 360;
                            for (; 0 > t;) t += 360;
                            var a;
                            a = 180 >= t ? 180 - t : t - 180, this.element.children[e].style.zIndex = a, this.element.children[e].style[o] = "translateZ(-" + this.radius + "px) " + this.rotateFn + "(" + this.rotation + "deg)" + this.styles[e]
                        }
                }, r.focus = function(e, a, i) {
                    var o = t._direction(e),
                        r = t._loopCount(o, t._index, e),
                        n = t._children.eq(e - 1),
                        s = t._children.eq(t._index - 1);
                    t._setState(n, "visible"), t._setState(s, "invisible"), o ? this.rotation -= this.theta * r : this.rotation += this.theta * r, this.transform(), i && i()
                }, r.layout = function(e) {
                    this.modify(), this.focus(e)
                };
                var n = new i;
                return n.init(), n
            };
            e.amp.ampCarousel.prototype._layoutManagers.carousel3D = {
                requiredFeatures: ["can3D", "transform"],
                create: t
            }
        }()
}(jQuery),
function(e) {
    e.widget("amp.ampImage", {
        options: {
            errImg: null,
            preload: "visible",
            insertAfter: !1
        },
        _loadedHistory: [],
        _getCreateOptions: function() {
            var t = this.element.data().ampImage;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            this.element.addClass("amp"), this.element.addClass("amp-image");
            var t = this;
            this.element.bind("load", function(e) {
                t._loaded()
            }), this.element.bind("error", function() {
                t._failLoad()
            }), -1 == e.inArray(this.options.preload, ["created", "visible", "none"]) && (this.options.preload = "visible"), "created" == this.options.preload && this.newLoad(), this._track("created")
        },
        dimensionsParams: function(t) {
            var a = this,
                i = a.element.data("amp-dimensions"),
                o = t;
            if (!i) return o;
            var r = -1 === o.indexOf("?") ? "?" : "&",
                n = "";
            return e.each(i[0], function(t, i) {
                var s = new RegExp(r + t + "=[0-9]*", "g"),
                    l = o.match(s);
                l && l.length > 0 && e.each(l, function(e, t) {
                    o = o.replace(t, "")
                });
                var d = "window" === i.domName ? e(window) : a.element.closest(i.domName);
                n += r + t + "=" + parseFloat(d[i.domProp](), 10), r = "&"
            }), o += n
        },
        newLoad: function() {
            var t = this.element.attr("src") && "" != this.element.attr("src") ? this.element.attr("src") : this.element.attr("data-amp-src");
            return t = this.dimensionsParams(t), -1 !== e.inArray(t, this._loadedHistory) ? (this.loading && this.loading.remove(), this.element.attr("src", t), void this.element.show()) : (this.loading || (this.loading = e('<div class="amp-loading"></div>')), this.element.hide(), this.options.insertAfter ? this.options.insertAfter.prepend(this.loading) : this.element.parent().append(this.loading), this.element.attr("src", ""), void this.element.attr("src", t))
        },
        visible: function(e) {
            e && e != this._visible && "visible" == this.options.preload && this.newLoad(), this._visible = e
        },
        load: function(e) {
            this.loaded || this.loading || this.newLoad()
        },
        preload: function() {
            this.element.parent().hasClass("amp-spin") || this.newLoad()
        },
        loaded: !1,
        _loaded: function() {
            this._loadedHistory.push(this.element.attr("src")), this._track("loaded", !0), this.loaded = !0, this.loading && this.loading.remove(), this.element.show()
        },
        _failLoad: function() {
            this.options.errImg ? this.element.attr("src", this.options.errImg) : window.amp && amp.conf && amp.conf.err_img && this.element.attr("src", amp.conf.err_img)
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "image", e, t)
        },
        _destroy: function() {
            this.element.removeClass("amp"), this.element.removeClass("amp-image"), this.loading && this.loading.remove(), this.element.css("display", ""), this._removeEmptyAttributeHelper(this.element)
        },
        _removeEmptyAttributeHelper: function(e, t) {
            for (var a = t || ["class", "style"], i = 0, o = a.length; o > i; i++) e.attr(a[i]) && e.prop(a[i]) || e.removeAttr(a[i])
        }
    })
}(jQuery),
function(e) {
    e.widget("amp.ampBuild", {
        options: {},
        _create: function() {
            for (var t in e.amp) e.amp.hasOwnProperty(t) && this.element.find("[data-" + t.replace(/([a-z])([A-Z])/g, "$1-$2").toLowerCase() + "]")[t]();
            this._track("created")
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "build", e, t)
        }
    })
}(jQuery),
function(e) {
    e.widget("amp.ampNav", {
        options: {},
        _getCreateOptions: function() {
            var t = this.element.data().ampNav;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            var e = this.element.data();
            for (var t in e)
                if (e.hasOwnProperty(t)) {
                    var a = e[t];
                    a.bind && "amp" == t.substring(0, 3) && a.bind(this.options)
                } this._track("created")
        },
        _track: function(e, t) {
            window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "navigation", e, t)
        }
    })
}(jQuery),
function(e) {
    var t = {
        top: 0,
        left: 0,
        opacity: 0,
        width: "",
        height: ""
    };
    e.widget("amp.ampZoom", {
        options: {
            zoom: 3,
            url: "",
            activate: {
                touch: "up",
                mouse: "up"
            },
            pan: !1,
            map: !1,
            target: {},
            lens: !0,
            fade: !0,
            preload: {
                image: "created",
                zoomed: "none"
            },
            responsive: !0,
            cursor: {
                active: "auto",
                inactive: "auto"
            },
            transforms: "",
            states: {
                active: "amp-active",
                inactive: "amp-inactive"
            },
            width: "auto",
            height: "auto",
            create: function() {},
            created: function() {},
            zoomedIn: function() {},
            zoomedOut: function() {},
            move: function() {},
            startMove: function() {},
            stopMove: function() {},
            startPreload: function() {},
            preloaded: function() {},
            visible: function() {}
        },
        _zoomLoaded: !1,
        _getCreateOptions: function() {
            this.validTypes = this._createValidTypes(this.options);
            var t = this.element.data().ampZoom;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _createValidTypes: function(e) {
            var t = {};
            for (var a in e)
                if (e.hasOwnProperty(a)) {
                    var i, o = e[a];
                    i = "width" == a || "height" == a ? "number" : typeof o, t[a] = "object" == typeof o ? this._createValidTypes(o) : {
                        type: i,
                        defaultValue: o
                    }
                } return t
        },
        _checkValidTypes: function(e, t) {
            return e
        },
        _create: function() {
            this.options = this._checkValidTypes(this.options, this.validTypes), e.isArray(this.options.zoom) && (this._cycle = {
                current: -1,
                len: this.options.zoom.length
            });
            var a = ["created", "visible", "none"]; - 1 == e.inArray(this.options.preload.image, a) && (this.options.preload.image = "created"), -1 == e.inArray(this.options.preload.zoomed, a) && (this.options.preload.zoomed = "none"), this.element.addClass("amp amp-zoom"), this.element.wrap('<div class="amp-zoom-container"></div>'), this.parent = this.element.parent(), this.parent.prepend(this.loading), this.element.wrap('<div class="amp-zoom-overflow"></div>'), this.overflow = this.element.parent(), this.wrapper = e('<div class="amp-zoom-wrapper"></div>'), this.imgs = [];
            var i = 0;
            do {
                var o = e('<img class="amp-zoom-img">');
                o.css(t), this.wrapper.append(o), this.imgs.push(o), i++
            } while (i < (this._cycle && this._cycle.len));
            if (this.options.responsive && this.element.css({
                    height: "auto",
                    width: "100%",
                    maxWidth: "100%"
                }), this.options.target) {
                this.mark = this.options.map ? {
                    name: "map",
                    inner: "inner"
                } : {
                    name: "box",
                    inner: "wrapper"
                };
                try {
                    this[this.mark.name] = e("body").find(this.options.target)
                } catch (e) {
                    this[this.mark.name] = !1
                }
                this[this.mark.name] && this[this.mark.name].length > 0 ? (this.options.lens && (this.lens = e('<div class="amp-zoom-lens"></div>'), "map" == this.mark.name ? (this[this.mark.name].addClass("amp-zoom-map"), this[this.mark.inner] = e('<div class="amp-zoom-wrapper"></div>'), this[this.mark.inner].append(e('<img class="amp-main-img" src="' + this.element.attr("src") + '">')), this[this.mark.inner].append(this.lens)) : (this[this.mark.name].addClass("amp-zoom-container"), this.parent.append(this.lens))), this[this.mark.inner].hide(), this[this.mark.name].append(this[this.mark.inner]), this[this.mark.inner].addClass(this.options.states.inactive), this[this.mark.inner][0].relatedUUID = this.uuid) : this[this.mark.name] = !1
            }
            this.box || (this.overflow.append(this.wrapper), this.canHideEl = !!e.amp.ampImage), this.target = this.imgs[0], this._setZoomCursor(this.parent), this.parent.addClass(this.options.states.inactive), ("created" == this.options.preload.image || this.element[0].src) && this._loadImage(), "created" == this.options.preload.zoomed && this._loadZoomed()
        },
        _onImageLoad: function() {
            if (!this._imageLoaded) {
                this._track("loaded", !0), this._imageLoaded = !0, this._imageLoading = !1, this._originalImage = this._getNaturalSize(this.element[0].src);
                var t = this;
                this._calcSize(), this.options.responsive && e(window).bind("resize", function(e) {
                    return function() {
                        return e.zoomed && e.zoom(!1), e._calcSize()
                    }
                }(t)), this.moved = !1, this.canTouch = !!("ontouchstart" in window || window.DocumentTouch && document instanceof window.DocumentTouch), this.zoomBy = 1, this.pos = {
                    start: {
                        x: 0,
                        y: 0
                    },
                    last: {
                        x: 0,
                        y: 0
                    },
                    cur: {
                        x: 0,
                        y: 0
                    }
                };
                var a = function() {
                    var a = function(e) {
                            return t.moved = !0, !0
                        },
                        i = function(e) {
                            return o(), !0
                        },
                        o = function(r) {
                            return t.pos.cur = t.pos.last, t.mousedown = !1, t.parent.off(t.canTouch ? "touchmove" : "mousemove", e.proxy(a, t)), t.canTouch || t.parent.off("mouseleave", e.proxy(i, t)), t.parent.off(t.canTouch ? "touchend" : "mouseup", e.proxy(o, t)), t.moved ? void 0 : t.toggle(r)
                        },
                        r = function(r) {
                            t.zoomed && (r.stopPropagation(), r.preventDefault()), t.mousedown = !0;
                            var n = t._getEvent(r);
                            return t.pos.start = {
                                x: n.pageX,
                                y: n.pageY
                            }, setTimeout(function() {
                                t.parent.on(t.canTouch ? "touchmove" : "mousemove", e.proxy(a, t)), t.parent.on(t.canTouch ? "touchend" : "mouseup", e.proxy(o, t))
                            }, 1), t.canTouch || t.parent.on("mouseleave", e.proxy(i, t)), t.moved = !1, r.timeStamp, t.startTouchEvent = r, !0
                        };
                    t.parent.on(t.canTouch ? "touchstart" : "mousedown", e.proxy(r, t))
                };
                if (this.canTouch) {
                    if ("disable" == this.options.activate.touch) return !1;
                    if ("doubleTap" == this.options.activate.touch) {
                        this._lastEvent = "";
                        var i = function(a) {
                                t.parent.on("touchend touchcancel", e.proxy(o, t)), this.startTouchEvent = a;
                                var a = this._getEvent(a);
                                t.pos.start = {
                                    x: a.pageX,
                                    y: a.pageY
                                }, a.timeStamp = (new Date).getTime();
                                var i = a.timeStamp - (this._lastEvent && this._lastEvent.timeStamp) || 0,
                                    r = Math.abs(a.pageX - this._lastEvent.pageX) > 20 || Math.abs(a.pageY - this._lastEvent.pageY) > 20;
                                return 300 > i && 0 != i && !r && this.toggle(this.startTouchEvent), this._lastEvent = a, !0
                            },
                            o = function(a) {
                                t.pos.cur = t.pos.last, t.parent.off("touchend touchcancel", e.proxy(o, t))
                            };
                        t.parent.on("touchstart", e.proxy(i, t))
                    } else if ("pinch" == this.options.activate.touch) {
                        this._scale = 1, this._scaled = !1, this._cycle ? (this.maxZoom = this.options.zoom[this._cycle.len - 1], this._cycle = !1) : this.maxZoom = this.options.zoom;
                        var i = function(a) {
                                if (t.parent.on("touchcancel touchend", e.proxy(n, t)), a.originalEvent && a.originalEvent.touches && a.originalEvent.touches[0]) {
                                    if (1 == a.originalEvent.touches.length) {
                                        var i = t._getEvent(a);
                                        return t.pos.start = {
                                            x: i.pageX,
                                            y: i.pageY
                                        }, !0
                                    }
                                    if (2 != a.originalEvent.touches.length) return !0
                                }
                                return a.preventDefault(), a.stopPropagation(), this.startZoom = this.zoomBy, this.startPos = this.pos.last, this.pos.start = this._getPosition(a.originalEvent.touches), this.pinching = !0, this.hasPinchEnded = !1, this._scaled || (this.o = this._pinchZoomStart(a)), this._startDist = this._getDistance(a.originalEvent.touches), this._scale = this._lastScale || this._scale, this.parent.on("touchmove", e.proxy(r, this)), this.parent.on("touchcancel touchend", e.proxy(o, this)), !0
                            },
                            r = function(e) {
                                if (e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && 2 != e.originalEvent.touches.length) return !0;
                                var t = this._getDistance(e.originalEvent.touches),
                                    a = this._getPosition(e.originalEvent.touches),
                                    i = t / this._startDist;
                                i = Math.max(1, Math.min(i * this._scale, this.maxZoom)), this._pinchZoom(e, i, a, this.o), this._lastScale = i, this._scaled = !0
                            },
                            n = function(a) {
                                t.pos.cur = t.pos.last, t.parent.off("touchcancel touchend", e.proxy(n, t))
                            },
                            o = function(a) {
                                a.originalEvent && a.originalEvent.touches && 0 == a.originalEvent.touches.length && (t.hasPinchEnded = !0), t.parent.off("touchmove", e.proxy(r, this)), t.hasPinchEnded && (1 == this.zoomBy && (this.zoomed = !1), t.pinching = !1, t.pos.cur = t.pos.last, t.parent.off("touchcancel touchend", e.proxy(o, this)))
                            };
                        t.parent.on("touchstart", e.proxy(i, t))
                    } else "none" == this.options.activate.touch || a()
                } else {
                    if ("disable" == this.options.activate.mouse) return !1;
                    if ("over" == this.options.activate.mouse || "over-noclick" == this.options.activate.mouse) {
                        var s = "mouseenter mousedown";
                        "over-noclick" == this.options.activate.mouse && (s = "mouseenter"), t.parent.on(s, function(e) {
                            return "mouseenter" != e.type || t.zoomed ? "mousedown" == e.type ? t.toggle(e) : void 0 : t.toggle(e)
                        }), t.parent.on("mouseleave", function(e) {
                            return t.zoom(!1, e)
                        })
                    } else "down" == this.options.activate.mouse ? (this.options.pan = !1, t.parent.on("mousedown", function(e) {
                        t.toggle(e)
                    })) : "none" == this.options.activate.mouse || a()
                }("created" == this.options.preload.zoomed || this.canTouch && "pinch" == this.options.activate.touch || this._loadZoomedPromise) && this.preload(), this._track("created")
            }
        },
        zoomed: !1,
        toggle: function(e, t) {
            this._cycle ? this.cycle(e, t) : this.zoom(!this.zoomed, e)
        },
        cycle: function(t, a) {
            this.animating || (this._cycle.current = void 0 !== a ? a : this._cycle.current += 1, this.options.zoom[this._cycle.current] ? (this.map && this.inner.off("mousemove touchmove", e.proxy(this._mapMove, this)), this.parent.off("mousemove touchmove"), this.oldTarget = this.target[0] == this.imgs[this._cycle.current][0] ? null : this.target, this.oldZoom = this.options.zoom[this._cycle.current], this.target = this.imgs[this._cycle.current], this.zoom(!0, t), this.pos.cur = this.pos.last) : (this._cycle.current = -1, this.zoom(!1, t)))
        },
        zoom: function(a, i, o) {
            if (a != this.zoomed || this._cycle || o) {
                this.zoomed = a;
                var r = this;
                if (a) {
                    if (this.box && this.box.show(), !this._zoomLoaded) return void this._checkLoaded(i);
                    this.init = !1, this.moveEvent = this.canTouch ? "touchmove" : "mousemove", this.zoomBy = this._cycle ? this.options.zoom[this._cycle.current] || 1 : this.options.zoom;
                    var n = this.overflow.width(),
                        s = this.overflow.height(),
                        l = n * this.zoomBy,
                        d = s * this.zoomBy,
                        c = this.parent.offset(),
                        u = 0,
                        p = 0,
                        h = 0,
                        m = 0,
                        f = 0;
                    void 0 === i && (i = {
                        pageX: n / 2,
                        pageY: s / 2
                    }), this._track("startMove", {
                        domEvent: i,
                        zoom: this.zoomBy
                    }), this.parent.removeClass(this.options.states.inactive).addClass(this.options.states.active), this.wrapper.css({
                        width: l,
                        height: d
                    }), this[this.mark.name] && (this.box && (u = this.box.width(), p = this.box.height(),
                        this.lens && (f = this._makeLens(this.lens, u, p, this.zoomBy, {
                            w: n,
                            h: s
                        }))), this.map && (h = this.map.width(), m = h * (this.element.height() / this.element.width()), this.inner.height(m), this.inner.width(h), this.lens && (f = this._makeLens(this.lens, h, m, this.zoomBy, {
                        w: h,
                        h: m
                    })), this._mapEnd = function(t) {
                        r.mousedownForMap = !1, r.inner.off(r.canTouch ? "touchmove" : "mousemove", e.proxy(r._mapMove, r)), r.inner.off(r.canTouch ? "touchend" : "mouseup", e.proxy(r._mapEnd, r))
                    }, this._mapMove = function(e) {
                        r.mousedownForMap && r._mouseMove(r._getEvent(e), n, s, l, d, r.map.offset(), u, p, h, m, f, !0)
                    }, this._mapStart = function(t) {
                        t.preventDefault(), t.stopPropagation(), r.mousedownForMap = !0, r._mouseMove(r._getEvent(t), n, s, l, d, r.map.offset(), u, p, h, m, f, !0), this.inner.on(r.canTouch ? "touchmove" : "mousemove", e.proxy(r._mapMove, r)), this.inner.on(r.canTouch ? "touchend" : "mouseup", e.proxy(r._mapEnd, r))
                    }, this.inner.on("mouseleave", e.proxy(r._mapEnd, r)), this.inner.on(r.canTouch ? "touchstart" : "mousedown", e.proxy(this._mapStart, r))), this[this.mark.name].show(), this[this.mark.inner].show(), this[this.mark.inner].removeClass(this.options.states.inactive).addClass(this.options.states.active)), this._parentMove = function(e) {
                        e.preventDefault(), e.stopPropagation(), r._mouseMove(r._getEvent(e), n, s, l, d, c, u, p, h, m, f)
                    }, this.parent.on(this.moveEvent, e.proxy(r._parentMove, r)), this._mouseMove(r._getEvent(i), n, s, l, d, c, u, p, h, m, f), this._setZoomCursor(r.lens ? r.lens : r.parent), this.options.fade ? (this.animating = !0, this.target.animate({
                        opacity: 1
                    }, {
                        complete: function() {
                            r.canHideEl && r.element.css({
                                opacity: 1
                            }), r.animating = !1, r.oldTarget && r.oldTarget.css(t)
                        }
                    })) : (this.target.css({
                        opacity: 1
                    }), r.canHideEl && this.element.css({
                        opacity: 1
                    }), r.oldTarget && r.oldTarget.css(t)), this.lens && this.lens.show(), this._track("zoomedIn", {
                        domEvent: i,
                        zoom: this.zoomBy
                    })
                } else this.init = !1, this._track("stopMove", {
                    domEvent: i
                }), this.pos = {
                    start: {
                        x: 0,
                        y: 0
                    },
                    last: {
                        x: 0,
                        y: 0
                    },
                    cur: {
                        x: 0,
                        y: 0
                    }
                }, this.target.css(t), clearInterval(r.interval), this.options.fade && this.target.stop(), this[this.mark.name] && (this[this.mark.name].hide(), this[this.mark.inner].hide(), this[this.mark.inner].removeClass(this.options.states.active).addClass(this.options.states.inactive), this.map && (this.inner.off("mouseleave", e.proxy(r._mapEnd, r)), this.inner.off(r.canTouch ? "touchstart" : "mousedown", e.proxy(this._mapStart, r)))), this.canHideEl && this.element.css({
                    opacity: 1
                }), this._cycle && (this._cycle.current = -1), this.lens && this.lens.hide(), this.moveEvent && e.proxy(this._parentMove, this) && this.parent.off(this.moveEvent, e.proxy(this._parentMove, this)), this.wrapper.css({
                    width: "",
                    height: ""
                }), this._setCursor(this.options.cursor.inactive, this.parent), this.parent.removeClass(this.options.states.active).addClass(this.options.states.inactive), this._track("zoomedOut", i)
            }
        },
        _getEvent: function(e) {
            return e && "touchend" == e.type && (e = this.startTouchEvent), e && e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
        },
        load: function(e) {
            this._loadImage()
        },
        visible: function(e) {
            if (this._visible == e) {
                if (e == this._zoomVisible) return;
                return void(e && "visible" == this.options.preload.zoomed && (this._loadZoomed(), this._zoomVisible = e))
            }
            e ? ("visible" == this.options.preload.image && this._loadImage(), "visible" == this.options.preload.zoomed && (this._loadZoomed(), this._zoomVisible = e), this._calcSize()) : this.zoom(!1), this._track("visible", {
                visible: e
            }), this._visible = e
        },
        preload: function() {
            this._loadZoomed()
        },
        _makeLens: function(e, t, a, i, o) {
            var r = {
                lw: t / i,
                lh: a / i,
                lwh: 0,
                lhh: 0,
                dl: 0,
                dt: 0
            };
            return e.width(r.lw), e.height(r.lh), r.dl = e.outerWidth(!0) - r.lw, r.dt = e.outerHeight(!0) - r.lh, r.lw + r.dl > o.w && (r.lw = o.w - r.dl), r.lh + r.dt > o.h && (r.lh = o.h - r.dt), e.width(r.lw), e.height(r.lh), r.lwh = r.lw / 2, r.lhh = r.lh / 2, r.dlh = r.dl / 2, r.dth = r.dt / 2, r
        },
        _loadZoomed: function() {
            if (!this._imageLoaded) return "none" != this.options.preload.zoomed && (this._loadZoomedPromise = !0), void this._loadImage();
            if (!this._zoomLoaded && !this._zoomLoading) {
                var t = this;
                this._zoomLoading = !0, this._zoomLoaded = !1, this._toLoadCount = this.imgs.length, this._zoomLoadedCount = 0, this._track("startPreload");
                var a = function(e) {
                    ++t._zoomLoadedCount == t._toLoadCount && (t._zoomLoaded = !0, t._zoomLoading = !1, t.loading.hide(), t._track("preloaded"), t._calcSize())
                };
                e.each(this.imgs, function(e, i) {
                    i.on("load", a), i[0].src = t._getUrl(t.options.zoom[e])
                })
            }
        },
        _checkLoaded: function(e) {
            var t = this,
                a = !1;
            this._zoomLoading || this._loadZoomed(), clearInterval(this.interval), this.interval = setInterval(function() {
                t._zoomLoaded ? (clearInterval(t.interval), t.zoom(t.zoomed, e, !0)) : t._zoomLoading && !a && (t.canHideEl && t.element.css({
                    opacity: 0
                }), a = !0)
            }, 50)
        },
        _pinchZoomStart: function(t) {
            var a = this;
            this.zoomed = !0, this.options.fade ? this.target.animate({
                opacity: 1
            }) : this.target.css({
                opacity: 1
            }), this.target.show();
            var i = {
                pw: this.overflow.width(),
                ph: this.overflow.height(),
                po: this.parent.offset(),
                mw: 0,
                mh: 0,
                lens: null
            };
            return i.tw = 1 * i.pw, i.th = 1 * i.ph, this.wrapper.css({
                width: this.overflow.width(),
                height: this.overflow.height()
            }), this.map && (i.mw = this.map.width(), i.mh = i.mw * (this.element.height() / this.element.width()), i.mo = this.map.offset(), this.inner.height(i.mh), this.map.show(), this.lens && (i.lens = this._makeLens(this.lens, i.mw, i.mh, 1, {
                w: i.mw,
                h: i.mh
            })), this._mapEnd = function(t) {
                a.inner.off("touchmove", e.proxy(a._mapMove, a)), a.inner.off("touchend", e.proxy(a._mapEnd, a))
            }, this._mapMove = function(e) {
                e.preventDefault(), e.stopPropagation(), a._mouseMove(a._getEvent(e), i.pw, i.ph, i.tw, i.th, a.map.offset(), null, null, i.mw, i.mh, i.lens, !0)
            }, this._mapStart = function(t) {
                t.preventDefault(), t.stopPropagation(), a._mouseMove(a._getEvent(t), i.pw, i.ph, i.tw, i.th, a.map.offset(), null, null, i.mw, i.mh, i.lens, !0), this.inner.on("touchmove", e.proxy(a._mapMove, a)), this.inner.on("touchend", e.proxy(a._mapEnd, a))
            }, this.inner.on("touchstart", e.proxy(this._mapStart, this)), this.inner.removeClass(this.options.states.inactive).addClass(this.options.states.active), this.inner.show(), this.lens && this.lens.show()), this._parentMove = function(e) {
                return a.hasPinchEnded ? !!(e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && 1 != e.originalEvent.touches.length) || (e.preventDefault(), 1 !== this.zoomBy && e.stopPropagation(), void a._mouseMove(a._getEvent(e), i.pw, i.ph, i.tw, i.th, i.po, null, null, i.mw, i.mh, i.lens)) : (e.stopPropagation(), !0)
            }, this.parent.on("touchmove", e.proxy(this._parentMove, this)), i
        },
        _pinchZoom: function(e, t, a, i) {
            t == this.maxZoom ? this._track("maxZoom", {
                domEvent: e,
                scale: t,
                center: a
            }) : 1 == t && this._track("minZoom", {
                domEvent: e,
                scale: t,
                center: a
            }), i.tw = i.pw * t, i.th = i.ph * t, this.zoomBy = t, this.wrapper.css({
                width: i.tw,
                height: i.th
            }), this.lens && (i.lens = this._makeLens(this.lens, i.mw, i.mh, t, {
                w: i.mw,
                h: i.mh
            })), this._mouseMove({
                currentTarget: e.currentTarget,
                pageX: a.x,
                pageY: a.y
            }, i.pw, i.ph, i.tw, i.th, i.po, null, null, i.mw, i.mh, i.lens)
        },
        _mouseMove: function(e, t, a, i, o, r, n, s, l, d, c, u) {
            var p, h, m, f, g, v = n ? i - t + (t - n) : i - t,
                y = s ? o - a + (a - s) : o - a;
            if (this.init && this.options.pan) {
                if (!(this.mousedown || this.canTouch || u)) return void(this.panning = !1);
                if (this.pinching) p = (this.startPos.x + (this.pos.start.x - r.left)) / this.startZoom, h = (this.startPos.y + (this.pos.start.y - r.top)) / this.startZoom, m = v * (p / t), f = y * (h / a);
                else {
                    this.panning = !0;
                    var b = this.pos.start.x - e.pageX,
                        $ = this.pos.start.y - e.pageY;
                    m = b + this.pos.cur.x, f = $ + this.pos.cur.y, p = (m + t / 2) / (i / t), h = (f + a / 2) / (o / a)
                }
            } else this.init = !0, this.panning = !1, p = e.pageX - r.left, h = e.pageY - r.top, m = v * (p / t), f = y * (h / a), this.pos.cur.x = this.pos.last.x || m, this.pos.cur.y = this.pos.last.y || f;
            if (this.lens) {
                if (this.box) {
                    this.box[0].lastChild.relatedUUID != this.uuid && (this.box.append(this.wrapper), this.wrapper.show().siblings().hide());
                    var C = t,
                        k = a,
                        L = p - c.lwh - c.dlh,
                        F = h - c.lhh - c.dth;
                    m = (L + c.dlh) * this.zoomBy - c.lw / t, f = (F + c.dth) * this.zoomBy - c.lh / a, g = this._setBounds(p, h, t, a, 0, 0), p = g.x, h = g.y
                } else if (u) {
                    this.panning && (p = e.pageX - r.left, h = e.pageY - r.top);
                    var C = l,
                        k = d,
                        L = p - c.lwh - c.dlh,
                        F = h - c.lhh - c.dth;
                    m = ((L + c.dlh) * this.zoomBy - c.lw / t) * t / l, f = ((F + c.dth) * this.zoomBy - c.lh / a) * a / d, this.pos.cur = {
                        x: m,
                        y: f
                    }
                } else if (this.map) {
                    if (this.map[0].lastChild.relatedUUID != this.uuid && (this.map.append(this.inner), this.inner.show().siblings().hide()), this.panning) {
                        var L = p / (t / l) - c.lwh - c.dth;
                        F = h / (a / d) - c.lhh - c.dth
                    } else var w = p / (t / c.lw),
                        S = h / (a / c.lh),
                        L = p / (t / l) - w - c.dlh,
                        F = h / (a / d) - S - c.dth;
                    g = this._setBounds(L, F, l - c.lw - c.dl, d - c.lh - c.dt, 0, 0), L = g.x, F = g.y
                }(this.box || u) && (p + c.lwh + c.dlh >= C && (L = C - c.lw - c.dl), h + c.lhh + c.dth >= k && (F = k - c.lh - c.dt), p - c.lwh - c.dlh <= 0 && (L = 0), h - c.lhh - c.dth <= 0 && (F = 0)), this.lens.css({
                    top: F + "px",
                    left: L + "px"
                })
            }
            g = this._setBounds(m, f, v, y, 0, 0), m = g.x, f = g.y, this.pos.last = {
                x: m,
                y: f
            }, this.lastPos = {
                x: m,
                y: f
            }, this.oldTarget && this.oldTarget.css({
                top: -f + "px",
                left: -m + "px"
            }), this.target.css({
                top: -f + "px",
                left: -m + "px"
            }), this._track("move", {
                domEvent: e,
                pos: {
                    x: p / t,
                    y: h / a
                }
            })
        },
        _calcSize: function() {
            var e, t;
            if (this.options.responsive && this.options.width && this.options.height && "auto" != this.options.width && "auto" != this.options.height ? (e = this.element.width(), t = e * (this.options.height / this.options.width), this.parent.height(t), this.overflow.height(t), 0 != this.element.height() && t > this.element.height() && this.overflow.height(this.element.height())) : (this.options.width && this.parent.width(this.options.width), this.options.height && this.parent.height(this.options.height)), this.map) {
                var a = this.map.width(),
                    i = a * (this.element.height() / this.element.width());
                this.inner.height(i)
            }
        },
        _getUrl: function(t) {
            if (this.options.url) return this.options.url;
            var a = this.element.attr("src") || this.element.attr("data-amp-src");
            if (a) {
                var i = this._cycle ? t || 1 : this.options.zoom;
                a = this._cleanUrl(a);
                var o = this.options.transforms;
                return this._cycle && (o = o[e.inArray(t, this.options.zoom)]), a = o ? this._setTransforms(a, o) : a, a = this._setWidth(a, {
                    h: this._originalImage.height * i,
                    w: this._originalImage.width * i
                })
            }
        },
        _getWidth: function(e) {
            if (window.amp && amp.di) return amp.di.width(e);
            var e = e.split("?");
            if (!e[1]) return !1;
            for (var t = e[1].split("&"), a = 0; a < t.length; a++) {
                var i = t[a].split("=");
                if ("w" == i[0]) return parseInt(i[1])
            }
            return !1
        },
        _setWidth: function(t, a) {
            if (window.amp && amp.di) return amp.di.set(t, a);
            var t = t.split("?");
            if (t[1]) {
                for (var i = t[1].split("&"), o = [], r = 0; r < i.length; r++) {
                    var n = i[r].split("="),
                        s = {};
                    "w" != n[0] && (s[n[0]] = n[1], o.push(e.param(s)))
                }
                return o = o.concat(e.param(a)), t[0] + "?" + o.join("&")
            }
            return t[0] + "?" + e.param(a)
        },
        _cleanUrl: function(e) {
            return e.split("?")[0]
        },
        _loadImage: function() {
            if (!this._imageLoaded && !this._imageLoading) {
                this.loading = e('<div class="amp-loading"></div>'), this._imageLoading = !0;
                var t = this.element[0].src || this.element.attr("data-amp-src");
                this.element.on("load", e.proxy(this._onImageLoad, this)), this.element[0].src = "", this.element[0].src = t
            }
        },
        _getNaturalSize: function(e) {
            return {
                width: this.element[0].naturalWidth,
                height: this.element[0].naturalHeight
            }
        },
        _setTransforms: function(e, t) {
            return -1 == e.indexOf("?") ? e + "?" + t : e + "&" + t
        },
        _setBounds: function(e, t, a, i, o, r) {
            return e >= a && (e = a), t >= i && (t = i), o >= e && (e = o), r >= t && (t = r), {
                x: e,
                y: t
            }
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "zoom", e, t)
        },
        _setCursor: function(e, t) {
            return "string" != typeof e && (e = "auto"), e.indexOf("zoom") < 0 ? (t.css("cursor", e), !1) : !document.documentMode && ("undefined" != typeof InstallTrigger && t.css("cursor", "-moz-" + e), void(window.chrome && t.css("cursor", "-webkit-" + e)))
        },
        _setZoomCursor: function(e) {
            var t = this.options.zoom;
            t.length ? t.indexOf(this.zoomBy) === t.length - 1 ? this._setCursor(this.options.cursor.active, e) : this._setCursor(this.options.cursor.inactive, e) : this.zoomBy > 1 ? this._setCursor(this.options.cursor.active, e) : this._setCursor(this.options.cursor.inactive, e)
        },
        _getDistance: function(e) {
            var t = Math.abs(e[0].pageX - e[1].pageX),
                a = Math.abs(e[0].pageY - e[1].pageY);
            return Math.sqrt(t * t + a * a)
        },
        _getPosition: function(e) {
            return {
                x: (e[0].pageX + e[1].pageX) / 2,
                y: (e[0].pageY + e[1].pageY) / 2
            }
        },
        _destroy: function() {
            this.element.unwrap().unwrap(), this.wrapper.remove(), this.element.removeClass("amp"), this.element.removeClass("amp-zoom"), this.element.removeClass(this.options.states.active), this.element.removeClass(this.options.states.inactive), this.element.css({
                cursor: "",
                height: "",
                "max-width": "",
                width: "",
                opacity: "",
                position: "",
                display: "",
                top: "",
                left: "",
                zoom: ""
            }), this._removeEmptyAttributeHelper(this.element)
        },
        _removeEmptyAttributeHelper: function(e, t) {
            for (var a = t || ["class", "style"], i = 0, o = a.length; o > i; i++) e.attr(a[i]) && e.prop(a[i]) || e.removeAttr(a[i])
        }
    })
}(jQuery),
function(e) {
    e.widget("amp.ampZoomInline", {
        options: {
            scaleMax: 3,
            scaleStep: .5,
            scaleSteps: !1,
            scaleProcess: !1,
            events: {
                zoomIn: "mouseup touchstart",
                zoomOut: "mouseup touchend",
                move: "mousemove touchmove"
            },
            stopPropagation: "",
            activation: {
                inGesture: !0
            },
            pinch: !1,
            transforms: "",
            preload: "none",
            pan: !1
        },
        _getCreateOptions: function() {
            var t = this.element.data().ampZoomInline;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            this.scale = 1, this.element.addClass("amp amp-zoom"), this.$parent = this.element.parent(), this._invalidateParentSize(), this.element.on(this.options.events.zoomIn, e.proxy(this.zoomIn, this)), this.options.activation.inGesture || (this.gestureDetect = new t(this.element)), this._track("created"), "created" == this.options.preload && this.load(), this.options.pan && (e(document).on("dragstart", function() {
                return !1
            }), this.element.parent().on("mousedown touchstart", e.proxy(function(t) {
                return this._touchmove = !1, this.scale > 1 && t.stopPropagation(), this.panner && (this.panner.remove(), delete this.panner), this.scale > 1 && (this.panner = new i(this, t, e.proxy(function(e, t) {
                    this.zoomArea && this.zoomArea.setPosition(e, t)
                }, this))), !0
            }, this))), this.options.pinch && this.element.parent().on("touchstart", e.proxy(function(t) {
                return this_touchmove = !1, this.pincher && (this.pincher.remove(), delete this.pincher), this.pincher = new a(t, e.proxy(function() {
                    this.zoomIn()
                }, this), e.proxy(function() {
                    this.zoomOut()
                }, this)), !0
            }, this)), "" !== this.options.stopPropagation && this.element.parent().on(this.options.stopPropagation, e.proxy(function(e) {
                1 != this.scale && e.stopPropagation()
            }, this))
        },
        visible: function(e) {
            this._visible != e && (e ? "visible" == this.options.preload && this.load() : this.zoomOutFull(), this._track("visible", {
                visible: e
            }), this._visible = e)
        },
        load: function() {
            this._setupZoomArea().then(e.proxy(function(e) {
                this.zoomArea.allowClone = !0, e.setScale(this.options.zoom)
            }, this))
        },
        _setupZoomArea: function() {
            return new Promise(e.proxy(function(t, a) {
                this.zoomArea ? t(this.zoomArea) : this.getImageSize().then(e.proxy(function(i) {
                    if (i.error) a(!1);
                    else {
                        var r = this,
                            n = new Image;
                        n.src = this.element.attr("src");
                        var s = e('<div class="amp-loading"></div>');
                        this.$parent.append(s), this.zoomArea = new o(this.element, this.$parent, i, this.options.transforms, this.options), n.onload = function() {
                            s.remove(), t(r.zoomArea)
                        }
                    }
                }, this))
            }, this))
        },
        getImageSize: function() {
            return new Promise(e.proxy(function(t, a) {
                this.element[0].naturalWidth && this.element[0].naturalHeight ? t({
                    x: this.element[0].naturalWidth,
                    y: this.element[0].naturalHeight
                }) : this.element[0].width && this.element[0].height && t({
                    x: this.element[0].width,
                    y: this.element[0].height
                }), this.element.on("load", e.proxy(function() {
                    this.element[0].naturalWidth && this.element[0].naturalHeight ? t({
                        x: this.element[0].naturalWidth,
                        y: this.element[0].naturalHeight
                    }) : this.element[0].width && this.element[0].height && t({
                        x: this.element[0].width,
                        y: this.element[0].height
                    })
                }, this)), this.element.on("error", e.proxy(function() {
                    a({
                        error: !0
                    })
                }, this))
            }, this))
        },
        _invalidateParentSize: function() {
            this.parentSize = {
                x: this.$parent.width(),
                y: this.$parent.height()
            }
        },
        state: function() {
            return {
                scale: this.scale,
                scaleMax: this.options.scaleMax,
                scaleStep: this.options.scaleStep
            }
        },
        zoomInFull: function(e) {
            this.setScale(this.options.scaleMax), this._track("zoomedInFull", {
                domEvent: e,
                scale: this.options.scaleMax,
                scaleMax: this.options.scaleMax,
                scaleStep: this.options.scaleStep
            })
        },
        zoomIn: function(t) {
            var a = this;
            if (!a.zoomArea) return a._setupZoomArea().then(function(e) {
                e && a.zoomIn(t)
            }), !1;
            if ((this.options.scaleSteps || 1 == this.scale) && (t && t.preventDefault(), (this.options.activation.inGesture || !this.gestureDetect.detected) && (!a.zoomArea || !a.zoomArea.animating))) {
                this.scale == this.options.scaleMax && this.options.events.zoomIn && (a.zoomArea.$container.off(this.options.events.zoomIn, this.zoomIn), a.isZoomIn = !1);
                var i = this.scale;
                this.options.scaleSteps ? (this.scale += this.options.scaleStep, this.scale = Math.min(this.scale, this.options.scaleMax)) : this.scale = this.options.scaleMax, i != this.scale && (this._track("zoomedIn", {
                    domEvent: t,
                    scale: this.scale,
                    scaleMax: this.options.scaleMax,
                    scaleStep: this.options.scaleStep
                }), this.setScale(this.scale).then(function() {
                    setTimeout(e.proxy(function() {
                        !a.isMoveOn && a.options.events.move && (a.zoomArea.$container.on(this.options.events.move, e.proxy(a._setPos, a)), a.isMoveOn = !0), a.options.scaleProcess ? a.options.scaleSteps && a.scale != a.options.scaleMax ? a.isZoomIn || (a.zoomArea.$container.on(this.options.events.zoomIn, e.proxy(a.zoomIn, a)), a.isZoomIn = !0) : a.zoomArea.$container.on(a.options.events.zoomOut, e.proxy(a.zoomOut, a)) : a.options.scaleSteps || a.zoomArea.$container.on(a.options.events.zoomOut, e.proxy(a.zoomOut, a))
                    }, a), 500)
                }))
            }
        },
        zoomInClick: function(t) {
            if (this.options.activation.inGesture || !this.gestureDetect.detected) {
                var a = this.scale;
                this.scale += this.options.scaleStep, this.scale = Math.min(this.scale, this.options.scaleMax), a != this.scale && (this._track("zoomedIn", {
                    domEvent: t,
                    scale: this.scale,
                    scaleMax: this.options.scaleMax,
                    scaleStep: this.options.scaleStep
                }), this.setScale(this.scale), setTimeout(e.proxy(function() {
                    self.zoomArea.$container.on(this.options.events.move, e.proxy(this._setPos, this))
                }, this), 1))
            }
        },
        setScale: function(t) {
            return this.scale = t, this._setupZoomArea().then(e.proxy(function(e) {
                e && (e.setScale(this.scale), this._invalidateParentSize())
            }, this))
        },
        _setPos: function(e) {
            "touchmove" === e.type && (this._touchmove = !0), this._track("settingPos", {
                domEvent: e
            });
            var t = e ? this._getPercentagePos(e) : {
                x: .5,
                y: .5
            };
            this.zoomArea.setPosition(t.x, t.y)
        },
        zoomOut: function(e) {
            if (this.zoomArea.allowClone = !1, this._touchmove) return !1;
            if (!this.zoomArea || !this.zoomArea.animating) {
                var t = this.scale;
                this.options.scaleSteps ? (this.scale -= this.options.scaleStep, this.scale = Math.max(this.scale, 1)) : this.scale = 1, t != this.scale && (1 == this.scale && (this.options.events.move && (this.zoomArea.$container.off(this.options.events.move, this._setPos), this.isMoveOn = !1), this.options.events.zoomOut && this.zoomArea.$container.off(this.options.events.zoomOut, this.zoomOut)), this.zoomArea.setScale(this.scale), this._track("zoomedOut", {
                    domEvent: e,
                    scale: this.scale,
                    scaleMax: this.options.scaleMax,
                    scaleStep: this.options.scaleStep
                }))
            }
        },
        zoomOutFull: function(e) {
            this.zoomArea && (this.options.events.move && self.zoomArea.$container.off(this.options.events.move, this._setPos), this.options.events.zoomOut && self.zoomArea.$container.off(this.options.events.zoomOut, this.zoomOut), this.scale = 1, this.zoomArea.setScale(1), this._track("zoomedOutFull", {
                domEvent: e,
                scale: this.scale,
                scaleMax: this.options.scaleMax,
                scaleStep: this.options.scaleStep
            }))
        },
        _convertEvent: function(e) {
            return e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e.preventDefault(), e = e.originalEvent.touches[0]), e
        },
        _getPercentagePos: function(e) {
            e = this._convertEvent(e);
            var t = this.$parent.offset();
            return {
                x: (e.pageX - t.left) / this.parentSize.x,
                y: (e.pageY - t.top) / this.parentSize.y
            }
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "zoom", e, t)
        },
        _destroy: function() {
            this.element.removeClass("amp"), this.element.removeClass("amp-zoom"), this._removeEmptyAttributeHelper(this.element)
        },
        _removeEmptyAttributeHelper: function(e, t) {
            for (var a = t || ["class", "style"], i = 0, o = a.length; o > i; i++) e.attr(a[i]) && e.prop(a[i]) || e.removeAttr(a[i])
        }
    });
    var t = function(t, a) {
        this.toleranceX = void 0 !== t ? t : 0, this.toleranceY = void 0 !== a ? a : 0, this.detected = !1, this.$document = e("body"), this.$document.on("mousedown touchstart", e.proxy(this.startDetecting, this))
    };
    t.prototype.convertEvent = function(e) {
        return e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
    }, t.prototype.startDetecting = function(t) {
        this.detected = !1, this.$document.on("mousemove touchmove", e.proxy(this.moveDetected, this)), this.$document.on("mouseup touchend", e.proxy(this.stopDetecting, this))
    }, t.prototype.moveDetected = function(e) {
        this.detected = !0
    }, t.prototype.stopDetecting = function(e) {
        this.$document.off("mousemove touchmove", this.moveDetected), this.$document.off("mouseup touchend", this.stopDetecting)
    };
    var a = function(t, a, i) {
        this.threshold = 100, t = this.getFingers(t), this.cbIn = a, this.cbOut = i, 2 == t.length && (this.start = this.getDistance(t), e(document).on("touchmove", e.proxy(this.move, this)), e(document).on("touchend", e.proxy(this.end, this)))
    };
    a.prototype.getDistance = function(e) {
        var t = Math.abs(e[0].pageX - e[1].pageX),
            a = Math.abs(e[0].pageY - e[1].pageY);
        return Math.sqrt(t * t + a * a)
    }, a.prototype.move = function(e) {
        e.preventDefault(), e = this.getFingers(e);
        var t = this.getDistance(e),
            a = t - this.start;
        a > this.threshold && (this.cbIn(), this.start = t), a < 0 - this.threshold && (this.cbOut(), this.start = t)
    }, a.prototype.remove = function() {
        this.end()
    }, a.prototype.end = function(t) {
        e(document).off("mousemove touchmove", this.move), e(document).off("mouseup touchend", this.end)
    }, a.prototype.getFingers = function(e) {
        return e.originalEvent && e.originalEvent.touches && (e = e.originalEvent.touches), e
    };
    var i = function(t, a, i) {
        this.multiFinger(a) || (a = this.convertEvent(a), this.start = {
            x: a.pageX,
            y: a.pageY
        }, this.zoomArea = t.zoomArea, this.cb = i, this.element = t.element, this.zoomArea.newSize || (this.zoomArea.newSize = {
            x: this.zoomArea.$source.width(),
            y: this.zoomArea.$source.height()
        }), this.currentPixPos = this.zoomArea.getPixPos(), e(document).on("mousemove touchmove", e.proxy(this.move, this)), e(document).on("mouseup touchend", e.proxy(this.end, this)))
    };
    i.prototype.move = function(e) {
        e.preventDefault(), e = this.convertEvent(e);
        var t = e.pageX - this.start.x,
            a = e.pageY - this.start.y,
            i = this.zoomArea.getPercentFromPos(this.currentPixPos.x + t, this.currentPixPos.y + a);
        this.cb(i.x, i.y)
    }, i.prototype.end = function(t) {
        e(document).off("mousemove touchmove", this.move), e(document).off("mouseup touchend", this.end)
    }, i.prototype.remove = function() {
        this.end()
    }, i.prototype.multiFinger = function(e) {
        return e.originalEvent && e.originalEvent.touches && e.originalEvent.touches.length > 1
    }, i.prototype.convertEvent = function(e) {
        return e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && (e = e.originalEvent.touches[0]), e
    };
    var o = function(e, t, a, i, o) {
        this.options = o, this.animating = !1, this._allowChangeClone = !0, this.isFF = navigator.userAgent.toLowerCase().search("firefox") > -1, this.transforms = i, this.initialSrc = e[0].src, this.scale = 1, this.$area = t, this.$source = e, this.originalSize = a, this.posPercentageX = .5, this.posPercentageY = .5, this.createContainer(), this.hide()
    };
    o.prototype.getPercentagePosWithScale = function(e) {}, o.prototype.createContainer = function() {
        var t = this;
        this.$container = e('<div class="amp-zoomed-container"></div>'), this.$preloader = new Image, e(this.$preloader).on("load", function() {
            t._preloaderImgLoaded = !0, t.allowClone && !t.animating && t.updateImageSrc(!0)
        }), this.$zoomed = e('<img class="amp-zoomed" style="z-index:2;" src=""/>'), this.$zoomedClone = e('<img class="amp-zoomed-clone" style="z-index:2;" src=""/>'), this.$container.append(this.$zoomedClone), this.$container.append(this.$zoomed), this.$area.append(this.$container), this.$container.css({
            position: "absolute",
            top: 0,
            left: 0,
            bottom: 0,
            right: 0
        })
    }, o.prototype.invalidatePosition = function() {
        this.setPosition(this.posPercentageX, this.posPercentageY)
    }, o.prototype.setPosition = function(e, t) {
        this.animating || (this.$zoomed.width() <= this.$area.width() && (e = .5), this.$zoomed.height() <= this.$area.height() && (t = .5), this.posPercentageX = e, this.posPercentageY = t, e = Math.min(1, Math.max(0, e)), t = Math.min(1, Math.max(0, t)), this.$zoomed.css("left", 0 - (this.$zoomed.width() - this.$area.width()) * e + "px"), this.$zoomed.css("top", 0 - (this.$zoomed.height() - this.$area.height()) * t + "px"), this.$zoomedClone.css("left", 0 - (this.$zoomed.width() - this.$area.width()) * e + "px"), this.$zoomedClone.css("top", 0 - (this.$zoomed.height() - this.$area.height()) * t + "px"))
    }, o.prototype.getPixPos = function(e, t) {
        return void 0 == e && void 0 == t && (e = this.posPercentageX, t = this.posPercentageY), e = Math.min(1, Math.max(0, e)), t = Math.min(1, Math.max(0, t)), {
            x: 0 - (this.newSize.x - this.$area.width()) * e,
            y: 0 - (this.newSize.y - this.$area.height()) * t
        }
    }, o.prototype.getPercentFromPos = function(e, t) {
        return {
            x: 0 - e / (this.newSize.x - this.$area.width()),
            y: 0 - t / (this.newSize.y - this.$area.height())
        }
    }, o.prototype.animate = function(t, a, i) {
        this.animating = !0, t.x <= this.$area.width() && (a.x = this.getPixPos(.5, .5).x), t.y <= this.$area.height() && (a.y = this.getPixPos(.5, .5).y);
        var o = {
            width: t.x,
            height: t.y,
            left: a.x + "px",
            top: a.y + "px"
        };
        this.$zoomed.animate(o, 500), this.$zoomedClone.animate(o, 500), setTimeout(e.proxy(function() {
            i && i(), this.animating = !1
        }, this), this.isFF ? 1e3 : 600)
    }, o.prototype.updateImageSrc = function(e) {
        var t = this;
        return !!(e && t.allowClone && t._preloaderImgLoaded) && void t.setImage()
    }, o.prototype.setScale = function(e, t) {
        var a = this,
            i = e > this.scale;
        e != this.scale && (this.allowClone = !!i, a._preloaderImgLoaded = !1, e < this.scale && 1 == e ? this.newSize = {
            x: this.$source.width(),
            y: this.$source.height()
        } : this.newSize = {
            x: this.$source.width() * e,
            y: this.$source.height() * e
        }, 1 == this.scale && (this.$zoomed.attr("src", this.$source[0].src), e > this.scale && (this.$zoomed.width(this.$source.width()), this.$zoomed.height(this.$source.height()), this.$zoomedClone.width(this.$source.width()), this.$zoomedClone.height(this.$source.height())), this.setPosition(.5, .5), this.show()), 1 == e ? this.animate(this.newSize, this.getPixPos(), function() {
            a.hide(), a.updateImageSrc(!1)
        }) : this.animate(this.newSize, this.getPixPos(), function() {
            a.updateImageSrc(i)
        }), this.scale = e, this.invalidateImageURL({
            x: this.originalSize.x * e,
            y: this.originalSize.y * e
        }))
    }, o.prototype.show = function() {
        this.invalidatePosition(), e(window).off("resize", this.invalidatePosition), e(window).on("resize", e.proxy(this.invalidatePosition, this)), this.$container.show()
    }, o.prototype.hide = function() {
        this.$container.hide(), e(window).off("resize", this.invalidatePosition)
    }, o.prototype.invalidateImageURL = function(e) {
        var t = this,
            a = "";
        this.transforms && this.transforms.length && (a = this.transforms + "&");
        var i = this.initialSrc.split("?")[0] + "?" + a + "w=" + e.x + "&h=" + e.y;
        (0 == e.x || 0 == e.y) && (i = ""), t.$preloader = new Image, t._preloaderImgLoaded = !0, t.$preloader.setAttribute("src", i)
    }, o.prototype.setImage = function() {
        var e, t = this,
            a = t.$zoomed.attr("src");
        if (t._allowChangeClone && t.$zoomedClone.attr("src", a), t.$preloader.complete && t.$preloader.naturalWidth && t.$preloader.naturalWidth > 0) {
            if (e) return;
            setTimeout(function() {
                t.$zoomed.attr("src", t.$preloader.src)
            }, t.isFF ? 1e3 : 10), e = !0
        } else t.$preloader.onload = function() {
            e || (t.$zoomed.attr("src", t.$preloader.src), e = !0)
        };
        t._allowChangeClone = !1
    }
}(jQuery),
function(e) {
    e.widget("amp.ampVideo", {
        options: {
            autoplay: !1,
            loop: !1,
            muted: !1,
            skin: "",
            responsive: !0,
            preload: "auto",
            pauseOnHide: !0,
            controls: !0,
            nativeControlsForTouch: !0,
            plugins: {},
            enableSoftStates: !0
        },
        _states: {
            stopped: 0,
            buffering: 1,
            paused: 2,
            playing: 3,
            loading: 4,
            error: 5,
            idle: 6
        },
        _currentState: 0,
        _ready: !1,
        _loopCount: 0,
        _savedHTML: "",
        _getCreateOptions: function() {
            this._savedHTML = this.element[0].outerHTML;
            var t = this.element.data().ampVideo;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            this.element.addClass("amp amp-video");
            var t = this.element.find("video"),
                a = this;
            t.addClass("video-js " + this.options.skin + " vjs-big-play-centered"), videojs && (videojs.options.flash.swf = this.options.swfUrl + "video-js.swf" || "../../assets/video-js.swf", this._player = videojs(t[0], {
                autoplay: this.options.autoplay,
                muted: this.options.muted,
                width: "100%",
                height: "100%",
                loop: !1,
                controls: this.options.controls,
                preload: this.options.preload,
                plugins: a._sanitisePlugins(this.options.plugins),
                nativeControlsForTouch: this.options.nativeControlsForTouch
            })), a._calcSize(), a.options.responsive && e(window).bind("resize", function(e) {
                return function() {
                    return e._calcSize()
                }
            }(a)), this._player.ready(function() {
                this.options_.muted && this.volume(0), a._ready = !0;
                var t = a.element.find(".vjs-tech"),
                    i = setInterval(function() {
                        if ("auto" == a.options.height) {
                            var e = t.css({
                                height: "auto"
                            }).height();
                            0 != e && (clearInterval(i), a.element.height(e), t.css({
                                height: ""
                            }), a._player.dimensions(a.element.width(), a.element.height()))
                        }
                    }, 200);
                a.options.autoplay && a.state(a._states.playing), a.options.plugins && a.options.plugins.videoJsResolutionSwitcher && a.options.plugins.videoJsResolutionSwitcher.default && (a._player.on("ready", function() {
                    a._player.currentResolution(a.options.plugins.videoJsResolutionSwitcher.default), a._allowResolutionChange = !1
                }), a._player.on("resolutionchange", function() {
                    a._player.paused() && (a._allowResolutionChange && (a._player.play(), a._player.pause()), a._player.currentTime() > .5 && (a._allowResolutionChange = !0))
                })), this.on("play", function(e) {
                    a.softPlay && a.options.enableSoftStates ? a.softPlay = !1 : (a.state(a._states.playing), a._track("play", {
                        event: e,
                        player: this,
                        time: this.currentTime(),
                        duration: a.duration
                    }))
                }), this.on("error", function(e) {
                    a.state(a._states.error), a._track("error", null)
                }), this.on("pause", function(e) {
                    e.target.ended || e.target.seeking || (a.state(a._states.paused), a._track("pause", {
                        event: e,
                        player: this,
                        time: this.currentTime(),
                        duration: a.duration
                    }))
                }), this.on("waiting", function(e) {
                    a.state(a._states.buffering)
                }), this.on("seeking", function(e) {
                    a.softSeek ? a.softSeek = !1 : (a.state() !== a._states.paused && 0 !== e.target.currentTime && a.options.enableSoftStates && (a.softPlay = !0), a._track("seeked", {
                        event: e,
                        player: this,
                        time: this.currentTime(),
                        duration: a.duration
                    }))
                }), this.on("timeupdate", function(e) {
                    a._track("timeUpdate", {
                        event: e,
                        player: this,
                        time: this.currentTime(),
                        duration: a.duration
                    })
                }), this.on("volumechange", function(e) {
                    a._track("volume", {
                        event: e,
                        player: this,
                        volume: this.volume(),
                        muted: this.muted()
                    })
                }), this.on("durationchange", function(e) {
                    a.duration = this.duration(), a._track("durationChange", {
                        event: e,
                        player: this,
                        duration: a.duration
                    })
                }), this.on("fullscreenchange", function(t) {
                    a._track("fullScreenChange", {
                        event: t,
                        player: this
                    }), setTimeout(function() {
                        e(window).resize()
                    }, 200)
                }), this.on("ended", function(e) {
                    a.options.loop ? (a.softSeek = !0, a._player.currentTime(0), a.softPlay = !0, a._player.play(), a._track("ended", null), a._track("looped", {
                        count: ++a._loopCount
                    })) : (a.state(a._states.stopped), a._track("ended", null), a._track("stopped", null))
                }), a._track("created", {
                    player: this,
                    duration: a.duration
                })
            })
        },
        visible: function(e) {
            e != this._visible && (this._track("visible", {
                visible: e
            }), e ? this._calcSize() : (this._states.playing == this.state() || this._states.buffering == this.state()) && this.options.pauseOnHide && this.pause(), this._visible = e)
        },
        redraw: function() {
            this._calcSize()
        },
        _calcSize: function() {
            var e, t;
            if (this.options.responsive && this.options.width && this.options.height && "auto" != this.options.width && "auto" != this.options.height) {
                var a = this.element.css("display");
                this.element.css("display", "block"), e = Math.round(this.element.width()), this.element.css("display", a), t = Math.round(e * (this.options.height / this.options.width)), this.element.height(t)
            } else this.options.width ? this.element.width(this.options.width) : this.options.responsive && this.element.width(this.element.parent().width()), this.options.height ? this.element.height(this.options.height) : this.options.responsive && this.element.height(this.element.parent().height());
            if (this.options.center) {
                var i = this.element.height(),
                    o = this.element.parent().height();
                this.element.css("margin-top", o / 2 - i / 2 + "px")
            }
            this._player && this._player.dimensions(this.element.width(), this.element.height())
        },
        play: function() {
            this._ready && this._states.playing !== this.state() && this._player.play()
        },
        pause: function() {
            this._ready && this._states.paused !== this.state() && this._player.pause()
        },
        stop: function() {
            this._ready && this._states.stopped !== this.state() && (this._player.pause(), this.softSeek = !0, this._player.currentTime(0), this._track("stopped", null), this.state(this._states.stopped))
        },
        seek: function(e) {
            this._ready && this.currentTime(e)
        },
        currentTime: function(e) {
            return void 0 === e ? this._player.currentTime() : void this._player.currentTime(e)
        },
        state: function(e) {
            return void 0 === e ? this._currentState : (this._currentState = e, void this._trigger("stateChange", null, {
                state: e
            }))
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "video", e, t)
        },
        _destroy: function() {
            this._player.dispose(), this._player = null,
                this.element[0].outerHTML = this._savedHTML
        },
        _sanitisePlugins: function(e) {
            return e && 0 == e.videoJsResolutionSwitcher && delete e.videoJsResolutionSwitcher, e
        }
    })
}(jQuery),
function(e) {
    e.widget("amp.ampSpin", e.amp.ampStack, {
        options: {
            delay: 50,
            autoplay: !1,
            loop: !0,
            responsive: !0,
            states: {
                selected: "amp-selected",
                seen: "amp-seen",
                active: "amp-active",
                inactive: "amp-inactive"
            },
            events: {
                start: "mousedown touchstart",
                move: "mousemove touchmove",
                end: "mouseup touchend"
            },
            momentum: !0,
            preload: "created",
            preloadType: "full",
            minDistance: 25,
            activate: "down",
            friction: .97,
            dir: "normal",
            gesture: {
                enabled: !0,
                fingers: 1
            },
            orientation: "horz",
            start: 1,
            cursor: {
                active: "auto",
                inactive: "auto"
            },
            play: {
                onLoad: !1,
                onVisible: !1,
                repeat: 1,
                delay: 10
            },
            dragDistance: 200,
            lazyLoad: !1
        },
        _getCreateOptions: function() {
            var t = this.element.data().ampSpin;
            return t ? e.extend(!0, {}, this.options, t) : this.options
        },
        _create: function() {
            var t = this,
                a = this._children = this.element.children();
            this._count = this.element.children().length, this.isWebkit = /Chrome|Safari/.test(navigator.userAgent) && !/Edge/.test(navigator.userAgent), this.$document = e(document), this.options.friction = Math.min(this.options.friction, .999), this.options.friction = Math.max(this.options.friction, 0), this._setCursor(this.options.cursor.inactive), this.count = this.element.children().length, this.options.dragDistance = Math.max(this.options.dragDistance, 1), this._index = Math.max(1, Math.min(this.options.start, this.count)), -1 == e.inArray(this.options.preload, ["created", "visible", "none"]) && (this.options.preload = "created"), this.element.addClass("amp"), this.element.addClass("amp-spin"), this.element.addClass(this.options.states.inactive), this.imgs = this.element.find("img:not(.amp-zoom-img)"), this.toLoadCount = this.imgs.length, this.loadedCount = 0, a.addClass("amp-frame");
            var i = a.eq(this._index - 1),
                o = i.clone();
            o.addClass("amp-frame-clone"), this.isWebkit ? (a.css({
                display: "none"
            }), i.css("display", "block")) : (a.css({
                "z-index": -1
            }), i.css("z-index", 1)), this.element.append(o), i.eq(this._index - 1).addClass(this.options.states.selected + " " + this.options.states.seen), setTimeout(function(e) {
                return function() {
                    return e._calcSize()
                }
            }(t), 1), this.options.responsive && e(window).on("resize", function(e) {
                return function() {
                    return e._calcSize()
                }
            }(t)), this.element.on("dragstart", function(e) {
                return !1
            }), this.element.on(this.options.events.start, e.proxy(this._startDrag, this)), this.element.on("mousewheel DOMMouseScroll", function(e) {
                return t._mouseScroll(e)
            }), this.options.autoplay && this.play(), "created" == this.options.preload && this._startPreload(), this._track("created", {
                index: this._index,
                canNext: this.canNext(),
                canPrev: this.canPrev()
            })
        },
        _setCursor: function(e) {
            return e.indexOf("zoom") < 0 && e.indexOf("grab") < 0 ? (this.element.css("cursor", e), !1) : !document.documentMode && ("undefined" != typeof InstallTrigger && this.element.css("cursor", "-moz-" + e), void(window.chrome && this.element.css("cursor", "-webkit-" + e)))
        },
        redraw: function() {
            this._calcSize()
        },
        _mouseScroll: function(e) {
            var t = 0;
            return e || (e = window.event), e.originalEvent.wheelDelta ? t = e.originalEvent.wheelDelta : e.originalEvent.detail && (t = -e.originalEvent.detail), t > 0 ? this.next() : this.prev(), this._track("scroll", {
                domEvent: e,
                delta: t
            }), e.preventDefault(), !1
        },
        visible: function(e) {
            var t = this;
            e != t._visible && (t._super(e), e && ("visible" == t.options.preload && t._startPreload(), "none" == this.options.preload && t._startPreload(t._index), t.options.play.onVisible && t._loaded && setTimeout(function() {
                t.playRepeat(t.options.play.repeat)
            }, t.options.play.delay)))
        },
        _resolveEventCoords: function(e) {
            return e = e.originalEvent, e.touches && e.touches.length ? {
                x: e.touches[0].clientX,
                y: e.touches[0].clientY
            } : e.changedTouches && e.changedTouches.length ? {
                x: e.changedTouches[0].clientX,
                y: e.changedTouches[0].clientY
            } : {
                x: e.clientX,
                y: e.clientY
            }
        },
        _startPreload: function(t) {
            if (!(this._loaded || this._loading && !this.first)) {
                var a = this;
                this._loading = !0, this.first || (this._track("startPreload"), "none" != this.options.preload && ("full" == this.options.preloadType ? (this.pre = e('<li class="amp-progress amp-frame"></li>'), this.element.append(this.pre)) : "window" == this.options.preloadType && (this.progressIndicator = e('<div class="amp-progress-indicator"><div class="amp-progress-message"></div><div class="amp-progress-bar-background"><div class="amp-progress-bar"></div></div></div>'), this.progressIndicator.find(".amp-progress-message").html(this.options.progressMessage || "Loading..."), this.progressIndicator.progress = a.progressIndicator.find(".amp-progress-bar"), this.progressIndicator.visible = !0, this.element.append(this.progressIndicator))));
                var i = function(e) {
                    if (++a.loadedCount >= a.toLoadCount && !a._loaded) a._unsetLoadEvents(a.imgs), a._loaded = !0, a.pre && a.pre.remove(), a.options.play.onLoad && a.playRepeat(a.options.play.repeat), a._loading = !1, a.progressIndicator && (a.progressIndicator.visible = !1, a.progressIndicator.remove()), a._track("preloaded");
                    else {
                        var t = a.loadedCount / a.toLoadCount * 100;
                        a.pre && (a.pre.css("width", 100 - t + "%"), a.pre.css("left", t + "%")), a.progressIndicator && a.progressIndicator.visible && a.progressIndicator.progress.css("width", t + "%")
                    }
                };
                t ? (this.first = !0, this.toLoadCount -= 1, this._callImageMethod(e(this.imgs[t - 1]), i)) : this._callImageMethod(this.imgs, i)
            }
        },
        _unsetLoadEvents: function(t) {
            if (t)
                for (var a = 0, i = t.length; i > a; a++) {
                    var o = e(t[a]),
                        r = o.data();
                    r["amp-ampZoom"] ? o.ampZoom({
                        loaded: null
                    }) : o.ampImage({
                        loaded: null
                    })
                }
        },
        _callImageMethod: function(t, a) {
            for (var i = 0, o = t.length; o > i; i++) {
                var r = e(t[i]);
                r.data()["amp-ampZoom"] ? (r.ampZoom({
                    loaded: a
                }), r.ampZoom("load", this.options.preload)) : (r.ampImage({
                    loaded: a
                }), r.ampImage("load", this.options.preload))
            }
        },
        preload: function() {
            this._startPreload()
        },
        playRepeat: function(e) {
            if ("inf" == e) return void this.play();
            for (var t = this, a = 0; e > a; a++)
                for (var i = 0; i < this.count; i++) setTimeout(function() {
                    t.next()
                }, this.options.delay * (a * this.count + i))
        },
        _startDrag: function(t) {
            var a = this,
                i = this._resolveEventCoords(t),
                o = e(t.currentTarget).offset(),
                r = i.x - o.left,
                n = i.y - o.top;
            if (!this._started) {
                if (this.options.gesture.enabled && t.originalEvent && t.originalEvent.touches && t.originalEvent.touches[0] && t.originalEvent.touches.length != this.options.gesture.fingers) return !0;
                this._started = !0, this._track("startMove", {
                    domEvent: t,
                    pos: {
                        x: r,
                        y: n
                    }
                }), this._ended = !1, this.pause(), this._setCursor(this.options.cursor.active), this.element.removeClass(this.options.states.inactive).addClass(this.options.states.active);
                var s = this._mbind = function(e) {
                        return function(t) {
                            return a._mouseMove(t, o, r, n, e)
                        }
                    }(this._index),
                    l = this._ubind = function(e) {
                        return function(t) {
                            return a._endDrag(t, o, r, n, e)
                        }
                    }(this._index);
                return this.$document.on(this.options.events.move, s), this.$document.on(this.options.events.end, l), this._mouseMoveInfo = [{
                    e: t,
                    o: o,
                    mx: r,
                    my: n,
                    sindex: this._index
                }], !(window.navigator.userAgent.indexOf("MSIE ") > 0) && void this.element.find(".amp-spin").each(function(a, i) {
                    var o = e(i).data()["amp-ampSpin"];
                    o && o._startDrag && o._startDrag(t)
                })
            }
        },
        _mouseMove: function(e, t, a, i, o) {
            if (this.options.gesture.enabled && e.originalEvent && e.originalEvent.touches && e.originalEvent.touches[0] && e.originalEvent.touches.length != this.options.gesture.fingers) return !0;
            var r = this._resolveEventCoords(e),
                n = r.x - t.left,
                s = r.y - t.top,
                l = n - a,
                d = s - i,
                c = (this._mouseMoveInfo, {
                    e: e,
                    mx: n,
                    my: s
                });
            return Math.abs(l) < Math.abs(d) ? this.moveDir = "vert" : Math.abs(l) > Math.abs(d) ? this.moveDir = "horz" : this.moveDir = this.options.orientation, this._mouseMoveInfo.push(c), this._mouseMoveInfo.length > 2 && this._mouseMoveInfo.shift(), this._moveSpin("horz" == this.options.orientation ? l : d, e, o), this.options.orientation == this.moveDir ? (e.preventDefault(), !1) : void 0
        },
        _moveSpin: function(e, t, a) {
            var i = Math.round(e / this.options.dragDistance * (this._count - 1));
            "normal" == this.options.dir && (i = 0 - i), this._track("move", {
                domEvent: t,
                distFromStart: e
            });
            var o = this._numToIndex(i + a);
            o != this._index && (this._checkLoop(o), this.goTo(o))
        },
        _checkLoop: function(e) {
            Math.abs(this._index - e) > 2 && (this._index > e ? this._track("looped", "forwards") : this._track("looped", "backwards"))
        },
        _endDrag: function(e, t, a, i, o) {
            "horz" == this.moveDir && (e.preventDefault(), e.stopPropagation()), this.moveDir = null;
            var r = this;
            if (!this._ended && (this._started = !1, this._ended = !0, this._track("endMove", {
                    domEvent: e
                }), this.$document.off(this.options.events.end, this._ubind), this.$document.off(this.options.events.move, this._mbind), clearInterval(this._timer), this._setCursor(this.options.cursor.inactive), this.element.removeClass(this.options.states.active).addClass(this.options.states.inactive), this.options.momentum && 2 == this._mouseMoveInfo.length)) {
                var n = this._mouseMoveInfo,
                    s = n[1].e.timeStamp - n[0].e.timeStamp,
                    l = "horz" == this.options.orientation ? n[1].mx - n[0].mx : n[1].my - n[0].my;
                if (0 == l || 0 == s) return;
                var d = l / s,
                    c = d,
                    u = this.options.friction,
                    p = "horz" == this.options.orientation ? n[1].mx - a : n[1].my - i,
                    h = 0,
                    m = 0;
                if (Math.abs(p) < this.options.minDistance) return;
                var f = null,
                    g = function(t) {
                        var a;
                        a = f ? t - f : 15, f = t;
                        for (var i = a / 10; i > 0;) c -= (c - c * u) * Math.min(i, 1), i -= 1;
                        h += c * a, m += a, r._moveSpin(h + p, e, o), Math.abs(c) > .1 && window.requestAnimationFrame(g)
                    };
                return void window.requestAnimationFrame(g)
            }
        },
        _calcSize: function() {
            this._super(), this.progressIndicator && this.progressIndicator.visible && (this.progressIndicator.css("top", (parseInt(e(this.element.find("li")[0]).css("height")) - parseInt(this.progressIndicator.css("height"))) / 2 + "px"), this.progressIndicator.css("left", (parseInt(e(this.element.find("li")[0]).css("width")) - parseInt(this.progressIndicator.css("width"))) / 2 + "px"))
        },
        _getIndex: function(e) {
            var t = this.element.children();
            if (e > t.length) {
                if (!this.options.loop) return;
                e = 1
            } else if (1 > e) {
                if (!this.options.loop) return;
                e = t.length
            }
        },
        _direction: function(e) {
            for (var t = 0, a = 0, i = e; i != this._index;) i > this._count ? i = 0 : i++, t++;
            for (i = e; i != this._index;) 1 > i ? i = this._count : i--, a++;
            return t > a
        },
        _loopIndex: function(e, t, a) {
            for (var i = e ? 1 : -1, o = t, r = 0; a > r; r++) o + i > this._count ? o = 1 : 1 > o + i ? o = this._count : o += i;
            return o
        },
        _loopCount: function(e, t, a) {
            for (var i = e ? 1 : -1, o = t, r = 0; o != a;) r++, o + i > this._count ? o = 1 : 1 > o + i ? o = this._count : o += i;
            return r
        },
        _animate: function(e) {
            var t = this.element,
                a = t.children("li").eq(this._index - 1),
                i = t.children("li").eq(e - 1);
            this._index != e && (i.addClass(this.options.states.selected + " " + this.options.states.seen), this.isWebkit ? (i.css("display", "block"), a.css("display", "none")) : (i.css("zIndex", 1), a.css("zIndex", -1)), a.removeClass(this.options.states.selected), this._setIndex(e), this._setIndex(e, !0))
        },
        _track: function(e, t) {
            this._trigger(e, null, t), window.amp && amp.stats && amp.stats.event && amp.stats.event(this.element, "spin", e, t)
        },
        _destroy: function() {
            this.element.removeClass("amp"), this.element.removeClass("amp-spin"), this.element.removeClass(this.options.states.active), this.element.removeClass(this.options.states.inactive), this.element.css("cursor", ""), this.element.find(".amp-progress").remove(), this.element.find(".amp-loading").remove(), this._removeEmptyAttributeHelper(this.element);
            var t = this.element.children();
            t.removeClass("amp-frame"), t.removeClass(this.options.states.selected), t.removeClass(this.options.states.seen), t.css("display", "");
            for (var a = 0, i = t.length; i > a; a++) this._removeEmptyAttributeHelper(e(t[a]));
            var o = t.find("img");
            o.removeClass("amp amp-main-img, amp-image"), o.css("display", "");
            for (var a = 0, i = o.length; i > a; a++) this._removeEmptyAttributeHelper(e(o[a]))
        }
    })
}(jQuery), window.FL = window.FL || {}, FL.checkout = FL.checkout || {}, FL.checkout = jQuery.extend(!0, {
    init: function() {
        FL.checkout.SignIn.init()
    },
    Header: {
        refresh: function(e) {
            FL.ajax.reloadComponent("checkoutHeader", FL.contextPath + "/checkout/gadgets/checkoutHeading.jsp?currentStage=" + e)
        }
    },
    SignIn: {
        init: function() {
            $("#loginForm .js-submit-btn").on("click", function() {
                $("#loginErrorContainer").addClass("hide");
                var e = !1;
                if ("" == $.trim($("#loginForm").find("#password").val()) ? ($("#loginForm").find("#errorPassword").css("display", "inline"), $("#loginForm").find("#password").css("border", "1px solid #ff1b1b"), e = !0) : ($("#loginForm").find("#errorPassword").css("display", "none"), $("#loginForm").find("#password").css("border", "1px solid #c8c8c8")), "" == $.trim($("#loginForm").find("#signinEmail").val()) ? ($("#loginForm").find("#errorPassword").css("display", "inline"), $("#loginForm").find("#signinEmail").css("border", "1px solid #ff1b1b"), e = !0) : ($("#loginForm").find("#errorPassword").css("display", "none"), $("#loginForm").find("#signinEmail").css("border", "1px solid #c8c8c8")), !0 === e) return !1;
                $(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1), FL.global.showOverlay(), FL.form.submit("loginForm", "FL.checkout.SignIn.response", "FL.checkout.SignIn.response")
            }), $("#loginModalForm .js-submit-btn").on("click", function() {
                var e = !1;
                if ("" == $.trim($("#loginModalForm").find("#password").val()) ? ($("#loginModalForm").find("#errorPassword").css("display", "inline"), $("#loginModalForm").find("#password").css("border", "1px solid #ff1b1b"), e = !0) : ($("#loginModalForm").find("#errorPassword").css("display", "none"), $("#loginModalForm").find("#password").css("border", "1px solid #c8c8c8"), $("#loginModalForm").find("#password").focus()), "" == $.trim($("#loginModalForm").find("#signinEmail").val()) ? ($("#loginModalForm").find("#errorUsername").css("display", "inline"), $("#loginModalForm").find("#signinEmail").css("border", "1px solid #ff1b1b"), e = !0) : ($("#loginModalForm").find("#errorUsername").css("display", "none"), $("#loginModalForm").find("#signinEmail").css("border", "1px solid #c8c8c8"), $("#loginModalForm").find("#signinEmail").focus()), !0 === e) return !1;
                $(window).width() <= 1024 ? $("#mobileLoginCheckout").val(!0) : $("#mobileLoginCheckout").val(!1), FL.global.showOverlay(), FL.form.submit("loginModalForm", "FL.checkout.SignIn.modalResponse", "FL.checkout.SignIn.modalResponse")
            }), $("#signInModal").find("#signinEmail").on("change", FL.checkout.SignIn.onSmtrEmailChange)
        },
        onSmtrEmailChange: function() {
            var e, t = t || window._smtr || [];
            e = ["onEmail", {
                email: $(this).val(),
                type: "transact"
            }], t.push(e)
        },
        response: function(e) {
            e && e.success ? window.location.reload() : (FL.global.hideOverlay(), $("#loginErrorContainer").html(e), $("#loginErrorContainer").removeClass("hide"))
        },
        modalResponse: function(e) {
            e && e.success ? window.location.reload() : (FL.global.hideOverlay(), $("#loginModalErrorContainer").html(e))
        }
    },
    orderSummary: {
        init: function() {
            FL.checkout.orderSummary.initCouponCode(), $("#paymentApplePay").closest(".tabs-title").hasClass("is-active") && FL.applePay.init(), $("#checkoutActionsDiv").length > 0 && FL.checkout.orderSummary.initSubmitButtons(), FL.cart.initJDXOffer()
        },
        initSubmitButtons: function() {
            var e = $("#cart_form"),
                t = $(".js-cart-proceed-btn"),
                a = e.find("#moveToPurchaseInfoBtn");
            t.on("click", function(e) {
                e.preventDefault(), FL.Tealium.clickCartProceedCheckout({
                    isSlideout: t.parents("#offCanvasRightSlider").length > 0
                }), a.click()
            });
            var i = $(".js-cart-paypal-btn"),
                o = e.find("#paypalCheckoutButton");
            i.on("click", function(e) {
                e.preventDefault(), FL.Tealium.clickCartProceedPayPal({
                    isSlideout: t.parents("#offCanvasRightSlider").length > 0
                }), o.click()
            }), FL.checkout.Kiosk.init()
        },
        initCouponCode: function() {
            var e = $(".couponCodeInput");
            e.length > 0 && (e.on("input", FL.checkout.orderSummary.clearCouponErrors).on("change", FL.checkout.orderSummary.onCouponUpdate), $(".applyCouponCode").on("click", function(e) {
                if (e.preventDefault(), FL.checkout.orderSummary.validateCoupon($(this))) FL.checkout.orderSummary.applyCoupon($(this));
                else {
                    var t = {
                        coupon_code: !1
                    };
                    FL.optimove.reportEvent("apply_coupon", t)
                }
            }))
        },
        clearCouponErrors: function() {
            $(".couponCodeInput").attr("aria-invalid", "false").removeClass("error"), $(".couponCode-missing-error").addClass("hide"), $(".couponCode-rewards-billing-error").addClass("hide"), $(".couponCode-rewards-error").addClass("hide"), $(".couponCode-server-error").addClass("hide")
        },
        onCouponUpdate: function() {
            var e, t = t || window._smtr || [];
            e = ["onPromo", {
                code: $(this).val(),
                id: "couponCodeInput"
            }], t.push(e)
        },
        setCouponErrorState: function() {
            $(".couponCodeInput").attr("aria-invalid", "true"), $(".couponCodeInput").addClass("error")
        },
        validateCoupon: function(e) {
            var t = e.parents(".couponCode").find(".couponCodeInput").val();
            return t ? !$.isNumeric(t) || 12 !== t.trim().length || (FL.checkout.billing.isBillingPage() ? $(".couponCode-rewards-billing-error").removeClass("hide").show() : $(".couponCode-rewards-error").removeClass("hide").show(), FL.checkout.orderSummary.setCouponErrorState(), !1) : ($(".couponCode-missing-error").removeClass("hide").show(), FL.checkout.orderSummary.setCouponErrorState(), !1)
        },
        applyCoupon: function(e) {
            var t = e.parents(".couponCode").find(".couponCodeInput").val();
            $(".couponCodeInput").val(t), $("#hiddenCouponClaimCode").val(t.toUpperCase()), FL.checkout.billing.disableSubmit(), FL.checkout.review.disableSubmit(), FL.form.submit("coupon_form", "FL.checkout.orderSummary.applyCouponSuccess", "FL.checkout.orderSummary.applyCouponError")
        },
        applyCouponSuccess: function(e) {
            if (e && e.success) {
                $(".coupon_apply").length > 0 && ($(".coupon_apply").load(location.href + " .coupon_apply>*", ""), $("#couponCodeInputMobile").val("")), FL.checkout.billing.enableSubmit(), FL.checkout.review.enableSubmit(), FL.checkout.orderSummary.clearCouponErrors(), FL.checkout.billing.OrderSummary.refresh(), FL.checkout.stage || (FL.checkout.stage = "cart");
                var t = {
                    coupon_code: !0
                };
                FL.optimove.reportEvent("apply_coupon", t), FL.checkout.Header.refresh(FL.checkout.stage), FL.checkout.billing.KlarnaPay.klarnaWidgetReload()
            } else FL.checkout.orderSummary.applyCouponError(e)
        },
        applyCouponError: function(e) {
            FL.checkout.billing.enableSubmit(), FL.checkout.review.enableSubmit();
            var t = {
                coupon_code: !1
            };
            FL.optimove.reportEvent("apply_coupon", t), e && e.globalError ? $(".couponCode-server-error").removeClass("hide").show().html(e.globalError) : null != e.couponOfferNotMet ? ($(".couponCode-server-error").removeClass("hide").show().html(e.couponOfferNotMet), $(".couponCode-server-error").removeClass("hide"), "true" == $("#g8ht2d-acc-menu").attr("aria-hidden") && $(".row.mb-1 .icon-plus").trigger("click")) : $(".couponCode-server-error").removeClass("hide").show().html("An unknown error has occurred"), FL.checkout.orderSummary.setCouponErrorState()
        },
        reload: function(e, t) {
            t || (t = "page");
            var a = FL.contextPath + "/checkout/gadgets/checkoutOrderSummary.jsp";
            e && (a += "?currentStage=" + e + "&cartType=" + t), FL.ajax.reloadComponent("checkoutOrderSummary", a, FL.checkout.orderSummary.init), FL.checkout.billing.KlarnaPay.klarnaWidgetReload(), $("#checkoutOrderSummary_mobile").length > 0 && (FL.ajax.reloadComponent("checkoutOrderSummary_mobile", a, FL.checkout.orderSummary.init), FL.checkout.billing.KlarnaPay.klarnaWidgetReload())
        }
    },
    disableShippingFields: function() {
        $("#firstName").prop("disabled", !0), $("#shippingLastName").prop("disabled", !0), $("#shippingAddress1").prop("disabled", !0), $("#shippingAddress2").prop("disabled", !0), $("#shippingZip").prop("disabled", !0), $("#shippingCity").prop("disabled", !0), $("#shippingState").prop("disabled", !0), $("#shippingPhone").prop("disabled", !0), $("#formChangeEmailAddress").removeAttr("disabled"), $("#jsInstoreAddress input[type='hidden']").removeAttr("disabled", !0)
    },
    enableShippingFields: function() {
        $("#firstName").removeAttr("disabled"), $("#shippingLastName").removeAttr("disabled"), $("#shippingAddress1").removeAttr("disabled"), $("#shippingAddress2").removeAttr("disabled"), $("#shippingZip").removeAttr("disabled"), $("#shippingCity").removeAttr("disabled"), $("#shippingState").removeAttr("disabled"), $("#shippingPhone").removeAttr("disabled"), $("#formChangeEmailAddress").prop("disabled", !0), $("#jsInstoreAddress input[type='hidden']").prop("disabled", !0)
    },
    Kiosk: {
        init: function() {
            $(".js-cart-kiosk-btn").on("click", FL.checkout.Kiosk.clickProceed)
        },
        clickCreateBag: function() {
            var e = $("#kioskCartCreateBagName").val().trim();
            "" !== e && FL.checkout.Kiosk.requestBagCreation(e)
        },
        clickFinalizeBag: function() {
            $("#removeallContinue").click()
        },
        clickProceed: function(e) {
            e.preventDefault(), $("#kioskCartCreateBagModal").foundation("open"), $("#kioskCartCreateBagName").focus(), $("#kioskCartCreateBagContinue").on("click", FL.checkout.Kiosk.clickCreateBag)
        },
        requestBagCreation: function(e) {
            FL.Tealium.clickKioskBasketContinue(), $.ajax({
                type: "POST",
                url: FL.contextPath + "/browse/KioskBagCreation.jsp",
                dataType: "json",
                data: {
                    bagName: e
                },
                success: function(e, t, a) {
                    e.success && FL.checkout.Kiosk.loadBasketReadyModal()
                }
            })
        },
        loadBasketReadyModal: function() {
            var e = $("#kioskCartBasketReadyModal");
            e.foundation("open"), e.on("closed.zf.reveal\t", FL.checkout.Kiosk.clickFinalizeBag)
        }
    }
}, FL.checkout), window.FL = window.FL || {}, FL.checkout = FL.checkout || {}, FL.checkout.shipping = FL.checkout.shipping || {}, FL.checkout.shipping = jQuery.extend(!0, {
    isShipping: function() {
        var e = window.location.href;
        return !(!e || !e.indexOf || -1 === e.indexOf("shipping"))
    },
    init: function() {
        var e = e || window._smtr || [];
        e.push(["onCheckout"]), FL.checkout.init(), FL.mask.init(), FL.checkout.shipping.Form.init(), FL.checkout.shipping.UpsAddress.init(), FL.checkout.shipping.SelectInStorePickupLocation.init(), FL.checkout.orderSummary.initCouponCode(), FL.global.capitalizeFields(), $("body").on("open.zf.reveal", "#addShippingAddressModal", function() {
            $(".has-float-label select").on("change", function(e) {
                $(this).val() ? $(this).addClass("selected") : $(this).removeClass("selected")
            }).each(function() {
                $(this).val() && $(this).addClass("selected")
            }), FL.mask.init(), $("#addressAddForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.checkout.shipping.Regex_Special_Characters
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.checkout.shipping.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !0
                    },
                    email: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    }
                }
            }), FL.checkout.shipping.addressClick(), $("#newShippingAddressSave").on("click", function(e) {
                e.preventDefault(), $("#addressAddForm").valid() && $.ajax({
                    url: $("#addressAddForm").attr("action"),
                    data: $("#addressAddForm").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        if (e.success) $("#addShippingAddressModal").foundation("close"), FL.ajax.reloadComponent("selectShippingAddressSection", FL.contextPath + "/checkout/gadgets/selectShippingAddress.jsp", FL.checkout.shipping.ShippingAddresses.init);
                        else {
                            if (!($(e).filter("#checkOutForm").length > 0)) {
                                var t = !1;
                                return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber)), !1
                            }
                            $("#upsAddressModal").html(e), $("#upsErrorFlag").val("true"), FL.checkout.shipping.UpsAddress.init()
                        }
                    }
                })
            })
        }), $("body").on("open.zf.reveal", "#editShippingAddressModal", function() {
            $(".has-float-label select").on("change", function(e) {
                $(this).val() ? $(this).addClass("selected") : $(this).removeClass("selected")
            }).each(function() {
                $(this).val() && $(this).addClass("selected")
            }), $(".row #shippingEmail").on("keypress", function(e) {
                var t = $(this).val(),
                    a = t.slice(0, e.target.selectionStart).length;
                if (-1 != t.indexOf("@") && ".com" === t.slice(-4) && t.length === a) return e.preventDefault(), !1
            }), FL.mask.init(), $("#addressEditForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.checkout.shipping.Regex_Special_Characters
                    },
                    address2: {
                        pattern: FL.checkout.shipping.Regex_Special_Characters
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.checkout.shipping.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !0
                    },
                    email: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    address2: {
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    }
                }
            }), FL.checkout.shipping.addressClick(), $("#editShippingAddressSave").on("click", function(e) {
                e.preventDefault(), $("#addressEditForm").valid() && $.ajax({
                    url: $("#addressEditForm").attr("action"),
                    data: $("#addressEditForm").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        if (e.success) $("#editShippingAddressModal").foundation("close"), FL.ajax.reloadComponent("selectShippingAddressSection", FL.contextPath + "/checkout/gadgets/selectShippingAddress.jsp", FL.checkout.shipping.ShippingAddresses.init);
                        else {
                            if (!($(e).filter("#checkOutForm").length > 0)) {
                                var t = !1;
                                return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber)), !1
                            }
                            $("#upsAddressModal").html(e), $("#upsErrorFlag").val("true"), FL.checkout.shipping.UpsAddress.init()
                        }
                    }
                })
            })
        }), FL.checkout.shipping.optimoveShippingEvent()
    },
    addressClick: function() {
        function e() {
            $(".show_address2").show(), t.hide()
        }
        var t = $(".addline");
        t.on("click", function() {
            e()
        }), t.on("keyup", function(t) {
            13 == t.which && e()
        }), $("#shippingCity").off("keydown").on("keydown", function(e) {
            for (var t = [8, 9, 16, 17, 20, 32, 35, 36, 37, 38, 39, 40, 45, 46], a = 65; a <= 90; a++) t.push(a); - 1 === jQuery.inArray(e.which, t) && e.preventDefault()
        }), $("#shippingCity").off().on("input", function() {
            var e = /[^a-zA-Z ]/g;
            $(this).val().match(e) && $(this).val($(this).val().replace(e, ""))
        }), "" != $(".shippingfield_address").val() && ($("#shipToHomeTab .show_address2").show(), $("#shipToHomeTab .addline").hide()), "" != $(".addship_address").val() && ($("#addressAddForm .show_address2").show(), $("#addressAddForm .addline").hide()), "" != $(".editship_address").val() && ($("#addressEditForm .show_address2").show(), $("#addressEditForm .addline").hide())
    },
    Regex: /^[^~\-_@$*()={}\\\/^%!&"']*$/,
    Regex_Special_Characters: /^[a-zA-Z0-9# ,.-]*$/,
    NameRegex: /^([a-zA-Z\-_]+\s?)+$/,
    Form: {
        init: function() {
            $("#shipping_form").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.checkout.shipping.Regex_Special_Characters
                    },
                    address2: {
                        pattern: FL.checkout.shipping.Regex_Special_Characters
                    },
                    zip: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.checkout.shipping.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.checkout.shipping.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !0
                    },
                    email: {
                        required: !0,
                        email: !0
                    },
                    instorePickupemail: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    address2: {
                        pattern: "Special characters not allowed"
                    },
                    zip: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    },
                    instorePickupemail: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    }
                }
            }), FL.checkout.shipping.addressClick(), $("body").on("submit", "#shipping_form", FL.checkout.shipping.Form.onSubmit).on("change", "#email", FL.checkout.shipping.Form.onEmailChange), $("#mobileSubmitBtn").on("click", function(e) {
                e.preventDefault(), $("#shipping_form").submit()
            }), $("#shipHome").length > 0 && ($("#shipToHomeTab.tabs-panel").addClass("is-active"), $("#shipToHomeTab.tabs-panel").attr("aria-selected", "true"), $("#storePickupTab.tabs-panel").removeClass("is-active"), $("#storePickupTab.tabs-panel").removeAttr("aria-selected", "true"), $("#shipToHomeTab input").each(function() {
                $(this).removeAttr("disabled")
            }), $("#shipToHomeTab select").removeAttr("disabled")), "true" == $("#isLoggedIn").val() && FL.checkout.shipping.ShippingAddresses.init();
            var e = $("#storeLocationId").val();
            e && $("#storePickupTab .store-pickup-box").each(function() {
                $(this).data("storeid") === e && ($(".store-pickup-box").removeClass("active"), $(this).addClass("active"))
            }), $("#shippingRadioTabs").on("click", "li", function() {
                if ($("#radioShipToHome").is(":checked")) {
                    FL.checkout.enableShippingFields();
                    var e = $(".poBoxShippingMethodHide label.selected").parent().next().find(".delivery-method-price").text();
                    $(".checkout-step-shipping").text("Shipping"), $(".resetShipToHome").text("Shipping:"), $(".shipping-header").text("Shipping"), $("#shippingCost").text(e), $.ajax({
                        url: FL.contextPath + "/checkout/gadgets/createshippingGroup.jsp",
                        type: "GET",
                        success: function(e) {
                            FL.checkout.shipping.DeliveryMethod.changeMethod()
                        }
                    })
                } else FL.checkout.disableShippingFields(), $(".checkout-step-shipping").text($("#radioStorePickup").data("pickup")), $(".resetShipToHome").text($("#radioStorePickup").data("pickup")), $(".shipping-header").text("pickup information"), $("#shippingCost").text("Free"), null === FL.checkout.shipping.SelectInStorePickupLocation.Map.map && FL.checkout.shipping.SelectInStorePickupLocation.Map.init(), FL.checkout.shipping.DeliveryMethod.changeMethod()
            }), $("#shippingState").on("change", function() {
                var e = FL.contextPath + "/checkout/gadgets/deliveryMethodsAjax.jsp?state=" + $("#shippingState").val() + "&addr1=" + $("#shippingAddress1").val() + "&addr2=" + $("#shippingAddress2").val();
                FL.ajax.reloadFormComponent("deliveryMethods", e, FL.checkout.shipping.DeliveryMethod.init)
            }), FL.checkout.shipping.Form.inputStarted = !1, FL.checkout.shipping.DeliveryMethod.init()
        },
        onSubmit: function(e) {
            if (0 == $("#radioShipToHome").length || $("#radioShipToHome").is(":checked"))
                if ("true" == $("#isLoggedIn").val()) {
                    var t = $(".address-select-box.select-shipping.active").data("addressname");
                    void 0 != t && ($("#shipToAddressNickname").val(t), $("#upsValidation").val(!1))
                } else $("#upsValidation").val(!0);
            else {
                var a = $("#storePickupTab .store-pickup-box.active").data("storeid");
                $("#storeLocationId").val(a), $("#upsValidation").val(!1)
            }
        },
        onEmailChange: function(e) {
            var t, a = a || window._smtr || [];
            t = ["onEmail", {
                email: jQuery(this).val(),
                type: "account"
            }], a.push(t)
        }
    },
    optimoveShippingEvent: function() {
        $("#shippingContinueButton").on("click", function() {
            setTimeout(function() {
                var e = store_pickup = email_address = first_name = last_name = address = apt_suite = city = state = zip_code = phone = !1,
                    t = $("input[name='shippingMethod']:checked").parent("label").text().trim();
                $(".address-select-box.active").length > 0 ? e = email_address = first_name = last_name = address = apt_suite = city = state = zip_code = phone = !0 : ("" == $("#shipToHomeTab #email").val() || $("#shipToHomeTab #email").hasClass("error") || (email_address = !0), "" == $("#shipToHomeTab #firstName").val() || $("#shipToHomeTab #firstName").hasClass("error") || (first_name = !0), "" == $("#shipToHomeTab #shippingLastName").val() || $("#shipToHomeTab #shippingLastName").hasClass("error") || (last_name = !0), "" == $("#shipToHomeTab #shippingAddress1").val() || $("#shipToHomeTab #shippingAddress1").hasClass("error") || (address = !0), "" == $("#shipToHomeTab #shippingAddress2").val() || $("#shipToHomeTab #shippingAddress2").hasClass("error") || (apt_suite = !0), "" == $("#shipToHomeTab #shippingCity").val() || $("#shipToHomeTab #shippingCity").hasClass("error") || (city = !0), "" == $("#shipToHomeTab #shippingState").val() || $("#shipToHomeTab #shippingState").hasClass("error") || (state = !0), "" == $("#shipToHomeTab #shippingZip").val() || $("#shipToHomeTab #shippingZip").hasClass("error") || (zip_code = !0), "" == $("#shipToHomeTab #shippingPhone").val() || $("#shipToHomeTab #shippingPhone").hasClass("error") || (phone = !0), e = !0);
                var a = {
                    ship_to_home: e,
                    store_pickup: store_pickup,
                    email_address: email_address,
                    first_name: first_name,
                    last_name: last_name,
                    address: address,
                    apt_suite: apt_suite,
                    city: city,
                    state: state,
                    zip_code: zip_code,
                    phone: phone,
                    delivery_method: t,
                    store_location: ""
                };
                FL.optimove.reportEvent("checkout_shipping", a)
            }, 500)
        })
    },
    shippingPopupData: function() {
        if ($("#poBoxRestrictItem").length > 0) $("#dropShipProduct").hide();
        else {
            $("#shippingPoliciesModal").find("#dropShipProduct").empty();
            var e = $(".common_drop_ship").html();
            $("#dropShipProduct").show(), $("body").find("#checkout.is-reveal-open") && $("#shippingPoliciesModal").find("#dropShipProduct").append(e)
        }
    },
    poBoxShippingMethodHide: function() {
        $("#poBoxRestrictItem").length > 0 ? ($(".poBoxShippingMethodHide").hide(), $("#shippingContinueButton, #mobileSubmitBtn").prop("disabled", !0)) : $(".remove_continue_button").length > 0 ? $("#shippingContinueButton, #mobileSubmitBtn").prop("disabled", !0) : ($(".poBoxShippingMethodHide").show(), $("#shippingContinueButton").removeAttr("disabled"), $("#mobileSubmitBtn").removeAttr("disabled"))
    },
    DeliveryMethod: {
        init: function() {
            $(".control--radio input[name=shippingMethod]").on("click", function() {
                FL.checkout.shipping.DeliveryMethod.changeMethod()
            }), 0 === $("#storePickupTab").length && FL.checkout.shipping.DeliveryMethod.changeMethod(), $("#storePickupTab").length > 0 && $("#radioStorePickup").is(":checked") ? ($("#shippingContinueButton").removeAttr("disabled"), $("#mobileSubmitBtn").removeAttr("disabled")) : FL.checkout.shipping.poBoxShippingMethodHide()
        },
        changeMethodSuccess: function(e) {
            null === e || e.success ? (FL.checkout.shipping.OrderSummary.refresh(), FL.checkout.Header.refresh("shipping")) : FL.checkout.shipping.DeliveryMethod.changeMethodError(e), $("#shippingContinueButton").removeAttr("disabled")
        },
        changeMethodError: function(e) {
            e && e.globalError ? $("#shipping-method-server-error").removeClass("hide").html(e.globalError) : $("#shipping-method-server-error").removeClass("hide").html("Session may have timed out. Please refresh the page to continue.")
        },
        changeMethod: function() {
            var e = "";
            if ($("#shippingContinueButton").prop("disabled", !0), 0 !== $("#radioStorePickup").length && $("#radioStorePickup").is(":checked") || ($(".control.control--radio.selected").removeClass("selected"), $(".control--radio input[name=shippingMethod]").each(function() {
                    $(this).is(":checked") && ($(this).parent(".control--radio").addClass("selected"), e = $(this).val())
                })), void 0 !== $('input[name="shippingMethod"]:checked').val()) {
                var t = t || window._smtr || [];
                t.push(["onShip", {
                    value: $('input[name="shippingMethod"]:checked').val().toLowerCase()
                }])
            }
            $("#FlShippingMethod").val(e), $("#shipping-method-server-error").addClass("hide").html(""), FL.form.submit("shipping_method_form", "FL.checkout.shipping.DeliveryMethod.changeMethodSuccess", "FL.checkout.shipping.DeliveryMethod.changeMethodError")
        }
    },
    ShippingAddresses: {
        init: function() {
            if ($(".address-select-box.select-shipping").on("click", function() {
                    $(".address-select-box").removeClass("active"), $(this).addClass("active"), FL.checkout.shipping.ShippingAddresses.changeAddress()
                }), $(".address-select-box.add-new, #addNewShippingAddressLink").on("click", function() {
                    var e = FL.contextPath + "/checkout/modals/addShippingAddress.jsp";
                    $.ajax(e).done(function(e) {
                        $("#addShippingAddressModal").html(e).foundation("open")
                    })
                }), $(".edit-address-button").on("click", function() {
                    var e = FL.contextPath + "/checkout/modals/editShippingAddress.jsp?addressKey=" + $(this).data("nickname");
                    $.ajax(e).done(function(e) {
                        $("#editShippingAddressModal").html(e).foundation("open")
                    })
                }), $("#deletingAssociatedErrorShipping").length > 0) {
                var e = $("#deletingAssociatedErrorShipping").html();
                $("#addressErrormodal").html(e).foundation("open")
            }
            "" != $("#changeAddressNickname").val() && $(".address-select-box.select-shipping").each(function() {
                $(this).data("addressname") == $("#changeAddressNickname").val() && ($(".address-select-box").removeClass("active"), $(this).addClass("active"), FL.checkout.shipping.ShippingAddresses.changeAddress())
            })
        },
        changeAddress: function() {
            var e = $(".address-select-box.select-shipping.active").data("addressname");
            $("#changeAddressNickname").val(e), $.ajax({
                type: "POST",
                url: $("#change_address_from").attr("action"),
                data: $("#change_address_from").serialize(),
                success: function(t) {
                    if ($("#shipHome").length > 0 && $("#selectedAddressNickname").val() == e) {
                        var a = FL.contextPath + "/checkout/gadgets/deliveryMethodsAjax.jsp";
                        FL.ajax.reloadFormComponent("deliveryMethods", a, FL.checkout.shipping.DeliveryMethod.init)
                    } else {
                        var a = FL.contextPath + "/checkout/gadgets/deliveryMethodsAjax.jsp";
                        FL.ajax.reloadFormComponent("deliveryMethods", a, FL.checkout.shipping.DeliveryMethod.init)
                    }
                }
            })
        }
    },
    OrderSummary: {
        refresh: function() {
            FL.checkout.orderSummary.reload("shipping")
        }
    },
    UpsAddress: {
        init: function() {
            "true" == $("#upsErrorFlag").val() && ($("#upsAddressModal").foundation("open"), FL.global.capitalizeFields(), $(".address-container").on("click", function() {
                var e = $(this);
                $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
            }), $("#address_edit_add").on("click", function() {
                $("#upsAddressModal").foundation("close"), $("#addShippingAddressModal").foundation("open")
            }), $("#address_edit_edit").on("click", function() {
                $("#upsAddressModal").foundation("close"), $("#editShippingAddressModal").foundation("open")
            }), FL.checkout.shipping.UpsAddress.attachOverrideSubmit(), FL.checkout.shipping.UpsAddress.attachOverrideAddSubmit())
        },
        attachOverrideSubmit: function() {
            $("body").on("submit", "#overrideShippingForm", function(e) {
                FL.checkout.shipping.UpsAddress.populateOverrideFields()
            })
        },
        attachOverrideAddSubmit: function() {
            $("#overrideAddSubmitButton").on("click", function(e) {
                e.preventDefault(), FL.checkout.shipping.UpsAddress.populateOverrideFields();
                var t = FL.contextPath + "/global/blank.jsp";
                $.ajax({
                    url: t,
                    type: "POST",
                    data: $("#overrideAddressBookForm").serialize(),
                    success: function(e) {
                        $("#upsAddressModal").foundation("close"), FL.ajax.reloadComponent("selectShippingAddressSection", FL.contextPath + "/checkout/gadgets/selectShippingAddress.jsp", FL.checkout.shipping.ShippingAddresses.init)
                    },
                    error: function() {}
                })
            })
        },
        populateOverrideFields: function() {
            var e = $(".address-container.active");
            $("#originalAddress").hasClass("active") ? ($("#overrideAddress1").val(e.find("#originalAddress1").text().capitalize()), $("#overrideAddress2").val(e.find("#originalAddress2").text().capitalize()), $("#overrideCity").val(e.find("#originalCity").text().capitalize()), $("#overrideState").val(e.find("#originalState").text()), $("#overrideZip").val(e.find("#originalZip").text()), $("#overrideWithSuggestion").val(!1)) : ($("#overrideAddress1").val(e.find("#suggestedAddress1").text().capitalize()), $("#overrideAddress2").val(e.find("#suggestedAddress2").text().capitalize()), $("#overrideCity").val(e.find("#suggestedCity").text().capitalize()), $("#overrideState").val(e.find("#suggestedState").text()), $("#overrideZip").val(e.find("#suggestedZip").text()), $("#overrideWithSuggestion").val(!0))
        }
    },
    SelectInStorePickupLocation: {
        init: function() {
            $(".store-pickup-box").on("click", function() {
                $(".store-pickup-box").removeClass("active"), $(this).addClass("active"), FL.checkout.shipping.SelectInStorePickupLocation.Map.updateLocation()
            }), $("#storePickupTab").length > 0 && (FL.checkout.disableShippingFields(), FL.checkout.shipping.SelectInStorePickupLocation.Map.init()), $("#shipHome").length > 0 && FL.checkout.enableShippingFields()
        },
        Map: {
            map: null,
            marker: null,
            init: function() {
                var e;
                0 === $("#googleMapsApi").length ? (e = document.createElement("script"), e.id = "googleMapsApi", e.src = "https://maps.googleapis.com/maps/api/js?client=gme-thefinishlineusa1&v=3&callback=FL.checkout.shipping.SelectInStorePickupLocation.Map.loadMap", e.type = "text/javascript", $("#storePickupTab").append(e)) : FL.checkout.shipping.SelectInStorePickupLocation.Map.loadMap()
            },
            geoCodeAddress: function(e, t, a) {
                var i = encodeURIComponent(t.replace(/%20/g, "+"));
                $.ajax({
                    type: "GET",
                    url: "https://maps.googleapis.com/maps/api/geocode/json?address=" + i + "&region=us&client=gme-thefinishlineusa1",
                    success: function(t) {
                        if (t && "OK" === t.status && t.results && t.results.length > 0) {
                            var i = "0.0",
                                o = "0.0";
                            t.results[0].geometry && t.results[0].geometry.location && (i = t.results[0].geometry.location.lat.toString(), o = t.results[0].geometry.location.lng.toString()), e.data("latitude", i), e.data("longitude", o), a && a()
                        }
                    }
                })
            },
            updateLocation: function() {
                var e = FL.checkout.shipping.SelectInStorePickupLocation.Map,
                    t = $(".store-pickup-box.active");
                if (lat = t.data("latitude"), lon = t.data("longitude"), address = t.data("address"), latitude = parseFloat(lat), longitude = parseFloat(lon), null !== e.map && null !== e.marker)
                    if ((isNaN(latitude) || isNaN(longitude)) && null !== address) FL.checkout.shipping.SelectInStorePickupLocation.Map.geoCodeAddress(t, address, FL.checkout.shipping.SelectInStorePickupLocation.Map.updateLocation);
                    else if (!isNaN(latitude) && !isNaN(longitude)) {
                    var a = new google.maps.LatLng(latitude, longitude);
                    e.map.setCenter(a), e.marker.setPosition(a)
                }
            },
            loadMap: function() {
                var e = FL.checkout.shipping.SelectInStorePickupLocation.Map,
                    t = $(".store-pickup-box.active");
                if (lat = t.data("latitude"), lon = t.data("longitude"), address = t.data("address"), icon = FL.contextPath + "/assets/images/fl_mappin.png", latitude = parseFloat(lat), longitude = parseFloat(lon), null === e.map)
                    if ((isNaN(latitude) || isNaN(longitude)) && null !== address) FL.checkout.shipping.SelectInStorePickupLocation.Map.geoCodeAddress(t, address, FL.checkout.shipping.SelectInStorePickupLocation.Map.loadMap);
                    else if (!isNaN(latitude) && !isNaN(longitude)) {
                    var a = new google.maps.LatLng(latitude, longitude);
                    e.map = new google.maps.Map(document.getElementById("storeMap"), {
                        center: a,
                        zoom: 12,
                        draggable: !1,
                        mapTypeControl: !1,
                        maxZoom: 12,
                        minZoom: 12,
                        overviewMapControl: !1,
                        panControl: !1,
                        rotateControl: !1,
                        scaleControl: !1,
                        scrollwheel: !1,
                        streetViewControl: !1,
                        zoomControl: !1,
                        styles: [{
                            featureType: "poi.business",
                            stylers: [{
                                visibility: "off"
                            }]
                        }]
                    }), e.marker = new google.maps.Marker({
                        position: a,
                        map: e.map,
                        icon: icon
                    }), $("#storeMapContainer").removeClass("hide")
                }
            }
        }
    }
}, FL.checkout.shipping), $("body").off("click", ".shippingPolicyLink a").on("click", ".shippingPolicyLink a", function() {
    FL.checkout.shipping.shippingPopupData()
}), $(".row #email").keypress(function(e) {
    var t = $(this).val(),
        a = t.slice(0, e.target.selectionStart).length;
    if (-1 != t.indexOf("@") && ".com" === t.slice(-4) && t.length === a) return e.preventDefault(), !1
}), window.FL = window.FL || {}, FL.checkout = FL.checkout || {}, FL.checkout.billing = FL.checkout.billing || {}, FL.checkout.billing = jQuery.extend(!0, {
    Regex: /^[^~\-_@$*()={}\\\/^%!&"']*$/,
    NameRegex: /^[a-zA-Z\-_]+$/,
    DateRegex: /^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/,
    init: function() {
        window.performance && 2 === window.performance.navigation.type && (console.log("Reloading"), window.location.reload()), FL.checkout.billing.applePay.supportedByDevice() && $("#ApplePayOption").show(), $("#billing_tt_paypal-mobile").on("click", function() {
            $("#billing_tt_paypal").trigger("click")
        }), FL.checkout.init(), FL.checkout.orderSummary.initCouponCode(), FL.mask.init(), FL.checkout.billing.initTabHandler(), FL.checkout.billing.initCreditCardSection(), FL.checkout.billing.initPayPalSections(), FL.checkout.billing.initDonationSection(), FL.checkout.billing.winnersCircle.init(), FL.checkout.billing.GiftCard.init(), FL.checkout.billing.Omniture.init(), FL.checkout.billing.initErrors(), FL.checkout.billing.Creditcardevents(), FL.checkout.billing.afterPayShowModal(), FL.checkout.billing.afterPayEvents(), FL.checkout.billing.KlarnaPay.init(), FL.checkout.billing.changeAddressBilling(), FL.checkout.billing.orderCreditCard(), FL.checkout.billing.optimoveBillingEvent(), FlNewCardDiffSecStoreRead = sessionStorage.getItem("FlNewCardDiffSecStore"), FlNewCardDiffSecStoreRead ? FL.Tealium.clickCheckoutNewCreditCardTime(FlNewCardDiffSecStoreRead) : FL.Tealium.clickCheckoutNewCreditCardTime(0)
    },
    orderCreditCard: function() {
        if ("true" == $(".order-level-card-details").attr("data-cardExistInOrder")) {
            var e = $(".order-level-card-details").attr("data-orderCardType"),
                t = $(".order-level-card-details").attr("data-orderExpirationMonth"),
                a = $(".order-level-card-details").attr("data-orderExpirationYear"),
                i = $(".order-level-card-details").attr("data-orderCreditCardNumber");
            $(".savedBCreditCarddiv").each(function() {
                var o = $(this).attr("data-cardType"),
                    r = $(this).attr("data-expYear"),
                    n = $(this).attr("data-expMonth"),
                    s = $(this).attr("data-cardNumber").replace(/\s/g, "");
                n == t && r == a && e == o && i == s && $(this).addClass("active")
            })
        }
    },
    optimoveBillingEvent: function() {
        $("#billingContinueButton, #billingContinueAfterpay, #billing_tt_paypal, #paypalCreditButton").on("click", function() {
            setTimeout(function() {
                var e = card_number = month = year = cvv = save_card_to_wallet = help_finish_line_youth_foundation = !1;
                e = $(".tabs-title.is-active a").attr("aria-controls").replace("Tab", ""), $(".my-account-container .select-credit-car.active").length > 0 ? (card_number, month, year, cvv = !0) : ("" == $("#billing_form #billingCardNumber").val() || $("#billing_form #billingCardNumber").hasClass("error") || (card_number = !0), "" == $("#billing_form #billingExpirationMonth").val() || $("#billing_form #billingExpirationMonth").hasClass("error") || (month = !0), "" == $("#billing_form #billingExpirationYear").val() || $("#billing_form #billingExpirationYear").hasClass("error") || (year = !0), "" == $("#billing_form #billingSecurityCode").val() || $("#billing_form #billingSecurityCode").hasClass("error") || (cvv = !0), $("#storeCard:checked").length > 0 && (save_card_to_wallet = !0), $("#donationCheckbox:checked").length > 0 && (help_finish_line_youth_foundation = !0));
                var t = {
                    payment_method: e,
                    card_number: card_number,
                    month: month,
                    year: year,
                    cvv: cvv,
                    save_card_to_wallet: save_card_to_wallet,
                    help_finish_line_youth_foundation: help_finish_line_youth_foundation
                };
                FL.optimove.reportEvent("checkout_payment_billing", t)
            }, 0)
        })
    },
    afterPayEvents: function() {
        $("body").off("click", "#billingContinueAfterpay, #billingContinueAfterpayMobile").on("click", "#billingContinueAfterpay, #billingContinueAfterpayMobile", function(e) {
            e.preventDefault, FL.Tealium.clickAfterPayBilling();
            var t = parseFloat($("#afterpaytotal").val().replace("$", "")),
                a = FL.contextPath + "/checkout/json/afterPayPreCheckoutJson.jsp?total=" + t;
            $.ajax({
                url: a,
                data: {},
                async: !1,
                type: "post",
                success: function(e) {
                    if (e.afterPaySession) {
                        var t = e.afterPaySession,
                            a = JSON.parse(t).redirectCheckoutUrl;
                        if (a) window.location.href = a;
                        else {
                            var i = JSON.parse(t).error;
                            i && ($(".afterpay-error").show(), $("#afterpay-error").text(i), $("html, body").animate({
                                scrollTop: 0
                            }, 700))
                        }
                    }
                }
            })
        })
    },
    afterPayShowModal: function() {
        $(".afterpay-info-billing").on("click", function() {
            $("#modalAfterpay_Billing").foundation("open")
        })
    },
    KlarnaPay: {
        init: function() {
            FL.checkout.billing.KlarnaPay.klarnaEvents(), FL.checkout.billing.KlarnaPay.klarnaWidgetReload(), window.klarnaAsyncCallback = function(e) {
                Klarna.Payments.init({
                    client_token: e
                }), console.log("Payments initialized"), Klarna.Payments.load({
                    container: "#klarna_container",
                    payment_method_category: "pay_over_time"
                }, function(e) {
                    console.log("Load function called"), console.debug(e), $("#billingContinueKlarna").removeAttr("disabled")
                })
            }
        },
        klarnaEvents: function() {
            $("[aria-controls='klarnaTab']").off("click").on("click", function() {
                var e = FL.contextPath + "/checkout/json/KlarnaSession.jsp";
                $.ajax({
                    url: e,
                    data: {},
                    async: !1,
                    type: "post",
                    success: function(e) {
                        if (console.log(e), e.session) {
                            console.log(e.session);
                            var t = e.session,
                                a = JSON.parse(t).client_token;
                            console.log(a), window.klarnaAsyncCallback(a)
                        }
                    }
                })
            }), $("body").on("click", "#billingContinueKlarna", function() {
                Klarna.Payments.authorize({
                    payment_method_category: "pay_over_time"
                }, {}, function(e) {
                    if (console.log("Response from the authorize call:"), console.log(e), e.authorization_token) {
                        console.log("Valid Auth");
                        var t = FL.contextPath + "/checkout/json/KlarnaPlaceOrder.jsp?authToken=" + e.authorization_token;
                        window.location.href = t
                    } else console.log("Invalid Auth")
                })
            })
        },
        klarnaWidgetReload: function() {
            "true" === $("[aria-controls='klarnaTab']").attr("aria-selected") && ($("#billingContinueKlarna").attr("disabled", "true"), $("[aria-controls='klarnaTab']").click())
        }
    },
    Creditcardevents: function() {
        var e;
        $("body").on("click", ".billing_add_newcard", function() {
            FL.Tealium.clickCheckoutNewCreditCard(), FL.Omniture.add({
                linkTrackVars: "eVar20,prop29,events",
                linkTrackEvents: "event101",
                eVar20: "Checkout-Add a New Card",
                prop29: "Checkout-Add a New Card",
                events: "event101"
            }).sendMicro(this, "Checkout-Add a New Card"), e = new Date;
            var t = FL.contextPath + "/checkout/modals/newCreditCard.jsp";
            $.ajax(t).done(function(e) {
                $("#newCreditCardModal").html(e).foundation("open")
            })
        }), $(document).off("click", ".add-card-check-sec #addCreditCard").on("click", ".add-card-check-sec #addCreditCard", function(t) {
            $("#add_billing_form").submit(function(t) {
                t.preventDefault(), $.ajax({
                    url: $("#add_billing_form").attr("action"),
                    data: $("#add_billing_form").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(t) {
                        if (t.success) {
                            $("#addCreditCard").attr("disabled", "true");
                            var a = new Date,
                                i = a - e;
                            FlNewCardDiffTimeSec = Math.floor(i / 1e3 % 60), sessionStorage.setItem("FlNewCardDiffSecStore", FlNewCardDiffTimeSec), window.location.href = "/store/checkout/billing.jsp"
                        } else void 0 != t.duplicateCard && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(t.duplicateCard))
                    }
                })
            }), $(this).off(t)
        }), $("body").off("click", ".edit_billing_address").on("click", ".edit_billing_address", function() {
            var e = FL.contextPath + "/myaccount/modals/editBillingAddress.jsp?addressKey=" + $(this).data("nickname") + "&frommodal=true";
            $.ajax(e).done(function(e) {
                $("#editBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").on("click", ".edit_billing_noadress", function() {
            var e = FL.contextPath + "/myaccount/modals/editBillingAddress.jsp?addressKey=" + $(this).data("nickname");
            $.ajax(e).done(function(e) {
                $("#editBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").on("open.zf.reveal", "#editBillingAddressModal", function() {
            FL.mask.init(), FL.checkout.billing.selectDropdowns(), FL.checkout.billing.editBilingAddressValidation(), $("#editAddressBillingSave").off("click").on("click", FL.myaccount.Profile.editAddressBillingModal)
        }), $("body").on("open.zf.reveal", "#newCreditCardModal", function() {
            var e = $(".select-shipping.active").attr("data-addressname");
            if ($("#selectedAddressValue").val(e), FL.checkout.billing.addCreditCardSection(), FL.checkout.billing.changeAddressBilling(), FL.checkout.billing.selectDropdowns(), screen.width <= 480) var t = "mobile";
            else var t = "desktop";
            FL.Tealium.displayUseNewCreditCard(), FL.Omniture.add({
                pageName: "Save Card-Add New Card",
                server: "www.finishline.com",
                channel: "Shopping Cart",
                prop1: "Shopping Cart: Save Card-Add New Card",
                prop2: "Shopping Cart: Save Card-Add New Card",
                prop3: "Shopping Cart",
                prop20: t,
                prop21: window.location.href,
                eVar41: window.location.href,
                eVar43: t
            }).sendMicro(this, "Shopping Cart")
        }), $("body").on("click", ".delete-address-checkout-button", function() {
            var e = $(this).data("nickname");
            e = encodeURIComponent(e);
            var t = FL.contextPath + "/checkout/modals/deleteCard.jsp?nickName=" + e + "&creditCardType=" + $(this).data("cardtype") + "&creditCardNumber=" + $(this).data("creditcardnumber");
            $.ajax(t).done(function(e) {
                $("#deleteCreditCardCheckoutModal").html(e).foundation("open")
            })
        }), $("body").on("click", ".remove_unsvd_credit_card_checkout", function() {
            var e = FL.contextPath + "/checkout/modals/removeUnSavedCard.jsp";
            $.ajax(e).done(function(e) {
                $("#deleteCreditCardCheckoutModal").html(e).foundation("open")
            })
        }), $(".edit_credit_card_checkout").on("click", function() {
            var e = $(this).data("nickname");
            e = encodeURIComponent(e);
            var t = FL.contextPath + "/checkout/modals/checkoutEditCreditCard.jsp?nickname=" + e + "&fromEditLink=true";
            $.ajax(t).done(function(e) {
                $("#checkoutEditCreditCard").html(e).foundation("open")
            })
        }), $(".edit_unsvd_credit_card_checkout").on("click", function() {
            var e = FL.contextPath + "/checkout/modals/checkoutEditUnsavedCard.jsp";
            $.ajax(e).done(function(e) {
                $("#checkoutEditCreditCard").html(e).foundation("open")
            })
        }), $("body").on("open.zf.reveal", "#checkoutEditCreditCard", function() {
            if (FL.checkout.billing.selectDropdowns(), FL.checkout.billing.getCheckoutEditFields(), $("#creditCardEdit").validate({
                    rules: {
                        expirationMonthTemp: {
                            billingExpirationDate: !0
                        }
                    },
                    onfocusout: !1,
                    invalidHandler: function(e, t) {
                        var a = t.numberOfInvalids();
                        $(this).find("label.error"), a && t.errorList[0].element.focus()
                    }
                }), FL.checkout.billing.validateExpireDate(), screen.width <= 480) var e = "mobile";
            else var e = "desktop";
            FL.Tealium.displayCheckoutEditCreditCard(), FL.Omniture.add({
                pageName: "Save Card-Edit Card",
                server: "www.finishline.com",
                channel: "Shopping Cart",
                prop1: "Shopping Cart: Save Card-Edit Card",
                prop2: "Shopping Cart: Save Card-Edit Card",
                prop3: "Shopping Cart",
                prop20: e,
                prop21: window.location.href,
                eVar41: window.location.href,
                eVar43: e
            }).sendMicro(this, "Shopping Cart")
        }), $(".address-select-box.select-credit-card").on("click", function() {
            $(".address-select-box").removeClass("active"), $(this).addClass("active"), FL.checkout.billing.changeAddressBilling(), FL.checkout.billing.getCheckoutEditFields()
        }), $("body").on("click", "#add_billing_form .card_newbillinglink", function() {
            var e = FL.contextPath + "/myaccount/modals/addBillingAddress.jsp?&fromaddmodal=true";
            $.ajax(e).done(function(e) {
                $("#addBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").off("click", "#creditCardEdit .card_newbillinglink").on("click", "#creditCardEdit .card_newbillinglink", function() {
            FL.Tealium.displayCheckoutAddBillingAddress()
        }), $("body").on("click", ".checkout_billingnew", function() {
            FL.Tealium.clickCheckoutNewBillingAddress(), FL.Omniture.add({
                linkTrackVars: "eVar20,prop29,events",
                linkTrackEvents: "event99",
                eVar20: "Checkout-Add Billing Address",
                prop29: "Checkout-Add Billing Address",
                events: "event99"
            }).sendMicro(this, "Checkout-Add Billing Address");
            var e = FL.contextPath + "/myaccount/modals/addBillingAddress.jsp";
            $.ajax(e).done(function(e) {
                $("#addBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").on("click", "#addCreditCard, #billingContinueButton", function() {
            $(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1)
        }), $("body").on("open.zf.reveal", "#gitftCardBillingModal", function() {
            FL.mask.init(), FL.checkout.billing.GiftCard.giftCardAddressValidate(), FL.checkout.billing.selectDropdowns()
        }), $("body").on("open.zf.reveal", "#addBillingAddressModal", function() {
            if (FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.addBilingAddressValidation(), screen.width <= 480) var e = "mobile";
            else var e = "desktop";
            FL.Tealium.displayCheckoutAddBillingAddress(), FL.Omniture.add({
                pageName: "Save Card-Add Billing Address",
                server: "www.finishline.com",
                channel: "Shopping Cart",
                prop1: "Shopping Cart: Save Card-Add Billing Address",
                prop2: "Shopping Cart: Save Card-Add Billing Address",
                prop3: "Shopping Cart",
                prop20: e,
                prop21: window.location.href,
                eVar41: window.location.href,
                eVar43: e
            }).sendMicro(this, "Shopping Cart"), $("body").off("click", "#newBillingContinue").on("click", "#newBillingContinue", function(e) {
                e.preventDefault(), FL.myaccount.Profile.addressBillingModal()
            })
        }), $("body").on("click", ".wallet_savecard", function() {
            FL.Tealium.clickCheckoutSaveCard(), FL.Omniture.add({
                linkTrackVars: "eVar20,prop29,events",
                linkTrackEvents: "event98",
                eVar20: "Save Card to Wallet",
                prop29: "Save Card to Wallet",
                events: "event98"
            }).sendMicro(this, "Save Card to Wallet")
        }), $(document).off("change click", "#newCreditCardModal #billingExpirationMonthCheckout, #newCreditCardModal #billingExpirationYearCheckout").on("change click", "#newCreditCardModal #billingExpirationMonthCheckout, #newCreditCardModal #billingExpirationYearCheckout", function() {
            var e = (new Date).getFullYear(),
                t = (new Date).getMonth() + 1,
                a = parseInt($("#newCreditCardModal #billingExpirationYearCheckout").val()),
                i = parseInt($("#newCreditCardModal #billingExpirationMonthCheckout").val());
            "" === $(this).val() ? ($(this).addClass("error"), $(this).removeClass("valid"), $(this).next().text("This field is required"), $(this).next().css("display", "block"), $("#addCreditCard").attr("disabled", "true")) : ($(this).removeClass("error"), $(this).addClass("valid"), $(this).next().css("display", "none"), $("#addCreditCard").removeAttr("disabled")), a == e && i < t ? ($("#newCreditCardModal #billingExpirationMonthCheckout").addClass("error"), $("#newCreditCardModal #billingExpirationMonthCheckout").removeClass("valid"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").text("Expiration date must not be in the past"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").css("display", "block"), $("#addCreditCard").attr("disabled", "true")) : ("" != $("#newCreditCardModal #billingExpirationMonthCheckout").val() && ($("#newCreditCardModal #billingExpirationMonthCheckout").removeClass("error"), $("#newCreditCardModal #billingExpirationMonthCheckout").addClass("valid"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").css("display", "none")), "" != $(this).val() && ($("#addCreditCard").removeAttr("disabled"), $(this).removeClass("error"), $(this).next().css("display", "none"))), "" === $("#billingSecurityCodeCheckout").val() || "" === $("#billingCardNumberCheckout").val() ? $("#addCreditCard").attr("disabled", "true") : $("#addCreditCard").removeAttr("disabled"), "AMEX" == $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 3 ? $("#addCreditCard").removeAttr("disabled") : "AMEX" != $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 2 ? $("#addCreditCard").removeAttr("disabled") : $("#addCreditCard").attr("disabled", "true"), $("#newCreditCardModal .addCreditCard-details input").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            }), $("#newCreditCardModal select").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            })
        }), $(document).off("change click", "#checkoutEditCreditCard #billingExpirationMonthCheckout, #checkoutEditCreditCard #billingExpirationYearCheckout").on("change click", "#checkoutEditCreditCard #billingExpirationMonthCheckout, #checkoutEditCreditCard #billingExpirationYearCheckout", function() {
            var e = (new Date).getFullYear(),
                t = (new Date).getMonth() + 1,
                a = parseInt($("#checkoutEditCreditCard #billingExpirationYearCheckout").val()),
                i = parseInt($("#checkoutEditCreditCard #billingExpirationMonthCheckout").val());
            "" === $(this).val() ? ($(this).addClass("error"), $(this).removeClass("valid"), $(this).next().text("This field is required"), $(this).next().css("display", "block"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")) : ($(this).removeClass("error"), $(this).addClass("valid"), $(this).next().css("display", "none"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").removeAttr("disabled")), a == e && i < t ? ($("#checkoutEditCreditCard #billingExpirationMonthCheckout").addClass("error"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout").removeClass("valid"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").text("Expiration date must not be in the past"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").css("display", "block"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")) : ("" != $("#checkoutEditCreditCard #billingExpirationMonthCheckout").val() && ($("#checkoutEditCreditCard #billingExpirationMonthCheckout").removeClass("error"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout").addClass("valid"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").css("display", "none")), "" != $(this).val() && ($("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").removeAttr("disabled"), $(this).removeClass("error"), $(this).next().css("display", "none"))), $("#checkoutEditCreditCard .addCreditCard-details input").each(function() {
                $(this).hasClass("error") && $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")
            }), $("#checkoutEditCreditCard select").each(function() {
                $(this).hasClass("error") && $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")
            })
        })
    },
    initEditCardEvents: function() {
        $("body").off("click", ".edit_billing_address").on("click", ".edit_billing_address", function() {
            var e = FL.contextPath + "/myaccount/modals/editBillingAddress.jsp?addressKey=" + $(this).data("nickname") + "&frommodal=true";
            $.ajax(e).done(function(e) {
                $("#editBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").off("click", ".card_newbillinglink").on("click", ".card_newbillinglink", function() {
            var e = FL.contextPath + "/myaccount/modals/addBillingAddress.jsp?&fromaddmodal=true";
            $.ajax(e).done(function(e) {
                $("#addBillingAddressModal").html(e).foundation("open")
            })
        }), $(document).off("change click", "#checkoutEditCreditCard #billingExpirationMonthCheckout, #checkoutEditCreditCard #billingExpirationYearCheckout").on("change click", "#checkoutEditCreditCard #billingExpirationMonthCheckout, #checkoutEditCreditCard #billingExpirationYearCheckout", function() {
            var e = (new Date).getFullYear(),
                t = (new Date).getMonth() + 1,
                a = parseInt($("#checkoutEditCreditCard #billingExpirationYearCheckout").val()),
                i = parseInt($("#checkoutEditCreditCard #billingExpirationMonthCheckout").val());
            "" === $(this).val() ? ($(this).addClass("error"), $(this).removeClass("valid"), $(this).next().text("This field is required"), $(this).next().css("display", "block"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")) : ($(this).removeClass("error"), $(this).addClass("valid"), $(this).next().css("display", "none"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").removeAttr("disabled")), a == e && i < t ? ($("#checkoutEditCreditCard #billingExpirationMonthCheckout").addClass("error"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout").removeClass("valid"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").text("Expiration date must not be in the past"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").css("display", "block"), $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")) : ("" != $("#checkoutEditCreditCard #billingExpirationMonthCheckout").val() && ($("#checkoutEditCreditCard #billingExpirationMonthCheckout").removeClass("error"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout").addClass("valid"), $("#checkoutEditCreditCard #billingExpirationMonthCheckout-error").css("display", "none")), "" != $(this).val() && ($("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").removeAttr("disabled"), $(this).removeClass("error"), $(this).next().css("display", "none"))), $("#checkoutEditCreditCard .addCreditCard-details input").each(function() {
                $(this).hasClass("error") && $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")
            }), $("#checkoutEditCreditCard select").each(function() {
                $(this).hasClass("error") && $("#checkoutEditCreditCard #addCreditCard, #buttonAddToCart").attr("disabled", "true")
            })
        })
    },
    initNewCardEvents: function() {
        $(document).off("change click", "#newCreditCardModal #billingExpirationMonthCheckout, #newCreditCardModal #billingExpirationYearCheckout").on("change click", "#newCreditCardModal #billingExpirationMonthCheckout, #newCreditCardModal #billingExpirationYearCheckout", function() {
            var e = (new Date).getFullYear(),
                t = (new Date).getMonth() + 1,
                a = parseInt($("#newCreditCardModal #billingExpirationYearCheckout").val()),
                i = parseInt($("#newCreditCardModal #billingExpirationMonthCheckout").val());
            "" === $(this).val() ? ($(this).addClass("error"), $(this).removeClass("valid"), $(this).next().text("This field is required"), $(this).next().css("display", "block"), $("#addCreditCard").attr("disabled", "true")) : ($(this).removeClass("error"), $(this).addClass("valid"), $(this).next().css("display", "none"), $("#addCreditCard").removeAttr("disabled")), a == e && i < t ? ($("#newCreditCardModal #billingExpirationMonthCheckout").addClass("error"), $("#newCreditCardModal #billingExpirationMonthCheckout").removeClass("valid"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").text("Expiration date must not be in the past"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").css("display", "block"), $("#addCreditCard").attr("disabled", "true")) : ("" != $("#newCreditCardModal #billingExpirationMonthCheckout").val() && ($("#newCreditCardModal #billingExpirationMonthCheckout").removeClass("error"), $("#newCreditCardModal #billingExpirationMonthCheckout").addClass("valid"), $("#newCreditCardModal #billingExpirationMonthCheckout-error").css("display", "none")), "" != $(this).val() && ($("#addCreditCard").removeAttr("disabled"), $(this).removeClass("error"), $(this).next().css("display", "none"))), "" === $("#billingSecurityCodeCheckout").val() || "" === $("#billingCardNumberCheckout").val() ? $("#addCreditCard").attr("disabled", "true") : $("#addCreditCard").removeAttr("disabled"), "AMEX" == $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 3 ? $("#addCreditCard").removeAttr("disabled") : "AMEX" != $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 2 ? $("#addCreditCard").removeAttr("disabled") : $("#addCreditCard").attr("disabled", "true"), $("#newCreditCardModal .addCreditCard-details input").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            }), $("#newCreditCardModal select").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            })
        }), $("body").off("click", ".wallet_savecard").on("click", ".wallet_savecard", function() {
            FL.Omniture.add({
                linkTrackVars: "eVar20,prop29,events",
                linkTrackEvents: "event98",
                eVar20: "Save Card to Wallet",
                prop29: "Save Card to Wallet",
                events: "event98"
            }).sendMicro(this, "Save Card to Wallet")
        }), $("body").off("click", ".edit_billing_address").on("click", ".edit_billing_address", function() {
            var e = FL.contextPath + "/myaccount/modals/editBillingAddress.jsp?addressKey=" + $(this).data("nickname") + "&frommodal=true";
            $.ajax(e).done(function(e) {
                $("#editBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").off("click", ".card_newbillinglink").on("click", ".card_newbillinglink", function() {
            var e = FL.contextPath + "/myaccount/modals/addBillingAddress.jsp?&fromaddmodal=true";
            $.ajax(e).done(function(e) {
                $("#addBillingAddressModal").html(e).foundation("open")
            })
        }), $("body").off("open.zf.reveal", "#newCreditCardModal").on("open.zf.reveal", "#newCreditCardModal", function() {
            var e = $(".select-shipping.active").attr("data-addressname");
            if ($("#selectedAddressValue").val(e), FL.checkout.billing.addCreditCardSection(), FL.checkout.billing.changeAddressBilling(), FL.checkout.billing.selectDropdowns(), screen.width <= 480) var t = "mobile";
            else var t = "desktop";
            FL.Tealium.displayUseNewCreditCard(), FL.Omniture.add({
                pageName: "Save Card-Add New Card",
                server: "www.finishline.com",
                channel: "Shopping Cart",
                prop1: "Shopping Cart: Save Card-Add New Card",
                prop2: "Shopping Cart: Save Card-Add New Card",
                prop3: "Shopping Cart",
                prop20: t,
                prop21: window.location.href,
                eVar41: window.location.href,
                eVar43: t
            }).sendMicro(this, "Shopping Cart")
        })
    },
    changeAddressBilling: function() {
        var e = $(".select-credit-card.active").attr("data-creditCardNickName");
        $("#bilingCreditCardNickname").val(e);
        var t = $(".select-credit-card.active").attr("data-cardType");
        $("#creditCardTypeTemp").val(t);
        var a = $(".select-credit-card.active").attr("data-cardNumber");
        $("#billingCardNumberTemp").val(a);
        var i = $(".select-credit-card.active").attr("data-tempCardFlag");
        $("#tempCardFlag").val(i);
        var o = $(".select-credit-card.active").attr("data-creditCardNickName");
        $("#ccNickName").val(o);
        var r = $(".select-credit-card.active").attr("data-expYear");
        $("#billingExpirationYearTemp").val(r);
        var n = $(".select-credit-card.active").attr("data-expMonth");
        $("#billingExpirationMonthTemp").val(n);
        var s = $(".select-credit-card.active").attr("data-cvv");
        $("#securityCodeTemp").val(s);
        var l = $(".select-credit-card.active").attr("data-firstName");
        $("#billingFirstNameTemp").val(l), void 0 != l && $("#billingFirstName").val(l);
        var d = $(".select-credit-card.active").attr("data-lastName");
        $("#billingLastNameTemp").val(d), void 0 != d && $("#billingLastName").val(d);
        var c = $(".select-credit-card.active").attr("data-address1");
        $("#bilingAddress1Temp").val(c), void 0 != c && $("#billingAddress1").val(c);
        var u = $(".select-credit-card.active").attr("data-address2");
        $("#bilingAddress2Temp").val(u), void 0 != u && $("#billingAddress2").val(u);
        var p = $(".select-credit-card.active").attr("data-stateCode");
        $("#bilingStateTemp").val(p), void 0 != p && $("#billingState").val(p);
        var h = $(".select-credit-card.active").attr("data-city");
        $("#bilingCityTemp").val(h), void 0 != h && $("#billingCity").val(h);
        var m = $(".select-credit-card.active").attr("data-postalCode");
        $("#billingPostalCodeTemp").val(m), void 0 != m && $("#billingZip").val(m);
        var f = $(".select-credit-card.active").attr("data-phoneNumber");
        $("#billingPhoneNumberTemp").val(f), void 0 != f && $("#billingPhone").val(f);
        var g = $(".select-credit-card.active").attr("data-addressKey");
        $("#billingAddressKeyTemp").val(g);
        var v = $(".select-shipping.active").attr("data-addressname");
        $("#bilingAddressKey").val(v);
        var y = $("#checkout .select-shipping.active").attr("data-addressname");
        $("#bilingAddressKeyCheckout").val(y), $(".address-select-box.select-shipping").on("click", function() {
            $(this).siblings(".address-select-box").removeClass("active"), $(this).addClass("active");
            var e = $(".select-shipping.active").attr("data-addressname");
            $("#bilingAddressKey").val(e), $("#bilingAddressKeyCheckout").val(e)
        }), $.ajax({
            type: "POST",
            url: $("#change_address_from").attr("action"),
            data: $("#change_address_from").serialize(),
            success: function(e) {
                if ($("#shipHome").length > 0 && $("#selectedAddressNickname").val() == nickname);
                else {
                    var t = FL.contextPath + "/checkout/gadgets/deliveryMethodsAjax.jsp";
                    FL.ajax.reloadFormComponent("deliveryMethods", t, FL.checkout.shipping.DeliveryMethod.init)
                }
            }
        })
    },
    getCheckoutEditFields: function() {
        var e = $(".select-shipping.active #editvaluedetails");
        $("#firstnameEdit").val($(e).find(".firstnameEdit").text().trim()), $("#lastnameEdit").val($(e).find(".lastnameEdit").text().trim()), $("#addressoneEdit").val($(e).find(".addressoneEdit").text().trim()), $("#addresstwoEdit").val($(e).find(".addresstwoEdit").text().trim()), $("#cityEdit").val($(e).find(".cityEdit").text().trim()), $("#stateEdit").val($(e).find(".stateEdit").text().trim()), $("#postalcodeEdit").val($(e).find(".postalcodeEdit").text().trim()), $("#phonenoEdit").val($(e).find(".phonenoEdit").text().trim())
    },
    selectDropdowns: function() {
        $(".has-float-label select").on("change", function(e) {
            $(this).val() ? $(this).addClass("selected") : $(this).removeClass("selected")
        }).each(function() {
            $(this).val() && $(this).addClass("selected")
        })
    },
    addBilingAddressValidation: function() {
        $("#addBillingAddressForm").validate({
            rules: {
                firstName: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                lastName: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                address1: {
                    required: !0,
                    minlength: 5,
                    pattern: FL.myaccount.Profile.Regex
                },
                postalCode: {
                    required: !0
                },
                city: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                state: {
                    required: !0,
                    pattern: FL.myaccount.Profile.Regex
                },
                phone: {
                    required: !0,
                    phoneUS: !1
                }
            },
            messages: {
                firstName: {
                    required: "First name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                lastName: {
                    required: "Last name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                address1: {
                    required: "Address is required",
                    pattern: "Special characters not allowed"
                },
                postalCode: {
                    required: "Zip code is required",
                    minLength: "At least 5 numbers are required"
                },
                city: {
                    required: "City is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                state: {
                    required: "State is required",
                    pattern: "Special characters not allowed"
                },
                phone: {
                    required: "Phone number is required",
                    phoneUS: "Please enter a valid phone number"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        })
    },
    editBilingAddressValidation: function() {
        $("#editBillingAddressForm").validate({
            rules: {
                firstName: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                lastName: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                address1: {
                    required: !0,
                    minlength: 5,
                    pattern: FL.myaccount.Profile.Regex
                },
                postalCode: {
                    required: !0
                },
                city: {
                    required: !0,
                    pattern: FL.myaccount.Profile.NameRegex
                },
                state: {
                    required: !0,
                    pattern: FL.myaccount.Profile.Regex
                },
                phone: {
                    required: !0,
                    phoneUS: !0
                }
            },
            messages: {
                firstName: {
                    required: "First name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                lastName: {
                    required: "Last name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                address1: {
                    required: "Address is required",
                    pattern: "Special characters not allowed"
                },
                postalCode: {
                    required: "Zip code is required",
                    minLength: "At least 5 numbers are required"
                },
                city: {
                    required: "City is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                state: {
                    required: "State is required",
                    pattern: "Special characters not allowed"
                },
                phone: {
                    required: "Phone number is required",
                    phoneUS: "Please enter a valid phone number"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        })
    },
    initTabHandler: function() {
        var e = $("#billingContinueButton, #billingContinueButtonMobile"),
            t = $("#billingContinueAfterpay, #billingContinueAfterpayMobile"),
            a = $("#billingContinueKlarna, #billingContinueKlarnaMobile"),
            i = $("#klarna_container"),
            o = $("#billing_tt_paypal-mobile, #billing_tt_paypal"),
            r = $("#paypalCreditButton-mobile, #paypalCreditButton");
        $("#paymentTabs").on("change.zf.tabs", function() {
            "true" === $("[aria-controls='applePayTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideCharity(), i.hide(), e.each(function(e) {
                $(this).hide()
            }), t.each(function(e) {
                $(this).hide()
            }), a.each(function(e) {
                $(this).show()
            }), o.each(function(e) {
                $(this).hide()
            }), r.each(function(e) {
                $(this).hide()
            }), FL.checkout.billing.applePayInit()), "true" === $("[aria-controls='afterPayTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideButton(), i.hide(), e.each(function(e) {
                $(this).hide()
            }), t.each(function(e) {
                $(this).show()
            }), a.each(function(e) {
                $(this).hide()
            }), o.each(function(e) {
                $(this).hide()
            }), r.each(function(e) {
                $(this).hide()
            }), $("#donationBlock").removeClass("hide")), "true" === $("[aria-controls='klarnaTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideButton(), i.show(), e.each(function(e) {
                $(this).hide()
            }), t.each(function(e) {
                $(this).hide()
            }), a.each(function(e) {
                $(this).show()
            }), o.each(function(e) {
                $(this).hide()
            }), r.each(function(e) {
                $(this).hide()
            }), $("#donationBlock").removeClass("hide")), "true" === $("[aria-controls='creditCardTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideButton(), i.hide(), e.each(function(e) {
                $(this).show()
            }), t.each(function(e) {
                $(this).hide()
            }), a.each(function(e) {
                $(this).hide()
            }), o.each(function(e) {
                $(this).hide()
            }), r.each(function(e) {
                $(this).hide()
            }), $("#donationBlock").removeClass("hide")), "true" === $("[aria-controls='payPalTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideButton(), i.hide(), e.each(function(e) {
                $(this).hide()
            }), t.each(function(e) {
                $(this).hide()
            }), a.each(function(e) {
                $(this).hide()
            }), o.each(function(e) {
                $(this).show()
            }), r.each(function(e) {
                $(this).hide()
            }), $("#donationBlock").removeClass("hide")), "true" === $("[aria-controls='payPalCreditTab']").attr("aria-selected") && (FL.checkout.billing.applePay.hideButton(), e.each(function(e) {
                $(this).hide()
            }), t.each(function(e) {
                $(this).hide()
            }), a.each(function(e) {
                $(this).hide()
            }), o.each(function(e) {
                $(this).hide()
            }), r.each(function(e) {
                $(this).show()
            }), $("#donationBlock").removeClass("hide"))
        }), e.each(function(e) {
            $(this).on("click", function(e) {
                e.preventDefault(), FL.checkout.billing.changeAddressBilling(), $("#billing_form").submit()
            })
        })
    },
    initCreditCardSection: function() {
        var e = $("#billing_form"),
            t = $("#paymentTabs");
        e.find("#billingCardNumber").on("keyup paste", FL.checkout.billing.onCardNumberChange).end().find("#billingCardNumber").on("change", FL.checkout.billing.onCardNumberChangeSmtr).end().find("#billingExpirationMonth").on("change", FL.checkout.billing.onExpMonthChange).end().find("#billingExpirationYear").on("change", FL.checkout.billing.onExpYearChange).end().find("#billingSecurityCode").on("change", FL.checkout.billing.onCVVChange), t.find("#creditCardTab-label").on("click", FL.checkout.billing.onCreditCardClick).end().find("#payPalTab-label").on("click", FL.checkout.billing.onPayPalClick).end().find("#payPalCreditTab-label").on("click", FL.checkout.billing.onPayPalCreditClick), $("select").on("change", function() {
            e.validate().element("select")
        });
        var a = $("#sameAsShippingCheckbox");
        if (a.length > 0) {
            a.change(function() {
                $(this).is(":checked") ? ($("#billingAddressFields").hide(), FL.checkout.billing.populateBillingWithShippingAddress()) : $("#billingAddressFields").show()
            });
            var i = $("#shippingAddressStorage").find(".address1").text() + $("#shippingAddressStorage").find(".address2").text(),
                o = $("#billingAddress1").val() + $("#billingAddress2").val(),
                r = i === o;
            a.prop("checked", r), r ? $("#billingAddressFields").hide() : $("#billingAddressFields").show()
        }
        e.validate({
            rules: {
                firstName: {
                    required: !0,
                    pattern: FL.checkout.shipping.NameRegex
                },
                lastName: {
                    required: !0,
                    pattern: FL.checkout.shipping.NameRegex
                },
                address1: {
                    required: !0,
                    minlength: 5,
                    pattern: FL.checkout.shipping.Regex_Special_Characters
                },
                address2: {
                    pattern: FL.checkout.shipping.Regex_Special_Characters
                },
                zip: {
                    required: !0
                },
                city: {
                    required: !0,
                    pattern: FL.checkout.shipping.NameRegex
                },
                state: {
                    required: !0,
                    pattern: FL.checkout.shipping.Regex
                },
                phone: {
                    required: !0,
                    phoneUS: !0
                },
                email: {
                    required: !0,
                    email: !0
                },
                creditCardNumberTemp: {
                    required: {
                        depends: FL.checkout.billing.isCreditCardRequired
                    },
                    creditcard: {
                        depends: function() {
                            return -1 === $("#billingCardNumber").val().lastIndexOf("XXXX", 0) && FL.checkout.billing.isCreditCardRequired()
                        }
                    }
                },
                expirationMonthTemp: {
                    required: {
                        depends: FL.checkout.billing.isCreditCardRequired
                    },
                    billingExpirationDate: !0
                },
                expirationYearTemp: {
                    required: {
                        depends: FL.checkout.billing.isCreditCardRequired
                    },
                    billingExpirationDate: !0
                },
                securityCodeTemp: {
                    required: {
                        depends: FL.checkout.billing.isCreditCardRequired
                    }
                }
            },
            messages: {
                firstName: {
                    required: "First name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                lastName: {
                    required: "Last name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                address1: {
                    required: "Address is required",
                    pattern: "Special characters not allowed"
                },
                address2: {
                    pattern: "Special characters not allowed"
                },
                zip: {
                    required: "Zip code is required",
                    minLength: "At least 5 numbers are required"
                },
                city: {
                    required: "City is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                state: {
                    required: "State is required",
                    pattern: "Special characters not allowed"
                },
                phone: {
                    required: "Phone number is required",
                    phoneUS: "Please enter a valid phone number"
                },
                email: {
                    required: "Email is required",
                    email: "Please enter a valid email address in the format xxx@xxx.xxx"
                }
            }
        }), e.on("submit", function() {
            var e = $("[name='paymentType']:checked").val();
            if (e && e.indexOf("paypal") >= 0 ? ($("#billingAddressFields input, #billingAddressFields select, #overrideBillingAddress").attr("disabled", "disabled"), $("[name='transactionType']").attr("value", "PayPal")) : ($("#billingAddressFields input, #billingAddressFields select, #overrideBillingAddress").removeAttr("disabled"), $("[name='transactionType']").attr("value", "CC")), !FL.checkout.billing.isCreditCardRequired()) return window.location.href = $("#moveToConfirmSuccessURL").val(), !1
        })
    },
    addCreditCardSection: function() {
        var e = $("#add_billing_form");
        e.find("#billingCardNumberCheckout").on("keyup paste", FL.checkout.billing.onCardNumberChangeNewcard).end().find("#billingCardNumberCheckout").on("change", FL.checkout.billing.onCardNumberChangeSmtr).end(), $("select").on("change", function() {
            e.validate().element("select")
        }), e.validate({
            rules: {
                creditCardNumberTemp: {
                    required: {
                        depends: FL.checkout.billing.isCreditCardRequired
                    },
                    creditcard: {
                        depends: function() {
                            return -1 === $("#billingCardNumberCheckout").val().lastIndexOf("XXXX", 0) && FL.checkout.billing.isCreditCardRequired()
                        }
                    }
                },
                expirationMonthTemp: {
                    billingExpirationDate: !0
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), e.on("submit", function() {
            var e = $("[name='paymentType']:checked").val();
            if (e && e.indexOf("paypal") >= 0 ? ($("#billingAddressFields input, #billingAddressFields select, #overrideBillingAddress").attr("disabled", "disabled"), $("[name='transactionType']").attr("value", "PayPal")) : ($("#billingAddressFields input, #billingAddressFields select, #overrideBillingAddress").removeAttr("disabled"), $("[name='transactionType']").attr("value", "CC")), !FL.checkout.billing.isCreditCardRequired()) return window.location.href = $("#moveToConfirmSuccessURL").val(), !1
        }), FL.checkout.billing.validateExpireDate(), $(document).off("keyup change blur focus", "#billingCardNumberCheckout, #billingSecurityCodeCheckout").on("keyup change blur focus", "#billingCardNumberCheckout, #billingSecurityCodeCheckout", function() {
            var e = $("#billingSecurityCodeCheckout").val().length;
            $(this).hasClass("valid") ? $("#addCreditCard").removeAttr("disabled") : e > 2 ? $("#addCreditCard").removeAttr("disabled") : $("#addCreditCard").attr("disabled", "true"), "AMEX" == $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 3 ? $("#addCreditCard").removeAttr("disabled") : "AMEX" != $("#billingCardTypeCheckout").val() && $("#billingSecurityCodeCheckout").val().length > 2 ? $("#addCreditCard").removeAttr("disabled") : $("#addCreditCard").attr("disabled", "true"), $("input").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            }), $(".addCreditCard-details select").each(function() {
                $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true")
            })
        })
    },
    validateExpireDate: function() {
        $.validator.addMethod("billingExpirationDate", function(e, t, a) {
            var i = (new Date).getFullYear(),
                o = (new Date).getMonth() + 1;
            return !(parseInt($("#billingExpirationYearCheckout").val()) === i && parseInt(e) < o && ($("#buttonAddToCart, #addCreditCard").attr("disabled", "true"), 1))
        }, "Expiration date must not be in the past")
    },
    isCreditCardRequired: function() {
        return 0 === $("#proceed_with_redirect").length
    },
    initDonationSection: function() {
        $("#donationCheckbox").on("click", function() {
            $("#addDonationId").val($(this).is(":checked")), $("#donation-server-error").addClass("hide").html(""), FL.checkout.billing.disableSubmit(), FL.form.submit("donation_form", "FL.checkout.billing.donationSuccess", "FL.checkout.billing.donationError")
        })
    },
    initPayPalSections: function() {
        $(".pay-pal-credit-button").on("click", function(e) {
            e.preventDefault(), $("#paypalCreditForm").submit()
        }), "paypalContent" == $(".active.paymentType").attr("id") && (jqPaymentMethodType = "PayPal", jQuery.saveBillingInformation({
            previousType: "CC",
            currentType: "PayPal"
        }), jQuery.disableBillingInformation(), jQuery.displayPayPalBillingInfo())
    },
    applePay: {
        beginPayment: function(e) {
            e.preventDefault(), FL.Tealium.clickCheckoutApplePay();
            var t = parseFloat($("#subTotal").text().replace("$", "")),
                a = parseFloat($("#appleShip").val().replace("$", "")),
                i = parseFloat($("#appleTax").val().replace("$", ""));
            if ($("#appleDonation").val()) var o = parseFloat($("#appleDonation").val().replace("$", ""));
            if ($("#appleCoupon").val()) var r = parseFloat($("#appleCoupon").val().replace("$", ""));
            if ($("#applePromotionDiscount").val()) var n = parseFloat($("#applePromotionDiscount").val().replace("$", ""));
            if ($("#appleReward").val()) var s = parseFloat($("#appleReward").val().replace("$", ""));
            if (isNaN(a) && (a = 0), isNaN(i) && (i = 0), isNaN(a) && (a = 0), $("#gctotal").val() > 0) var l = parseFloat($("#gctotal").val().replace("$", ""));
            if (isNaN(l)) var d = parseFloat(Number(t) + Number(i) + Number(a)).toFixed(2);
            else var d = parseFloat(Number(t) + Number(i) - Number(l) + Number(a)).toFixed(2);
            if (isNaN(o) || ($("#addDonationId").val(!1), $("#donation-server-error").addClass("hide").html(""), FL.checkout.billing.disableSubmit(), FL.form.submit("donation_form", "FL.checkout.billing.donationSuccess", "FL.checkout.billing.donationError")), !isNaN(n)) var d = parseFloat(Number(d) - Number(n)).toFixed(2);
            if (!isNaN(r)) var d = parseFloat(Number(d) - Number(r)).toFixed(2);
            if (!isNaN(s)) var d = parseFloat(Number(d) - Number(s)).toFixed(2);
            if (isNaN(t) || isNaN(a) || isNaN(d)) return void alert("Some values couldn't be used");
            var c = $("meta[name='payment-country-code']").attr("content") || "US",
                u = $("meta[name='payment-currency-code']").attr("content") || "USD",
                p = $("meta[name='apple-pay-store-name']").attr("content"),
                h = {
                    label: p,
                    amount: t
                },
                m = [{
                    label: "Subtotal",
                    amount: t,
                    type: "final"
                }],
                f = {
                    label: p,
                    amount: d
                },
                g = [{
                    label: "Subtotal",
                    amount: t,
                    type: "final"
                }, {
                    label: "Shipping",
                    amount: a,
                    type: "final"
                }, {
                    label: "Tax",
                    amount: i,
                    type: "final"
                }];
            if (isNaN(r) || g.push({
                    label: "Coupon",
                    amount: -r,
                    type: "final"
                }), isNaN(n) || g.push({
                    label: "Promotional Discount:",
                    amount: -n,
                    type: "final"
                }), isNaN(l) || g.push({
                    label: "Gift Card",
                    amount: -l,
                    type: "final"
                }), isNaN(s) || g.push({
                    label: "Status Reward",
                    amount: -s,
                    type: "final"
                }), "In-Store Pick Up" == $("#appleShipMethod").val()) var v = $("#appleShipMethod").val();
            else var v = $("#appleShipMethod").val() + " Shipping";
            var y = {
                countryCode: c,
                currencyCode: u,
                merchantCapabilities: ["supports3DS"],
                supportedNetworks: ["amex", "masterCard", "visa", "discover"],
                lineItems: g,
                total: f,
                requiredBillingContactFields: ["email", "name", "phone", "postalAddress"],
                requiredShippingContactFields: ["email", "phone"],
                shippingType: "shipping",
                shippingMethods: [{
                    label: v,
                    amount: a,
                    identifier: v,
                    detail: ""
                }],
                supportedCountries: [c]
            };
            void 0 == $("#cBFirstName").val() ? $("#billingPhone").val().length > 0 && $("#email").val().length > 0 && $("#billingFirstName").val().length > 0 && $("#billingLastName").val().length > 0 && $("#billingAddress1").val().length > 0 && $("#billingCity").val().length > 0 && $("#billingState :selected").val().length > 0 && $("#billingZip").val().length > 0 && (y.billingContact = {
                phoneNumber: $("#billingPhone").val().replace(/[^\d]/g, ""),
                emailAddress: $("#email").val(),
                givenName: $("#billingFirstName").val(),
                familyName: $("#billingLastName").val(),
                addressLines: [$("#billingAddress1").val()],
                locality: $("#billingCity").val(),
                administrativeArea: $("#billingState :selected").val(),
                postalCode: $("#billingZip").val(),
                country: c
            }) : void 0 != $("#cBFirstName").val() ? $("#cBphoneNumber").val().length > 0 && $("#email").val().length > 0 && $("#cBFirstName").val().length > 0 && $("#cBLastName").val().length > 0 && $("#cBaddress1").val().length > 0 && $("#cBCity").val().length > 0 && $("#cBstate").val().length > 0 && $("#cBpostalCode").val().length > 0 && (y.billingContact = {
                phoneNumber: $("#cBphoneNumber").val().replace(/[^\d]/g, ""),
                emailAddress: $("#email").val(),
                givenName: $("#cBFirstName").val(),
                familyName: $("#cBLastName").val(),
                addressLines: [$("#cBaddress1").val()],
                locality: $("#cBCity").val(),
                administrativeArea: $("#cBstate").val(),
                postalCode: $("#cBpostalCode").val(),
                country: c
            }) : y.billingContact = {}, y.shippingContact = {};
            var b = new ApplePaySession(1, y);
            b.onvalidatemerchant = function(e) {
                $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/applePayMerchantVerifyJson.jsp",
                    data: {
                        validationUrl: e.validationURL
                    }
                }).then(function(e) {
                    b.completeMerchantValidation(JSON.parse(e.appleSession))
                })
            }, b.onshippingmethodselected = function(e) {
                var t, a;
                "collection" === e.shippingMethod.identifier ? (t = h, a = m) : (t = f, a = g);
                var i = {
                    newTotal: t,
                    newLineItems: a
                };
                b.completeShippingMethodSelection(i)
            }, b.onpaymentauthorized = function(e) {
                var t = e.payment.billingContact,
                    a = e.payment.shippingContact,
                    i = (e.payment.token.paymentData, {
                        status: ApplePaySession.STATUS_SUCCESS,
                        errors: []
                    });
                b.completePayment(i), FL.checkout.billing.applePay.showSuccess();
                var o = e.payment.token,
                    r = {
                        transactionIdentifier: o.transactionIdentifier,
                        paymentMethod: {
                            displayName: o.paymentMethod.displayName,
                            network: o.paymentMethod.network,
                            type: o.paymentMethod.type
                        },
                        paymentData: {
                            header: {
                                ephemeralPublicKey: o.paymentData.header.ephemeralPublicKey,
                                publicKeyHash: o.paymentData.header.publicKeyHash,
                                transactionId: o.paymentData.header.transactionId
                            },
                            signature: o.paymentData.signature,
                            data: o.paymentData.data,
                            version: o.paymentData.version
                        }
                    };
                if (t.addressLines) var n = t.addressLines[0];
                else var n = "";
                r.billingContact = {
                    phoneNumber: a.phoneNumber,
                    emailAddress: a.emailAddress,
                    givenName: t.givenName,
                    familyName: t.familyName,
                    addressLines: [n],
                    locality: t.locality,
                    administrativeArea: t.administrativeArea,
                    postalCode: t.postalCode,
                    country: t.country
                }, $.ajax({
                    type: "post",
                    dataType: "json",
                    url: FL.contextPath + "/checkout/json/applePayDecryptTokenJson.jsp",
                    data: {
                        billingContact: JSON.stringify(r.billingContact),
                        paymentMethod: JSON.stringify(r.paymentMethod),
                        paymentData: JSON.stringify(r.paymentData)
                    }
                }).then(function(e) {
                    window.location.href = "/store/checkout/confirm.jsp"
                }, function(e) {
                    window.location.href = "/store/checkout/confirm.jsp"
                })
            }, b.begin()
        },
        hideCharity: function() {
            if ($("#appleDonation").val()) var e = parseFloat($("#appleDonation").val().replace("$", ""));
            isNaN(e) || ($("#addDonationId").val(!1), $("#donation-server-error").addClass("hide").html(""), FL.checkout.billing.disableSubmit(), FL.form.submit("donation_form", "FL.checkout.billing.donationSuccess", "FL.checkout.billing.donationError")), $("#donationCheckbox").prop("checked", !1), $("#donationBlock").addClass("hide")
        },
        setupApplePay: function() {
            var e = FL.checkout.billing.applePay.getMerchantIdentifier();
            ApplePaySession.openPaymentSetup(e).then(function(e) {
                e ? (FL.checkout.billing.applePay.hideSetupButton(), FL.checkout.billing.applePay.showButton()) : FL.checkout.billing.applePay.showError("Failed to set up Apple Pay.")
            }).catch(function(e) {
                FL.checkout.billing.applePay.showError("Failed to set up Apple Pay. " + e)
            })
        },
        showButton: function() {
            var e = $("#apple-pay-button, #apple-pay-button-mobile");
            e.each(function(e) {
                $(this).removeClass("hide"), $(this).attr("lang", FL.checkout.billing.applePay.getPageLanguage()), $(this).on("click", FL.checkout.billing.applePay.beginPayment)
            }), FL.checkout.billing.applePay.supportsSetup() ? (e.addClass("apple-pay-button-with-text"), e.addClass("apple-pay-button-black-with-text")) : (e.addClass("apple-pay-button"), e.addClass("apple-pay-button-white"))
        },
        hideButton: function() {
            $("#apple-pay-button, #apple-pay-button-mobile").each(function(e) {
                $(this).off("click", FL.checkout.billing.applePay.beginPayment), $(this).addClass("hide")
            })
        },
        showSetupButton: function() {
            var e = $("#set-up-apple-pay-button");
            e.attr("lang", FL.checkout.billing.applePay.getPageLanguage()), e.on("click", $.proxy(FL.checkout.billing.applePay, "setupApplePay")), e.removeClass("hide")
        },
        hideSetupButton: function() {
            var e = $("#set-up-apple-pay-button");
            e.addClass("hide"), e.off("click")
        },
        showError: function(e) {
            var t = $(".apple-pay-error");
            t.text(e), t.removeClass("hide")
        },
        showSuccess: function() {
            $(".apple-pay-success").removeClass("hide")
        },
        supportedByDevice: function() {
            return "ApplePaySession" in window
        },
        supportsSetup: function() {
            return "openPaymentSetup" in ApplePaySession
        },
        getPageLanguage: function() {
            return $("html").attr("lang") || "en"
        },
        getMerchantIdentifier: function() {
            return $("meta[name='apple-pay-merchant-id']").attr("content")
        }
    },
    applePayInit: function() {
        var e = FL.checkout.billing.applePay.getMerchantIdentifier();
        e ? FL.checkout.billing.applePay.supportedByDevice() ? !0 === ApplePaySession.canMakePayments() ? FL.checkout.billing.applePay.showButton() : ApplePaySession.canMakePaymentsWithActiveCard(e).then(function(e) {
            !0 === e ? FL.checkout.billing.applePay.showButton() : (FL.checkout.billing.applePay.supportsSetup(), FL.checkout.billing.applePay.showError("Apple Pay cannot be used at this time. If using macOS you need to be paired with a device that supports at least TouchID."))
        }) : (FL.checkout.billing.applePay.showError("This device and/or browser does not support Apple Pay."), $("#applePayTabOption").addClass("hide")) : FL.checkout.billing.applePay.showError("No Apple Pay merchant certificate is configured.")
    },
    populateBillingWithShippingAddress: function() {
        var e = $("#shippingAddressStorage");
        e.length > 0 && ($("#billingFirstName").val(e.find(".firstName").text()), $("#billingLastName").val(e.find(".lastName").text()), $("#billingAddress1").val(e.find(".address1").text()), $("#billingAddress2").val(e.find(".address2").text()), $("#billingZip").val(e.find(".postalCode").text()), $("#billingCity").val(e.find(".city").text()), $("#billingState").val(e.find(".state").text()), $("#billingPhone").val(e.find(".phoneNumber").text()), $("#email").val(e.find(".email").text()))
    },
    onCardNumberChange: function(e) {
        var t = e.target.value;
        switch (FL.checkout.billing.getCreditCardType(t)) {
            case "mastercard":
                $("#billingCardType").val("MASTERCARD"), FL.checkout.billing.setCvvLength(3);
                break;
            case "visa":
                $("#billingCardType").val("VISA"), FL.checkout.billing.setCvvLength(3);
                break;
            case "amex":
                $("#billingCardType").val("AMEX"), FL.checkout.billing.setCvvLength(4);
                break;
            case "discover":
                $("#billingCardType").val("DISCOVER"), FL.checkout.billing.setCvvLength(3)
        }
    },
    onCardNumberChangeNewcard: function(e) {
        var t = e.target.value;
        switch (FL.checkout.billing.getCreditCardType(t)) {
            case "mastercard":
                $("#billingCardTypeCheckout").val("MASTERCARD"), FL.checkout.billing.setCvvLength(3);
                break;
            case "visa":
                $("#billingCardTypeCheckout").val("VISA"), FL.checkout.billing.setCvvLength(3);
                break;
            case "amex":
                $("#billingCardTypeCheckout").val("AMEX"), FL.checkout.billing.setCvvLength(4);
                break;
            case "discover":
                $("#billingCardTypeCheckout").val("DISCOVER"), FL.checkout.billing.setCvvLength(3)
        }
    },
    onCardNumberChangeSmtr: function() {
        var e, t = t || window._smtr || [];
        e = ["onPayment", {
            type: "cc",
            interaction: "cn"
        }], t.push(e)
    },
    setCvvLength: function(e) {
        $("#billingSecurityCode").attr("maxlength", e), $("#billingSecurityCode").attr("minlength", e), $("#billingSecurityCodeCheckout").attr("maxlength", e), $("#billingSecurityCodeCheckout").attr("minlength", e)
    },
    onExpMonthChange: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "cc",
            interaction: "em"
        }], a.push(t)
    },
    onExpYearChange: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "cc",
            interaction: "ey"
        }], a.push(t)
    },
    onCVVChange: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "cc",
            interaction: "cvv"
        }], a.push(t)
    },
    onCreditCardClick: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "cc"
        }], a.push(t)
    },
    onPayPalClick: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "pp"
        }], a.push(t)
    },
    onPayPalCreditClick: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onPayment", {
            type: "bml"
        }], a.push(t)
    },
    getCreditCardType: function(e) {
        var t = "unknown";
        return /^5[0-5]|^2[2-7]/.test(e) ? t = "mastercard" : /^4/.test(e) ? t = "visa" : /^3[47]/.test(e) ? t = "amex" : /^6|^3[0568]/.test(e) && (t = "discover"), t
    },
    enableSubmit: function() {
        $("#billingContinueButton").removeClass("disabled"), $("#billingContinueButtonMobile").removeClass("disabled"), $("#giftcardContinue").removeClass("disabled")
    },
    disableSubmit: function() {
        $("#billingContinueButton").addClass("disabled"), $("#billingContinueButtonMobile").addClass("disabled"), $("#giftcardContinue").addClass("disabled")
    },
    donationSuccess: function(e) {
        null === e || e.success ? (FL.checkout.billing.enableSubmit(), FL.checkout.billing.OrderSummary.refresh(), FL.checkout.Header.refresh("billing")) : FL.checkout.billing.donationError(e), FL.checkout.billing.KlarnaPay.klarnaWidgetReload()
    },
    donationError: function(e) {
        FL.checkout.billing.enableSubmit(), e && e.globalError ? $("#donation-server-error").removeClass("hide").html(e.globalError) : $("#donation-server-error").removeClass("hide").html("An unknown error has occurred")
    },
    initErrors: function() {
        var e = $("#failedAuthModal");
        e.length > 0 && e.foundation("open")
    },
    isBillingPage: function() {
        var e = window.location.href;
        return !(!e || !e.indexOf || -1 === e.indexOf("billing"))
    },
    OrderSummary: {
        refresh: function() {
            FL.cart.isCartPage() ? FL.checkout.orderSummary.reload("cart") : FL.pdp.isPDPPage() || FL.Grid.isGridPage() ? FL.checkout.orderSummary.reload("cart", "slide") : FL.checkout.shipping.isShipping() ? FL.checkout.orderSummary.reload("shipping") : FL.checkout.orderSummary.reload("billing")
        }
    },
    winnersCircle: {
        init: function() {
            var e = "Status";
            switch ($(".loyaltyTypeEntry").val()) {
                case "WC":
                    e = "Winner's Circle";
                    break;
                case "WC2":
                    e = "Status"
            }
            $("#wcCustomerId").on("input", function(t) {
                FL.checkout.billing.winnersCircle.clearErrors(), "WC2" === $(".loyaltyTypeEntry").val() && (FL.checkout.billing.winnersCircle.rewardsFormInputsAreEmpty() ? ($("#form-formatting-error").html("Both " + e + " Number and Reward Number are required"), FL.checkout.billing.winnersCircle.setRewardFormErrorState()) : FL.checkout.billing.winnersCircle.validateMemberIdFormat(e))
            }), $("#rewardNumber").on("input", function(t) {
                FL.checkout.billing.winnersCircle.clearErrors(), "WC2" === $(".loyaltyTypeEntry").val() && (FL.checkout.billing.winnersCircle.rewardsFormInputsAreEmpty() ? ($("#form-formatting-error").html("Both " + e + " Number and Reward Number are required"), FL.checkout.billing.winnersCircle.setRewardFormErrorState()) : FL.checkout.billing.winnersCircle.validateRewardNumberFormat())
            }), $("#applyWinnersCircleReward").on("click", function(t) {
                t.preventDefault(), FL.checkout.billing.winnersCircle.clearErrors();
                var a = $.trim($("#wcCustomerId").val()).length;
                if ($("#hiddenwcCouponClaimCode").val($("#rewardNumber").val()), a > 0 ? $("#hiddenwcWinnerCircleNumber").val($("#wcCustomerId").val()) : $("#hiddenwcWinnerCircleNumber").val(""), "WC2" === $(".loyaltyTypeEntry").val())
                    if (FL.checkout.billing.winnersCircle.rewardsFormInputsAreEmpty()) $("#form-formatting-error").html("Both " + e + " Number and Reward Number are required"), FL.checkout.billing.winnersCircle.setRewardFormErrorState();
                    else {
                        var i = FL.checkout.billing.winnersCircle.validateRewardNumberFormat();
                        i && (FL.checkout.billing.disableSubmit(), FL.form.submit("wc_form", "FL.checkout.billing.winnersCircle.applyRewardSuccess", "FL.checkout.billing.winnersCircle.applyRewardError"))
                    }
                else FL.checkout.billing.disableSubmit(), FL.form.submit("wc_form", "FL.checkout.billing.winnersCircle.applyRewardSuccess", "FL.checkout.billing.winnersCircle.applyRewardError")
            }), $("#removeWinnersCircleReward").off("click").on("click", function(e) {
                e.preventDefault(), FL.checkout.billing.winnersCircle.clearErrors(), $("#hiddenwRemoveWcCode").val($("#rewardNumber").val()), FL.checkout.billing.disableSubmit(), FL.form.submit("wc_remove_form", "FL.checkout.billing.winnersCircle.removeRewardSuccess", "FL.checkout.billing.winnersCircle.removeRewardError")
            })
        },
        validateMemberIdFormat: function(e) {
            var t = !1,
                a = $.trim($("#wcCustomerId").val()).length;
            return a <= 0 ? $("#form-formatting-error").html(e + " Number is required") : a < 8 ? $("#form-formatting-error").html(e + " Number must be 8 characters") : ($("#form-formatting-error").html(""), $("#wcCustomerId").attr("aria-invalid", "false").removeClass("error"), t = !0), t
        },
        validateRewardNumberFormat: function() {
            var e = !1,
                t = $.trim($("#rewardNumber").val()).length;
            return t <= 0 ? $("#form-formatting-error").html("Reward Number is required") : t < 11 ? $("#form-formatting-error").html("Reward Number must be at least 11 characters") : ($("#form-formatting-error").html(""), $("#rewardNumber").attr("aria-invalid", "false").removeClass("error"), e = !0), e
        },
        rewardsFormInputsAreEmpty: function() {
            var e = $.trim($("#wcCustomerId").val()).length,
                t = $.trim($("#rewardNumber").val()).length;
            return !e && !t
        },
        clearErrors: function() {
            $("#reward-server-error, #wcZeroReward").addClass("hide"), $("#rewardNumber").attr("aria-invalid", "false").removeClass("error"), $("#wcCustomerId").attr("aria-invalid", "false").removeClass("error")
        },
        setRewardFormErrorState: function() {
            $("#rewardNumber").attr("aria-invalid", "true").addClass("error"), $("#wcCustomerId").attr("aria-invalid", "true").addClass("error")
        },
        applyRewardSuccess: function(e) {
            if (e && e.error) FL.checkout.billing.winnersCircle.applyRewardError(e);
            else {
                FL.checkout.billing.enableSubmit(), FL.checkout.billing.OrderSummary.refresh(), FL.checkout.billing.winnersCircle.refresh(), FL.checkout.Header.refresh("billing");
                var t = !0;
                "" == $("#rewardNumber").val() && (t = !1);
                var a = {
                    winners_circle_number: !0,
                    reward_number: t
                };
                FL.optimove.reportEvent("apply_winner_circle_reward", a), FL.checkout.billing.KlarnaPay.klarnaWidgetReload()
            }
        },
        applyRewardError: function(e) {
            FL.checkout.billing.enableSubmit(), e && e.error ? $("#reward-server-error").removeClass("hide").show().html(e.error) : $("#reward-server-error").removeClass("hide").show().html("An unknown error has occurred");
            var t = !0,
                a = !0;
            "Winners circle reward not found, please re-enter winners circle reward" == e.error ? t = !1 : "Reward numbers need to match the associated Winners Circle Number." == e.error ? a = !1 : (t = !1, a = !1);
            var i = {
                winners_circle_number: t,
                reward_number: a
            };
            FL.optimove.reportEvent("apply_winner_circle_reward", i), FL.checkout.billing.winnersCircle.setRewardFormErrorState()
        },
        removeRewardSuccess: function(e) {
            e && e.error ? FL.checkout.billing.winnersCircle.removeRewardError(e) : (FL.checkout.billing.enableSubmit(), FL.checkout.billing.OrderSummary.refresh(), FL.checkout.billing.winnersCircle.refresh(), FL.checkout.Header.refresh("billing"), FL.checkout.billing.KlarnaPay.klarnaWidgetReload())
        },
        removeRewardError: function(e) {
            FL.checkout.billing.enableSubmit(), e && e.error ? $("#reward-server-error").show().html("Sorry, " + e.error) : $("#reward-server-error").show().html("An unknown error has occurred")
        },
        refresh: function() {
            switch ($(".loyaltyTypeEntry").val()) {
                case "WC":
                    FL.ajax.reloadComponent("winnerCircleEntry", FL.contextPath + "/checkout/gadgets/winnersCircleEntry.jsp?currentStage=billing", FL.checkout.billing.winnersCircle.init);
                    break;
                case "WC2":
                    FL.ajax.reloadComponent("winnerCircleEntry", FL.contextPath + "/checkout/gadgets/loyalty2Entry.jsp?currentStage=billing", FL.checkout.billing.winnersCircle.init)
            }
        }
    },
    GiftCard: {
        init: function() {
            $("#giftCardPaymentFields").off("click", ".deleteGiftCard").on("click", ".deleteGiftCard", function(e) {
                e.preventDefault(), FL.checkout.billing.GiftCard.remove($(this).data("gcgid"))
            }), $("#giftCardNumber").on("change", function() {
                var e = e || window._smtr || [];
                e.push(["onGift", {
                    id: "giftCardNumber"
                }])
            }), $("#applyGiftCard").off("click").on("click", function(e) {
                e.preventDefault(), FL.checkout.billing.GiftCard.apply()
            }), $("body").off("click", "#giftcardContinue").on("click", "#giftcardContinue", function(e) {
                e.preventDefault(), FL.checkout.billing.GiftCard.GiftCardsubmitAddAddress()
            }), $("#giftCardNumber").on("input", FL.checkout.billing.GiftCard.clearApplyErrors), $("#giftCardPin").on("input", FL.checkout.billing.GiftCard.clearApplyErrors), $("#giftCardPin").on("keyup paste", FL.checkout.billing.GiftCard.enforceNumericPin), $(".addedGiftCard").length && $("#giftCardAndWinnersCircleEntry").foundation("down", $("#giftCardAndWinnersCircleEntry li:first ul"))
        },
        refresh: function() {
            FL.ajax.reloadComponent("giftCardPaymentFields", FL.contextPath + "/checkout/gadgets/giftcardPaymentFields.jsp", FL.checkout.billing.GiftCard.init)
        },
        clearApplyErrors: function() {
            $("#giftcard-validation-error").addClass("hide"), $("#giftCardNumber").attr("aria-invalid", "false").removeClass("error"), $("#giftCardPin").attr("aria-invalid", "false").removeClass("error")
        },
        setGiftCardEntryErrorState: function() {
            $("#giftCardNumber").attr("aria-invalid", "true").addClass("error"), $("#giftCardPin").attr("aria-invalid", "true").addClass("error")
        },
        remove: function(e) {
            $("#gc_remove_id").val(e), FL.checkout.billing.disableSubmit(), FL.form.submit("gc_remove_form", "FL.checkout.billing.GiftCard.updateSuccess", "FL.checkout.billing.GiftCard.updateError"), $(".EmptySecAddressesEmptyDefaultCC").length > 0 && ($(".EmptySecAddressesEmptyDefaultCC").removeClass("EmptySecAddressesEmptyDefaultCC"), $(".removeGiftCard").removeClass("hide"))
        },
        updateSuccess: function(e) {
            if (e && e.success) {
                if (FL.checkout.billing.enableSubmit(), FL.checkout.billing.OrderSummary.refresh(), FL.checkout.Header.refresh("billing"), FL.checkout.billing.GiftCard.clearApplyErrors(), $("#giftCardPaymentFields .addedGiftCard").remove(), $("#giftCardNumber").val(""), $("#giftCardPin").val(""), e.giftCards)
                    for (var t = 0; t < e.giftCards.length; t++) $("#giftCardEntryFields").before('        <div class="row mb-2 addedGiftCard">            <div class="column small-7 medium-6">                <label><span>Gift card ending in <em>' + e.giftCards[t].cardNumber + '</em></span></label>            </div>            <div class="column small-2 medium-3">                <label><em>$' + parseFloat(e.giftCards[t].amount, 10).toFixed(2) + '</em></label>            </div>            <div class="column small-3 medium-3">                <label><a class="deleteGiftCard" data-gcgid="' + e.giftCards[t].pgId + '" href="javascript:void(0)">Remove</a></label>            </div>        </div>');
                var a = $("#billingCardNumber").val(),
                    i = $("#billingExpirationMonth").val(),
                    o = $("#billingExpirationYear").val(),
                    r = $("#billingSecurityCode").val();
                "" != a && "" != i && "" != o && "" != r || !e.insufficientAmount ? $("#giftcard-server-error").addClass("hide") : $("#giftcard-server-error").removeClass("hide").show().html("Please provide another payment option for the remaining amount of $" + parseFloat(e.insufficientAmount, 10).toFixed(2))
            } else FL.checkout.billing.GiftCard.updateError(e)
        },
        updateError: function(e) {
            FL.checkout.billing.enableSubmit(), e && e.errMsg ? $("#giftcard-server-error").removeClass("hide").show().html(e.errMsg) : $("#giftcard-server-error").removeClass("hide").show().html("An unknown error has occurred")
        },
        apply: function() {
            var e = $.trim($("#giftCardNumber").val()),
                t = $.trim($("#giftCardPin").val());
            if ($("#paymentTabs").foundation("selectTab", $("#creditCardTab")), $(".walletFeatureoff").length > 0) var a = $("#billingFirstName").valid(),
                i = $("#billingLastName").valid(),
                o = $("#billingAddress1").valid(),
                r = $("#billingAddress2").valid(),
                n = $("#billingZip").valid(),
                s = $("#billingCity").valid(),
                l = $("#billingState").valid(),
                d = $("#billingPhone").valid(),
                c = $("#email").valid();
            if (0 === e.length || 0 === t.length) $("#giftcard-validation-error").removeClass("hide").show().html("Both a Gift Card number and PIN are required"), FL.checkout.billing.GiftCard.setGiftCardEntryErrorState();
            else if (e.length < 16) $("#giftcard-validation-error").removeClass("hide").show().html("The card number must be 16 alphanumeric digits long"), FL.checkout.billing.GiftCard.setGiftCardEntryErrorState();
            else if (8 !== t.length && 10 !== t.length && 12 !== t.length) $("#giftcard-validation-error").removeClass("hide").show().html("Pin is incorrect number of digits"), FL.checkout.billing.GiftCard.setGiftCardEntryErrorState();
            else if ($(".walletFeatureoff").length > 0) a && i && o && r && n && s && l && d && c ? ($("#hiddenGiftCardNumber").val(e), $("#hiddenGiftCardPin").val(t), null != $("#email").val() && $("#hiddenEmail").val($("#email").val()), null != $("#billingFirstName").val() && $("#hiddenFirstName").val($("#billingFirstName").val()), null != $("#billingLastName").val() && $("#hiddenLastName").val($("#billingLastName").val()), null != $("#billingAddress1").val() && $("#hiddenlAddress1").val($("#billingAddress1").val()), null != $("#billingAddress2").val() && $("#hiddenAddress2").val($("#billingAddress2").val()), null != $("#billingCity").val() && $("#hiddenCity").val($("#billingCity").val()), null != $("#billingState").val() && $("#hiddenState").val($("#billingState").val()), null != $("#billingZip").val() && $("#hiddenZip").val($("#billingZip").val()), null != $("#billingPhone").val() && $("#hiddenPhone").val($("#billingPhone").val()), FL.checkout.billing.disableSubmit(), FL.form.submit("gc_form", "FL.checkout.billing.GiftCard.updateSuccess", "FL.checkout.billing.GiftCard.updateError")) : ($("#giftcard-validation-error").removeClass("hide").show().html("A valid billing address must be provided when using a gift card"), $("html, body").animate({
                scrollTop: $("#billingAddressFields").offset().top - 30
            }, 700));
            else if ($("#hiddenGiftCardNumber").val(e), $("#hiddenGiftCardPin").val(t), $(".address-select-box.select-shipping.address-blocks").length && $(".EmptySecAddressesEmptyDefaultCC").length && ($(".EmptySecAddressesEmptyDefaultCC").remove(), $(".removeGiftCard").removeClass("hide")), $(".notEmptySecondaryAddresses").length > 0 && ($("#firstNameFromAddress").val($(".select-shipping.active #cBFirstName").val()), $("#lastNameFromAddress").val($(".select-shipping.active #cBLastName").val()), $("#address1FromAddress").val($(".select-shipping.active #cBaddress1").val()), $("#address2FromAddress").val($(".select-shipping.active #cBaddress2").val()), $("#cityFromAddress").val($(".select-shipping.active #cBCity").val()), $("#stateFromAddress").val($(".select-shipping.active #cBstate").val()), $("#zipFromAddress").val($(".select-shipping.active #cBpostalCode").val()), $("#phoneFromAddress").val($(".select-shipping.active #cBphoneNumber").val())), $(".removeGiftCard").length > 0 && ($("#firstNameFromAddress").val($(".select-shipping.active #cBFirstName").val()), $("#lastNameFromAddress").val($(".select-shipping.active #cBLastName").val()), $("#address1FromAddress").val($(".select-shipping.active #cBaddress1").val()), $("#address2FromAddress").val($(".select-shipping.active #cBaddress2").val()), $("#cityFromAddress").val($(".select-shipping.active #cBCity").val()), $("#stateFromAddress").val($(".select-shipping.active #cBstate").val()), $("#zipFromAddress").val($(".select-shipping.active #cBpostalCode").val()), $("#phoneFromAddress").val($(".select-shipping.active #cBphoneNumber").val())), $(".EmptySecAddressesEmptyDefaultCC").length > 0) {
                var u = FL.contextPath + "/checkout/modals/addGiftCardBillingAddress.jsp?cardNumber=" + e + "&pin=" + t;
                $.ajax(u).done(function(e) {
                    $("#gitftCardBillingModal").html(e).foundation("open")
                })
            } else FL.checkout.billing.disableSubmit(), FL.form.submit("gc_form", "FL.checkout.billing.GiftCard.updateSuccess", "FL.checkout.billing.GiftCard.updateError")
        },
        giftCardAddressValidate: function() {
            $("#addGiftCardBillingAddressForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !1
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            })
        },
        GiftCardsubmitAddAddress: function(e) {
            FlIsAjaxExecuting || (FlIsAjaxExecuting = !0, e && e.preventDefault(), $("#addGiftCardBillingAddressForm").valid() && $.ajax({
                url: $("#addGiftCardBillingAddressForm").attr("action"),
                data: $("#addGiftCardBillingAddressForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    if (e.success) FlIsAjaxExecuting = !1, $("#gitftCardBillingModal").foundation("close"), $("#upsAddressModal").foundation("close"), 0 === $("#upsAddresses").length && (FL.checkout.billing.GiftCard.updateSuccess(e), FL.ajax.reloadComponent("checkoutreloadAddress", FL.contextPath + "/checkout/gadgets/displayBillingAddressCheckout.jsp", FL.checkout.billing.GiftCard.init));
                    else {
                        if (FlIsAjaxExecuting = !1, !($(e).filter("#upsAddresses").length > 0)) {
                            var t = !1;
                            return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError)), !1
                        }
                        $("#upsAddressModal").html(e), $("#upsErrorFlag").val("true"), FL.checkout.billing.GiftCard.UpsAddress.init(FL.checkout.billing.GiftCard.giftCardoverrideAddAddress)
                    }
                }
            }))
        },
        giftCardoverrideAddAddress: function(e) {
            $("#addGiftCardBillingAddressForm #newAddressAddress1").val(e.address1), $("#addGiftCardBillingAddressForm #newAddressAddress2").val(e.address2), $("#addGiftCardBillingAddressForm #newAddressCity").val(e.city), $("#addGiftCardBillingAddressForm #newAddressState").val(e.state), $("#addGiftCardBillingAddressForm #newAddressPostalCode").val(e.zip), $("#addGiftCardBillingAddressForm #upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close")
        },
        UpsAddress: {
            init: function(e) {
                $(".address-container").on("click", function() {
                    var e = $(this);
                    $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
                }), $("body").off("click", "#overrideAddgiftaddressSubmitButton").on("click", "#overrideAddgiftaddressSubmitButton", function(t) {
                    t.preventDefault(), FL.form.submit("gc_form_new", "FL.checkout.billing.GiftCard.updateSuccess", "FL.checkout.billing.GiftCard.updateError"), FL.ajax.reloadComponent("checkoutreloadAddress", FL.contextPath + "/checkout/gadgets/displayBillingAddressCheckout.jsp", FL.checkout.billing.GiftCard.init);
                    var a = $(".address-container.active");
                    return e && e({
                        address1: a.find(".address1").text().capitalize(),
                        address2: a.find(".address2").text().capitalize(),
                        city: a.find(".city").text().capitalize(),
                        state: a.find(".state").text(),
                        zip: a.find(".zip").text(),
                        upsValidation: "false",
                        receiveEmail: $("#upsReceiveEmail").val()
                    })
                }), $("#upsAddressModal").foundation("open")
            }
        },
        enforceNumericPin: function(e) {
            $("#giftCardPin").removeAttr("maxlength"), "paste" == e.type ? setTimeout(function() {
                FL.checkout.billing.GiftCard.reformatPin()
            }, 100) : FL.checkout.billing.GiftCard.reformatPin()
        },
        reformatPin: function() {
            var e = $("#giftCardPin").val();
            e = e.replace(/[^0-9]/g, ""), e.length > 12 && (e = e.slice(0, 12)), $("#giftCardPin").val(e), $("#giftCardPin").attr("maxlength", "12")
        }
    },
    Omniture: {
        init: function() {
            $("#giftCardAndWinnersCircleEntry").on("down.zf.accordionMenu", function() {
                $(this).find("[aria-expanded=true] ul li #giftCardPaymentFields").length > 0 ? FL.checkout.billing.Omniture.clickAccordionHeader("add-gift-card") : $(this).find("[aria-expanded=true] ul li .winnerCircleEntry").length > 0 && FL.checkout.billing.Omniture.clickAccordionHeader("add-winners-circle")
            }), $("#couponCodeEntryAccordion").on("down.zf.accordionMenu", function() {
                FL.checkout.billing.Omniture.clickAccordionHeader("add-coupon")
            })
        },
        clickAccordionHeader: function(e) {}
    }
}, FL.checkout.billing), window.FL = window.FL || {}, FL.checkout = FL.checkout || {}, FL.checkout.review = FL.checkout.review || {}, FL.checkout.review = jQuery.extend(!0, {
    init: function() {
        FL.checkout.init(), jQuery(".orderReview").find("#submitOrder").click(FL.checkout.review.showOverlay), FL.checkout.orderSummary.initCouponCode(), Foundation.MediaQuery.is("small only") ? $("#mobileOrderFlag").val("true") : $("#mobileOrderFlag").val("false")
    },
    showOverlay: function() {
        var e = $("#submitOrder");
        e.hasClass("disabled") || (FL.global.showOverlay(), FL.checkout.review.disableSubmit(), e.html("SUBMITTING..."))
    },
    enableSubmit: function() {
        $("#submitOrder").removeClass("disabled")
    },
    disableSubmit: function() {
        $("#submitOrder").addClass("disabled")
    }
}, FL.checkout.review), window.FL = window.FL || {}, FL.checkout = FL.checkout || {}, FL.checkout.confirm = FL.checkout.confirm || {}, FL.checkout.confirm = jQuery.extend(!0, {
    RegexMonth: /^(0[1-9]|1[012])$/,
    RegexDay: /^(0[1-9]|[12][0-9]|3[01])$/,
    RegexYear: /^(19|20)\d\d$/,
    init: function() {
        FL.global.capitalizeFields(), FL.mask.init(), FL.checkout.confirm.initCreateAccountForm(), FL.checkout.confirm.initCompleteAccountForm(), FL.checkout.confirm.SmarterHQ.init(), FL.checkout.confirm.initRecommendations(), FL.checkout.confirm.initRfkEvent(), FL.DynamicYield.purchaseEvent(), FL.checkout.confirm.optimoveCheckoutConfirmEvent()
    },
    initCreateAccountForm: function() {
        $("#checkoutCreateAccForm").validate({
            rules: {
                regconfirmPassword: {
                    equalTo: "#password"
                },
                termsAndConditions: {
                    required: !0
                }
            },
            messages: {
                password: {
                    required: "Enter Password"
                },
                regconfirmPassword: {
                    required: "Re-enter Password",
                    equalTo: "Passwords must match"
                },
                termsAndConditions: {
                    required: "Please read and agree to the Terms & Conditions"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                var a = t.numberOfInvalids(),
                    i = $(this).find("label.error");
                a && (t.errorList[0].element.focus(), $(i[0]).attr("aria-live", "assertive"))
            }
        }), $("#checkoutCreateAcc").on("click", FL.checkout.confirm.createAccountClicked), FL.checkout.confirm.passWordValidation()
    },
    initCompleteAccountForm: function() {
        $("#checkoutRegisterForm").validate({
            rules: {
                profileBirthDate: {
                    required: !0
                },
                termsAndConditions: {
                    required: !0
                }
            },
            messages: {
                profileBirthDate: {
                    required: "Please enter your birth date."
                },
                termsAndConditions: {
                    required: "Please read and agree to the Terms & Conditions"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#completeAccount").on("click", FL.checkout.confirm.completeAccountClicked)
    },
    charCountFail: function() {
        $("#charCount").find(".statusIcon").removeClass("icon icon-checkmark"), $("#crmOn").find("#password").addClass("error"), $("#charCount").find(".statusIcon").empty(), $("#pwReqs").find("#charCount").css("color", "#de1e05"), $("#charCount").find(".statusIcon").append("&nbsp;! "), $("#resetPwBtn").on("click", function(e) {
            e.preventDefault()
        })
    },
    specCharFail: function() {
        $("#specChar").find(".statusIcon").removeClass("icon icon-checkmark"), $("#crmOn").find("#password").addClass("error"), $("#specChar").find(".statusIcon").empty(), $("#pwReqs").find("#specChar").css("color", "#de1e05"), $("#specChar").find(".statusIcon").append("&nbsp;! "), $("#resetPwBtn").on("click", function(e) {
            e.preventDefault()
        })
    },
    charCountPass: function() {
        $("#charCount").find(".statusIcon").empty(), $("#crmOn").find("#password").removeClass("error"), $("#pwReqs").find("#charCount").css("color", "#468800"), $("#charCount").find(".statusIcon").addClass("icon icon-checkmark")
    },
    specCharPass: function() {
        $("#specChar").find(".statusIcon").empty(), $("#crmOn").find("#password").removeClass("error"), $("#pwReqs").find("#specChar").css("color", "#468800"), $("#specChar").find(".statusIcon").addClass("icon icon-checkmark")
    },
    specCharClearStatus: function() {
        $("#pwReqs").find("#specChar").css("color", "#333"), $("#specChar").find(".statusIcon").removeClass("icon icon-checkmark"), $("#specChar").find(".statusIcon").empty(), $("#crmOn").find(".pwPass").removeClass("icon icon-checkmark")
    },
    charCountClearStatus: function() {
        $("#pwReqs").find("#charCount").css("color", "#333"), $("#charCount").find(".statusIcon").removeClass("icon icon-checkmark"), $("#charCount").find(".statusIcon").empty(), $("#crmOn").find(".pwPass").removeClass("icon icon-checkmark")
    },
    passWordValidation: function() {
        $("#password").focus(function() {
            $("#pwReqs").show()
        }), $("#password").on("input", function() {
            var e = $("#password").val().length,
                t = $("#crmOn").find("#password").val(),
                a = /[!"#$%'&()*+,-.\/:;<=>?@^_`{|}~]/.test(t);
            e >= 8 ? FL.checkout.confirm.charCountPass() : FL.checkout.confirm.charCountClearStatus(), a ? FL.checkout.confirm.specCharPass() : FL.checkout.confirm.specCharClearStatus()
        }), $("#password").blur(function() {
            var e = $("#password").val().length,
                t = $("#crmOn").find("#password").val(),
                a = /[!"#$%&'()*+,-.\/:;<=>?@^_`{|}~]/.test(t);
            e <= 7 && FL.checkout.confirm.charCountFail(), !1 === a && FL.checkout.confirm.specCharFail(), a && e >= 8 && ($("#pwReqs").hide(), $("#crmOn").find(".pwPass").addClass("icon icon-checkmark"))
        })
    },
    createAccountClicked: function(e) {
        e.preventDefault();
        var t = $("#checkoutCreateAccForm");
        t.valid() && ($("#WCValidatePasswordForm").val($("#password").val()), $("#WCValidateConfirmForm").val($("#regconfirmPassword").val()), $.ajax({
            url: FL.contextPath + "/checkout/json/confirmationRegisterJsonResponse.jsp",
            data: t.serialize(),
            success: function(e) {
                if (e.success) {
                    var t = $("#password").val(),
                        a = $("#regconfirmPassword").val(),
                        i = $("#checkOutEmail").val(),
                        o = $(".thankyouWCJoinCheckBox input").is(":checked");
                    $("#checkoutCreateEmail").val(i), $("#checkoutCreatePwd").val(t), $("#checkoutCreateRePwd").val(a), $("#checkoutCreateEmail").val(i), $("#thankyouWCJoinNowCheckBox").val(o), o && $("#thankyouWCJoinNowCheckBox").attr("checked", !0), $("#dobAndAgeModal").foundation("open")
                } else {
                    var r;
                    $.each(e.fieldErrors, function(e, t) {
                        r = t.message
                    }), $(".emailValidationError").html(r), $(".emailValidationError").focus()
                }
            },
            error: function(e) {
                var t = "Looks like you may already have an account.";
                FL.global.isJDSport() && (t = "Looks like you may already have a JDX account."), $(".emailValidationError").html(t), $(".emailValidationError").focus()
            }
        }))
    },
    completeAccountClicked: function(e) {
        e.preventDefault();
        var t = $("#checkoutRegisterForm");
        if (t.valid()) {
            var a = moment().add(-13, "year").add(1, "day"),
                i = $("#profileBirthDate").val(),
                o = i.split("/");
            if ($("#dobmo").val(o[0]), $("#dobday").val(o[1]), $("#dobyr").val(o[2]), !a.isAfter(o[2])) return errorHTML = "Must be at least 13 years of age", $(".wcFormErrorsText").html(errorHTML), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove(), $(".birthYear").focus(), !1;
            $(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1), $.ajax({
                url: FL.contextPath + "/checkout/json/completeAccountErrorJsonResponse.jsp",
                data: t.serialize(),
                success: function(e) {
                    if (e.success) window.location.href = FL.contextPath + "/myaccount/profile.jsp";
                    else {
                        $(".genderError").addClass("hide"), $(".dobModalError").addClass("hide"), $("#thankyouWCJoinNowCheckBox").attr("checked", !0);
                        var t, a;
                        $.each(e.fieldErrors, function(e, i) {
                            a = i.fieldName, t = i.message
                        }), "genderRequiredError" === a ? $(".genderError").removeClass("hide").html(t) : $(".dobModalError").removeClass("hide").html(t)
                    }
                },
                error: function() {
                    $(".dobModalError").removeClass("hide").show().html("An error occurred. Please try again later.")
                }
            })
        }
    },
    initRecommendations: function() {
        var e = $(".confirm-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        })
    },
    initRfkEvent: function() {
        if (FL.Reflektion.isRfkOn(7)) {
            var e = [],
                t = Number.parseFloat($(".payment-summary").find(".total").html().replace("&nbsp;-&nbsp;", "").replace("$", "")),
                a = Math.round(100 * Number.parseFloat($(".recommendation-params .total").val())) / 100,
                i = JSON.parse($("#checkout").html().split('"product_sku" : ')[1].split('"product_images"')[0].replace("],", "]").trim());
            $(".checkout-bag-item").each(function(t) {
                var a = $(this),
                    o = a.attr("data-productid"),
                    r = a.find(".checkout-bag-item-detail").find("div:nth-child(6)").html().replace("Quantity: ", ""),
                    n = a.find(".checkout-bag-item-detail").find("div:nth-child(2)"),
                    s = n.find(".sale-price").length > 0 ? n.find(".sale-price").text() : n.text(),
                    l = n.find(".sale-price").length > 0 ? n.find(".was-price").text() : n.text(),
                    d = i[t];
                r = $.trim(r), s = $.trim(s.replace("$", "")), l = $.trim(l.replace("$", "")), e.push({
                    sku: d,
                    productId: o,
                    quantity: parseFloat(r),
                    price: parseFloat(s),
                    price_original: parseFloat(l)
                })
            });
            var o = $("#checkoutCreateAcc").length ? "" : $(".tfc-order-notify").attr("data-userid"),
                r = $("#checkoutCreateAcc").length ? $("#checkOutEmail").val() : $(".customeremail").val(),
                n = {
                    type: "order",
                    name: "confirm",
                    value: {
                        products: e,
                        user: {
                            id: o,
                            eid: FL.Reflektion.md5(r)
                        },
                        checkout: {
                            order_id: $(".tfc-order-notify").attr("data-orderid"),
                            subtotal: a,
                            total: t
                        }
                    }
                };
            FL.Reflektion.isUUID(function() {
                console.log(n), rfk.push(["trackEvent", n])
            })
        }
    },
    optimoveCheckoutConfirmEvent: function() {
        var e = parseFloat($(".payment-summary").find(".total").html().replace("&nbsp;-&nbsp;", "").replace("$", "").replace(",", "")),
            t = size = quantity = price = style_id = color_id = "",
            a = $(".checkout-bag-item");
        a.each(function(e, i) {
            var o = $(this),
                r = o.find(".checkout-bag-item-detail");
            id = o.attr("data-productid"), qty = r.find("div:nth-child(6)").html().replace("Quantity: ", ""), $price = r.find("div:nth-child(2)"), itemPrice = $price.find(".sale-price").length > 0 ? $price.find(".sale-price").html() : $price.find(".full-price").html(), itemSize = r.find(".size").html().trim(), color = o.attr("data-colorid"), style = o.attr("data-styleid"), qty = $.trim(qty), price = $.trim(price.replace("$", "")), t += id, size += itemSize, quantity += qty, price += itemPrice, style_id += style, color_id += color, e == a.length - 1 || (t += ";", size += ";", quantity += ";", price += ";", style_id += ";", color_id += ";")
        });
        var i = {
            total: e,
            product_id: t,
            size: size,
            quantity: quantity,
            price: price.replace("$", ""),
            style_id: style_id,
            color_id: color_id
        };
        FL.optimove.reportEvent("checkout_confirm_order", i)
    }
}, FL.checkout.confirm), FL.checkout.confirm.SmarterHQ = jQuery.extend(!0, {
    init: function() {
        var e = e || window._smtr || [],
            t = [],
            a = $(".tfc-order-notify").attr("data-orderid"),
            i = $(".payment-summary").find(".total").html().replace("&nbsp;-&nbsp;", "").replace("$", "");
        $(".checkout-bag-item").each(function() {
            var e = $(this),
                a = e.attr("data-stylecolor"),
                i = e.find(".checkout-bag-item-detail").find("div:nth-child(6)").html().replace("Quantity: ", ""),
                o = e.find(".checkout-bag-item-detail").find("div:nth-child(2)"),
                r = o.find(".sale-price").length > 0 ? o.find(".sale-price").html() : o.html();
            i = $.trim(i), r = $.trim(r.replace("$", "")), t.push({
                productId: a,
                sku: a,
                qty: i,
                price: r
            })
        }), e.push(["pageView", {
            pageType: "purchase",
            orders: [{
                orderItems: t,
                total: i,
                orderId: a
            }]
        }])
    }
}, FL.checkout.confirm.SmarterHQ), window.FL = window.FL || {}, FL.customerservice = FL.customerservice || {}, FL.customerservice = jQuery.extend(!0, {
    init: function() {
        FL.customerservice.initMobileMenu(), FL.customerservice.initChat(), FL.customerservice.OrderTracking.init()
    },
    initChat: function() {
        if ($(".chatButtonWrapper").length > 0) {
            var e = parseInt($(window).width() / 2 - 200),
                t = parseInt($(window).height() / 2 - 345);
            $(".chatBtn").on("click", function(a) {
                return a.preventDefault(), !window.open(this.href, "pop", "width=400,height=690,left=" + e + ",top=" + t + ",screenX=" + e + ",screenY=" + t + ",resizable=1,scrollbars=0,status=0,titlebar=0,toolbar=0,location=0")
            })
        }
    },
    initMobileMenu: function() {
        $("#myAccountSelectMenu").val($("#myAccountPage").val()), $("#myAccountSelectMenu").change(function() {
            var e = $(this).find("option:selected").val(),
                t = "";
            (t = "purchaseDetailHome" == e ? $(".purchase-details-home").attr("href") : $(this).find("option:selected").attr("data-url")) && (window.location = t)
        })
    },
    initEmail: function() {
        $("#contactUsForm").validate({
            rules: {
                name: {
                    required: !0
                },
                email: {
                    required: !0,
                    email: !0
                },
                subject: {
                    required: !0
                },
                message: {
                    required: !0
                }
            },
            messages: {
                name: {
                    required: "Name is required"
                },
                email: {
                    required: "Email is required",
                    email: "Please enter a valid email address in the format xxx@xxx.xxx"
                },
                subject: {
                    required: "Subject is required"
                },
                message: {
                    required: "Message is required"
                }
            }
        }), $("#submitEmailBtn").on("click", function(e) {
            e.preventDefault(), $("#contactUsForm").valid() && (FL.global.showOverlay(), $.ajax({
                url: $("#contactUsForm").attr("action"),
                data: $("#contactUsForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    e.success ? FL.ajax.reloadComponent("contactUsForm", FL.contextPath + "/customerservice/gadgets/emailConfirm.jsp", function() {
                        FL.global.hideOverlay()
                    }) : $(e.error)
                }
            }))
        }), $("#cancelBtn").on("click", function() {
            $("#emailModal").foundation("close")
        })
    },
    OrderTracking: {
        rules: {
            tyoOrderId: {
                required: !0
            },
            tyoZipCode: {
                required: !0
            }
        },
        $form: null,
        init: function() {
            FL.customerservice.OrderTracking.$form = $("#trackOrder"), FL.customerservice.OrderTracking.$form.validate(FL.customerservice.OrderTracking.rules)
        },
        _openModal: function(e) {
            if (e.preventDefault(), e.stopPropagation(), FL.customerservice.OrderTracking.$form.valid()) {
                FL.global.showOverlay();
                var t = $("#showOrderInquiry"),
                    a = $("[name='tyoOrderId']").val(),
                    i = $("[name='tyoZipCode']").val();
                $("#orderId").val(a), $("#zip").val(i);
                var o = FL.contextPath + "/myaccount/orderTrackingInner.jsp?orderId=" + a + "&zip=" + i + "&isAutTrigger=true";
                t.find("iframe").attr("src", o), navigator.userAgent.search("Firefox") > -1 && t.foundation("open"), t.find("iframe").one("load", function() {
                    FL.global.hideOverlay(), navigator.userAgent.search("Firefox") <= -1 && t.find("iframe").one("load", function() {
                        FL.global.hideOverlay(), t.foundation("open")
                    })
                })
            }
            return !1
        }
    },
    ContactUs: {
        init: function() {
            $("#contactusName").focus(), void 0 !== FL.Chat && FL.Chat.init()
        }
    }
}, FL.customerservice), window.FL = window.FL || {}, FL.pdp = FL.pdp || {}, FL.pdp = jQuery.extend(!0, {
    activeSizeChart: null,
    init: function() {
        "true" == Cookies.get("fl_ispu_search_status") || "" != $("#storeId").val() && void 0 != $("#storeId").val() ? ($("#productSizes").hide(), FL.pdp.activeSizeChart = $("#productStoreSizes")) : ($("#productStoreSizes").hide(), FL.pdp.activeSizeChart = $("#productSizes")), FL.pdp.stickyAddToCartControls(), FL.isJDKiosk && FL.pdp.QRCode.init(), FL.amplience.SDK.init(), FL.pdp.reviews.init(), FL.pdp.Colors.init(), setTimeout(function() {
            FL.pdp.Sizes.init()
        }, 600), FL.pdp.Sliders.init(), FL.pdp.Cart.init(), FL.pdp.Images.initZoomModal(), FL.pdp.Images.initAlternateViews(), FL.pdp.initCalculateStatusPointsReward(), FL.pdp.Videos.init(), FL.pdp.initCalculatePointsReward(), FL.bLazy.PDP.init(), FL.pdp.WishList.init(), FL.pdp.SizeChart.init(), FL.pdp.initRecommendations(), FL.pdp.initDeliveryMethods(), FL.InStorePickup.init(), FL.InStorePickup.AJAX.getStorePickUpSession(), FL.pdp.afterPayClickModal(), $(".enableWCOptimizationOff").length > 0 && FL.pdp.updateWinnersCircle(), FL.pdp.initSmarterHQPageView(), FL.pdp.BVADA.init(), FL.global.Favorites.favoritesHighlight(), $("#productQuantity").on("change", FL.pdp.Cart.onChangeCheckStoreAvailability), $("body.jdsports-page").length > 0 && FL.pdp.initDetailsMenu(), FL.pdp.initDetailsMobileMenu(), FL.pdp.optimovePdpViewedEvent(), "true" == $("#productIsGiftCard").val() ? $(".giftCardExists").hide() : $(".giftCardExists").show()
    },
    initDetailsMenu: function() {
        function e(e) {
            e.menu.hasClass("selected") || (FL.pdp.clearSelectedPDMenuItem(), FL.pdp.clearSelectedPDDescription(), e.menu.addClass("selected"), e.desc.addClass("selected"))
        }

        function t(t) {
            t.menu.off("click").on("click", function() {
                e(t)
            })
        }
        var a = ($("#details-menu"), $("#details-description"), [{
            menu: $("#productMenu"),
            desc: $("#productDesc")
        }, {
            menu: $("#deliveryMenu"),
            desc: $("#deliveryDesc")
        }, {
            menu: $("#returnsMenu"),
            desc: $("#returnsDesc")
        }]);
        $.each(a, function(e, a) {
            t(a)
        })
    },
    clearSelectedPDMenuItem: function() {
        $("#details-menu").find(".selected").removeClass("selected")
    },
    clearSelectedPDDescription: function() {
        $("#details-description").find(".selected").removeClass("selected")
    },
    initDetailsMobileMenu: function() {
        $("#productDescMenuItem").on("click", function() {
            $("#productDescription").foundation("open"), FL.pdp.clearSelectedPDDescription(), $("#productDesc").addClass("selected")
        }), $("body.jdsports-page").length > 0 && ($("#deliveryMenuSlideout").on("click", function() {
            $("#productDescription").foundation("open"), FL.pdp.clearSelectedPDDescription(), $("#deliveryDesc").addClass("selected")
        }), $("#returnsMenuSlideout").on("click", function() {
            $("#productDescription").foundation("open"), FL.pdp.clearSelectedPDDescription(), $("#returnsDesc").addClass("selected")
        })), $("#reviewsMenuItem").on("click", function() {
            $("#ReviewsMain").foundation("open"), $(".js-off-canvas-overlay").removeClass("is-visible")
        })
    },
    stickyAddToCartControls: function() {
        var e = $("#controls"),
            t = $("#addToCartControl"),
            a = !1,
            i = e.offset().top - $(window).scrollTop(),
            o = function() {
                t.removeClass("sticky"), t.addClass("mt-1"), a = !1
            };
        $(window).off("resize").on("resize", function() {
            o()
        });
        var r = function() {
                a || (a = !0, $("#productQuantity").css("margin-bottom", "0"), $("#buttonAddToCart").css("margin-bottom", "0"), t.addClass("sticky"), t.removeClass("mt-1"))
            },
            n = function() {
                0 === t.length ? ($window.off("scroll"), $window.off("resize"), o()) : Foundation.MediaQuery.atLeast("medium") ? o() : (i = e.offset().top - $(window).scrollTop(), i < 0 ? r() : o())
            };
        $(window).on("scroll", function() {
            n()
        })
    },
    initRecommendations: function() {
        var e = $(".pdp-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        })
    },
    initCalculatePointsReward: function() {
        if (FL.global.isJDSport()) {
            var e = !$("#myaccount-nav").data("transient"),
                t = "";
            try {
                t = Math.floor(Number($("#productPrices .fullPrice").text().trim().replace(/[$,]/g, ""))), (isNaN(t) || 0 === t) && (t = Math.floor(Number($("#productPrices .nowPrice").text().split("Now")[1].trim().replace(/[$,]/g, ""))))
            } catch (e) {
                t = ""
            }
            var a = "Earn %%pts%% points towards a reward with this purchase. Get $5 back every time you reach $100. ";
            a = a.replace("%%pts%%", t);
            var i = "<span tabindex=0>" + a + "</span>";
            $(".JDXPointsRewardInfo").html(i), e || $(".JDXJoinNow").html('<a href="/JDX">Join Today.</a>')
        }
    },
    initDeliveryMethods: function() {
        $("#radioShipToHome").on("click", function() {
            FL.pdp.updateSizesForDelivery()
        }), $("#radioStorePickup").off().on("click", function() {
            if (null == Cookies.get("fl_selected_store") || void 0 == Cookies.get("fl_selected_store")) $("#radioShipToHome").prop("checked", !0), FL.InStorePickup.openStoreModal();
            else {
                var e = Cookies.get("fl_selected_store");
                if (e.indexOf(":") > 0) {
                    var t = e.split(":");
                    storeId = t[0]
                }
                FL.pdp.updateSizesForPickup(storeId)
            }
            setTimeout(FL.pdp.optimovePdpViewedEvent, 800)
        }), $(".ispu-location").off().on("click", FL.InStorePickup.openStoreModal), ("true" == Cookies.get("fl_ispu_search_status") || "" != $("#storeId").val() && void 0 != $("#storeId").val()) && setTimeout(function() {
            $("#radioStorePickup").prop("checked", !0).trigger("click")
        }, 2e3)
    },
    updateSizesForDelivery: function() {
        var e = ($("#productItemId").val(), $("#productStyleId").val()),
            t = $("#productColorId").val();
        FL.pdp.activeSizeChart = $("#productSizes"), $(FL.pdp.activeSizeChart).html($("#sizes_" + e + "-" + t).html()), $("#productSizes").show(), $("#productStoreSizes").hide(), $(".sizeOptions:visible").not(".disabled").off().on("click", FL.pdp.Colors.Events.sizeClick), FL.pdp.Colors.populateSizeDropdown(e + "-" + t), FL.InStorePickup.selectedStoreId && FL.InStorePickup.Modal.removeStore(), $(".store-pickup-message").removeClass("show"), $("#buttonAddToCart").prop("disabled", !1), "undefined" != typeof selectedSize && $("#productSizes .sizeOptions[data-size='" + selectedSize + "']").click()
    },
    updateSizesForPickup: function(e) {
        var t = $("#productItemId").val(),
            a = $("#productStyleId").val(),
            i = $("#productColorId").val();
        $("#radioStorePickup").prop("checked", !0), FL.pdp.activeSizeChart = $("#productStoreSizes"), FL.InStorePickup.updateStoreStockLevels(t, a, i, e), $("#productStoreSizes").show(), $("#productSizes").hide(), $(".sizeOptions:visible").not(".disabled").off().on("click", FL.pdp.Colors.Events.sizeClick), FL.pdp.Colors.populateSizeDropdown(a + "-" + i);
        var e = $(".ispu-location").attr("data-store-id"),
            o = $(".ispu-location").attr("data-store-name");
        "" == FL.pdp.Cart.selectedSku && e && o ? FL.InStorePickup.selectedStoreId = e : null === FL.InStorePickup.selectedStoreId && e && o && FL.pdp.Cart.checkStoreAvailability()
    },
    initSmarterHQPageView: function() {
        var e = e || window._smtr || [],
            t = $("#styleColors").find(".styleColorIds").html().replace(" - ", "").replace("&nbsp;", "-");
        e.push(["pageView", {
            pageType: "product",
            productId: t
        }])
    },
    isPDPPage: function() {
        var e = window.location.href;
        return e && e.indexOf && -1 !== e.indexOf("/product/")
    },
    getCurrentPrice: function() {
        var e = $("#productPrices .nowPrice").text();
        return e || (e = $("#productPrices .fullPrice").text()), e && (e = $.trim(e), 0 === e.indexOf("$") && (e = e.substring(1))), e
    },
    updateWinnersCircle: function() {
        $.ajax({
            dataType: "html",
            type: "GET",
            url: FL.contextPath + "/global/gadgets/winnersCircle.jsp?currentStage=pdp&itemPrice=" + FL.pdp.getCurrentPrice(),
            success: function(e) {
                $("#winnersCirclePromo").html(e)
            },
            error: function() {}
        })
    },
    initCalculateStatusPointsReward: function() {
        if (!FL.global.isJDSport()) {
            var e = "Get points. Gain access. Boost your status.";
            e += "false" == $(".hasWCNumber").val() ? '<br><a href="/status">Join Status Now.</a>' : "";
            var t = 0;
            try {
                t = Math.floor(Number($("#productPrices .fullPrice").text().trim().replace(/[$,]/g, ""))), (isNaN(t) || 0 === t) && (t = Math.floor(Number($("#productPrices .nowPrice").text().trim().replace(/[$,]/g, ""))))
            } catch (e) {
                t = 0
            }
            if (isNaN(t) || 0 === t || "false" == $(".hasWCNumber").val()) $(".StatusRewardInfo").html(e);
            else {
                var a = $(".customerid").val(),
                    i = FL.loyaltyProgram.getPotentialLoyaltyPoints(a, t);
                if (0 === i) $(".StatusRewardInfo").html(e);
                else {
                    var o = "Get <strong>" + i + "</strong> Status points with this purchase. More points means more rewards.";
                    $(".StatusRewardInfo").html(o)
                }
            }
        }
    },
    afterPayClickModal: function() {
        $("body").on("click", ".afterpay-info-pdp", function() {
            $("#modalAfterpay_Pdp").foundation("open"), FL.Tealium.clickAfterPayPDP()
        }), $("body").on("open.zf.reveal", "#modalAfterpay_Pdp[data-reveal]", function() {
            FL.Tealium.clickAfterPayPDPModal()
        })
    },
    optimovePdpViewedEvent: function() {
        var e, t = "Ship to an address",
            a = !0;
        $("#radioStorePickup:checked").length > 0 && (t = "Pick up in store"), $(".button--grid").not(".disabled").length > 0 && (a = !1), $(".store-pickup-message").hasClass("show") && (a = !0), "undefined" != typeof selectedSize && (e = selectedSize.toString());
        var i = {
            shipping_option: t,
            product_id: $("#productItemId").val(),
            style_id: $("#productStyleId").val(),
            store_location: $("#storePickupLocation strong").text().trim(),
            in_stock_locations: "",
            is_out_of_stock: a,
            size: e
        };
        FL.optimove.reportEvent("pdp_viewed", i)
    },
    QRCode: {
        init: function() {
            var e = window.location.pathname,
                t = window.location.search,
                a = "https://www.jdsports.com" + e + t;
            $("#kioskQRCode").qrcode({
                width: 200,
                height: 200,
                text: a
            })
        }
    },
    Sliders: {
        init: function() {
            FL.pdp.Sliders.initMainMobileSlider(), FL.pdp.Sliders.initAltColorSlider()
        },
        initMainMobileSlider: function() {
            $("#mobileImageSlider").on("init", function(e, t, a) {
                $("#mobileImageSliderSpinner").hide(), $("#mobileImageSlider").show(), t.setPosition(), FL.pdp.Images.initZoomModal(), FL.pdp.Images.initAlternateViews(), FL.pdp.WishList.init()
            }), $("#mobileImageSlider").slick({
                dots: !0,
                infinite: !0
            })
        },
        initAltColorSlider: function() {
            FLSlider.init({
                id: "mobileAlternateColorsFLSlider",
                slideWidth: 120,
                slidePadding: 15
            }), $(".color-image-mobile.isOnModel img").each(function(e) {
                $(this).attr("src", $(this).attr("src").split("&bg")[0])
            }), $("#mobileAlternateColorsFLSlider").find("a").on("click", FL.pdp.Colors.Events.altMouseClickMobile);
            var e = $("#mobileAlternateColorsFLSlider"),
                t = e.width(),
                a = e.find(".fl-slider-track").width();
            a > t ? ($(".mobile-color-slider-fade.left").hide(), $(".mobile-color-slider-fade.right").show()) : ($(".mobile-color-slider-fade.left").hide(), $(".mobile-color-slider-fade.right").hide()), e.scroll(function() {
                0 == e.scrollLeft() ? $(".mobile-color-slider-fade.left").fadeOut() : $(".mobile-color-slider-fade.left").fadeIn(), e.scrollLeft() + t + 13 == a ? $(".mobile-color-slider-fade.right").fadeOut() : $(".mobile-color-slider-fade.right").fadeIn()
            })
        }
    },
    Images: {
        selectedZoomImage: "",
        getImages: function(e, t, a) {
            if ("mobile" == a) {
                var i = $("#imageSliderContainer").height();
                $("#mobileImageSliderSpinner").css("height", i + "px"), $("#mobileImageSliderSpinner").show(), $("#mobileImageSlider").hide()
            }
            var o = $("#title").text().trim(),
                r = $("#productItemId").val(),
                n = "true" === $("#isProductShoe").val(),
                s = "true" === $("#isProductAccessory").val(),
                l = "true" === $("#isProductGiftCard").val();
            $.ajax({
                dataType: "html",
                type: "GET",
                url: FL.contextPath + "/browse/gadgets/alternateImage.jsp",
                data: {
                    colorID: e,
                    styleID: t,
                    productName: o,
                    productItemId: r,
                    productIsShoe: n,
                    productIsAccessory: s,
                    productIsGiftCard: l,
                    renderType: a,
                    pageName: "pdp"
                },
                success: function(e) {
                    "mobile" == a ? ($("#imageSliderContainer").html(e), FL.pdp.Sliders.initMainMobileSlider(), FL.bLazy.PDP.initMobileImages()) : "desktop" == a ? ($("#productImageLayout").html(e), FL.pdp.Images.initZoomModal(), FL.pdp.Images.initAlternateViews(), FL.bLazy.PDP.initMainImages(), FL.pdp.WishList.init(), FL && FL.pdp && FL.pdp.Videos && FL.pdp.Videos.init()) : "zoom" == a && ($("#productZoomImages").html(e), FL.pdp.Images.initZoomClick(), $("#productZoomModal").foundation("open"))
                },
                error: function() {}
            })
        },
        initAlternateViews: function() {
            var e = $("body.jdsports-page").length > 0,
                t = $("#productImageLayout"),
                a = t.find(".block-grid--pdp.alternates").find(".pdp-image").parents("a");
            e && a.off("mouseenter mouseleave").on("mouseenter mouseleave", FL.pdp.Images.alternateViewsHover).off("click").on("click", FL.pdp.Images.alternateViewsClick)
        },
        alternateViewsHover: function(e) {
            var t = $("#productImageLayout").find(".block-grid--pdp.primary").find(".pdp-image"),
                a = $(this);
            "mouseenter" === e.type ? t.find("img").attr("src", a.find(".pdp-image").attr("data-large")) : t.find("img").attr("src", t.attr("data-large"))
        },
        alternateViewsClick: function() {
            var e = $("#productImageLayout").find(".block-grid--pdp.primary").find(".pdp-image"),
                t = $("#productImageLayout").find(".block-grid--pdp.alternates").find(".pdp-image"),
                a = $(this).find(".pdp-image");
            e.attr("data-thumb", a.attr("data-thumb")).attr("data-large", a.attr("data-large")).find("img").attr("src", a.attr("data-large")), t.removeClass("selected"), a.addClass("selected")
        },
        initZoomModal: function() {
            var e = $("body.jdsports-page").length > 0,
                t = $("#productImageLayout"),
                a = e ? t.find(".block-grid--pdp.primary").find(".pdp-image img").not(".is-video") : $(".pdp-image img").not(".is-video"),
                i = $(".icon-zoom, .icon-jd-zoom");
            i.keypress(function(e) {
                13 == e.which && FL.pdp.Images.zoomModalClick()
            }), i.off("click").on("click", function() {
                $(this).parent().parent().find("img").click()
            }), a.off("click").on("click", FL.pdp.Images.zoomModalClick), $("#mobileImageSlider .slick-slide").off("click").on("click", FL.pdp.Images.zoomModalClick)
        },
        zoomModalClick: function() {
            var e = $("#productStyleId").val(),
                t = e + "-" + $("#productColorId").val();
            "mobile" == FL.footer.detectDevice() ? FL.pdp.Images.selectedZoomImage = $("#mobileImageSlider div.slick-active").attr("data-large") + "&h=1000&w=1000" : FL.pdp.Images.selectedZoomImage = $(this).closest(".pdp-image").attr("data-large") + "&h=1000&w=1000", FL.pdp.Images.getImages(t, e, "zoom")
        },
        initZoomClick: function() {
            $("#productZoomImages").find("a").on("click", function() {
                var e = $(this),
                    t = e.attr("data-product-class"),
                    a = e.attr("data-image-name"),
                    i = e.find("img").attr("alt");
                $(".zoom-thumbnail").removeClass("selected"), e.find(".zoom-thumbnail").addClass("selected"), $(".product-zoom-container").hasClass(t) || $(".product-zoom-container").addClass(t), FL.pdp.Images.populateMainZoomModalImage(a, i)
            }), $("#productZoomImages").find("a").each(function() {
                $(this).attr("data-large").split("?")[0] === FL.pdp.Images.selectedZoomImage.split("?")[0] && $(this).click()
            })
        },
        populateMainZoomModalImage: function(e, t) {
            var a = FL.global.isJDSport() ? "jdsports" : "finishline",
                i = "https://media." + a + ".com/i/" + a + "/" + e + "?$default$&w=1000&h=1000&bg=rgb(237,237,237)";
            $("#product-zoom-container").html('<img data-amp-src="' + i + '" alt="Up close ' + t + '" id="selectedImage">'), $("#selectedImage").ampZoom({
                preload: {
                    zoomed: "create"
                },
                activate: {
                    mouse: "over"
                },
                responsive: !0
            })
        }
    },
    Videos: {
        isJD: $("body.jdsports-page").length > 0,
        init: function() {
            var e = !Foundation.MediaQuery.atLeast("medium");
            !e && $("#productVideo video").length > 0 && $("#productVideo video").get(0).play(), e ? FL.pdp.Videos.initMobileMediaSelectors() : this.isJD && FL.pdp.Videos.initClickToPlay(!0), FL.global.isJDSport() && $("#productImageLayout .column.video").on("click", function() {
                FL.pdp.Videos.sendVideoClickEvent()
            }), FL.pdp.Videos.initVideoAnalytics()
        },
        sendVideoClickEvent: function() {
            var e = location.href;
            utag.link({
                events: "video_pdp",
                ga_category: "Video",
                ga_action: "Click Video",
                ga_label: e
            })
        },
        initVideoAnalytics: function() {
            var e = setInterval(function() {
                if (0 != $("video").length) {
                    clearInterval(e);
                    var t = $("video"),
                        a = location.href;
                    $(t).on("play", function() {
                        utag.link({
                            events: "video_pdp_start",
                            ga_category: "Video",
                            ga_action: "Start Video",
                            ga_label: a
                        })
                    })
                }
            }, 200)
        },
        initMobileMediaSelectors: function() {
            var e = $("#video-button"),
                t = $("#photos-button"),
                a = $("#productVideo_mobile video").get(0);
            a && a.pause(), e.off("click").on("click", function() {
                FL.pdp.Videos.switchToMediaDisplay("video"), FL.pdp.Videos.sendVideoClickEvent()
            }), t.off("click").on("click", function() {
                FL.pdp.Videos.switchToMediaDisplay("photos")
            })
        },
        switchToMediaDisplay: function(e) {
            var t = $("#video-panel"),
                a = $("#mobileImageSlider"),
                i = $("#video-button"),
                o = $("#photos-button"),
                r = $(".pdp-image-mobile .pdp-image-icons"),
                n = $("#productVideo_mobile video").get(0);
            switch (e) {
                case "video":
                    t.addClass("selected"), i.addClass("selected"), a.removeClass("selected"), o.removeClass("selected"), r.hide(), n.play();
                    break;
                case "photos":
                    n && n.pause(), a.addClass("selected"), o.addClass("selected"), t.removeClass("selected"), i.removeClass("selected"), r.show(), $("#mobileImageSlider").slick("setPosition")
            }
        },
        initClickToPlay: function(e) {
            var t = $("#video-modal"),
                a = $("#video-modal #productVideo video").get(0);
            t.foundation(), a && (a.pause(), t.on("closed.zf.reveal", function() {
                a.pause()
            })), $("a.video img").off("click").on("click", function() {
                FL.pdp.Videos.openVideoModal()
            }), $("a.video").off("keypress").on("keypress", function(e) {
                13 == e.which && FL.pdp.Videos.openVideoModal()
            })
        },
        openVideoModal: function() {
            $("#video-modal").foundation("open"), $("#video-modal #productVideo video").get(0).load(), $("#video-modal #productVideo video").get(0).play()
        }
    }
}, FL.pdp), FL.pdp.Cart = jQuery.extend(!0, {
    productItemId: "",
    selectedInv: "",
    selectedSku: "",
    selectedBogo: "false",
    maxUnitsPerOrder: "",
    addTries: 0,
    errorCodes: [],
    tooltipTimer: null,
    smtrQuantity: 0,
    smtrPrice: "",
    init: function() {
        $("#buttonAddToCart").on("click", FL.pdp.Cart.addToCart), FL.pdp.Cart.initTooltips(), FL.pdp.Cart.productItemId = $("#productItemId").val();
        var e = "";
        $("#alternateColors").find("a").each(function() {
            $(this).find("div.color-image").hasClass("selected") && (e = $(this).attr("data-productid"))
        }), FL.pdp.Cart.checkAvailableInStoreOnly(e), FL.pdp.Cart.checkSoldOut(e), FL.pdp.Cart.checkAvailability(), FL.pdp.Cart.populateErrorCodes(), FL.pdp.Cart.checkInStorePickup()
    },
    addToCart: function() {
        var e = parseInt($("#productQuantity").val()),
            t = !1;
        if ($("#sizeListMobile").is(":visible") ? t = !!$("#sizeListMobile").val() : t = "" != FL.pdp.Cart.selectedSku, t) {
            if ($("#radioStorePickup").is(":checked")) {
                if (!$(".ispu-location")[0].dataset.storeName) return FL.pdp.Cart.displaySelectLocationMessage(!0), !1;
                var a = Cookies.get("fl_selected_store");
                if (void 0 != a && null != FL.InStorePickup.cartSelectedStoreId && "" != FL.InStorePickup.cartSelectedStoreId.trim() && 1 == FL.InStorePickup.orderContainOnlyISPUItem && a.split(":")[0] != FL.InStorePickup.cartSelectedStoreId) return FL.InStorePickup.openSwitchStoreModal(), !1
            }
            $("#buttonAddToCart").hasClass("addingToCart") || (FL.pdp.Cart.addTries++, $("#buttonAddToCart").addClass("addingToCart"), FL.pdp.Cart.addTries <= 3 ? (FL.global.showOverlay(), "true" == FL.pdp.Cart.selectedBogo && (e = e % 2 == 1 ? e + 1 : e), $("#cartCatalogRefIds").val(FL.pdp.Cart.selectedSku), $("#cartProductId").val($("#productItemId").val()), $("#cartQuantity").val(e), $("#cartItems").val(""), $.ajax({
                data: $("#addToCart").serialize(),
                type: "POST",
                url: $("#addToCart").attr("action"),
                success: function(t) {
                    var a = $(t).find(".formErrorsRendererAddToCart .errorMessage"),
                        i = $("#productPrices");
                    if (a.length > 0) {
                        if (FL.global.hideOverlay(), void 0 !== a.html()) {
                            var o = $.trim(a.html()),
                                r = "An error occurred while adding the item to the cart.";
                            "Pre Release Product" == o ? r = FL.pdp.Cart.errorCodes[-8e3] : FL.pdp.Cart.errorCodes[o] && (r = FL.pdp.Cart.errorCodes[o]);
                            var n = "Add to Cart Error"; - 9e3 == o && (n = "Item Cannot Be Added To Cart", r = $(t).find("#displayMaxQtyError").html()), $("#buttonAddToCart").removeClass("addingToCart"), $(document).on("open.zf.reveal", "#addToCartErrorModal", function() {
                                $("#addToCartErrorModal .modal-header .h1").html(n), $("#addToCartErrorModal .contents").html(" ").append(r)
                            }), $("#addToCartErrorModal").foundation("open")
                        }
                    } else {
                        if ($("#buttonAddToCart").removeClass("addingToCart"), FL.Tealium.clickPDPAddToCart(), $(".product_count_tag").load(window.location.href + " .product_count_tag"), FL.pdp.Cart.addTries = 0, FL.global.hideOverlay(), FL.cart.slideOut("pdp"), FL.global.updateBagCount(), FL.DynamicCart.updateDynamicCart(), FL.pdp.Cart.smtrQuantity = e, FL.pdp.Cart.smtrPrice = i.find(".nowPrice").length > 0 ? i.find(".nowPrice").text() : i.find(".fullPrice").text(), FL.pdp.Cart.smtrPrice = FL.pdp.Cart.smtrPrice.replace("$", "").replace(",", ""), FL.Reflektion.isRfkOn(7)) {
                            var s = i.find(".productPrice:not(.hide)").find(".nowPrice").length > 0 ? i.find(".productPrice:not(.hide)").find(".wasPrice").text() : i.find(".productPrice:not(.hide)").find(".fullPrice").text(),
                                l = {
                                    type: "a2c",
                                    name: "pdp",
                                    value: {
                                        products: [{
                                            sku: FL.pdp.Cart.selectedSku,
                                            prod_id: $("#productItemId").val(),
                                            quantity: FL.pdp.Cart.smtrQuantity,
                                            prod_style_color: $(".color-image.selected").parent().data("styleid"),
                                            price: parseFloat(FL.pdp.Cart.smtrPrice),
                                            price_original: parseFloat(s.replace("$", "").replace(",", ""))
                                        }]
                                    }
                                };
                            rfk.push(["trackEvent", l])
                        }
                        setTimeout(FL.pdp.Cart.smrtAddToCart, 500), setTimeout(function() {
                            FL.DynamicYield.addCartEvent(!1)
                        }, 500);
                        var d = i.find(".nowPrice").length > 0 ? i.find(".nowPrice").text() : i.find(".fullPrice").text();
                        d = parseFloat(d.replace("$", ""));
                        var c = {
                            product_id: $("#productItemId").val().toString(),
                            style_id: $("#productStyleId").val().toString(),
                            color_id: $("#productColorId").val().toString(),
                            size: selectedSize.toString(),
                            quantitiy: e,
                            price: d
                        };
                        if (FL.optimove.reportEvent("add_cart", c), $("#radioStorePickup").is(":checked")) {
                            var u = $("#ispuConBlk  .pickupInStoreLabel").text().includes("Store Pickup"),
                                p = $("#ispuConBlk  .pickupInStoreLabel").text().includes("Contact-Free"),
                                h = $("#ispuConBlk .ispu-location").attr("data-store-id"),
                                m = $("#ispuConBlk .ispu-location").attr("data-store-name");
                            FL.InStorePickup.AJAX.updateStorePickupSession(u, p, h, m)
                        } else FL.InStorePickup.AJAX.updateStorePickupSession(!1, !1, "", "")
                    }
                }
            })) : ($("#buttonAddToCart").removeClass("addingToCart"), FL.pdp.Cart.addTries = 0))
        } else FL.pdp.Cart.displaySelectSizeMessage(!0)
    },
    smrtAddToCart: function() {
        var e, t, a = FL.pdp.Cart,
            i = $.trim($("#orderSummaryOrderTotal").text()).replace("$", "").replace(",", "");
        i.length > 0 ? (e = window._smtr || [], t = $("#styleColors").find(".styleColorIds").html().replace(" - ", "").replace("&nbsp;", "-"), e.push(["addToCart", {
            cartItems: [{
                productId: t,
                qty: a.smtrQuantity,
                price: a.smtrPrice
            }],
            cartTotal: i
        }]), $("#cartSlide").append('<h2 role="alert" style="display:none;">The product was added correctly.</h2>'), setTimeout(function() {
            $("#modal_description").focus()
        }, 500)) : setTimeout(FL.pdp.Cart.smrtAddToCart, 500)
    },
    populateErrorCodes: function() {
        var e = FL.pdp.Cart;
        e.errorCodes[-1e3] = "Order amount exceeds available inventory.  Please reduce the requested quantity.", e.errorCodes[-2e3] = "You have exceeded the maximum number of items allowed per customer.  Please reduce the requested quantity.", e.errorCodes[-3e3] = "You have selected an item that is out of stock.  Please select another item.", e.errorCodes[-4e3] = "You have selected an invalid quantity.  Please change the requested quantity.", e.errorCodes[-5e3] = "The selected size is empty. Please select a size and retry.", e.errorCodes[-6e3] = "The product is not active. Cannot add to cart.", e.errorCodes[-7e3] = "An error occurred while applying the coupon. Please contact Customer Care if the coupon is not applied during checkout.", e.errorCodes[-8e3] = "An error occurred while adding the item to the cart.", e.errorCodes[-9e3] = "You have exceeded the maximum number of items allowed per customer.", e.errorCodes[-9001] = "You have exceeded the maximum number of items allowed per customer.", e.errorCodes.default = "An error has occurred.  Please try again."
    },
    checkAvailability: function() {
        var e = "" === FL.pdp.Cart.selectedInv ? "1" : decode64(FL.pdp.Cart.selectedInv);
        FL.pdp.Cart.updateQuantitySelect(e), FL.pdp.Cart.checkStoreAvailability()
    },
    onChangeCheckStoreAvailability: function() {
        FL.pdp.Cart.checkStoreAvailability()
    },
    checkStoreAvailability: function() {
        if ($("#radioStorePickup").is(":checked") && FL.InStorePickup.selectedStoreId) {
            var e = FL.pdp.Cart.selectedSku;
            FL.InStorePickup.AJAX.availabilityLookup({
                data: {
                    storeIds: FL.InStorePickup.selectedStoreId,
                    productId: FL.pdp.Cart.productItemId,
                    skuId: e,
                    quantity: $("#productQuantity").val()
                },
                success: FL.pdp.Cart.checkStoreAvailabilitySuccess
            })
        }
    },
    checkStoreAvailabilitySuccess: function(e) {
        if (e && e.stores)
            if ("false" == e.stores[0].available) {
                var t = $.trim($(".ispu-location").attr("data-store-name"));
                t || (t = "this store"), $(".store-pickup-message").html("Not available at " + t + ". Please select a different location."), $(".store-pickup-message").addClass("show"), $("#buttonAddToCart").prop("disabled", !0)
            } else if ($(".store-pickup-message").removeClass("show"), $("#buttonAddToCart").prop("disabled", !1), null === FL.InStorePickup.selectedStoreId) {
            var a = $(".ispu-location").attr("data-store-id"),
                t = $(".ispu-location").attr("data-store-name");
            FL.InStorePickup.Modal.saveStore(a, t)
        }
    },
    updateQuantitySelect: function(e) {
        var t = parseInt($(".maxUnitsPerOrderItem").val(), 10),
            a = parseInt(e, 10),
            o = $(".color-image.selected").parent().attr("data-productid"),
            r = $("#maxQty_" + o).val();
        r > 0 && parseInt(r, 10) <= a ? FL.pdp.Cart.maxUnitsPerOrder = parseInt(r, 10) : FL.pdp.Cart.maxUnitsPerOrder = t <= a ? t : a, quantityLength = FL.pdp.Cart.maxUnitsPerOrder, selectedValue = parseInt($("#productQuantity").val(), 10), selectedValue = "true" == $(FL.pdp.activeSizeChart).find("button .active").attr("data-bogo") && selectedValue % 2 == 1 ? selectedValue + 1 : selectedValue, selectedValue = selectedValue > quantityLength ? quantityLength : selectedValue;
        var n = [];
        for (i = 1; i <= quantityLength; i++) n.push('<option value="' + i + '">' + i + "</option>");
        $("#productQuantity").find("options").remove().end().html(n.join("")).find('option[value="' + selectedValue + '"]').attr("selected", !0)
    },
    displaySelectLocationMessage: function(e, t) {
        !$("#pdpISPUFlagOff").length > 0 && (function(e) {
            var t = $(".pickupInStoreLabel");
            clearTimeout(FL.pdp.Cart.tooltipTimer), t.foundation("show"), $(window).on("resize", function() {
                t.foundation("hide")
            }), FL.pdp.Cart.tooltipTimer = setTimeout(function() {
                t.foundation("hide")
            }, 3e3)
        }(), $(".pickupInStoreLabel").attr("tabindex", "-1"), $(".pickupInStoreLabel").css("outline", "none"), $(".pickupInStoreLabel").focus(), $(".pickupInStoreLabel").attr("aria-label", "Select a location to continue"))
    },
    displaySelectSizeMessage: function(e, t) {
        var a = $(".add-to-cart-tooltip"),
            i = function(e) {
                var t = $(e);
                clearTimeout(FL.pdp.Cart.tooltipTimer), a.css("width", t.width() + "px"), t.foundation("show"), $(window).on("resize", function() {
                    t.foundation("hide")
                }), FL.pdp.Cart.tooltipTimer = setTimeout(function() {
                    t.foundation("hide")
                }, 3e3)
            };
        Foundation.MediaQuery.atLeast("medium") || FL.global.isJDSport() ? (i(FL.pdp.activeSizeChart), $(FL.pdp.activeSizeChart).attr("tabindex", "-1"), $(FL.pdp.activeSizeChart).css("outline", "none"), $(FL.pdp.activeSizeChart).focus(), $(FL.pdp.activeSizeChart).attr("aria-label", "Select a size to continue")) : $("html, body").animate({
            scrollTop: $("#mobileAlternateColorsFLSlider").offset().top
        }, 1e3, function() {
            i("#productSizesMobile"), $("#sizeListMobile").attr("tabindex", "-1"), $("#sizeListMobile").css("outline", "none"), $("#sizeListMobile").focus(), $("#sizeListMobile").attr("aria-label", "Select a size to continue")
        })
    },
    checkSoldOut: function(e) {
        "true" == $("input[data-soldproductid='" + e + "']").val() ? ($("#buttonAddToCart").prop("disabled", !0), $("#deliveryMethodRadios").hide()) : ($("#buttonAddToCart").prop("disabled", !1), $("#deliveryMethodRadios").show())
    },
    checkAvailableInStoreOnly: function(e) {
        "true" == $("#wfl_" + e).val() ? ($(".wfl-message").addClass("show"), $("#radioStorePickup").prop("checked", "checked"), $("#radioShipToHome").prop("disabled", "disabled"), $("#radioShipToHome").parent().addClass("control--disabled")) : ($(".wfl-message").removeClass("show"), $("#radioShipToHome").prop("checked", "checked"), $("#radioShipToHome").removeAttr("disabled"), $("#radioShipToHome").parent().removeClass("control--disabled"))
    },
    checkInStorePickup: function() {
        var e = $("#productSizes .block-grid--sizes button").first().data("sku");
        if (void 0 != e) {
            var t = decode64(e);
            $.ajax({
                url: FL.contextPath + "/browse/gadgets/checkSkuAttributes.jsp?skuRequest=" + t,
                type: "GET"
            }).done(function(e) {
                if ("true" == e.IsSSEProduct || "true" == e.onlineOnlyFlag || "true" == e.dropShipOnlyFlag) $("#radioShipToHome").prop("checked", "checked"), $("#radioStorePickup").prop("disabled", "disabled"), $("#radioStorePickup").parent().addClass("control--disabled"), $(".ispu-location").html("Store Pickup Not Available");
                else {
                    var t = Cookies.get("fl_selected_store");
                    if ($("#radioStorePickup").prop("disabled", !1), $("#radioStorePickup").parent().removeClass("control--disabled"), void 0 !== t && null !== t && t.indexOf(":") > 0) {
                        var a = t.split(":");
                        $(".ispu-location").attr("data-store-id", a[0]), $("#storeId").val(a[0]), FL.InStorePickup.selectedStoreId = a[0], $(".ispu-location").attr("data-store-name", a[1])
                    }
                }
            }).fail(function(e, t, a) {
                console.log("failed: ", e.status), console.log(a)
            })
        }
    },
    initTooltips: function() {
        new Foundation.Tooltip($("#productSizesMobile"), {
            tipText: "Select a size to continue.",
            tooltipClass: "add-to-cart-tooltip-mobile",
            triggerClass: "",
            disableHover: !0,
            clickOpen: !1,
            disableForTouch: !0,
            vOffset: -3
        }), $("#productStoreSizes").length > 0 && new Foundation.Tooltip($("#productStoreSizes"), {
            tipText: "Select a size to continue.",
            tooltipClass: "add-to-cart-tooltip",
            triggerClass: "",
            disableHover: !0,
            clickOpen: !1,
            disableForTouch: !0
        }), new Foundation.Tooltip($("#productSizes"), {
            tipText: "Select a size to continue.",
            tooltipClass: "add-to-cart-tooltip",
            triggerClass: "",
            disableHover: !0,
            clickOpen: !1,
            disableForTouch: !0
        }), !$("#pdpISPUFlagOff").length > 0 && new Foundation.Tooltip($(".pickupInStoreLabel"), {
            tipText: "Select a location to continue.",
            tooltipClass: "add-location-tooltip",
            triggerClass: "",
            disableHover: !0,
            clickOpen: !1,
            disableForTouch: !0
        }), $("#sizeListMobile").on("click", function() {
            $("#productSizesMobile").foundation("hide")
        }), $(FL.pdp.activeSizeChart).on("click", function() {
            $(this).foundation("hide")
        })
    }
}, FL.pdp.Cart), FL.pdp.Colors = jQuery.extend(!0, {
    init: function() {
        $("#alternateColors").find("a").on("click", FL.pdp.Colors.Events.altMouseClick);
        var e = $(".sizeOptions:visible").not(".disabled");
        e.on("click", FL.pdp.Colors.Events.sizeClick), 1 === e.length && e.click(), $("#sizeListMobile").off().on("change", FL.pdp.Colors.Events.sizeChangeMobile)
    },
    Events: {
        altMouseEnter: function(e) {
            var t = $(this).attr("data-productid");
            $(this).find(".color-image").hasClass("selected") || ($(FL.pdp.activeSizeChart).hide(), $("#alternateSizes").find("div.sizeList").hide(), $("#alternateSizes").find("#sizes_" + t).show(), $("#productPrices").hide(), $("#alternatePrices").find("div.priceList").hide(), $("#alternatePrices").find("#prices_" + t).show(), $("#styleColors").hide(), $("#alternateStyleColors").find("div.styleColorList").hide(), $("#alternateStyleColors").find("#stylecolor_" + t).show(), $("#pdp_shipping").hide(), $("#altfreeShippingMessage").find("span.freeShipping").hide(), $("#altfreeShippingMessage").find("#freeshipping_" + t).show(), $("#specialMessaging").hide(), $("#altSpecialMessaging").find("span.specialMessaging").hide(), $("#altSpecialMessaging").find("#specialmessaging_" + t).show())
        },
        altMouseLeave: function(e) {
            $("#alternateSizes").find("div.sizeList").hide(), $(FL.pdp.activeSizeChart).show(), $("#alternatePrices").find("div.priceList").hide(), $("#productPrices").show(), $("#alternateStyleColors").find("div.styleColorList").hide(), $("#styleColors").show(), $("#altfreeShippingMessage").find("span.freeShipping").hide(), $("#pdp_shipping").show(), $("#altSpecialMessaging").find("span.specialMessaging").hide(), $("#specialMessaging").show()
        },
        altMouseClick: function(e) {
            var t = $(this).attr("data-productid"),
                a = $(this).attr("data-styleid"),
                i = t.split("-");
            $("#productStyleId").val(i[0]), $("#productColorId").val(i[1]), $(".color-image").removeClass("selected"), $(this).find(".color-image").addClass("selected"), $(".color-image-mobile").removeClass("selected"), $("#mobileAlternateColorsFLSlider .fl-slider-track>div").each(function() {
                $(this).find("a").attr("data-productid") == t && $(this).find(".color-image-mobile").addClass("selected")
            });
            var o = $(this).attr("data-productid");
            FL.pdp.Colors.changeColor(t, a, o), FL.pdp.Cart.checkInStorePickup(), FL.pdp.Colors.Events.checkSelectedSize()
        },
        setSelectedSize: function(e) {
            selectedSize = e
        },
        checkSelectedSize: function(e, t) {
            e = e || !1, t = t || !1;
            var a = $("#sizeListMobile");
            if ("undefined" == typeof selectedSize) return !1;
            e ? $(FL.pdp.activeSizeChart).find(".sizeVariable").not(".hide").find("[data-size='" + selectedSize + "']").click() : t ? a.find("option[value='" + selectedSize + "']").length > 0 && a.val(selectedSize).change() : $(FL.pdp.activeSizeChart).find("[data-size='" + selectedSize + "']").trigger("click"), e || FL.Tealium.clickPDPSelection("Select Color")
        },
        sizeClick: function(e) {
            $(FL.pdp.activeSizeChart).find("button").removeClass("active"), $("#productStoreSizes").find("button").removeClass("active"), $(this).addClass("active");
            var t = $(this).attr("data-size");
            $("#sizeListMobile").val(t), FL.pdp.Colors.Events.setSelectedSize(t), FL.pdp.Cart.selectedSku = $(this).attr("data-sku"), FL.pdp.Cart.selectedSku = decode64(FL.pdp.Cart.selectedSku), FL.pdp.Cart.selectedInv = $(this).attr("data-val"), FL.pdp.Cart.selectedBogo = $(this).attr("data-bogo"), FL.pdp.Cart.checkAvailability()
        },
        sizeChangeMobile: function(e) {
            var t = $(this).val();
            t && $(this).addClass("selected"), FL.pdp.Colors.Events.setSelectedSize(t),
                $(FL.pdp.activeSizeChart).find("button").removeClass("active"), $(FL.pdp.activeSizeChart).find("button").each(function() {
                    $(this).attr("data-size") == t && $(this).addClass("active")
                }), FL.pdp.Cart.selectedSku = $(this).find("option:selected").attr("data-sku"), void 0 !== FL.pdp.Cart.selectedSku && (FL.pdp.Cart.selectedSku = decode64(FL.pdp.Cart.selectedSku)), FL.pdp.Cart.selectedInv = $(this).find("option:selected").attr("data-stocklevel"), FL.pdp.Cart.selectedBogo = $(this).find("option:selected").attr("data-bogo"), FL.pdp.Cart.checkAvailability()
        },
        altMouseClickMobile: function(e) {
            var t = $(this).attr("data-productid"),
                a = t.split("-");
            $("#productStyleId").val(a[0]), $("#productColorId").val(a[1]), $(".color-image-mobile").removeClass("selected"), $(this).find(".color-image-mobile").addClass("selected"), $(".color-image").removeClass("selected"), $("#alternateColors").find("a").each(function() {
                $(this).attr("data-productid") == t && $(this).find(".color-image").addClass("selected")
            });
            var i = $(this).attr("data-productid"),
                o = $(this).attr("data-styleid");
            FL.pdp.Colors.changeColor(t, o, i);
            var r = $("#mobileAlternateColorsFLSlider"),
                n = $(window).width(),
                s = $(this).find(".color-image-mobile").outerWidth(),
                l = (n - s) / 2,
                d = $(this).offset().left,
                c = Math.abs(r.find(".fl-slider-track").offset().left);
            if (d > l) {
                var u = d - l;
                r.animate({
                    scrollLeft: c + u + 7.5
                }, 500)
            } else {
                var u = l - d;
                r.animate({
                    scrollLeft: c - u + 7.5
                }, 500)
            }
            FL.pdp.Colors.Events.checkSelectedSize(!1, !0)
        }
    },
    changeColor: function(e, t, a) {
        FL.pdp.Cart.selectedSku = "", FL.pdp.Cart.selectedInv = "", FL.pdp.Cart.selectedBogo = "", $(".store-pickup-message").removeClass("show"), $("#productPrices").html($("#prices_" + e).html()), $("#styleColors").html($("#stylecolor_" + e).html()), $("#pdp_shipping").html($("#freeshipping_" + e).html());
        var i = $.trim($("#specialmessaging_" + e).html());
        $("#pdp_sales").html(i), $(".enableWCOptimizationOff").length > 0 ? FL.pdp.updateWinnersCircle() : $(".enableWCOptimizationOn").length > 0 && ($(".winnerCrcleContent").hide(), $("#winnersCirclePromoRefresh").html($("#winnerCircleRefresh_" + e).html())), $("#radioShipToHome").is(":checked") && FL.pdp.Cart.checkAvailableInStoreOnly(e), FL.pdp.Cart.checkSoldOut(e), FL.pdp.afterPayClickModal(), $("#radioShipToHome").is(":checked") ? ($(FL.pdp.activeSizeChart).html($("#sizes_" + e).html()), FL.pdp.Sizes.checkAvailabilityInStore(FL.pdp.Sizes.list.productStoreSizes, e)) : FL.pdp.Sizes.list.productStoreSizes && $("#radioStorePickup").is(":checked") ? FL.pdp.Sizes.rebuildSizeCharts(FL.pdp.Sizes.list, t) : $("#radioStorePickup").is(":checked") && "" != $("#storeId").val() && FL.InStorePickup.updateStoreStockLevels(e, t, a, $("#storeId").val()), FL.pdp.Colors.populateSizeDropdown(e);
        var o = $(".sizeOptions:visible").not(".disabled");
        o.off().on("click", FL.pdp.Colors.Events.sizeClick), 1 === o.length && o.click(), $("#productQuantity option:selected").removeAttr("selected"), FL.pdp.Images.getImages(a, t, "desktop"), FL.pdp.Images.getImages(a, t, "mobile");
        var r = $("#productPrices .tooltip-help");
        if (r.length > 0) {
            var n = r.attr("data-toggle");
            $("#" + n).remove(), r.attr("title", "The suspense is killer. Add this to your cart and find your price.").off(".zf.trigger .zf.tooltip").removeClass("has-tip top right left").removeAttr("aria-describedby aria-haspopup data-disable-hover data-resize data-toggle data-yeti-box data-e"), r.foundation()
        }
        FL.pdp.initCalculatePointsReward(), FL.pdp.initCalculateStatusPointsReward(), FL.pdp.initSmarterHQPageView()
    },
    populateSizeDropdown: function(e) {
        var t = "";
        if (FL.pdp.Sizes.list) {
            var a = $("#radioStorePickup").is(":checked") ? FL.pdp.Sizes.list.productStoreSizes : FL.pdp.Sizes.list.productSizes,
                i = 0;
            $(a).each(function() {
                this.productId == e && (i++, "unavailable" != this.sizeClass && (t += "<option value='" + this.sizeValue + "' data-productid='" + this.productId + "' data-sku='" + this.sku + "' data-stocklevel='" + this.stockLevel + "' data-bogo='" + this.bogo + "'>" + this.sizeValue + "</option>"))
            }), i > 0 ? ($("#sizeListMobile").empty().append("<option value='' disabled></option>").append(t), $("#buttonAddToCart").prop("disabled", !1), setTimeout(function() {
                "undefined" != typeof selectedSize && $("#sizeListMobile").val(selectedSize).change()
            }, 200)) : ($("#sizeListMobile").empty().append("<option value='' disabled selected>Sorry, no matching sizes at this location. Select &quot;Ship to an address&quot; to check online availability.</option>"), $("#sizeListMobile:visible").length > 0 && $("#buttonAddToCart").prop("disabled", !0))
        }
        if ($("#sizeListMobile").val(""), $("#sizeListMobile").off().on("change", FL.pdp.Colors.Events.sizeChangeMobile), 2 === $("#sizeListMobile").children("option").length) {
            var o = $("#sizeListMobile").children("option").last().val();
            $("#sizeListMobile").val(o).change()
        }
    }
}, FL.pdp.Colors), FL.pdp.Sizes = jQuery.extend(!0, {
    list: {},
    init: function() {
        var e = !1,
            t = FL.contextPath + "/browse/json/productSizesJson.jsp?productId=" + $("#productItemId").val() + "&styleId=" + $("#productStyleId").val() + "&colorId=" + $("#productColorId").val();
        "" != $("#storeId").val() && void 0 !== $("#storeId").val() ? (t = t + "&storeId=" + $("#storeId").val(), FL.pdp.Sizes.currentStoreList = $("#storeId").val()) : e = !0, $.ajax({
            type: "GET",
            url: t,
            success: function(t) {
                var a = $("#productStyleId").val() + "-" + $("#productColorId").val();
                e && (t.productStoreSizes = "null"), FL.pdp.Sizes.list = t, FL.pdp.Sizes.rebuildSizeCharts(FL.pdp.Sizes.list, a), FL.pdp.Colors.populateSizeDropdown(a)
            },
            error: function() {}
        })
    },
    rebuildSizeCharts: function(e, t) {
        var a, i, o = [],
            r = [],
            n = t.replace("-", "_");
        FL.pdp.Cart.selectedSku = "";
        var s = "";
        FL.global.isJDSport() || (s = "hide-for-small-only"), $("#productSizes, #productStoreSizes").empty();
        var l = '<div class="row block-grid--sizes small-up-5 large-up-8 no-bullet mb-0 ' + s + '"></div>';
        if ($.isArray(e.productSizes) && ($.each(e.productSizes, function(e, a) {
                var i = "unavailable" === a.sizeClass ? "disabled" : "";
                "null" == a.productId || a.productId != t && a.productId != n || o.push("<div class='column'><button class='sizeOptions button hollow button--grid expanded " + i + "'aria-label='" + a.sizeValue + " " + a.sizeClass + "'data-sku='" + a.sku + "'data-bogo='" + a.bogo + "'data-val='" + a.stockLevel + "'data-size='" + a.sizeValue + "'>" + a.sizeValue + "</button></div>")
            }), a = o.join("")), a.length > 0 ? ($(l).appendTo("#productSizes").html(a), $("#buttonAddToCart").prop("disabled", !1)) : ($("#productSizes").html('<p class="noMatchingSizes">Sorry, no matching sizes available. Select &quot;Pick up in store&quot; to check store availability.</p>'), $("#productSizes:visible").length > 0 && $("#buttonAddToCart").prop("disabled", !0)), $.isArray(e.productStoreSizes) && ($.each(e.productStoreSizes, function(e, a) {
                var i = "unavailable" === a.sizeClass ? "disabled" : "";
                "null" == a.productId || a.productId != t && a.productId != n || r.push("<div class='column'><button class='sizeOptions button hollow button--grid expanded " + i + "'aria-label='" + a.sizeValue + " " + a.sizeClass + "'data-sku='" + a.sku + "'data-bogo='" + a.bogo + "'data-val='" + a.stockLevel + "'data-size='" + a.sizeValue + "'>" + a.sizeValue + "</button></div>")
            }), i = r.join("")), $("#productStoreSizes").length < 1 && $("#productSizes").after("<div id='productStoreSizes' style='display: none;'></div>"), void 0 != i && null != i && i.length > 0) {
            var d, c = Cookies.get("fl_selected_store");
            c.indexOf(":") > 0 && (d = c.split(":")[2]), $(l).appendTo("#productStoreSizes").html(i), $("#buttonAddToCart").prop("disabled", !1), $("#ispu_shipping").html("FREE PICKUP"), $("#radioStorePickup").attr("disabled", !1), $(".ispu-location").html($(".ispu-location").attr("data-store-name")), $("#ispuConBlk .pickupInStoreLabel").html(d + " Pickup at:")
        } else setTimeout(function() {
            "" != $("#storeId").val() && void 0 !== $("#storeId").val() && ($("#ispu_shipping").html('<span style="color:red">This item is out of stock at ' + $(".ispu-location").attr("data-store-name") + "</span>"), $(".ispu-location").html("Select Location"), $("#radioShipToHome").click(), $("#ispuConBlk .pickupInStoreLabel").html("Store Pickup:"), $("#radioStorePickup").attr("disabled", !0), "undefined" != typeof selectedSize && $("#productSizes .sizeOptions[data-size='" + selectedSize + "']").click())
        }, 800);
        $(".sizeOptions:visible").not(".disabled").off().on("click", FL.pdp.Colors.Events.sizeClick), "undefined" != typeof selectedSize && setTimeout(function() {
            $("#productStoreSizes .sizeOptions[data-size='" + selectedSize + "']").click()
        }, 100)
    },
    sizeLoading: function() {
        $("#productSizes, #productStoreSizes").empty(), $("#sizeListMobile").append("<option value='' disabled selected>Loading sizes...</option>"), $("#productSizes, #productStoreSizes").html($("#desktopSizeLoadingSpinner").html())
    },
    checkAvailabilityInStore: function(e, t) {
        var a = !1,
            i = t.replace("-", "_");
        if ("" != $("#storeId").val() && void 0 !== $("#storeId").val())
            if ($.isArray(e) && $.each(e, function(e, o) {
                    if ("null" != o.productId && (o.productId == t || o.productId == i)) return a = !0, !1
                }), a) {
                var o, r = Cookies.get("fl_selected_store");
                if (r.indexOf(":") > 0) {
                    var n = r.split(":");
                    o = n[2]
                }
                $("#radioStorePickup").attr("disabled", !1), $("#ispu_shipping").html("FREE PICKUP"), $("#ispuConBlk .pickupInStoreLabel").html(o + " Pickup at:"), $(".ispu-location").html($(".ispu-location").attr("data-store-name"))
            } else setTimeout(function() {
                $("#ispu_shipping").html('<span style="color:red">This item is out of stock at ' + $(".ispu-location").attr("data-store-name") + "</span>"), $(".ispu-location").html("Select Location"), $("#ispuConBlk .pickupInStoreLabel").html("Store Pickup:"), $("#radioShipToHome").click(), $("#radioStorePickup").attr("disabled", !0), "undefined" != typeof selectedSize && $("#productSizes .sizeOptions[data-size='" + selectedSize + "']").click()
            }, 1e3)
    }
}, FL.pdp.Sizes), FL.pdp.WishList = jQuery.extend(!0, {
    isInList: !1,
    $button: null,
    init: function() {
        FL.pdp.WishList.favHeartIconInit()
    },
    favHeartIconInit: function() {
        var e = $(".fav-heart-ico");
        e.attr("tabindex", 0), e.attr("aria-label", "Favorite this item"), e.off("click").on("click", function(e) {
            FL.pdp.WishList.clickAddToFavorites(e)
        }), e.off("keypress").on("keypress", function(e) {
            13 == e.which && FL.pdp.WishList.clickAddToFavorites(e)
        }), $(".color-image-mobile.selected").hasClass("favorited") || $(".color-image.selected").hasClass("favorited") ? (FL.global.isJDSport() ? $(".pdp-image-icons .fav-heart-ico").addClass("active") : $(".pdp-image .fav-heart-ico:eq( 2 )").addClass("active"), $(".pdp-image-mobile .fav-heart-ico").addClass("active")) : $(".fav-heart-ico").removeClass("active")
    },
    clickAddToFavorites: function(e) {
        e.stopPropagation(), e.preventDefault();
        var t, a, i = $(e.currentTarget),
            o = $("div.color-image-mobile.selected,div.color-image.selected"),
            r = !$("#myaccount-nav").data("transient");
        $(i).hasClass("active") || $(i).hasClass("unavailable") ? (t = "remove", a = "remove_favorite") : (t = "add", a = "add_favorite", FL.Tealium.clickFavoritesPDPAdd(i), $(i).addClass("activeIntent"));
        var n = {
            product_id: $("#productItemId").val(),
            style_id: $("#productStyleId").val(),
            color_id: $("#productColorId").val()
        };
        FL.optimove.reportEvent(a, n), $.ajax({
            url: FL.contextPath + "/browse/addfavorites.jsp",
            type: "post",
            dataType: "json",
            data: {
                styleId: $("#productStyleId").val(),
                colorId: $("#productColorId").val(),
                prodId: $("#productItemId").val(),
                addOrRemove: t
            }
        }).done(function(e) {
            $("body.jdsports-page").length, FL.global.Favorites.updateHeart(i, t, o), $(".firstTimeTip").on("click", function(e) {
                return e.preventDefault(), !1
            }), $(".firstTimeTip").find(".clickThrough").on("click", function() {
                window.location = r ? "/store/myaccount/favorites.jsp" : "/store/favorites_guest.jsp"
            }), !0 === e.firstTimeFav && ($("#productImageLayout").find(".firstTimeTip").removeClass("hide").delay(5e3).fadeOut("slow"), $(".pdp-image-mobile").find(".firstTimeTip").removeClass("hide").delay(5e3).fadeOut("slow")), e.count >= 11 && !1 === r && ($("#moreFavsModal").foundation("open"), $(i).removeClass("active"))
        }).fail(function(e, t, a) {
            $(i).removeClass("activeIntent"), console.log("failed: ", e.status), console.log(a)
        })
    }
}, FL.pdp.WishList), FL.pdp.SizeChart = jQuery.extend(!0, {
    init: function() {
        $("#sizeChart").on("click", FL.pdp.SizeChart.create)
    },
    create: function(e) {
        var t, a = (FL.pdp.SizeChart, $(this)),
            i = a.data("gender"),
            o = a.data("subgender"),
            r = a.data("type"),
            n = a.data("brand"),
            s = s || window._smtr || [],
            l = [];
        dataContent = null, t = FL.pdp.SizeChart.getModalTitle(n, r), $.ajax({
            url: "/store/browse/gadgets/sizeChart.jsp",
            data: {
                gender: i,
                subgender: o,
                type: r,
                brand: n
            }
        }).done(function(e) {
            $("#sizeChartModal").html(e).foundation("open")
        }), $(document).on("open.zf.reveal", "#sizeChartModal", function() {
            $("#chart").foundation(), 1 == $("#sizeChartTitle").length && $("#chart").find("#sizeChartTitle").text(t), $("#chart").find(".kidsSizingChartLink").on("click", FL.pdp.SizeChart.clickSizingChartLink), Foundation.MediaQuery.atLeast("medium") && $("#sizeChartModal").css("top", "30px"), $("#sizeChartSelectBox").on("change", FL.pdp.SizeChart.selectSizeChartTab);
            var e = $("#sizeChartTabs").find(".tabs-title.is-active").find("a").attr("href");
            $("#sizeChartSelectBox").val(e)
        }), l = ["pageView", {
            pageType: "category",
            catId: "kids-size-pdf",
            catName: "kids-size-pdf",
            brand: n
        }], s.push(l)
    },
    clickSizingChartLink: function(e) {
        var t, a = $("#sizeChart").attr("data-brand"),
            i = i || window._smtr || [];
        t = ["pageView", {
            pageType: "category",
            catId: "kids-size-pdf",
            catName: "kids-size-pdf",
            brand: a
        }], i.push(t)
    },
    selectSizeChartTab: function(e) {
        var t = $(this).val();
        $("#sizeChartTabs").foundation("selectTab", t)
    },
    getModalTitle: function(e, t) {
        var a = "",
            i = "";
        return a = "nike" === e ? "NIKE " : "adidas" === e ? "ADIDAS " : "underarmour" === e ? "UNDER ARMOUR " : "", "nike" === e ? a = "NIKE " : "adidas" === e ? a = "ADIDAS " : "underarmour" === e && (a = "UNDER ARMOUR "), "insoles" === t ? (i = "INSOLES", a = "") : "hats" === t ? (i = "HATS", a = "") : i = "apparel" === t ? "APPAREL" : "socks" === t ? "SOCKS" : "shoes" === t ? "SHOES" : "SIZE CHART", a + i
    }
}, FL.pdp.SizeChart), FL.pdp.BVADA = jQuery.extend(!0, {
    init: function() {
        FL.pdp.BVADA.loadBV()
    },
    loadBV: function() {
        jQuery("#BVSubmissionPopupContainer").length ? FL.pdp.BVADA.loadBVCallback() : setTimeout(function() {
            FL.pdp.BVADA.loadBV()
        }, 100)
    },
    loadBVCallback: function() {
        var e = $("#BazaarVoiceReviews");
        $("#ReviewsMain").attr("aria-hidden", "false"), e.find("#BVRRContainer").attr("tabindex", "0").attr("aria-label", "Reviews"), e.find(".BVRRContentReview").attr("tabindex", "0").attr("aria-label", "User Review"), e.find(".BVRRRatingNormalImage").attr("tabindex", "0"), e.find(".BVRRReviewTitleContainer").attr("tabindex", "0").attr("aria-label", "Review Title"), e.find(".BVRRReviewTitle").attr("tabindex", "0"), e.find(".BVRRReviewText").attr("tabindex", "0")
    }
}, FL.pdp.BVADA), window.FL = window.FL || {}, FL.pdp = FL.pdp || {}, FL.pdp.reviews = FL.pdp.reviews || {}, FL.pdp.reviews = jQuery.extend(!0, {
    productName: "",
    requiredLogin: "false",
    userToken: "",
    overallRatingReplaced: !1,
    filterBarAdded: !1,
    paginationAdded: !1,
    submissionRestyled: !1,
    currentPageNum: 1,
    totalPageNum: 1,
    init: function() {
        FL.pdp.reviews.initBV(), FL.pdp.reviews.restyleRatingStars(), FL.pdp.reviews.addFilterBar(), FL.pdp.reviews.addPagination(), FL.pdp.reviews.initSubmitReview(), FL.pdp.reviews.adjustControlsHeightOnResize()
    },
    initBV: function() {
        FL.pdp.reviews.productName = $(".bVProductName").val(), FL.pdp.reviews.userToken = $(".BVUserToken").val();
        var e = FL.pdp.reviews,
            t = e.convertProductName();
        $BV.configure("global", {
            submissionContainerUrl: document.URL,
            userToken: e.userToken,
            doLogin: function(e, t) {
                window.location = contextPath + "/myaccount/login.jsp?returnurl=" + encodeURIComponent(t)
            },
            doScrollSubmission: function() {
                jQuery("html,body").animate({
                    scrollTop: jQuery("#BVSubmissionContainer").offset().top - 20
                }, 1e3)
            }
        }), $BV.ui("rr", "show_reviews", {
            productId: t
        })
    },
    adjustControlsHeight: function(e) {
        var t = void 0 !== e ? e : 0,
            a = $("#BVRRQuickTakeContentContainerID").outerHeight() - 41 + t;
        $("#respFilterList").css({
            top: a
        })
    },
    adjustControlsHeightOnResize: function() {
        $(window).resize(function() {
            FL.pdp.reviews.adjustControlsHeight(0)
        })
    },
    restyleRatingStars: function() {
        function e() {
            $("#BVRRSummaryContainer").on("click", "*, #BVRRRatingSummaryLinkReadID a", function(e) {
                Foundation.MediaQuery.is("small only") && (e.preventDefault(), $("#ReviewsMain").foundation("open"))
            })
        }
        setTimeout(function() {
            var t = $("#BVRRCustomLeftColumn"),
                a = t.find(".BVRRRatingNormalImage img").attr("src"),
                i = $(".BVRRRatingSummaryNoReviews").length > 0;
            if (a) {
                var o = FL.pdp.reviews.parseBVRatingUrl(a),
                    r = $("#respRatingStars"),
                    n = $("#BVRRSummaryContainer");
                FL.pdp.reviews.setStarRating(r, o), t.html(r.html()), n.removeClass("invisible"), $("#smallRatingStarsContainer").html(n.html()), e(), FL.pdp.reviews.overallRatingReplaced = !0, FL.pdp.reviews.adjustControlsHeight(15)
            } else i ? ($("#BVRRSummaryContainer").removeClass("invisible"), e(), FL.pdp.reviews.overallRatingReplaced = !0) : FL.pdp.reviews.overallRatingReplaced || FL.pdp.reviews.restyleRatingStars()
        }, 1e3)
    },
    parseBVRatingUrl: function(e) {
        var t = e.split("/5/rating"),
            a = t[0].split("/"),
            i = a[a.length - 1],
            o = i.split("_")[0];
        return i.split("_").length > 1 && (o += "." + i.split("_")[1]), o
    },
    setStarRating: function(e, t) {
        var a = parseInt(t);
        if (a && !isNaN(t)) {
            e.find(".icon-star").slice(0, t).removeClass("icon-star").addClass("icon-star-filled");
            var i = parseFloat(t),
                o = i - a,
                r = e.find(".icon-star").first().removeClass("icon-star");
            0 < o && o < .2 ? r.addClass("icon-star-20-percent") : o < .45 ? r.addClass("icon-star-40-percent") : o < .55 ? r.addClass("icon-star-50-percent") : o < .8 ? r.addClass("icon-star-60-percent") : o >= .8 && r.addClass("icon-star-80-percent")
        } else $("#respRatingStarsContainer").hide()
    },
    addFilterBar: function() {
        setTimeout(function() {
            if ($("#BVRRDisplayContentSelectBVFrameID").length > 0) {
                var e = $("#respFilterList");
                e.removeClass("hide"), e.find(".filter").on("click", FL.pdp.reviews.onFilterClick), FL.pdp.reviews.filterBarAdded = !0
            } else FL.pdp.reviews.filterBarAdded || FL.pdp.reviews.addFilterBar()
        }, 1e3)
    },
    onFilterClick: function(e) {
        e.preventDefault();
        var t = $(e.currentTarget),
            a = t.attr("data-id"),
            i = $("#" + a);
        i.length > 0 && $("#BVRRDisplayContentSelectBVFrameID").val(i.attr("value")).trigger("change")
    },
    addPagination: function() {
        setTimeout(function() {
            if ($("#BVRRDisplayContentFooterID").find(".BVRRPageBasedPager").length > 0) {
                var e = $("#respReviewPagination").removeClass("hide"),
                    t = e.find(".pag-select");
                t.empty(), FL.pdp.reviews.totalPageNum = parseInt($(".BVRRPageNumber:last").text());
                for (var a = 1; a <= FL.pdp.reviews.totalPageNum; a++) t.append("<option value='" + a + "'>" + a + "</option>");
                1 === FL.pdp.reviews.totalPageNum && t.attr("disabled", "disabled"), t.on("change", FL.pdp.reviews.onPaginationSelectChange), e.find(".pag-button").first().on("click", FL.pdp.reviews.onPrevClick).hide(), e.find(".pag-button").last().on("click", FL.pdp.reviews.onNextClick).toggle(FL.pdp.reviews.totalPageNum > 1), e.find(".pag-total").text(FL.pdp.reviews.totalPageNum), FL.pdp.reviews.paginationAdded = !0
            } else FL.pdp.reviews.paginationAdded || FL.pdp.reviews.addPagination()
        }, 1e3)
    },
    onPaginationSelectChange: function() {
        var e = $(this).val(),
            t = $(".BVRRPageBasedPager .BVRRPageNumber a").last(),
            a = t.attr("data-bvjsref");
        t.attr("data-bvjsref", a.replace(/page=[0-9]*&/, "page=" + e + "&")), $BV.Internal.Requester.asJsLink(t).follow(), FL.pdp.reviews.currentPageNum = parseInt(e), FL.pdp.reviews.toggleButtons()
    },
    onPrevClick: function() {
        var e = $("#respReviewPagination"),
            t = e.find(".pag-select"),
            a = $("[name='BV_TrackingTag_Review_Display_PrevPage']");
        $BV.Internal.Requester.asJsLink(a).follow(), FL.pdp.reviews.currentPageNum--, t.val(FL.pdp.reviews.currentPageNum), FL.pdp.reviews.toggleButtons()
    },
    onNextClick: function() {
        var e = $("#respReviewPagination"),
            t = e.find(".pag-select"),
            a = $("[name='BV_TrackingTag_Review_Display_NextPage']");
        $BV.Internal.Requester.asJsLink(a).follow(), FL.pdp.reviews.currentPageNum++, t.val(FL.pdp.reviews.currentPageNum).trigger("change"), FL.pdp.reviews.toggleButtons()
    },
    toggleButtons: function() {
        var e = $("#respReviewPagination"),
            t = e.find(".pag-button").first(),
            a = e.find(".pag-button").last();
        t.toggle(1 !== FL.pdp.reviews.currentPageNum), a.toggle(FL.pdp.reviews.currentPageNum !== FL.pdp.reviews.totalPageNum)
    },
    initSubmitReview: function() {
        -1 !== window.location.search.indexOf("REVIEW_SUBMISSION") && setTimeout(function() {
            if ($("#BVSubmissionContainer").find("form").length > 0) {
                $("#BVFieldUsernicknameContainerID, #BVModuleNicknameID").insertBefore("#BVFieldTitleContainerID");
                var e = $("#BVFieldContextdatavaluePurchaseReasonContainerID");
                e.find("select option").first().text("Reason for buying"), e.insertBefore("#BVFieldTitleContainerID"), $("#BVSectionMediaUploadID").insertAfter("#BVSectionReviewSubmissionID"), $("#BVModuleReviewSubmissionTipsID").insertAfter("#BVSectionMediaUploadID"), $(".BVRRCustomWriteReviewBlock").hide(), Foundation.MediaQuery.is("small only") && $("#ReviewsMain").foundation("open"), FL.pdp.reviews.submissionRestyled = !0
            } else FL.pdp.reviews.submissionRestyled || FL.pdp.reviews.initSubmitReview()
        }, 1e3)
    },
    convertProductName: function() {
        var e, t, a, i = FL.pdp.reviews,
            o = [];
        for (a = i.productName.trim(), a = a.replace(/&#039;/g, "'").replace(/&#39;/g, "'"), a = a.replace(/ /g, "_"), e = 0; e < a.length; e++) t = a.charCodeAt(e), t >= 65 && t <= 90 || t >= 97 && t <= 122 || t >= 48 && t <= 57 || "_" == a[e] ? o.push(a[e]) : o.push("_char" + t + "_");
        return o.join("")
    }
}, FL.pdp.reviews), window.FL = window.FL || {}, FL.DynamicCart = {
    displayDynamicCart: !0,
    totalQuantity: 0,
    howManyTimesTried: 0,
    init: function() {
        FL.cart.isCartPage() ? FL.DynamicCart.displayDynamicCart = !1 : FL.DynamicCart.updateDynamicCart(), $(".js-dynamic-cart").hover(function() {
            FL.DynamicCart.displayDynamicCart && Foundation.MediaQuery.is("large") && FL.DynamicCart.show()
        }, function() {
            FL.DynamicCart.hide()
        })
    },
    show: function() {
        $("#dynamicCartWrapper").stop(), $("#dynamicCartWrapper").fadeIn("fast")
    },
    hide: function() {
        $("#dynamicCartWrapper").stop(), $("#dynamicCartWrapper").fadeOut("fast")
    },
    setDisplay: function(e) {
        FL.DynamicCart.isDisplayed = e
    },
    updateDynamicCart: function() {
        var e = FlAjaxresult;
        FL.DynamicCart.totalQuantity = $(e).find("#totalQuantity").val(), FL.DynamicCart.totalQuantity > 0 ? ($("#dynamicCartWrapper").html(e), $(".js-cart-link").find(".js-count").show().html(FL.DynamicCart.totalQuantity), FL.DynamicCart.displayDynamicCart = !0) : (FL.DynamicCart.displayDynamicCart = !1, $(".js-cart-link").find(".corner-badge").hide())
    },
    addProductToDynamicCart: function() {
        var e = e || window._smtr || [];
        if (FL.pdp.Cart.populateErrorCodes(), ++FL.DynamicCart.howManyTimesTried <= 3) {
            if (FL.global.showOverlay(), "youthFoundation" == $("body").attr("id")) {
                var t = $(".donateSelect option:selected")[0],
                    a = $(t).val(),
                    i = a.split(":"),
                    o = i[1],
                    r = $(".donateSelect option:selected").attr("prodid").split(":")[1],
                    n = r,
                    s = 1,
                    l = "true" === $("#salesText").attr("data-bogo"),
                    d = {
                        donate_amount: parseFloat($(".donateSelect option:selected").text().replace("$", ""))
                    };
                FL.optimove.reportEvent("donate", d)
            } else {
                var n = $("#productId").val(),
                    s = parseInt($("#quantity").val()) || 1,
                    l = "true" === $("#salesText").attr("data-bogo");
                $("#fromCategoryId").val(), $("#skuSelection").val()
            }
            l && (s = s % 2 == 1 ? s + 1 : s), $("#addToCart").find("input[name$='catalogRefIds']").val(o), $("#addToCart").find("input[name$='productId']").val(n), $("#addToCart").find("input[name$='quantity']").val(s), $.ajax({
                data: $("#addToCart").serialize(),
                type: "GET",
                url: $("#addToCart").attr("action"),
                success: function(e, t, a) {
                    var i = $(e).find(".formErrorsRendererAddToCart .errorMessage");
                    if (i.length > 0) {
                        if (FL.global.hideOverlay(), void 0 !== i.html()) {
                            var o = $.trim(i.html()),
                                r = "An error occurred while adding the item to the cart.";
                            "Pre Release Product" == o ? r = FL.pdp.Cart.errorCodes[-8e3] : FL.pdp.Cart.errorCodes[o] && (r = FL.pdp.Cart.errorCodes[o]), $(document).on("open.zf.reveal", "#addToCartErrorModal", function() {
                                $("#addToCartErrorModal .contents").html(" ").append(r)
                            }), $("#addToCartErrorModal").foundation("open")
                        }
                    } else FL.global.hideOverlay(), FL.cart.slideOut("pdp"), FL.DynamicCart.updateDynamicCart()
                }
            })
        }
        return !1
    }
}, window.FL = window.FL || {}, FL.InStorePickup = FL.InStorePickup || {}, FL.IspuData = FL.IspuData || {}, FL.InStorePickup.AJAX = FL.InStorePickup.AJAX || {}, FL.InStorePickup.Geolocation = FL.InStorePickup.Geolocation || {}, FL.InStorePickup.Modal = FL.InStorePickup.Modal || {}, FL.IspuData = jQuery.extend(!0, {
    cityState: null,
    favoritesJSON: null,
    geoAddress: "",
    hideDistance: !1,
    lookupAddress: "",
    productId: null,
    quantity: 1,
    skuSelection: null,
    storeCookie: null,
    storeCount: 0,
    storeJSON: null,
    latitude: null,
    longitude: null,
    modal: null
}), FL.InStorePickup = jQuery.extend(!0, {
    selectedStoreId: null,
    selectedStoreName: null,
    cartSelectedStoreId: null,
    cartSelectedStoreName: null,
    orderContainOnlyISPUItem: null,
    init: function() {
        var e = unescape(Cookies.get("fl_favorite_stores"));
        FL.IspuData.storeCookie = "null" === e ? "" : e, FL.IspuData.productId = FL.pdp.Cart.productItemId, FL.InStorePickup.Cookie.cleanCookie();
        var t = Cookies.get("fl_selected_store");
        t ? $(".ispuTextContainer .locationSelect").text(t.split(":")[1]) : $(".ispuTextContainer .locationSelect").text("Select Location"), $(".ispuTextContainer .locationSelect").removeClass("hide")
    },
    openStoreModal: function(e) {
        var t = $("#productQuantity").val(),
            a = FL.pdp.Cart.selectedSku;
        if ("" === a && 1 == $("body#PDP").length) return FL.pdp.Cart.displaySelectSizeMessage(), !1;
        if (FL.IspuData.skuSelection = a, FL.IspuData.quantity = t, utag.link({
                events: "pick_up_select_location",
                ga_category: "Pick Up In Store",
                ga_action: "Select Location",
                ga_label: ""
            }), Foundation.MediaQuery.is("medium")) {
            var i = FL.contextPath + "/storepickup/modals/findStore.jsp?type=modal";
            FL.modal.open(i, "custom-medium", FL.InStorePickup.openSuccess)
        } else {
            var i = FL.contextPath + "/storepickup/modals/findStore.jsp?type=slide";
            $.ajax(i).done(function(e) {
                FL.global.offCanvas.open("full", "right", "push", e), FL.InStorePickup.openSuccess()
            })
        }
    },
    openSuccess: function() {
        $("#findStoreSpinner").show(), $("#searchStore").hide(), $("#ispuModalLookupInput").on("keypress", FL.InStorePickup.Modal.keypressIspuLookupInput).on("keyup", FL.InStorePickup.Modal.keyupIspuLookupInput), $(".findStoreSearchButton").on("click", FL.InStorePickup.Modal.ispuModalLookupSubmit), (localStorage && null != localStorage.getItem("ispu_location") || "" != localStorage.getItem("ispu_location")) && $("#ispuModalLookupInput").val(localStorage.getItem("ispu_location")), FL.InStorePickup.Geolocation.loadGoogleMaps("Modal", "getGeoLocation"), FL.Grid.isGridPage() ? FL.InStorePickup.AJAX.getStorePickUpSession() : FL.InStorePickup.Modal.showSwitchStoreMessage()
    },
    initSearchLocalStore: function() {
        "" != FL.IspuData.storeCookie ? "true" == Cookies.get("fl_ispu_search_status") ? FL.InStorePickup.shopByStoreisEnabled() : FL.InStorePickup.shopByStoreisDisabled() : ($("#shopLocalStoreCheckbox .toggleWrapper label").off("click").on("click", function(e) {
            Cookies.set("fl_ispu_search_status", !0, {
                expires: 180,
                path: "/",
                raw: !0
            }), FL.InStorePickup.openStoreModal(e)
        }), $("#shopLocalStoreCheckbox .locationSelect").off("click").on("click", function(e) {
            FL.InStorePickup.openStoreModal(e)
        }))
    },
    shopByStoreisEnabled: function() {
        if ($("#shopLocalStoreCheckbox .toggleWrapper input").prop("checked", !0), $("#shopLocalStoreCheckbox .locationSelect").off("click").on("click", FL.InStorePickup.openStoreModal), $("#shopLocalStoreCheckbox .toggleWrapper label").off("click").on("click", function() {
                FL.InStorePickup.disableShopByStore()
            }), $("#leftNavigationContent #shopByStore_hidden .checkbox-link").length > 0) {
            if (!$("#leftNavigationContent #shopByStore_hidden .checkbox-link").hasClass("selected")) {
                $("#leftNavigationContent #shopByStore_hidden a").click();
                var e = 0,
                    t = setInterval(function() {
                        $("#leftNavigationContent #shopByStore_hidden .checkbox-link").hasClass("selected") && clearInterval(t), ++e > 8 && ($("#leftNavigationContent #shopByStore_hidden a").click(), e = 0)
                    }, 250)
            }
        } else $(".row.product-grid, .seoCopy, .paginationDiv").hide(), $("#noResultsPage").remove(), $(".row.product-grid").after('<div id="noResultsPage" class="text-center mt-3"><div class="h3">WE CAN\'T FIND ANY MATCHING RESULTS FOR YOUR CHOSEN STORE.</div><p>Please <a class="storeSelect">select a different store</a> or check <a class="onlineAvailability">online availability</a>.</p></div>'), $(".page-title>.results-count").html("(0)"), $("#shopLocalStoreCheckbox .toggleWrapper label").off("click").on("click", function() {
            FL.InStorePickup.disableShopByStore(), $("#noResultsPage").remove(), $(".row.product-grid, .seoCopy, .paginationDiv").show(), FL.bLazy.Grid.init(), $(".page-title>.results-count").html("(" + $("#totalNumResults").val() + ")")
        }), $(".onlineAvailability").off().on("click", function() {
            $("#noResultsPage").remove(), $(".row.product-grid, .seoCopy, .paginationDiv").show(), FL.bLazy.Grid.init()
        }), $(".storeSelect").off().on("click", function() {
            FL.InStorePickup.openStoreModal()
        })
    },
    shopByStoreisDisabled: function() {
        if ($("#shopLocalStoreCheckbox .toggleWrapper input").prop("checked", !1), $("#leftNavigationContent #shopByStore_hidden .checkbox-link").hasClass("selected")) {
            $("#leftNavigationContent #shopByStore_hidden a").click();
            var e = 0,
                t = setInterval(function() {
                    $("#leftNavigationContent #shopByStore_hidden .checkbox-link").hasClass("selected") || clearInterval(t), ++e > 8 && ($("#leftNavigationContent #shopByStore_hidden a").click(), e = 0)
                }, 250)
        }
        $("#shopLocalStoreCheckbox .locationSelect").off("click").on("click", FL.InStorePickup.openStoreModal), $("#shopLocalStoreCheckbox .toggleWrapper label").off("click").on("click", function() {
            FL.InStorePickup.enableShopByStore()
        })
    },
    enableShopByStore: function() {
        $("#shopLocalStoreCheckbox .toggleWrapper input").prop("checked", !0), Cookies.set("fl_ispu_search_status", !0, {
            expires: 180,
            path: "/",
            raw: !0
        }), $("#leftNavigationContent #shopByStore_hidden a").click(), FL.bLazy.Grid.init(), FL.InStorePickup.shopByStoreisEnabled(), utag.link({
            events: "pick_up_toggle_on",
            ga_category: "Pick Up In Store",
            ga_action: "Toggle On",
            ga_label: ""
        })
    },
    disableShopByStore: function() {
        $("#shopLocalStoreCheckbox .toggleWrapper input").prop("checked", !1), Cookies.set("fl_ispu_search_status", !1, {
            expires: 180,
            path: "/",
            raw: !0
        }), $("#leftNavigationContent #shopByStore_hidden a").click(), FL.bLazy.Grid.init(), FL.InStorePickup.shopByStoreisDisabled(), utag.link({
            events: "pick_up_toggle_on",
            ga_category: "Pick Up In Store",
            ga_action: "Toggle Off",
            ga_label: ""
        })
    },
    removeColorCount: function() {
        var e = $("#bopisFlagVar").val(),
            t = [{
                breakpoint: 1024,
                settings: "unslick"
            }],
            a = {
                accessibility: !1,
                arrows: !1,
                accessibility: !1,
                dots: !0,
                mobileFirst: !0,
                infinite: !1,
                responsive: t,
                lazyLoad: "ondemand"
            },
            i = $(".product-card__media");
        e && ("true" == Cookies.get("fl_ispu_search_status") ? ($(".product-card").addClass("sbsToggleOn"), i.slick("unslick")) : ($(".product-card").removeClass("sbsToggleOn"), i.slick(a)))
    },
    updateStoreStockLevels: function(e, t, a, i) {
        if (i === FL.pdp.Sizes.currentStoreList) return FL.pdp.Sizes.sizeLoading(), FL.pdp.Colors.populateSizeDropdown(t + "-" + a), void FL.pdp.Sizes.rebuildSizeCharts(FL.pdp.Sizes.list, t + "-" + a);
        var o, r = !1;
        i ? o = FL.contextPath + "/browse/json/productSizesJson.jsp?productId=" + e + "&styleId=" + t + "&colorId=" + a + "&storeId=" + i : (o = FL.contextPath + "/browse/json/productSizesJson.jsp?productId=" + e + "&styleId=" + t + "&colorId=" + a, r = !0), FL.pdp.Sizes.sizeLoading(), $.ajax({
            type: "GET",
            url: o,
            success: function(e) {
                r && (e.productStoreSizes = "null"), FL.pdp.Sizes.list = e, FL.pdp.Colors.populateSizeDropdown(t + "-" + a), FL.pdp.Sizes.rebuildSizeCharts(e, t + "-" + a), FL.pdp.Sizes.currentStoreList = i
            },
            error: function() {
                console.error("Error getting updated size availability")
            }
        })
    },
    openSwitchStoreModal: function() {
        var e = FL.contextPath + "/storepickup/modals/switchStoreAltert.jsp";
        FL.modal.open(e, "custom-medium", FL.InStorePickup.openSuccess)
    },
    clearCart: function() {
        FL.modal.close();
        var e = $("#ispuConBlk  .pickupInStoreLabel").text().includes("Store Pickup"),
            t = $("#ispuConBlk  .pickupInStoreLabel").text().includes("Contact-Free"),
            a = $("#ispuConBlk .ispu-location").attr("data-store-id"),
            i = $("#ispuConBlk .ispu-location").attr("data-store-name");
        $.ajax({
            url: FL.contextPath + "/cart/clearCart.jsp",
            success: function(o) {
                var r = FL.contextPath + "/checkout/setCurbsideFlags.jsp?storePickup=" + e + "&contactFree=" + t + "&storeId=" + a + "&storeName=" + i;
                $.ajax({
                    type: "GET",
                    url: r,
                    data: {},
                    async: !1,
                    success: function(e) {
                        FL.ajax.reloadComponent("cartPageContent", FL.contextPath + "/cart/cartInner.jsp"), FL.InStorePickup.cartSelectedStoreId = a, FL.InStorePickup.cartSelectedStoreName = i, FL.InStorePickup.orderContainOnlyISPUItem = !0, FL.pdp.Cart.addToCart()
                    },
                    error: function() {
                        console.error("Error in updating curbside flags")
                    }
                })
            }
        })
    }
}, FL.InStorePickup), FL.InStorePickup.AJAX = jQuery.extend(!0, {
    defaultData: {
        data: {},
        dataType: "json",
        type: "GET",
        url: null,
        success: FL.InStorePickup.AJAX.defaultSuccess,
        error: FL.InStorePickup.AJAX.defaultError
    },
    defaultSuccess: function(e, t, a) {},
    defaultError: function(e, t, a) {},
    ajax: function(e) {
        var t = FL.InStorePickup.AJAX;
        e = $.extend(!0, {}, t.defaultData, e), null !== e.url && $.ajax({
            data: e.data,
            dataType: e.dataType,
            type: e.type,
            url: e.url,
            success: e.success
        })
    },
    availabilityLookup: function(e) {
        e = jQuery.extend(!0, {}, e), e.url = FL.contextPath + "/storepickup/storeAvailabilityLookup.jsp", FL.InStorePickup.AJAX.ajax(e)
    },
    productLookup: function(e) {
        e = jQuery.extend(!0, {}, e), e.dataType = "xml", e.url = FL.contextPath + "/browse/gadgets/productLookupXML.jsp", FL.InStorePickup.AJAX.ajax(e)
    },
    saveData: function(e) {
        e = jQuery.extend(!0, {}, e), e.data.action = "save", e.dataType = "html", e.url = FL.contextPath + "/storepickup/storeSaveData.jsp", FL.InStorePickup.AJAX.ajax(e)
    },
    storeLookup: function(e) {
        e = jQuery.extend(!0, {}, e), e.url = FL.contextPath + "/storepickup/storeLookup.jsp", FL.InStorePickup.AJAX.ajax(e)
    },
    storeLookupByStoreId: function(e) {
        e = jQuery.extend(!0, {}, e), e.url = FL.contextPath + "/storepickup/storeLookupByStoreId.jsp", FL.InStorePickup.AJAX.ajax(e)
    },
    getStorePickUpSession: function() {
        var e = FL.contextPath + "/storepickup/json/storePickUpSession.jsp";
        $.ajax({
            type: "GET",
            url: e,
            data: {},
            async: !1,
            success: function(e) {
                FL.InStorePickup.cartSelectedStoreId = e.ispuStoreSaved, FL.InStorePickup.cartSelectedStoreName = e.ispuStoreSavedName, FL.InStorePickup.orderContainOnlyISPUItem = e.orderContainOnlyISPUItem, FL.Grid.isGridPage() && FL.InStorePickup.Modal.showSwitchStoreMessage()
            },
            error: function(e, t, a) {
                console.log(e.status)
            }
        })
    },
    updateStorePickupSession: function(e, t, a, i) {
        var o = FL.contextPath + "/checkout/setCurbsideFlags.jsp?storePickup=" + e + "&contactFree=" + t + "&storeId=" + a + "&storeName=" + i;
        $.ajax({
            type: "GET",
            url: o,
            data: {},
            async: !1,
            success: function(e) {
                FL.InStorePickup.AJAX.getStorePickUpSession()
            },
            error: function() {
                console.error("Error in updating curbside flags")
            }
        })
    }
}, FL.InStorePickup.AJAX), FL.InStorePickup.Cookie = jQuery.extend(!0, {
    addId: function(e) {
        var t = FL.IspuData;
        return -1 === t.storeCookie.indexOf(e) && (t.storeCookie = t.storeCookie + e + ":", FL.InStorePickup.Cookie.updateCookie(), !0)
    },
    cleanCookie: function() {
        var e = FL.IspuData,
            t = $.unique(e.storeCookie.replace(":", ":").split(":"));
        t.splice($.inArray("", t), 1), e.storeCookie = t.length > 0 ? t.join(":") + ":" : ""
    },
    removeId: function(e) {
        var t = FL.IspuData;
        return t.storeCookie.indexOf(e) > -1 && (t.storeCookie = t.storeCookie.replace(e + ":", ""), FL.InStorePickup.Cookie.updateCookie(), !0)
    },
    updateCookie: function() {
        FL.InStorePickup.Cookie.cleanCookie(), Cookies.set("fl_favorite_stores", FL.IspuData.storeCookie, {
            expires: 180,
            path: "/",
            raw: !0
        })
    },
    saveSelectedStore: function(e, t, a) {
        Cookies.set("fl_selected_store", e + ":" + $.trim(t) + ":" + a, {
            expires: 180,
            path: "/",
            raw: !0
        })
    },
    removeSelectedStore: function() {
        Cookies.remove("fl_selected_store", {
            path: "/"
        })
    }
}, FL.InStorePickup.Cookie), FL.InStorePickup.Geolocation = jQuery.extend(!0, {
    api: "https://maps.googleapis.com/maps/api/js?client=gme-thefinishlineusa1&v=3&sensor=false&callback=FL.InStorePickup.",
    geocoder: null,
    loadGoogleMaps: function(e, t) {
        if (0 === $("#googleMapsApi").length) {
            var a = document.createElement("script");
            a.id = "googleMapsApi", a.src = FL.InStorePickup.Geolocation.api + e + "." + t, a.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(a)
        } else FL.InStorePickup[e][t]()
    },
    getLatLng: function() {
        var e = FL.InStorePickup.Geolocation,
            t = FL.IspuData.geoAddress;
        null === e.geocoder && (e.geocoder = new google.maps.Geocoder), e.geocoder.geocode({
            address: t
        }, e.geocodeResults)
    },
    geocodeResults: function(e, t) {
        var a, i, o, r, n, s, l = FL.InStorePickup,
            d = FL.IspuData;
        e.length > 0 ? (a = e[0].address_components, e[0].geometry, i = e[0].geometry.location.lat(), o = e[0].geometry.location.lng(), $.each(a, function(e, t) {
            switch (t.types[0]) {
                case "administrative_area_level_1":
                    n = t.short_name;
                    break;
                case "political":
                case "establishment":
                case "locality":
                    r = t.long_name;
                    break;
                case "country":
                    s = t.short_name
            }
        }), "US" === s && void 0 !== r ? (d.cityState = r + ", " + n, d.latitude = i, d.longitude = o, l.AJAX.saveData({
            data: {
                cityState: d.cityState,
                latitude: d.latitude,
                longitude: d.longitude
            }
        }), l.Modal.loadStoreDataJSON()) : "US" === s && void 0 === r ? l.Modal.displayStores({
            messageType: "cityRequired"
        }) : l.Modal.displayStores({
            messageType: "unitedStates"
        })) : l.Modal.displayStores({
            messageType: "noResults"
        })
    }
}, FL.InStorePickup.Geolocation), FL.InStorePickup.Modal = jQuery.extend(!0, {
    unitedStatesMessage: "Please enter an address in the United States",
    noResultsMessage: "No Results Found. Please try again.",
    cityRequiredMessage: "Enter your city and state or zip code above",
    html: {
        storeAvailable: ['<div class="row mb-4 store selectAndContinue" id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]" data-pickup-method="[pickup-method]">', '<div class="column">', '<div class="ml-medium-0 store-content">', '<div class="column small-12 p-medium-0">', '<h1 class="mb-0 storeName">[store-name]</h1>', '<h4 class="mb-0" style="text-transform: uppercase;">[pickup-method] PICKUP AVAILABLE</h4>', '<h4 class="mb-2">[store-distance] MILES AWAY</h4>', '<div class="mt-1" style="display:none">', '<a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]" class="arrow show-pdp-only">Get Directions<span></span></a>', "</div>", "</div>", '<div style="display:none" class="column small-12 medium-6 mt-2 p-medium-0 show-pdp-only">', '<a href="javascript:void(0)" class="button expanded mb-0 selectAndContinue">Select & Continue</a>', "</div>", "</div>", "</div>", "</div>"].join(""),
        storeUnavailable: ['<div class="row mb-4 store" id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]">', '<div class="column">', '<div class="row store-content">', '<div class="column small-12 p-medium-0">', '<h1 class="mb-0 storeName">[store-name]</h1>', '<h4 class="mb-2" style="margin-top:3px;">[store-distance] MILES AWAY | NOT IN STOCK</h4>', '<div class="mt-1" style="display:none" >', '<a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]" class="arrow">Get Directions<span></span></a>', "</div>", "</div>", '<div class="column small-12 medium-6 mt-2 p-medium-0" style="display:none" >', '<a href="#" class="button expanded mb-0" disabled>Not Available</a>', "</div>", "</div>", "</div>", "</div>"].join(""),
        favoriteActive: ['<label class="control control--checkbox"><span class="checkBoxText">Favorite</span>', '<input type="checkbox" checked="checked" class="favoriteCheckbox"/>', '<div class="control__indicator"></div>', "</label>"].join(""),
        favoriteInactive: ['<label class="control control--checkbox"><span class="checkBoxText">Mark this as a favorite location</span>', '<input type="checkbox" class="favoriteCheckbox"/>', '<div class="control__indicator"></div>', "</label>"].join("")
    },
    selectStore: function(e) {
        var t = FL.InStorePickup,
            a = t.Cookie,
            i = (FL.IspuData, $(this)),
            o = i.attr("data-storeid"),
            r = i.find(".storeName").text(),
            n = i.attr("data-pickup-method"),
            s = FL.pdp.Sizes.currentStoreList === o;
        a.addId(o), a.saveSelectedStore(o, r, n);
        var l;
        "undefined" != typeof selectedSize && (l = selectedSize);
        var d = "",
            c = $("#availableStores .storeName");
        c.each(function(e, t) {
            d += $(this).text().trim(), e < c.length - 1 && (d += ";")
        });
        var u = {
            shipping_option: "Pick up in store",
            product_id: $("#productItemId").val(),
            style_id: $("#productStyleId").val(),
            store_location: r.trim(),
            in_stock_locations: d,
            is_out_of_stock: !1,
            size: parseFloat(l)
        };
        FL.optimove.reportEvent("pdp_viewed", u), FL.InStorePickup.selectedStoreId = o, FL.InStorePickup.selectedStoreName = r, t.AJAX.saveData({
            data: {
                storeSaved: o,
                storeSavedName: r
            },
            success: t.Modal.selectStoreAjaxSuccess,
            error: t.Modal.selectStoreAjaxError
        }), $("#storeId").val(o), 1 == $("body.grid").length ? (FL.InStorePickup.initSearchLocalStore(), Cookies.set("fl_ispu_search_status", !0, {
            expires: 180,
            path: "/",
            raw: !0
        }), window.location.search += "&storeId=" + o) : 1 != $("body.PDP").length || s || FL.pdp.updateSizesForPickup(o), utag.link({
            events: "pick_up_select_store",
            ga_category: "Pick Up In Store",
            ga_action: "Select Store",
            ga_label: o + " | " + r
        })
    },
    removeStore: function() {
        FL.InStorePickup.selectedStoreId = null, FL.InStorePickup.selectedStoreName = null, FL.InStorePickup.AJAX.saveData({
            data: {
                storeSaved: null,
                storeSavedName: null
            }
        })
    },
    saveStore: function(e, t) {
        FL.InStorePickup.selectedStoreId = e, FL.InStorePickup.selectedStoreName = t, FL.InStorePickup.AJAX.saveData({
            data: {
                storeSaved: e,
                storeSavedName: t
            }
        })
    },
    selectStoreAjaxError: function(e, t, a) {},
    selectStoreAjaxSuccess: function(e, t, a) {
        $("#radioStorePickup").prop("checked", "checked");
        var i, o = Cookies.get("fl_selected_store");
        o.indexOf(":") > 0 && (i = o.split(":")[2]), $(".ispu-location").html(FL.InStorePickup.selectedStoreName), $("#ispuConBlk .pickupInStoreLabel").html(i + " Pickup at:"), $(".ispu-location").attr("data-store-id", FL.InStorePickup.selectedStoreId), $(".ispu-location").attr("data-store-name", FL.InStorePickup.selectedStoreName), $(".store-pickup-message").removeClass("show"), $("#buttonAddToCart").prop("disabled", !1), $("#offCanvasRightSlider").hasClass("is-open") ? FL.global.offCanvas.close("right") : FL.modal.close(), FL.bLazy.Grid.init()
    },
    getGeoLocation: function() {
        "geolocation" in navigator ? (navigator.geolocation.getCurrentPosition(FL.InStorePickup.Modal.getGeoLocationSuccess, FL.InStorePickup.Modal.showMessage.bind(this, "Enter your city/state or ZIP code to begin.")), $("#searchStore").hide(), $("#inStockMessage").hide(), $("#findStoreSpinner").show()) : FL.InStorePickup.Geolocation.loadGoogleMaps("Modal", "loadStoreData")
    },
    getGeoLocationSuccess: function(e) {
        var t = e.coords;
        $("#ispuModalLookupInput").val(t.latitude + "," + t.longitude), FL.InStorePickup.Modal.ispuModalLookupSubmit()
    },
    showMessage: function(e) {
        $("#findStoreSpinner").hide(), $("#searchStore").show(), e ? $("#lookupMessage").html("<h3>" + e + "</h3").show() : $("#lookupMessage").hide()
    },
    displayStores: function(e) {
        var t = (FL.pdp, FL.InStorePickup),
            a = FL.IspuData,
            i = $("#findStoreModal"),
            o = [],
            r = [];
        if (e = jQuery.extend({
                messageType: null
            }, e), null === a.storeJSON) {
            var n = "";
            "unitedStates" === e.messageType ? n = t.Modal.unitedStatesMessage : "noResults" === e.messageType ? n = t.Modal.noResultsMessage : "cityRequired" === e.messageType && (n = t.Modal.cityRequiredMessage), t.Modal.showMessage(n)
        } else !1 === a.hideDistance ? a.storeJSON.stores.sort(function(e, t) {
            return e.distance - t.distance
        }) : a.storeJSON.stores.sort(function(e, t) {
            return e.geolocation.crowflies - t.geolocation.crowflies
        }), $.each(a.storeJSON.stores, function(e, a) {
            "true" === a.available ? o.push(t.Modal.loadStoreToDisplay({
                store: a,
                template: t.Modal.html.storeAvailable
            })) : r.push(t.Modal.loadStoreToDisplay({
                store: a,
                template: t.Modal.html.storeUnavailable
            }))
        }), availableStoreCountPlural = 1 === o.length ? "store" : "stores", totalStoreCount = a.storeCount, availStores = o.length, remainingStores = totalStoreCount - availStores, r && $("#unavailableStoresMessage").html("Not Available in <strong>" + remainingStores + "</strong> other " + availableStoreCountPlural + " near <strong>" + a.cityState + "</strong>").show(), availStores > 0 ? $("body").hasClass("grid") ? $("#inStockMessage").show() : $("#inStockMessage").html('<p class="lead">In stock at <strong>' + availStores + "</strong> " + availableStoreCountPlural + " near <strong>" + a.cityState + "</strong></p>").show() : $("#unavailableStoresMessage").html("Not in Stock in any <strong>" + remainingStores + "</strong> other " + availableStoreCountPlural + " near <strong>" + a.cityState + "</strong>").show(), $("#availableStores").html(o.join("")), $("#unavailableStoreCont").html(r.join("")), null != a.cityState && $("#ispuModalLookupInput").val(a.cityState), i.find(".favorite").find(".favoriteCheckbox").on("click", t.Modal.clickFavoritesCheckBox), i.find(".selectAndContinue").on("click", t.Modal.selectStore), $("#findStoreSpinner").hide(), $("#searchStore").show(), $("#unavailableStores").removeClass("hide"), localStorage && localStorage.setItem("ispu_location", a.cityState)
    },
    displayNearbyStoresNoLookup: function(e) {
        var t = (FL.pdp, FL.InStorePickup),
            a = FL.IspuData,
            i = $("#findStoreModal"),
            o = [],
            e = jQuery.extend({
                messageType: null
            }, e);
        if (null === a.storeJSON) {
            var r = "";
            "unitedStates" === e.messageType ? r = t.Modal.unitedStatesMessage : "noResults" === e.messageType ? r = t.Modal.noResultsMessage : "cityRequired" === e.messageType && (r = t.Modal.cityRequiredMessage), t.Modal.showMessage(r)
        } else !1 === a.hideDistance ? a.storeJSON.stores.sort(function(e, t) {
            return e.distance - t.distance
        }) : a.storeJSON.stores.sort(function(e, t) {
            return e.geolocation.crowflies - t.geolocation.crowflies
        }), a.storeJSON.stores.length > 0 ? ($.each(a.storeJSON.stores, function(e, a) {
            o.push(t.Modal.loadStoreToDisplay({
                store: a,
                template: t.Modal.html.storeAvailable
            }))
        }), availableStoreCountPlural = 1 === o.length ? "store" : "stores", o.length > 0 ? $("body").hasClass("grid") ? $("#inStockMessage").show() : $("#inStockMessage").html('<p class="lead">In stock at <strong>' + a.storeCount + "</strong> " + availableStoreCountPlural + " near <strong>" + a.cityState + "</strong></p>").show() : $("#unavailableStoresMessage").html("We have no available stores in this area.  Try searching another area?").show(), $("#availableStores").html(o.join(""))) : FL.InStorePickup.Modal.noStoresFound(), null != a.cityState && $("#ispuModalLookupInput").val(a.cityState), i.find(".selectAndContinue").on("click", t.Modal.selectStore), $("#findStoreSpinner").hide(), $("#searchStore").show(), localStorage && localStorage.setItem("ispu_location", a.cityState)
    },
    toRad: function(e) {
        return e * (Math.PI / 180)
    },
    calculateDistance: function(e, t) {
        var a = FL.InStorePickup,
            i = a.Modal.toRad(t.latitude - e.latitude),
            o = a.Modal.toRad(t.longitude - e.longitude),
            r = a.Modal.toRad(e.latitude),
            n = a.Modal.toRad(t.latitude),
            s = Math.sin(i / 2) * Math.sin(i / 2) + Math.sin(o / 2) * Math.sin(o / 2) * Math.cos(r) * Math.cos(n),
            l = 2 * Math.atan2(Math.sqrt(s), Math.sqrt(1 - s)),
            d = 3959 * l;
        return Number(Math.round(d + "e1") + "e-1")
    },
    loadStoreData: function() {
        var e = FL.InStorePickup,
            t = FL.IspuData,
            a = [],
            i = [],
            o = [],
            r = [];
        null === t.storeJSON ? e.Modal.loadStoreDataJSON() : (t.storeJSON.searchParams.skuId !== t.skuSelection && (t.storeJSON.loaded.availability = "false", t.storeJSON.searchParams.skuId = t.skuSelection), t.storeJSON.searchParams.quantity !== t.quantity && (t.storeJSON.loaded.availability = "false", t.storeJSON.searchParams.quantity = t.quantity), "false" === t.storeJSON.loaded.distance ? (a.push(new google.maps.LatLng(t.storeJSON.location.latitude, t.storeJSON.location.longitude)), $.each(t.storeJSON.stores, function(e, t) {
            i.push(new google.maps.LatLng(t.geolocation.latitude, t.geolocation.longitude))
        }), $.each(i, function(t) {
            r.push(e.Modal.calculateDistance({
                latitude: a[0].lat(),
                longitude: a[0].lng()
            }, {
                latitude: i[t].lat(),
                longitude: i[t].lng()
            }))
        }), e.Modal.loadStoreDataDistances(r)) : $("body.grid").length ? e.Modal.displayNearbyStoresNoLookup() : "false" === t.storeJSON.loaded.availability ? ($.each(t.storeJSON.stores, function(e, t) {
            o.push(t.id)
        }), o.length > 0 ? e.AJAX.availabilityLookup({
            data: {
                storeIds: o.join(":"),
                productId: t.productId,
                skuId: t.skuSelection,
                quantity: t.quantity
            },
            success: e.Modal.loadStoreDataAvailabilityAjaxSuccess
        }) : e.Modal.displayStores()) : e.Modal.displayStores())
    },
    loadStoreDataAvailabilityAjaxSuccess: function(e, t, a) {
        var i = FL.InStorePickup,
            o = FL.IspuData;
        e.stores.length > 0 && $.each(e.stores, function(e, t) {
            FL.IspuData.storeJSON.stores.length > 0 && (FL.IspuData.storeJSON.stores[e].available = t.available)
        }), o.storeJSON.loaded.availability = "true", i.Modal.loadStoreData()
    },
    loadStoreDataJSON: function() {
        var e = FL.InStorePickup,
            t = FL.IspuData;
        "" === t.latitude || null === t.latitude || "" === t.longitude || null === t.longitude ? e.Modal.displayStores() : e.AJAX.storeLookup({
            data: {
                latitude: t.latitude,
                longitude: t.longitude,
                productId: t.productId,
                skuId: t.skuSelection
            },
            success: e.Modal.loadStoreDataJSONAjaxSuccess
        })
    },
    loadStoreDataJSONAjaxSuccess: function(e, t, a) {
        var i = FL.InStorePickup,
            o = FL.IspuData;
        o.storeJSON = e, o.storeCount = e.stores.length, i.AJAX.saveData({
            data: {
                storeCount: o.storeCount
            }
        }), i.Modal.loadStoreData()
    },
    noStoresFound: function() {
        $("#availableStores").html('<div id="noStores"><div class="notAvailableIcon"></div><p>Looks like we can\'t find any stores<br />near your location.</p></div>').show()
    },
    loadStoreDataDistances: function(e) {
        if (null === e || "undefined" == e) {
            var t = FL.InStorePickup,
                a = FL.IspuData;
            FL.InStorePickup.Modal.showMessage(FL.InStorePickup.Modal.noResultsMessage)
        } else {
            var t = FL.InStorePickup,
                a = FL.IspuData;
            e.length > 0 && $.each(e, function(t, a) {
                FL.IspuData.storeJSON.stores[t].distance = e[t]
            }), a.storeJSON.loaded.distance = !0, t.Modal.loadStoreData()
        }
    },
    keypressIspuLookupInput: function(e) {
        10 === e.keyCode || 13 === e.keyCode ? (e.preventDefault(), FL.InStorePickup.Modal.ispuModalLookupSubmit()) : ($("#lookupMessage").hide(), $("#findStoreSearchButton").removeAttr("disabled"), $(".find-store-modal .search-button-icon").addClass("highlighted"))
    },
    keyupIspuLookupInput: function(e) {
        10 === e.keyCode || 13 === e.keyCode ? e.preventDefault() : 0 === $("#ispuModalLookupInput").val().length ? ($("#findStoreSearchButton").attr("disabled", "true"), $(".find-store-modal .search-button-icon").removeClass("highlighted")) : ($("#findStoreSearchButton").removeAttr("disabled"), $(".find-store-modal .search-button-icon").addClass("highlighted"))
    },
    ispuModalLookupSubmit: function() {
        return "" !== $("#ispuModalLookupInput").val() && (FL.IspuData.latitude = "", FL.IspuData.longitude = "", FL.IspuData.cityState = "", FL.IspuData.storeJSON = null, FL.IspuData.geoAddress = $("#ispuModalLookupInput").val(), $("#availableStores").html(""), $("#unavailableStoreCont").html(""), $("#searchStore").hide(), $("#inStockMessage").hide(), $("#findStoreSpinner").show(), $("#unavailableStores").addClass("hide"), FL.InStorePickup.Geolocation.loadGoogleMaps("Geolocation", "getLatLng")), !1
    },
    clickFavoritesCheckBox: function(e) {
        var t = $(this),
            a = (FL.IspuData, FL.InStorePickup),
            i = a.Cookie,
            o = t.parents(".store").attr("data-storeid");
        t.is(":checked") ? i.addId(o) && t.prev(".checkBoxText").html("Favorite") : i.removeId(o) && t.prev(".checkBoxText").html("Mark this as a favorite location")
    },
    isFavoriteStore: function(e) {
        return FL.IspuData.storeCookie.indexOf(e + ":") > -1
    },
    loadStoreToDisplay: function(e) {
        var t = FL.InStorePickup,
            a = FL.IspuData,
            i = "",
            o = "";
        if (e = jQuery.extend({
                store: null,
                template: null,
                wfl: !1
            }, e), null !== e.store && null !== e.template) {
            e.store.street2replace = e.store.street2.replace("#", "%23"), i = e.wfl ? t.Modal.isFavoriteStore(e.store.id) ? t.Modal.html.favoriteActiveWFL : t.Modal.html.favoriteInactiveWFL : t.Modal.isFavoriteStore(e.store.id) ? t.Modal.html.favoriteActive : t.Modal.html.favoriteInactive, e.template = e.template.replace(/\[data-latitude\],\[data-longitude\]/g, a.cityState), e.template = e.template.replace(/\[store-latitude\],\[store-longitude\]/g, "[store-street1] [store-replace-street2], [store-city], [store-state] [store-zip]");
            var r = "";
            void 0 !== e.store.attribute && null !== e.store.attribute && (void 0 !== e.store.attribute.inStorePickupAvailable && "true" == e.store.attribute.inStorePickupAvailable && (r = "Store"), void 0 !== e.store.attribute.contactFreePickupAvailable && "true" == e.store.attribute.contactFreePickupAvailable && (r = "Contact-Free")), o = e.template.replace(/\[store-id\]/g, e.store.id).replace(/\[store-distance\]/g, e.store.distance).replace(/\[pickup-method\]/g, r).replace(/\[store-name\]/g, e.store.name).replace(/\[store-street1\]/g, e.store.street1).replace(/\[store-street2\]/g, e.store.street2).replace(/\[store-replace-street2\]/g, e.store.street2replace).replace(/\[store-city\]/g, $.trim(e.store.city)).replace(/\[store-state\]/g, e.store.state).replace(/\[store-zip\]/g, e.store.zip).replace(/\[store-phone\]/g, e.store.phone).replace(/\[data-latitude\]/g, a.latitude).replace(/\[data-longitude\]/g, a.longitude).replace(/\[store-latitude\]/g, e.store.geolocation.latitude).replace(/\[store-longitude\]/g, e.store.geolocation.longitude).replace(/\[favoriteHTML\]/g, i).replace(/\[crow-flies\]/g, e.store.geolocation.crowflies)
        }
        return o
    },
    loadMaps: function() {
        $(".store-map").each(function() {
            var e = FL.contextPath + "/assets/images/fl_mappin.png",
                t = parseFloat($(this).data("lat")),
                a = parseFloat($(this).data("lon")),
                i = new google.maps.LatLng(t, a),
                o = new google.maps.Map(document.getElementById($(this).attr("id")), {
                    center: i,
                    zoom: 12,
                    draggable: !1,
                    mapTypeControl: !1,
                    maxZoom: 12,
                    minZoom: 12,
                    overviewMapControl: !1,
                    panControl: !1,
                    rotateControl: !1,
                    scaleControl: !1,
                    scrollwheel: !1,
                    streetViewControl: !1,
                    zoomControl: !1,
                    styles: [{
                        featureType: "poi.business",
                        stylers: [{
                            visibility: "off"
                        }]
                    }]
                });
            new google.maps.Marker({
                position: i,
                map: o,
                icon: e
            })
        })
    },
    showSwitchStoreMessage: function() {
        var e = Cookies.get("fl_selected_store");
        $("#switch-store-message").hide(), null != FL.InStorePickup.cartSelectedStoreId && "" != FL.InStorePickup.cartSelectedStoreId.trim() && 1 == FL.InStorePickup.orderContainOnlyISPUItem && setTimeout(function() {
            var t = e.split(":")[1];
            $("#switch-store-message").show(), $("#switch-store-message .store-name").html(t)
        }, 600)
    }
}, FL.InStorePickup.Modal), window.FL = window.FL || {}, FL.Grid = FL.Grid || {}, FL.Grid = jQuery.extend(!0, {
    ajaxUpdate: function(e) {
        FL.global.showOverlay();
        var t = location.protocol + "//" + location.hostname + (location.port ? ":" + location.port : "");
        e == FL.contextPath && (e = "#"), e = removeParam(e, "_requestid"), -1 == e.indexOf("&isAjax=true") && (-1 == e.indexOf("?") ? e += "?isAjax=true" : e += "&isAjax=true"), $.ajax({
            type: "post",
            url: t + e,
            error: FL.Grid.Filters.handleUpdateGridError,
            success: FL.Grid.Filters.handleUpdateGrid
        }).done(function() {
            var t = removeParam(e, "isAjax");
            window.location.hash = t, FL.Grid.BrowserBackButton.hash = window.location.hash, FL.Grid.BrowserBackButton.handleHashFlag && (FL.Grid.BrowserBackButton.handleHashFlag = !1, setInterval(FL.Grid.handleHash, 1e3)), FL.optimove.gridFilter(), FL.InStorePickup.removeColorCount(), FL.global.hideOverlay(), FL.Grid.Pagination.makePageSelectIdsUnique()
        })
    },
    BrowserBackButton: {
        handleHashFlag: !0,
        hash: ""
    },
    PageTitle: "",
    selectedFilterItem: null,
    $midGridPromos: null,
    loadMore: !0,
    init: function() {
        var e, t = t || window._smtr || [];
        if ((FL.Grid.isGridPage() || "grid categorylp " === $("body").attr("id")) && "" !== (e = $("h1.page-title").length > 0 ? $.trim($("h1.page-title").html().replace(/<span class="results-count">[0-9()]*<\/span>/g, "")) : "")) {
            t.push(["pageView", {
                pageType: "category",
                catId: e,
                catName: e
            }]);
            var a = category_2 = category_3 = "",
                i = dynamicYieldCategoryLevel;
            "LEVEL_1" == dynamicYieldCategoryLevel && (a = e), "LEVEL_2" == dynamicYieldCategoryLevel && (category_2 = e), "LEVEL_3" == dynamicYieldCategoryLevel && (category_3 = e);
            var o = {
                category_level: i,
                category_1: a,
                category_2: category_2,
                category_3: category_3
            };
            FL.optimove.reportEvent("load_categories_page", o)
        }
        if (FL.Grid.isGridPage()) {
            if (FL.Grid.checkIsOnModel(), $("#hiddenGlobalPromo").length > 0) {
                var r = $("#hiddenGlobalPromo .mg-promo-container");
                r.length > 0 && (r.each(function() {
                    var e = parseInt($(this).attr("data-row"));
                    e && $(this).insertBefore($(".product-grid").children().not(".mg-promo-container").eq(e))
                }), $("#hiddenGlobalPromo").html(""))
            }
            FL.bLazy.Grid.init(), $(".page-title>.results-count").html("(" + $("#totalNumResults").val() + ")"), (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && FL.Grid.Filters.init(), Foundation.MediaQuery.is("medium") && FL.Grid.Filters.checkBrandIcons(), (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && (FL.Grid.Pagination.init(), FL.Grid.Sort.init()), FL.QuickLook.init(), FL.Grid.Reviews.init(0), FL.global.Favorites.init(), FL.Grid.initScrollWatcher(), FL.InStorePickup.init(), location.href.indexOf("/Ntt-") < 0 && location.href.indexOf("Ntt=") < 0 && FL.InStorePickup.initSearchLocalStore(), FL.global.isJDSport() && $(".filter-section").find(".checkbox-name").closest(".row").addClass("flex-dir-row-reverse"), $("#mobileFilterButton").on("click", function() {
                FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3) ? (FL.global.offCanvas.open("full", "bottom", "overlap", $("#filterOffCanvasContent").html()), FL.Grid.Filters.init()) : setTimeout(function() {
                    $("#offCanvasBottomSlider").foundation("open"), FL.Reflektion.selectedFilters(), FL.Reflektion.createFilterQuery(), setTimeout(function() {
                        FL.Reflektion.checkLabelFilters(), FL.Reflektion.mobileLabelEvents()
                    }, 100)
                }), FL.Grid.Filters.updateMobileFilters()
            }), $("#mobileSortButton").on("click", function() {
                (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && (FL.global.offCanvas.open("full", "bottom", "overlap", $("#sortOffCanvasContent").html()), FL.Grid.Sort.initMobile())
            }), FL.Grid.BrowserBackButton.hash = window.location.hash, -1 != FL.Grid.BrowserBackButton.hash.indexOf("#/store/") && (setInterval(FL.Grid.handleHash, 1e3), FL.Grid.initHash()), $(".appliedFiltersSection").html($("#appliedFiltersHidden>.filterSelectionContent").html()), $("#appliedFiltersHidden>.filterSelectionContent").html(""), FL.Grid.initHoverState(0), $(document).on("keyup", ".search-criteria", function() {
                var e = $(this),
                    t = $.trim(e.val()),
                    a = e.closest(".filter-section"),
                    i = a.find("ul li:not(.accordion-item)");
                t.length > 0 ? (a.find(".alphabeticRange").addClass("hide"), i.addClass("hide").filter(function() {
                    var e = $(this);
                    if (e.text().toLowerCase().indexOf(t.toLowerCase()) > 0) return e.removeClass("hide"), e
                }), 0 == i.length && e.after('<div class="filterErrorElement">No results found</div>')) : (i.removeClass("hide"), $(".alphabeticRange").removeClass("hide"))
            }), FL.Grid.initLoadMore(), $("#umb").after($(".specialty_grid_headers")), timeOutId = setTimeout(function() {
                $(".specialty_grid_headers").removeClass("specialty_grid_headers__hidden"), $(".promo-background-video").trigger("play")
            }, 300), FL.Grid.initRecommendations(), $(".product-card").on("click", function() {
                FL.Tealium.clickGridAdd(this)
            }), FL.global.Favorites.init(), FL.InStorePickup.removeColorCount()
        }
    },
    initRecommendations: function() {
        if (!$(".xm-recommendation-container").length) {
            var e = $(".grid-recommendation-container");
            $.each(e, function(e, t) {
                FL.recommendation.init($(t))
            }), $("#recommendedProductsSection").addClass("hide")
        }
    },
    initScrollWatcher: function() {
        function e() {
            window.pageYOffset > r.top - a ? (o.addClass("sticky").addClass(i), o.css("top", t)) : (o.removeClass("sticky", i), o.css("top", ""))
        }
        if (1 === $(".filterRow").length) {
            var t, a, i, o = $(".filterRow"),
                r = o.offset();
            $(".umb-wrapper[data-enablesticky='true']").length > 0 ? (t = $(".umb-wrapper").height(), a = t + 10, i = "umbstick") : a = 10, window.addEventListener("scroll", function() {
                e(), FL.Grid.checkIsOnModel()
            })
        }
    },
    checkIsOnModel: function() {
        if (FL.global.isJDSport()) {
            var e = $(".isOnModel").parent();
            e.addClass("jd-model white-dots-bg"), e.closest(".product-card").find(".product-card-dots-bg").addClass("white-dots-bg")
        }
    },
    initLoadMore: function() {
        FL.Grid.loadMore = !0, Number($("#additionalProducts").attr("data-count")) >= 12 && ($(window).off("scroll", FL.Grid.loadMoreScroll).on("scroll", FL.Grid.loadMoreScroll), setTimeout(function() {
            FL.Grid.loadMore && FL.Grid.loadMoreProducts()
        }, 3e4), FL.global.Favorites.init(), FL.InStorePickup.removeColorCount())
    },
    loadMoreScroll: function() {
        var e = 1200;
        Foundation.MediaQuery.is("large") ? e = 50 : Foundation.MediaQuery.is("medium") && (e = 500), $(window).scrollTop() > e && FL.Grid.loadMore && (FL.Grid.loadMoreProducts(), FL.global.Favorites.init())
    },
    loadMoreProducts: function() {
        FL.Grid.loadMore = !1, $(".row.product-grid").append($("#additionalProducts").html()), $("#additionalProducts").html(""), FL.QuickLook.init(), FL.Grid.Reviews.init(12), FL.Grid.initHoverState(12), FL.InStorePickup.removeColorCount(), $(".product-card").each(function(e) {
            e >= 12 && FL.bLazy.controller.load($(this).find(".product-card__media-slide").first().find(".b-lazy"), !0)
        }), FL.global.Favorites.favoritesHighlight(), $(window).off("scroll", FL.Grid.loadMoreScroll)
    },
    initHoverState: function(e) {
        function t() {
            FL.isJDKiosk || $(window).width() < 1025 ? (n.first().hasClass("slick-slider") || (r && "true" == Cookies.get("fl_ispu_search_status") ? n.slick("unslick") : n.slick(o)), $(".product-card .productImage").show()) : n.each(function() {
                FL.Grid.selectDefaultColorImage($(this))
            })
        }

        function a() {
            s || (s = setTimeout(function() {
                s = null, t()
            }, 1e3))
        }
        var i = [{
            breakpoint: 1024,
            settings: "unslick"
        }];
        FL.isJDKiosk && (i = []);
        var o = {
                accessibility: !1,
                arrows: !1,
                accessibility: !1,
                dots: !0,
                mobileFirst: !0,
                infinite: !1,
                responsive: i,
                lazyLoad: "ondemand"
            },
            r = $("#bopisFlagVar").val(),
            n = $(".product-card__media");
        n.on("init", function(e, t, a) {
            FL.global.Slick.changeDots($(this), "init"), $(this).on("afterChange", function(e, t) {
                var a = $(this).closest(".product-card"),
                    i = $(this).find(".product-card__media-slide.slick-current"),
                    o = i.attr("data-styleid"),
                    r = i.attr("data-colorid"),
                    n = a.attr("data-baseurl"),
                    s = n + "styleId=" + o + "&colorId=" + r;
                a.find("a:not(.quickLookButton)").attr("href", s)
            })
        }), $(".product-card").each(function(t) {
            t >= e && ($(this).find(".product-card__media").slick(o), FL.bLazy.controller.load($(this).find(".product-card__media-slide").first().find(".b-lazy"), !0))
        });
        var s;
        $(window).off("resize", a).on("resize", a), $(".product-card").each(function(t) {
            t >= e && ($(this).find(".product-card-color-slider").slick({
                dots: !1,
                accessibility: !1,
                nextArrow: "<span class='icon icon-chevron-right slick-next-icon'></span>",
                prevArrow: "<span class='icon icon-chevron-left slick-prev-icon'></span>",
                slidesToShow: 3,
                infinite: !1,
                slidesToScroll: 3
            }), $(this).foundation())
        });
        var l = $(".product-card-color-slider");
        l.off("mouseover", ".slick-slide", FL.Grid.colorSlidersMouseOver).on("mouseover", ".slick-slide", FL.Grid.colorSlidersMouseOver), l.off("mouseenter", ".slick-slide", FL.Grid.colorSliderMouseEnter).on("mouseenter", ".slick-slide", FL.Grid.colorSliderMouseEnter), l.off("mouseleave", ".slick-slide", FL.Grid.colorSliderMouseLeave).on("mouseleave", ".slick-slide", FL.Grid.colorSliderMouseLeave), l.on("click", ".slick-arrow", function() {
            var e = $(this).closest(".product-card");
            FL.bLazy.controller.load(e.find(".b-lazy"), !0)
        }), $(".product-card").off("mouseenter", FL.Grid.productCardMouseEnter).on("mouseenter", FL.Grid.productCardMouseEnter), $(".product-card").off("mouseleave", FL.Grid.productCardMouseLeave).on("mouseleave", FL.Grid.productCardMouseLeave), $(".product-card > a:first-of-type").off("focus", FL.Grid.productCardMouseEnter).on("focus", FL.Grid.productCardMouseEnter), $(".product-card > a:first-of-type").off("focusout", FL.Grid.productCardMouseLeave).on("focusout", FL.Grid.productCardMouseLeave), n.off("swipe", FL.Grid.productMediaSwipe).on("swipe", FL.Grid.productMediaSwipe), n.each(function() {
            FL.Grid.selectDefaultColorImage($(this))
        }), !FL.isJDKiosk && Foundation.MediaQuery.is("large") || $(".product-card .productImage").show()
    },
    colorSlidersMouseOver: function() {
        var e = $(this).data("slick-index"),
            t = $(this).closest(".product-card"),
            a = t.find(".productImage").eq(e),
            i = t.find("a.quickLookButton");
        t.find("svg.fav-heart-ico.primary-fav").addClass("hidden"), t.find(".flex-card").addClass("hidden"), t.find("svg.fav-heart-ico").removeClass("hovered"), $(a).prev("svg.fav-heart-ico").addClass("hovered"), $(a).parent(".flex-card").removeClass("hidden"), t.find(".productImage").hide().eq(e).show();
        var o = $(this).data("styleid"),
            r = $(this).data("colorid"),
            n = o + "-" + r,
            s = t.attr("data-baseurl"),
            l = s + "styleId=" + o + "&colorId=" + r;
        if (t.find("a:not(.quickLookButton)").attr("href", l), $(i).data("styleid", o), $(i).data("colorid", r), $(i).data("stylecolorid", n), t.find(".product-card-color-slider").find(".slick-slide").length > 1) {
            var d = t.find(".product-card__media").attr("data-original-image-id").split("_"),
                c = d[0],
                u = d[1];
            if (t.hasClass("info-loaded")) {
                var p = t.find(".product-card__media-slide[data-styleid='" + o + "'][data-colorid='" + r + "']");
                FL.Grid.populateProductInfo(t, p)
            } else o == c && r == u || !t.hasClass("info-loading") ? o == c && r == u && t.hasClass("info-loading") && FL.Grid.resetProductCardInfo(t) : (t.find(".product-price").hide(), t.find(".product-card-stars").hide(), t.find(".special-text").hide(), t.find(".loading-shimmer").removeClass("hide"))
        }
    },
    colorSliderMouseEnter: function() {
        $(this).addClass("is-hover")
    },
    colorSliderMouseLeave: function() {
        $(this).removeClass("is-hover")
    },
    productCardMouseEnter: function() {
        $productCard = $(this).hasClass("product-card") ? $(this) : $(this).parent(), FL.mainnav.Desktop.closeMeganav(), Foundation.MediaQuery.is("large") && !FL.isJDKiosk && (FL.bLazy.controller.load($productCard.find(".b-lazy"), !0), $productCard.addClass("is-hover"), FL.Grid.getProductInfoHover($productCard))
    },
    productCardMouseLeave: function() {
        if ($productCard = $(this).hasClass("product-card") ? $(this) : $(this).parent(), Foundation.MediaQuery.is("large") && !FL.isJDKiosk) {
            if (FL.Grid.selectDefaultColorImage($(this)), $productCard.find("a:not(.quickLookButton)").each(function(e, t) {
                    $(t).attr("href", $(t).attr("data-original"))
                }), $productCard.removeClass("is-hover"), $productCard.find(".flex-card").removeClass("hidden"), $productCard.find(".product-card-color-slider").find(".slick-slide").length > 1)
                if ($productCard.hasClass("info-loaded")) {
                    var e = $productCard.find(".product-card__media").attr("data-original-image-id").split("_"),
                        t = e[0],
                        a = e[1],
                        i = $productCard.find(".product-card__media-slide[data-styleid='" + t + "'][data-colorid='" + a + "']");
                    FL.Grid.populateProductInfo($productCard, i)
                } else FL.Grid.resetProductCardInfo($productCard);
            faveArray = $productCard.find("svg.fav-heart-ico"), $(faveArray).removeClass("hidden").removeClass("hovered")
        }
    },
    resetProductCardInfo: function(e) {
        e.find(".product-price").show(), e.find(".product-card-stars").show(),
            e.find(".special-text").show(), e.find(".loading-shimmer").addClass("hide")
    },
    productMediaSwipe: function(e, t, a) {
        var i = $(this).closest(".product-card");
        FL.Grid.getProductInfo(i, "swipe"), FL.global.Slick.changeDots($(this), a), FL.bLazy.controller.load($(this).find(".b-lazy"), !0)
    },
    getProductInfoHover: function(e) {
        e.hasClass("info-loading") || e.hasClass("info-loaded") || setTimeout(function() {
            e.hasClass("is-hover") && FL.Grid.getProductInfo(e, "hover")
        }, 750)
    },
    getProductInfo: function(e, t) {
        if (e.hasClass("info-loading") || e.hasClass("info-loaded")) {
            if (e.hasClass("info-loaded") && "swipe" == t) {
                var a = e.find(".product-card__media-slide.slick-active");
                FL.Grid.populateProductInfo(e, a)
            }
        } else {
            e.addClass("info-loading"), "swipe" == t && (e.find(".product-price").hide(), e.find(".product-card-stars").hide(), e.find(".special-text").hide(), e.find(".loading-shimmer").removeClass("hide"));
            var i = e.find(".product-card__media"),
                o = e.attr("data-prodid"),
                r = i.attr("data-original-image-id").split("_"),
                n = r[0],
                s = r[1],
                l = -1 != location.href.indexOf("?isrfk=true"),
                d = FL.contextPath + "/browse/gadgets/productLookupForGridXML.jsp";
            l && (d += "?isrfk=true"), $.ajax({
                data: {
                    productId: o,
                    styleId: n,
                    colorId: s
                },
                dataType: "xml",
                type: "GET",
                url: d,
                success: function(a, o, r) {
                    var n = $(a).find("product").get(0),
                        s = $(n);
                    if (s.find("prices").find("price").each(function() {
                            var e = $(this).attr("colorId").split("-"),
                                t = e[0],
                                a = e[1],
                                o = $(this).find("fullPrice").text(),
                                r = $(this).find("original").text(),
                                n = $(this).find("sale").text(),
                                s = i.find(".product-card__media-slide[data-styleid='" + t + "'][data-colorid='" + a + "']");
                            s.attr("data-was-price", r), s.attr("data-full-price", o), s.attr("data-now-price", n)
                        }), s.find("freeShippingList").find("freeShipping").each(function() {
                            var e = $(this).attr("colorId").split("-"),
                                t = e[0],
                                a = e[1],
                                o = $(this).text();
                            i.find(".product-card__media-slide[data-styleid='" + t + "'][data-colorid='" + a + "']").attr("data-free-shipping", o)
                        }), s.find("colorDescriptions").find("colorDescription").each(function() {
                            var e = $(this).attr("origColorId"),
                                t = $(this).attr("styleId"),
                                a = $(this).text(),
                                o = i.parents(".product-card"),
                                r = i.find(".product-card__media-slide[data-styleid='" + t + "'][data-colorid='" + e + "']");
                            r.attr("aria-describedby", a), o.find('.product-card__colors a[data-styleid="' + t + '"][data-colorid="' + e + '"]').find("img").attr("aria-describedby", a), $(r).find("img").attr("aria-describedby", a)
                        }), l && s.find("badgeImageList").find("badgeImage").each(function() {
                            var e = $(this).attr("colorId").replace("-", "_"),
                                t = $(this).attr("colorId").split("-"),
                                a = t[0],
                                o = t[1],
                                r = FL.global.isJDSport() ? "https://media.jdsports.com/s/jdsports/" : "https://media.finishline.com/s/finishline/",
                                n = r + e,
                                s = $(this).text(),
                                l = n + "?$default$&" + s + "&layer0=[h=245&w=245&bg=rgb(237,237,237)]&h=245&w=245",
                                d = i.find(".product-card__media-slide[data-styleid='" + a + "'][data-colorid='" + o + "']");
                            $(d).find("img").attr("src", l)
                        }), s.find("salesTextList").find("salesText").each(function() {
                            var e = $(this).attr("colorId").split("-"),
                                t = e[0],
                                a = e[1],
                                o = $(this).html();
                            i.find(".product-card__media-slide[data-styleid='" + t + "'][data-colorid='" + a + "']").attr("data-sales-text", o)
                        }), e.removeClass("info-loading"), e.addClass("info-loaded"), "swipe" == t) {
                        var d = e.find(".product-card__media-slide.slick-active");
                        FL.Grid.populateProductInfo(e, d)
                    } else {
                        var c = e.find(".product-card-color-slider").find(".slick-slide.is-hover");
                        if (c.length > 0) {
                            var u = c.attr("data-styleid"),
                                p = c.attr("data-colorid"),
                                d = e.find(".product-card__media-slide[data-styleid='" + u + "'][data-colorid='" + p + "']");
                            FL.Grid.populateProductInfo(e, d)
                        }
                    }
                },
                error: function(e, t, a) {}
            })
        }
    },
    populateProductInfo: function(e, t) {
        var a = t.attr("data-full-price"),
            i = t.attr("data-now-price"),
            o = t.attr("data-was-price");
        e.find(".product-price").html(FL.Grid.createPriceHtml(o, i, a));
        var r = t.attr("data-sales-text");
        void 0 == r && (r = ""), e.find(".special-text").html("<div class='specialSalesText'>" + r + "</div>"), e.foundation(), e.find(".product-price").show(), e.find(".product-card-stars").show(), e.find(".special-text").show(), e.find(".loading-shimmer").addClass("hide")
    },
    createPriceHtml: function(e, t, a) {
        var i = t.search("See price"),
            o = $("body.jdsports-page").length > 0 ? "Now " : "";
        if (i >= 0) var r = '<span class="wasSeePrice">' + e + '</span><span class="seePrice gridHover">' + t + '</span><span class="tooltip-help top red small" data-tooltip title="The suspense is killer. Add this to your cart and find your price."></span>';
        else if (e && "" !== e.trim() && t && "" !== t.trim()) var r = '<span class="wasPrice">' + e + '</span><span class="nowPrice pl-1">' + o + t + "</span>";
        else var r = '<span class="fullPrice">' + a + "</span>";
        return r
    },
    isGridPage: function() {
        return $("#isGridPage").length > 0
    },
    selectDefaultColorImage: function(e) {
        e.find(".productImage").hide().first().show()
    },
    Reviews: {
        init: function(e) {
            $(".product-card").each(function(t) {
                t >= e && $(this).find(".product-card-stars").each(function() {
                    var e = $(this),
                        t = e.attr("data-user-rating");
                    FL.Grid.Reviews.setStarRating(e, t)
                })
            })
        },
        setStarRating: function(e, t) {
            var a = parseInt(t);
            if (a && !isNaN(t)) {
                e.find(".icon-star").slice(0, t).removeClass("icon-star").addClass("icon-star-filled");
                var i = parseFloat(t),
                    o = i - a,
                    r = e.find(".icon-star").first().removeClass("icon-star");
                0 < o && o < .2 ? r.addClass("icon-star-20-percent") : o < .45 ? r.addClass("icon-star-40-percent") : o < .55 ? r.addClass("icon-star-50-percent") : o < .8 ? r.addClass("icon-star-60-percent") : o >= .8 && r.addClass("icon-star-80-percent")
            } else e.hide()
        }
    },
    Filters: {
        init: function() {
            $("body").off("click", "ul.filterOptions li a, .pag-button, .clear-all").on("click", "ul.filterOptions li a, .pag-button, .clear-all", function(e) {
                var t = $(this);
                if (e.preventDefault(), $(this).hasClass("disabled")) return !1;
                $(this).hasClass("brand-filter") ? $(this).toggleClass("selected") : $(this).hasClass("button--grid") && $(this).toggleClass("active"), FL.Tealium.clickGridFilterOption(t), FL.Grid.selectedFilterItem = $(this).parents(".accordion-item").attr("id"), FL.global.showOverlay();
                var a = $(this).attr("href");
                1 == $(".searchFilterPage").length && FL.Reflektion.isRfkOn(3) && a.indexOf("/store?") >= 0 && (newUrl = a.replace("/store?", "/store/?"), a = newUrl), void 0 === a && (a = $(this).children("a").attr("href")), (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && FL.Grid.ajaxUpdate(a)
            })
        },
        handleUpdateGrid: function(e) {
            var t = $(e);
            $(".filter-sidebar").html(t.find(".filter-sidebar").html()), $(".filter-sidebar").foundation(), $(".filterSelectionContent").html(t.find(".filterSelectionContent").html()), $(".clearAllFiltersLink").html(t.find(".clearAllFiltersLink").html()), Foundation.MediaQuery.is("medium") && FL.Grid.Filters.checkBrandIcons(), $(".paginationDiv").html(t.find(".paginationDiv").first().html()), $(".appliedFiltersSection").html($("#appliedFiltersHidden>.filterSelectionContent").html()), $("#appliedFiltersHidden>.filterSelectionContent").html(""), $(".fys-sort-container").html(t.find(".fys-sort-container").html()), $("#mobileSortOptions").html(t.find("#mobileSortOptions").html()), $("#offCanvasBottomSlider").hasClass("is-open") && FL.Grid.Filters.updateMobileFilters(), (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && $(".page-title>.results-count").html("(" + t.find("#totalNumResults").val() + ")"), null === FL.Grid.$midGridPromos && (FL.Grid.$midGridPromos = $(".mg-promo-container")), $(".product-grid").html(t.find(".product-grid").html()), FL.global.Favorites.init(), FL.bLazy.Grid.init(), window.scrollTo(0, 0), $(".product-card").foundation(), FL.Grid.initHoverState(0), FL.QuickLook.init(), FL.Grid.Sort.init(), FL.Grid.Reviews.init(0), 0 === $(".mg-promo-container").length && FL.Grid.$midGridPromos.each(function() {
                var e = parseInt($(this).attr("data-row"));
                e && $(this).insertBefore($(".product-grid").children().not(".mg-promo-container").eq(e))
            }), FL.Grid.initLoadMore(), FL.Grid.Filters.filterOpenCollapse()
        },
        filterOpenCollapse: function() {
            for (var e = [], t = Object.keys(localStorage), a = t.length; a--;) e.push(t[a]);
            for (var a = 0; a < e.length; a++)
                if (e[a].includes("test_")) {
                    var i = localStorage.getItem(e[a]),
                        o = e[a].indexOf("_"),
                        r = e[a].length,
                        n = e[a].substring(o + 1, r);
                    "open" == i ? $(".accordion-item").each(function(e) {
                        var t = $(this).find("a.accordion-title").text().trim();
                        n == t && ($(this).addClass("is-active"), $(this).find(".accordion-content").css("display", "block"))
                    }) : "close" == i && $(".accordion-item").each(function(e) {
                        var t = $(this).find("a.accordion-title").text().trim();
                        n == t && ($(this).removeClass("is-active"), $(this).find(".accordion-content").css("display", "none"))
                    })
                }
        },
        handleUpdateGridError: function() {
            FL.global.hideOverlay()
        },
        updateMobileFilters: function() {
            $("#offCanvasBottomSlider").html($("#filterOffCanvasContent").html());
            var e = $("#offCanvasBottomSlider").find(".accordion");
            $(".filter-section").each(function() {
                var t = !1;
                $(this).hasClass("hide") && (t = !0);
                var a = $(this).find(".filter-title").html(),
                    i = $(this).find(".filter-panel").html(),
                    o = $(this).find("a.selected").length,
                    r = "";
                o > 0 && (r = '<span class="icon icon-checkmark align-self-middle pl-1"></span>');
                var n = a.replace(" ", "_"),
                    s = '<li class="accordion-item ' + (t ? " hide " : "") + '" data-accordion-item id="item_' + n + '"><a href="javascript:void(0)" class="flex-container accordion-title pl-0"><strong class="align-self-middle">' + a + "</strong>" + r + '<span class="icon icon-plus align-self-middle" alt="Expand section"></span><span class="icon icon-minus align-self-middle" alt="Collapse section"></span></a><div class="accordion-content p-0 pb-1" data-tab-content>' + i + "</div></li>";
                e.append(s)
            }), $("#offCanvasBottomSlider").find(".clearAllLink").html($(".clearAllFiltersLink").html()), e.foundation(), FL.Grid.selectedFilterItem ? ($("#mobileFilterAccordion>#" + FL.Grid.selectedFilterItem).addClass("is-active"), $("#mobileFilterAccordion>#" + FL.Grid.selectedFilterItem + ">div").css("display", "block")) : $("#mobileFilterAccordion>li:first-child>a").trigger("click"), FL.Grid.Filters.checkMobileBrandIcons(), $("#mobileFilterAccordion").find("#desktopFilterAccordionBrand").find(".accordion-title").on("click", function() {
                $("#mobileFilterAccordion").find(".filter-Brand").find(".grid-button").each(function() {
                    $(this).find(".icon").removeClass("icon-text-version").text("")
                }), FL.Grid.Filters.checkMobileBrandIcons()
            })
        },
        checkBrandIcons: function() {
            $(".filter-sidebar").find(".filter-Brand").find("span.icon").each(function() {
                if ("none" === window.getComputedStyle($(this)[0], ":before").getPropertyValue("content")) {
                    var e = $(this).prev().text();
                    e && $(this).addClass("icon-text-version").html(e)
                }
            })
        },
        checkMobileBrandIcons: function() {
            $("#mobileFilterAccordion").find(".filter-Brand").find(".grid-button").find("span.icon").each(function() {
                if ("none" === window.getComputedStyle($(this)[0], ":before").getPropertyValue("content")) {
                    var e = $(this).prev().text();
                    e && $(this).addClass("icon-text-version").html(e)
                }
            })
        }
    },
    handleHash: function() {
        FL.Grid.BrowserBackButton.hash != window.location.hash && (FL.Grid.initHash(), FL.Grid.BrowserBackButton.hash = window.location.hash), FL.Grid.Filters.filterOpenCollapse()
    },
    initHash: function() {
        var e = window.location.hash.replace("#", ""); - 1 == window.location.hash.indexOf("#/store/") && (e = window.location.href), (FL.Reflektion.isRfkOn(2) || FL.Reflektion.isRfkOn(3)) && FL.Grid.ajaxUpdate(e)
    },
    Sort: {
        mobileSelectedSortOption: null,
        mobileSelectedSortUrl: null,
        init: function() {
            $("#fysSort").change(function() {
                var e = $(this).val(),
                    t = $(this).find("option:selected").text();
                FL.Grid.Sort.triggerSort(t, e), FL.Tealium.selectGridSort()
            });
            var e = $("#fysSort").find("option:selected").text();
            $(".mobileSortByDropdownText").html("Sort by: " + e)
        },
        triggerSort: function(e, t) {
            var a = "sort=sort%3A",
                i = new RegExp("(&|\\?)" + a + "[^&]+");
            t = " " + t, t = t.replace(i, ""), a = t.indexOf("?") > -1 ? "&" + a : "?" + a;
            var o = t + a + encodeURIComponent(e.toLowerCase());
            window.location = o.replace("&isAjax=true", ""), $(".mobileSortByDropdownText").html("Sort by: " + e)
        },
        initMobile: function() {
            $(".control--radio input[name=mobileSortRadio]").off("click").on("click", function() {
                FL.Grid.Sort.mobileSelectedSortOption = $(this).attr("data-text"), FL.Grid.Sort.mobileSelectedSortUrl = $(this).val(), $("#offCanvasBottomSlider").foundation("close")
            }), $("#offCanvasBottomSlider").on("closed.zf.offcanvas", function() {
                FL.Grid.Sort.mobileSelectedSortOption && FL.Grid.Sort.mobileSelectedSortUrl && (FL.global.showOverlay(), FL.Grid.Sort.triggerSort(FL.Grid.Sort.mobileSelectedSortOption, FL.Grid.Sort.mobileSelectedSortUrl))
            })
        }
    },
    Pagination: {
        init: function() {
            FL.Grid.Pagination.makePageSelectIdsUnique(), $("body").on("change", "select.pag-select", function() {
                var e = $(this).find("option:selected").attr("data-href");
                FL.Grid.ajaxUpdate(e)
            })
        },
        makePageSelectIdsUnique: function() {
            var e = 1;
            $(".paginationDiv").find("#pageNum").each(function() {
                $(this).attr("id", $(this).attr("id") + e++)
            })
        }
    }
}, FL.Grid), window.FL = window.FL || {}, FL.QuickLook = FL.QuickLook || {}, FL.QuickLook = jQuery.extend(!0, {
    thisBrand: "",
    selectedProduct: null,
    selectedProductId: null,
    selectedProductSku: null,
    selectedProductAttributes: null,
    maxQuantity: 5,
    seoURL: null,
    addTries: 0,
    timerTooltip: null,
    smtrQuantity: 0,
    smtrProductId: "",
    smtrPrice: "",
    init: function() {
        $(".quickLookButton").off("click").on("click", function() {
            var e, t, a, i, o, r = $(this),
                n = r.parents(".product-card"),
                s = r.attr("data-productid"),
                l = r.attr("data-stylecolorid"),
                d = r.data("colorid"),
                c = r.data("styleid"),
                u = r.attr("data-vendorname"),
                p = r.attr("data-colordescription"),
                h = n.find(".product-name").text().trim(),
                m = n.find(".wasPrice").text().trim(),
                f = n.find(".nowPrice").text().trim(),
                g = n.find(".now_price").text().trim();
            FL.QuickLook.seoURL = r.attr("data-seourl"), FL.QuickLook.displayQuickLookModal(s, l, c, d), t = parseFloat(m.replace("$", "")) || 0, a = parseFloat(f.replace("$", "")) || 0, i = parseFloat(g.replace("$", "")) || 0, o = 0 !== i ? 0 : Math.round(100 * (t - a)) / 100, e = "" === g ? f : g, rfkProdID = s;
            var v = {
                product_id: c + "_" + d,
                product_discount: o,
                product_name: h,
                product_color: p,
                product_brand: u,
                product_price: e,
                product_unit_price: e,
                product_sku: c + "_" + d
            };
            FL.Tealium.clickQuicklookLink(v);
            var y = {
                product_id: s,
                style_id: c,
                color: d.toString()
            };
            FL.optimove.reportEvent("grid_view_click", y)
        }), FL.QuickLook.closeModalCallback()
    },
    closeModalCallback: function() {
        $("body").off("closed.zf.reveal", "#quickLookModal").on("closed.zf.reveal", "#quickLookModal", function() {
            setTimeout(function() {
                $("#cartSlide").is(":visible") || FL.DynamicYield.updateSpaEvent("CATEGORY", [dynamicYieldCategoryLevel])
            }, 800)
        })
    },
    displayQuickLookModal: function(e, t, a, i) {
        $("#quickLookModal").foundation("open"), $("#quickLookContent").hide(), $("#quickLookSpinner").show();
        var o = FL.contextPath + "/browse/modals/quickLook.jsp?productId=" + e;
        $.ajax(o).done(function(o) {
            $("#quickLookContent").html(o), FL.QuickLook.loadProduct(e, t, a, i), FL.QuickLook.initTooltips(), FL.pdp.Cart.populateErrorCodes()
        })
    },
    loadProduct: function(e, t, a, i) {
        $.ajax({
            data: {
                productId: e,
                styleId: a,
                colorId: i
            },
            dataType: "xml",
            type: "GET",
            url: FL.contextPath + "/browse/gadgets/productLookupXML.jsp",
            success: function(e, a, i) {
                var o = $(e).find("product").get(0);
                FL.QuickLook.selectedProduct = o, FL.QuickLook.populateQuickLook(o, t), $(".color-image.selected").click(), $("#quickLookContent").show(), $("#quickLookSpinner").hide()
            },
            error: function(t, a, i) {
                var o = !1;
                if (void 0 !== i.message && i.message.indexOf("<title>WAITING</title>") > -1 && (o = !0), o) window.location = FL.contextPath + "/browse/productDetail.jsp?productId=" + e;
                else {
                    var r = ['<div id="qlHeader">', '<div id="closeTab"><img id="closeImg" src=contextPath+"/images/enhancements/b_close.gif"/></div>', '<div id="qlPopupHeader"></div>', "</div>", "<div>An error occurred while loading this product.</div>"].join("");
                    $("#qlContent").html(r)
                }
            }
        })
    },
    populateQuickLook: function(e, t) {
        var a = $(e),
            i = $("#quickLookContent");
        if (a.find("image").text(), FL.QuickLook.thisBrand = a.find("brand").text(), FL.QuickLook.selectedProductId = a.find("productId").text(), FL.QuickLook.selectedProductAttributes = a.find("attributes").text(), i.find("#productTitle").html(a.find("name").text().replace("=AMPERSAND=", "&amp;")), "no-sale" === a.find("price").find("sale").text()) i.hide(), $("#quickLookError").html("This product is unavailable"), $("#quickLookError").show();
        else {
            i.find("#colorDescription").html(""), a.find("colorDescription").each(function() {
                var e = $(this).attr("colorId"),
                    t = $(this).attr("origColorId"),
                    a = $(this).attr("styleId"),
                    o = $(this).text(),
                    r = e.split("-");
                i.find("#colorDescription").append('<div class="colorDescVariable hide" data-description="' + o + '" data-styleid="' + a + '" data-colorid="' + t + '" id="color_' + e + '">' + o + " - " + r[0] + " " + r[1] + "</div>")
            }), i.find("#salesText").html(""), a.find("salesTexts").find("salesText").each(function() {
                var e = $(this).attr("colorId"),
                    t = $(this).html();
                i.find("#salesText").append('<div class="salesTextVariable hide" id="salesText_' + e + '">' + t + "</div>")
            }), i.find("#productPrice").html(""), a.find("Prices").find("price").each(function() {
                var e = $(this).attr("colorId"),
                    t = $(this).find("fullPrice").text(),
                    a = $(this).find("original").text(),
                    o = $(this).find("sale").text(),
                    r = FL.QuickLook.createPriceHtml(e, a, o, t);
                i.find("#productPrice").append('<div class="priceVariable hide" id="price_' + e + '">' + r + "</div>")
            }), i.find("#soldOutVariables").html(""), a.find("greyOutAddToCartButtons").find("greyOutAddToCartButton").each(function() {
                var e = $(this).text(),
                    t = $(this).attr("colorId");
                "true" === e && i.find("#productPrice").append('<div class="priceVariable hide" id="price_' + t + '"><span class="soldOut">SOLD OUT</span></div>'), i.find("#soldOutVariables").append('<div class="soldOutVariable" id="soldout_' + t + '">' + e + "</div>")
            });
            var o;
            o = FL.global.isJDSport() ? "More Details" : "View Full Product Details<span></span>";
            var r = '<a href="' + FL.contextPath + "/browse/productDetail.jsp?productId=" + a.find("productId").text() + '" class="hover-underline">' + a.find("name").text().replace("=AMPERSAND=", "&amp;") + "</a>",
                n = '<a tabindex="0" class="viewProductPage arrow" href="' + FL.contextPath + "/browse/productDetail.jsp?productId=" + a.find("productId").text() + '">' + o + "</a>";
            i.find("#productTitle").html(r).end().find("#productDetailsLink").html(n).end();
            var s = 0;
            a.find("styleColorMaxQtys").find("styleColorMaxQty").each(function() {
                $(this).attr("colorId") == t && (s = $(this).text())
            });
            var l = a.find("maxUnitsPerOrder").text();
            s > 0 && parseInt(s, 10) <= parseInt(l, 10) ? FL.QuickLook.addQuantityOptions(s) : parseInt(l) < parseInt(FL.QuickLook.maxQuantity) ? FL.QuickLook.addQuantityOptions(l) : FL.QuickLook.addQuantityOptions(FL.QuickLook.maxQuantity), "In-Store Exclusive" === a.find("instoreOnly").text() && ($("#addToCartControl").hide(), $("#addToCartText").removeClass("hide"));
            var d = {};
            i.find("#productSizes").html(""), a.find("sizes").find("size").each(function() {
                var e = jQuery(this).attr("sku"),
                    t = jQuery(this).attr("available"),
                    a = jQuery(this).text(),
                    i = jQuery(this).attr("colorId");
                d[i] || (d[i] = []), d[i].push({
                    sizeSku: e,
                    sizeAvailable: t,
                    sizeText: a
                })
            }), $.each(d, function(e, t) {
                var a = '<div class="sizeVariable hide" id="size_' + e + '">';
                a += '<ul class="row block-grid--sizes medium-up-5 large-up-8 no-bullet mb-0">', $.each(t, function(e, t) {
                    a += '<li class="column">', "true" !== t.sizeAvailable ? a += '<a class="button hollow button--grid expanded disabled" aria-label="size ' + t.sizeText + ' unavailable" data-sku="' + t.sizeSku + '" data-size="' + t.sizeText + '">' : a += '<a class="button hollow button--grid expanded" aria-label="size ' + t.sizeText + '" data-sku="' + t.sizeSku + '" data-size="' + t.sizeText + '">', a += t.sizeText, a += "</a></li>"
                }), a += "</ul></div>", i.find("#productSizes").append(a)
            }), $("#productSizes").find("a").not(".disabled").on("click", FL.QuickLook.onSizeClick), i.find("#productColorImages").html(""), a.find("colors").find("color").each(function(e) {
                var t = $(this).attr("thumbnail").split("?")[0],
                    o = a.find("productClass").text(),
                    r = $(this).attr("colorId"),
                    n = $(this).text(),
                    s = '<div class="column"><a href="javascript:void(0)" data-colorid="' + r + '"><div class="color-image ' + o + '"><img src="' + t + '?$default$&h=87&w=87&bg=rgb(237,237,237)" alt="' + n + '"/></div></a></div>';
                i.find("#productColorImages").append(s)
            }), $("#productColorImages").find("a").on("click", FL.QuickLook.onColorClick), $("#productColorImages a:first").click(), i.find("#productBogo").val(a.find("bogo").text()), $("#buttonAddToCart").on("click", FL.QuickLook.addItemToCart), i.foundation()
        }
        FL.QuickLook.displayProductDetails(t), $(".quicklook-recommendation-container .showRecommendationsFlag").val(a.find("callCertonaFlag").text()), FL.QuickLook.initRecommendations(), FL.Tealium.displayQuickLookModal(), DY.API("spa", {
            context: {
                type: "PRODUCT",
                data: [$("#quickLookContent .button--grid").data("sku")]
            },
            countAsPageview: !0
        })
    },
    addQuantityOptions: function(e) {
        for (var t = [], a = 1; a <= e; a++) t.push('<option value="', a, '">', a, "</option>");
        $("#qlQuantity").append(t.join(""))
    },
    createPriceHtml: function(e, t, a, i) {
        if (void 0 == i || "" == i)
            if ("See price in cart" == a) var o = '<span class="nowPrice">' + a + '</span><span class="tooltip-help top red small" data-tooltip title="The suspense is killer. Add this to your cart and find your price."></span>';
            else if ($(".jdsports-page").length > 0) var o = '<span class="wasPrice">' + t + '</span><span class="nowPrice pl-1">' + a + "</span>";
        else var o = '<span class="wasPrice">' + t + '</span><span class="nowPrice pl-1">' + a + "</span>";
        else var o = '<span class="fullPrice">' + i + "</span>";
        return o
    },
    onColorClick: function(e) {
        var t = $(FL.QuickLook.selectedProduct);
        $(".color-image").removeClass("selected"), $(this).find(".color-image").addClass("selected");
        var a = $(this).attr("data-colorid");
        FL.QuickLook.displayProductDetails(a);
        var i, o = o || window._smtr || [];
        i = ["pageView", {
            pageType: "product",
            productId: a,
            sku: a,
            brand: FL.QuickLook.thisBrand
        }], o.push(i), FL.Tealium.clickQuicklookColor(), $("#quickLookMainSpinner").show(), $("#quickLookMainImage").hide(), $("#quickLookAltSlider").hide(), $.ajax({
            dataType: "html",
            type: "GET",
            url: FL.contextPath + "/browse/gadgets/alternateImage.jsp",
            data: {
                colorID: a,
                styleID: a,
                productName: t.find("name").text(),
                productItemId: t.find("productId").text(),
                productIsShoe: t.find("isShoe").text(),
                productIsAccessory: "isAccessory" == t.find("productClass").text() ? "true" : "false",
                productIsGiftCard: "isGiftCard" == t.find("productClass").text() ? "true" : "false",
                renderType: "quicklook",
                pageName: "quicklook"
            },
            success: function(e) {
                $("#quickLookAltImages").html(e), $("#quickLookAltSlider").find("a").on("click", FL.QuickLook.onAltImageClick), $("#quickLookAltSlider").on("init", function(e, t, a) {
                    $("#quickLookMainSpinner").hide(), $("#quickLookMainImage").show(), $("#quickLookAltSlider").show(), t.setPosition(), $("#quickLookAltSlider a:first").click()
                }), FL.bLazy.QuickLooks.initAlternateImages()
            },
            error: function() {}
        })
    },
    onAlternateImageLoad: function() {
        $("#quickLookAltSlider").slick({
            slidesToShow: 5,
            slidesToScroll: 1,
            infinite: !1,
            nextArrow: "<span class='icon icon-chevron-right alt-next-icon'></span>",
            prevArrow: "<span class='icon icon-chevron-left alt-prev-icon'></span>",
            responsive: [{
                breakpoint: 1024,
                settings: {
                    slidesToShow: 4,
                    slidesToScroll: 1
                }
            }]
        })
    },
    onSizeClick: function(e) {
        $("#productSizes").find("a").removeClass("active"), $(this).addClass("active");
        var t = $(this).attr("data-size");
        FL.pdp.Colors.Events.setSelectedSize(t), FL.QuickLook.selectedProductSku = $(this).attr("data-sku")
    },
    onAltImageClick: function(e) {
        var t = $("#quickLookMainImage");
        $(".alt-slide-image").removeClass("selected"), $(this).find(".alt-slide-image").addClass("selected"), FL.pdp.Colors.Events.checkSelectedSize(!0);
        var a = $(this).attr("data-large"),
            i = $(this).find("img").attr("alt");
        t.html('<img id="productImg" src="' + a + '" alt="' + i + '"/>'), FL.bLazy.controller.load(t.find(".b-lazy"), !0)
    },
    displayProductDetails: function(e) {
        FL.QuickLook.selectedProductSku = null, $("#colorDescription").find(".colorDescVariable").addClass("hide"), $("#colorDescription").find("#color_" + e).removeClass("hide"), $("#salesText").find(".salesTextVariable").addClass("hide"), $("#salesText").find("#salesText_" + e).removeClass("hide"), $("#productPrice").find(".priceVariable").addClass("hide"), $("#productPrice").find("#price_" + e).removeClass("hide"), $("#productSizes").find("#size_" + e).find("a").removeClass("active"), $("#productSizes").find(".sizeVariable").addClass("hide"), $("#productSizes").find("#size_" + e).removeClass("hide"), "true" === $("#soldOutVariables").find("#soldout_" + e).text() ? $("#buttonAddToCart").prop("disabled", !0) : $("#buttonAddToCart").prop("disabled", !1), FL.QuickLook.setProductUrl(e)
    },
    setProductUrl: function(e) {
        var t = e.split("-"),
            a = t[0],
            i = t[1];
        if (FL.QuickLook.seoURL) var o = FL.contextPath + FL.QuickLook.seoURL + "?styleId=" + a + "&colorId=" + i;
        else var o = FL.contextPath + "/browse/productDetail.jsp?productId=" + FL.QuickLook.selectedProductId;
        $("#productDetailsLink").find("a").attr("href", o), $("#productTitle").find("a").attr("href", o)
    },
    initTooltips: function() {
        var e = {
            tipText: "Select a size to continue.",
            tooltipClass: "add-to-cart-tooltip",
            triggerClass: "",
            disableHover: !0,
            clickOpen: !1,
            disableForTouch: !0
        };
        new Foundation.Tooltip($("#addToCartControl"), e)
    },
    addItemToCart: function() {
        if (FL.QuickLook.selectedProductSku) {
            if (!$("#buttonAddToCart").hasClass("addingToCart"))
                if (FL.QuickLook.addTries++, $("#buttonAddToCart").addClass("addingToCart"), FL.QuickLook.addTries <= 3) {
                    FL.global.showOverlay(), $(".addToCartErrors").html("").addClass("hide");
                    var e = "true" === $("#productBogo").val(),
                        t = parseInt($("#qlQuantity").val());
                    if (e && (t = t % 2 == 1 ? t + 1 : t), $("#qlAddToCart").find('input[name$="catalogRefIds"]').val(FL.QuickLook.selectedProductSku), $("#qlAddToCart").find('input[name$="productId"]').val(FL.QuickLook.selectedProductId), $("#qlAddToCart").find('input[name$="quantity"]').val(t), window.location.pathname.indexOf("_/N-") > 0) $("#qlAddToCart").find('input[name$="dimensionId"]').val(window.location.pathname.split("_/N-")[1]);
                    else if (window.location.pathname.indexOf("/search/") > 0)
                        if (window.location.search.indexOf("?_dyncharset=UTF-8&") >= 0) {
                            var a = window.location.href;
                            $("#qlAddToCart").find('input[name$="dimensionId"]').val(a.replace("?_dyncharset=UTF-8&", "?"))
                        } else $("#qlAddToCart").find('input[name$="dimensionId"]').val(a);
                    $.ajax({
                        data: $("#qlAddToCart").serialize(),
                        type: "POST",
                        url: $("#qlAddToCart").attr("action"),
                        success: function(e) {
                            var a = $(e).filter(".formErrorsRendererAddToCart").find(".errorMessage"),
                                i = $("#productPrice");
                            if (a.length > 0) {
                                if (FL.global.hideOverlay(), void 0 !== a.html()) {
                                    $("#buttonAddToCart").removeClass("addingToCart");
                                    var o = $.trim(a.html()),
                                        r = "An error occurred while adding the item to the cart.";
                                    "Pre Release Product" == o ? r = FL.pdp.Cart.errorCodes[-8e3] : -9e3 == o ? r = "Item cannot be added to cart. " + $(e).filter("#displayMaxQtyError").html() : FL.pdp.Cart.errorCodes[o] && (r = FL.pdp.Cart.errorCodes[o]), $(".addToCartErrors").html(r).removeClass("hide")
                                }
                            } else {
                                $("#buttonAddToCart").removeClass("addingToCart"), $("#commerceItemCount").val(), FL.Tealium.clickQuicklooksAddToCart(), FL.global.hideOverlay(), $("#quickLookModal").foundation("close"), FL.cart.slideOut("pdp"), FL.global.updateBagCount(), FL.DynamicCart.updateDynamicCart(), FL.QuickLook.smtrQuantity = t;
                                try {
                                    FL.QuickLook.smtrProductId = $("#quickLookContent").find("#colorDescription").find(".colorDescVariable:not(.hide)").attr("id")
                                } catch (e) {
                                    FL.QuickLook.smtrProductId = null
                                }
                                if (null !== FL.QuickLook.smtrProductId && (FL.QuickLook.smtrProductId = FL.QuickLook.smtrProductId.replace("color_", "")), FL.QuickLook.smtrPrice = i.find(".priceVariable:not(.hide)").find(".nowPrice").length > 0 ? i.find(".priceVariable:not(.hide)").find(".nowPrice").text() : i.find(".priceVariable:not(.hide)").find(".fullPrice").text(), FL.QuickLook.smtrPrice = FL.QuickLook.smtrPrice.replace("$", "").replace(",", ""), FL.Reflektion.isRfkOn(7)) {
                                    var n = i.find(".priceVariable:not(.hide)").find(".nowPrice").length > 0 ? i.find(".priceVariable:not(.hide)").find(".wasPrice").text() : i.find(".priceVariable:not(.hide)").find(".fullPrice").text(),
                                        s = {
                                            type: "a2c",
                                            name: "grid",
                                            value: {
                                                products: [{
                                                    sku: FL.QuickLook.selectedProductSku,
                                                    prod_id: rfkProdID,
                                                    prod_style_color: $(".color-image.selected").parent().data("colorid"),
                                                    quantity: t,
                                                    price: parseFloat(FL.QuickLook.smtrPrice),
                                                    price_original: parseFloat(n.replace("$", "").replace(",", ""))
                                                }]
                                            }
                                        };
                                    rfk.push(["trackEvent", s])
                                }
                                setTimeout(FL.QuickLook.smtrAddToCart, 500), setTimeout(function() {
                                    FL.DynamicYield.addCartEvent(!0)
                                }, 500);
                                var l = i.find(".priceVariable:not(.hide)").find(".nowPrice").length > 0 ? i.find(".priceVariable:not(.hide)").find(".nowPrice").text() : i.find(".priceVariable:not(.hide)").find(".fullPrice").text();
                                l = parseFloat(l.replace("$", ""));
                                var d = {
                                    product_id: FL.QuickLook.selectedProductId,
                                    style_id: $(".color-image.selected").parent().data("colorid").split("-")[0],
                                    color_id: $(".color-image.selected").parent().data("colorid").split("-")[1],
                                    size: selectedSize,
                                    quantitiy: FL.QuickLook.smtrQuantity,
                                    price: parseFloat(FL.QuickLook.smtrPrice)
                                };
                                FL.optimove.reportEvent("add_cart", d)
                            }
                        }
                    })
                } else $("#buttonAddToCart").removeClass("addingToCart"), FL.QuickLook.addTries = 0
        } else FL.QuickLook.displaySelectSizeMessage()
    },
    smtrAddToCart: function() {
        var e, t = FL.QuickLook,
            a = $.trim($("#orderSummaryOrderTotal").text()).replace("$", "").replace(",", ""),
            i = i || window._smtr || [];
        a.length > 0 ? (e = ["addToCart", {
            cartItems: [{
                productId: t.smtrProductId,
                qty: t.smtrQuantity,
                price: t.smtrPrice
            }],
            cartTotal: a
        }], i.push(e)) : setTimeout(t.smtrAddToCart, 500)
    },
    displaySelectSizeMessage: function() {
        var e = $(".add-to-cart-tooltip"),
            t = $("#addToCartControl");
        clearTimeout(FL.QuickLook.timerTooltip), e.css("width", t.width() + "px"), t.foundation("show"), $(window).on("resize", function() {
            t.foundation("hide")
        }), $(".reveal-overlay").scroll(function() {
            t.foundation("hide")
        }), FL.QuickLook.timerTooltip = setTimeout(function() {
            t.foundation("hide")
        }, 3e3)
    },
    initRecommendations: function() {
        var e = $(".quicklook-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        })
    }
}, FL.QuickLook), window.FL = window.FL || {}, FL.myaccount = FL.myaccount || {};
var FlIsAjaxExecuting = !1;
FL.myaccount = jQuery.extend(!0, {
    Regex: /^[^~\-_@$*()={}\\\/^%!&"']*$/,
    NameRegex: /^([a-zA-Z\-_]+\s?)+$/,
    DateRegex: /^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/,
    TempPwRegex: /^[a-zA-Z0-9äöüÄÖÜ]*$/,
    reCaptchaCalled: !1,
    init: function() {
        FL.myaccount.initMobileMenu(), FL.myaccount.initRewardCountdowns(), FL.myaccount.initCreateCrmAccountForm(), FL.myaccount.initCreateAccountForm(), FL.myaccount.completeStoreRegistrationVal(), FL.myaccount.initResetPassword(), FL.myaccount.initCrmChangePassword(), FL.myaccount.handleSavedCartMessages(), FL.myaccount.initProfile(), FL.myaccount.initBarCode(), FL.myaccount.initRecommendations(), $(".mobileOrderDetailLink").on("click", FL.myaccount.mobileOrderDetailClick), $(".GaugeMeter").gaugeMeter(), FL.Grid.checkIsOnModel()
    },
    initRecommendations: function() {
        var e = $(".account-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        }), $("#recommendedProductsSection").addClass("hide")
    },
    savedAddressValidation: function(e) {
        $("#registrationAddressForm").validate({
            rules: {
                address1: {
                    required: !0,
                    minlength: 5,
                    pattern: FL.myaccount.Regex
                },
                city: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                state: {
                    required: !0,
                    pattern: FL.myaccount.Regex
                },
                zip: {
                    required: !0,
                    pattern: FL.myaccount.Regex
                },
                phone: {
                    phoneUS: !0
                }
            },
            messages: {
                address1: {
                    required: "Address is required",
                    pattern: "Special characters not allowed"
                },
                city: {
                    required: "City is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                state: {
                    required: "State is required",
                    pattern: "Special characters not allowed"
                },
                zip: {
                    required: "Zip code is required",
                    minLength: "At least 5 numbers are required"
                },
                phone: {
                    required: "Phone number is required",
                    phoneUS: "Please enter a valid phone number"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#registrationAddressForm").valid() && (e.preventDefault(), $.ajax({
            data: $("#registrationAddressForm").serialize(),
            url: $("#registrationAddressForm").attr("action"),
            async: !1,
            success: function(e) {
                if (e.success) window.location.href = "/store/myaccount/wcAccountPreferences.jsp";
                else {
                    if (FL.global.hideOverlay(), !($(e).filter("#upsAddresses").length > 0)) {
                        var t = !1;
                        return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addressAddForm").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addressAddForm").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addressAddForm").val(e.generatedSecureNumber)), !1
                    }
                    $("#registerUpsModal").html(e).foundation("open"), $(".address-container").on("click", function() {
                            var e = $(this);
                            $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
                        }),
                        $("body").on("click", "#createProfile_submit", function(e) {
                            e.preventDefault();
                            var t = $(".address-container.active");
                            jQuery("#registrationAddressForm").find("#address1").val(t.find(".address1").text().capitalize()).end().find("#address2").val(t.find(".address2").text().capitalize()).end().find("#city").val(t.find(".city").text().capitalize()).end().find("#state").val(t.find(".state").text()).end().find("#zip").val(t.find(".zip").text()).end().find("#upsValidation").val("false").end(), $("#registerUpsModal").foundation("close"), FL.global.showOverlay(), $.ajax({
                                data: $("#registrationAddressForm").serialize(),
                                url: $("#registrationAddressForm").attr("action"),
                                async: !1,
                                success: function(e) {
                                    if (e.success) {
                                        var t = "true" === e.return_url ? "favorites.jsp" : "/store/myaccount/wcAccountPreferences.jsp";
                                        window.location.href = t
                                    }
                                }
                            })
                        })
                }
            }
        }))
    },
    addressFormValidation: function(e) {
        $("#registrationAddressForm").is(":visible") && $("#saveButton").on("click", FL.myaccount.savedAddressValidation), $("#registrationAddressForm #formReceiveEmail").on("change", function() {
            $(this).is(":checked") ? $("#profilePhone").addClass("required") : $("#profilePhone").removeClass("required")
        })
    },
    initProfile: function() {
        $("#myAccountJoinNow").on("click", function(e) {
            $("[data-crmfeatureflag='true']").length && "" === e.target.dataset.dob && (e.preventDefault(), $("#noDOBModal"), ajaxUrl = FL.contextPath + "/rwd/checkout/modals/winnersCircleDobAndAge.jsp?ProfileValue=true", FL.modal.open(ajaxUrl, "custom-small", FL.myaccount.initDOBForm))
        })
    },
    initMobileMenu: function() {
        $("#myAccountSelectMenu").val($("#myAccountPage").val()), $("#myAccountSelectMenu").on("change", function() {
            var e = $(this).find("option:selected").val(),
                t = "";
            (t = "signout" == e ? $(".my-account-signout").attr("href") : $(this).find("option:selected").attr("data-url")) && (window.location = t)
        })
    },
    initRewardCountdowns: function() {
        $(".reward-expire").each(function() {
            var e = $(this).find(".reward-countdown"),
                t = e.attr("data-date");
            if (t.indexOf("/") > 0) {
                var a = t.split("/"),
                    i = new Date(a[2], parseInt(a[0]) - 1, a[1]);
                i.setDate(i.getDate() + 1);
                var o = new Date;
                Math.abs(i - o) / 36e5 < 72 ? ($(this).show(), e.countdown(i, function(t) {
                    e.text(t.strftime("%I:%M:%S"))
                })) : $(this).hide()
            }
        })
    },
    initDOBForm: function() {
        FL.mask.init(), $("#checkoutRegisterForm").validate({
            rules: {
                profileBirthDate: {
                    required: !0
                }
            },
            messages: {
                profileBirthDate: {
                    required: "Please enter your birth date."
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#completeAccount").on("click", FL.checkout.confirm.completeAccountClicked)
    },
    mobileOrderDetailClick: function() {
        var e = $(this).attr("data-orderId"),
            t = $(this).attr("data-state");
        if ("false" == $(this).attr("data-showDetails")) var a = FL.contextPath + "/myaccount/gadgets/orderDetailResponseContent.jsp?orderId=" + e + "&state=" + t;
        else var a = FL.contextPath + "/myaccount/gadgets/orderDetailContent.jsp?orderId=" + e + "&state=" + t;
        var i = FL.global.offCanvas.open("full", "right", "overlap", $("#orderDetailSlideShell").html());
        i.find(".offCanvasHeader").html("Purchase #" + e), $.ajax(a).done(function(e) {
            i.find("#orderDetailSlideContent").html(e), FL.myaccount.replaceHideLink()
        })
    },
    replaceHideLink: function() {
        $(".return-replace-link").each(function() {
            var e = new Date($(this).find($("input")).first().val());
            e.setDate(e.getDate() + 45);
            var t = new Date;
            t = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0, 0);
            var a = $(this).find($("input")).last().val();
            (e < t || "cancelled" == a.toLowerCase()) && $(this).hide()
        })
    },
    charCountFail: function() {
        $("#charCount").find(".statusIcon").removeClass("icon icon-checkmark"), $("#crmOn").find("#formPassword").addClass("error"), $("#charCount").find(".statusIcon").empty(), $("#pwReqs").find("#charCount").css("color", "#de1e05"), $("#charCount").find(".statusIcon").append("&nbsp;! ")
    },
    specCharFail: function() {
        $("#specChar").find(".statusIcon").removeClass("icon icon-checkmark"), $("#crmOn").find("#formPassword").addClass("error"), $("#specChar").find(".statusIcon").empty(), $("#pwReqs").find("#specChar").css("color", "#de1e05"), $("#specChar").find(".statusIcon").append("&nbsp;! ")
    },
    charCountPass: function() {
        $("#charCount").find(".statusIcon").empty(), $("#crmOn").find("#formPassword").removeClass("error"), $("#pwReqs").find("#charCount").css("color", "#468800"), $("#charCount").find(".statusIcon").addClass("icon icon-checkmark")
    },
    specCharPass: function() {
        $("#specChar").find(".statusIcon").empty(), $("#crmOn").find("#formPassword").removeClass("error"), $("#pwReqs").find("#specChar").css("color", "#468800"), $("#specChar").find(".statusIcon").addClass("icon icon-checkmark")
    },
    specCharClearStatus: function() {
        $("#pwReqs").find("#specChar").css("color", "#333"), $("#specChar").find(".statusIcon").removeClass("icon icon-checkmark"), $("#specChar").find(".statusIcon").empty(), $("#crmOn").find(".pwPass").removeClass("icon icon-checkmark")
    },
    charCountClearStatus: function() {
        $("#pwReqs").find("#charCount").css("color", "#333"), $("#charCount").find(".statusIcon").removeClass("icon icon-checkmark"), $("#charCount").find(".statusIcon").empty(), $("#crmOn").find(".pwPass").removeClass("icon icon-checkmark")
    },
    passWordValidation: function() {
        $("#formPassword").focus(function() {
            $("#pwReqs").show()
        }), $("#formPassword").on("input", function() {
            var e = $("#formPassword").val().length,
                t = $("#crmOn").find("#formPassword").val(),
                a = /[!"#$%'&()*+,-.\/:;<=>?@^_`{|}~]/.test(t);
            e >= 8 ? FL.myaccount.charCountPass() : FL.myaccount.charCountClearStatus(), a ? FL.myaccount.specCharPass() : FL.myaccount.specCharClearStatus()
        }), $("#formPassword").blur(function() {
            var e = $("#formPassword").val().length,
                t = $("#crmOn").find("#formPassword").val(),
                a = /[!"#$%&'()*+,-.\/:;<=>?@^_`{|}~]/.test(t);
            e <= 7 && FL.myaccount.charCountFail(), !1 === a && FL.myaccount.specCharFail(), a && e >= 8 && ($("#pwReqs").hide(), $("#crmOn").find(".pwPass").addClass("icon icon-checkmark"))
        })
    },
    initCreateCrmAccountForm: function() {
        FL.myaccount.passWordValidation(), FL.mask.init(), $("#profileAgreeTC, #formReceiveEmail").on("keydown", function(e) {
            13 == e.which && $(this).prop("checked", !$(this).prop("checked"))
        }), $("#createCrmAccountButton").on("keydown", function(e) {
            13 == e.which && setTimeout(function() {
                $("#createCrmAccountButton").click()
            }, 500)
        }), $("#formEmail").on("change", FL.myaccount.onEmailChange), $("#createCrmAccountButton").off("click").on("click", FL.myaccount.clickCreateCrmAccount), $(document).on("keyup", "#formPassword", function(e) {
            var t = $("#formPassword").val();
            $(".invalid-char-error").css("display", "none"), $("#crmOn").find("#formPassword").removeClass("error"), t.search(/[[\\\]]/) >= 0 ? ($("#crmOn").find("#formPassword").removeClass("valid"), $("#crmOn").find("#formPassword").addClass("error"), $(".invalid-char-error").css({
                display: "block",
                color: "#de1e05"
            })) : $("#crmOn").find("#formPassword").removeClass("error"), $("#formPassword-error").is(":visible") && $("#crmOn").find("#formPassword").addClass("error")
        }), $("#registerForm").validate({
            rules: {
                firstname: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                lastname: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                formEmail: {
                    required: !0,
                    email: !0
                },
                formPassword: {
                    required: !0
                },
                formConfirmPassword: {
                    required: !0,
                    equalTo: "#formPassword"
                },
                profileBirthDate: {
                    required: !0,
                    pattern: FL.myaccount.DateRegex
                },
                reCaptchaResponse: {
                    required: !0
                }
            },
            messages: {
                firstname: {
                    required: "First Name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                lastname: {
                    required: "Last Name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                formEmail: {
                    required: "Email is required",
                    email: "Please enter a valid email address in the format xxx@xxx.xxx"
                },
                formPassword: {
                    required: "Password is required",
                    minlength: "At least 6 characters are required"
                },
                formConfirmPassword: {
                    required: "Confirm Password is required",
                    equalTo: "The confirmed password does not match"
                },
                profileBirthDate: {
                    required: "Birth Date is required",
                    pattern: "Please enter a valid date in this format MM/DD/YYYY"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#recaptcha-container").length > 0 && !1 === FL.myaccount.reCaptchaCalled && (FL.myaccount.reCaptchaCalled = !0, FL.myaccount.reCaptcha.init("recaptcha-container", "reCaptchaResponse"))
    },
    clickCreateCrmAccount: function(e) {
        e.preventDefault();
        var t, a = a || window._smtr || [];
        if ($(".tc-checkbox-error").hide(), $(".wcFormErrorsText").html(""), $(".wcFormErrors").addClass("hide"), !$("#profileAgreeTC").is(":checked")) return $(".tc-checkbox-error").show(), void FL.myaccount.optimiveEventWinnersCircle();
        if ($(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1), $("#registerForm").valid()) {
            FL.Tealium.clickRegisterCreateAccount();
            var i = moment().add(-13, "year").add(1, "day"),
                o = moment($("#profileBirthDate").val());
            if (!i.isAfter(o)) return errorHTML = "Birth Date does not meet minimum age requirements for Winner's Circle.", $(".wcFormErrorsText").html(errorHTML), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove(), $("#profileBirthDate").focus(), !1;
            if ($("#WCValidateEmailForm").val($("#formEmail").val()), $("#WCValidatePasswordForm").val($("#formPassword").val()), $("#WCValidateConfirmForm").val($("#formConfirmPassword").val()), $("#formReceiveEmail").is(":checked")) {
                $("#receiveEmailForm").val("true");
                var a = a || window._smtr || [];
                a.push(["onEmail", {
                    email: $("#formEmail").val(),
                    type: "marketing"
                }])
            } else $("#receiveEmailForm").val("false");
            FL.global.showOverlay(), $.ajax({
                data: $("#createWCValidateEmailForm").serialize(),
                type: "POST",
                url: $("#createWCValidateEmailForm").attr("action"),
                success: function(e) {
                    if (e.success) {
                        var a = $("#profileBirthDate").val(),
                            i = a.split("/");
                        $("#dobmo").val(i[0]), $("#dobday").val(i[1]), $("#dobyr").val(i[2]), $("#formReceiveEmail").is(":checked") ? ($("#receiveEmailHidden").val("true"), $("#receiveEmailCheckbox").val("true"), t = ["onEmail", {
                            email: $("#formEmail").val(),
                            type: "marketing"
                        }]) : ($("#receiveEmailHidden").val("false"), $("#receiveEmailCheckbox").val("false")), $("#email").val($("#formEmail").val()), $("#WCValidatePassword").val($("#formPassword").val()), $("#WCValidateConfirm").val($("#formConfirmPassword").val()), $.ajax({
                            data: $("#registerForm").serialize(),
                            url: $("#registerForm").attr("action"),
                            type: "POST",
                            async: !1,
                            success: function(e) {
                                if (e.success) {
                                    var t = {
                                        first_name: !0,
                                        last_name: !0,
                                        email: !0,
                                        birth_date: !0,
                                        password: !0,
                                        confirm_password: !0,
                                        i_agree_checkbox: !0,
                                        recaptcha: !0
                                    };
                                    FL.optimove.reportEvent("started_winners_circle", t), window.location.href = "/store/myaccount/addProfileAddress.jsp?accountCreation=true"
                                } else {
                                    FL.global.hideOverlay();
                                    var a = "An error has occured. Please try your request again.";
                                    e.flMinAgeRequirements && (a = "Birth Date does not meet minimum age requirements for Winner's Circle."), e.flRestrictedCharacters && (a = "Special characters are not allowed. Please check your input and try again."), e.crmServiceDownWhileRegistration && (a = "An error occurred while creating the account. Please try again later."), $(".wcFormErrorsText").html(a), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove()
                                }
                                return !0
                            }
                        })
                    } else {
                        FL.global.hideOverlay();
                        var o = "",
                            r = !1,
                            n = !1,
                            s = "";
                        if ($.each(e.errors, function(e, t) {
                                switch ("" != o && e > 0 && (o += "<br>"), t) {
                                    case "flInvalidPasswordLength":
                                        o += "Your password must be between 8 and 25 characters long.";
                                        break;
                                    case "flDuplicateEmail":
                                        r = !0;
                                        break;
                                    case "wcAccountExist":
                                        n = !0;
                                        break;
                                    case "crmServiceDown":
                                        o += "An error occurred while creating the account. Please try again."
                                }
                            }), o || (o = "An error has occured. Please try your request again."), r) return s = FL.contextPath + "/myaccount/modals/emailExistsInATGDB.jsp", void FL.modal.open(s, "custom-small");
                        if (n) return s = FL.contextPath + "/myaccount/modals/emailExistsInXBR.jsp", void FL.modal.open(s, "custom-small");
                        $(".wcFormErrorsText").html(o), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove()
                    }
                }
            })
        } else FL.myaccount.optimiveEventWinnersCircle()
    },
    optimiveEventWinnersCircle: function() {
        var e = last_name = email = birth_date = password = confirm_password = i_agree_checkbox = recaptcha = !1;
        "" == $("#registerForm #firstname").val() || $("#registerForm #firstname").hasClass("error") || (e = !0), "" == $("#registerForm #lastname").val() || $("#registerForm #lastname").hasClass("error") || (last_name = !0), "" == $("#registerForm #formEmail").val() || $("#registerForm #formEmail").hasClass("error") || (email = !0), "" == $("#registerForm #profileBirthDate").val() || $("#registerForm #profileBirthDate").hasClass("error") || (birth_date = !0), "" == $("#registerForm #formPassword").val() || $("#registerForm #formPassword").hasClass("error") || (password = !0), "" == $("#registerForm #formConfirmPassword").val() || $("#registerForm #formConfirmPassword").hasClass("error") || (confirm_password = !0), $("#profileAgreeTC").is(":checked") && (i_agree_checkbox = !0), "none" == $("#reCaptchaResponse-error").css("display") && (recaptcha = !0);
        var t = {
            first_name: e,
            last_name: last_name,
            email: email,
            birth_date: birth_date,
            password: password,
            confirm_password: confirm_password,
            i_agree_checkbox: i_agree_checkbox,
            recaptcha: recaptcha
        };
        FL.optimove.reportEvent("started_winners_circle", t)
    },
    initCreateAccountForm: function() {
        $("#createAccountButton").on("click", FL.myaccount.clickCreateAccount), FL.mask.init(), $("#registerForm").validate({
            rules: {
                firstname: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                lastname: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                formEmail: {
                    required: !0,
                    email: !0
                },
                formPassword: {
                    required: !0
                },
                formConfirmPassword: {
                    required: !0,
                    equalTo: "#formPassword"
                },
                address1: {
                    required: !0,
                    minlength: 5,
                    pattern: FL.myaccount.Regex
                },
                city: {
                    required: !0,
                    pattern: FL.myaccount.NameRegex
                },
                state: {
                    required: !0,
                    pattern: FL.myaccount.Regex
                },
                zip: {
                    required: !0
                },
                profilePhone: {
                    required: !0,
                    phoneUS: !0
                },
                profileBirthDate: {
                    required: !0,
                    pattern: FL.myaccount.DateRegex
                },
                gender: {
                    required: !0
                },
                reCaptchaResponse: {
                    required: !0
                }
            },
            messages: {
                firstname: {
                    required: "First Name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                lastname: {
                    required: "Last Name is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                formEmail: {
                    required: "Email is required",
                    email: "Please enter a valid email address in the format xxx@xxx.xxx"
                },
                formPassword: {
                    required: "Password is required",
                    minLength: "At least 6 characters are required"
                },
                formConfirmPassword: {
                    required: "Confirm Password is required",
                    equalTo: "The confirmed password does not match"
                },
                address1: {
                    required: "Street Address is required",
                    pattern: "Special characters not allowed",
                    minLength: "At least 5 characters are required"
                },
                city: {
                    required: "City is required",
                    pattern: "Special characters and numbers are not allowed"
                },
                state: {
                    required: "State is required",
                    pattern: "Special characters not allowed"
                },
                zip: {
                    required: "Zip Code is required",
                    minLength: "At least 5 numbers are required"
                },
                profilePhone: {
                    required: "Phone is required",
                    phoneUS: "Please enter a valid phone number"
                },
                profileBirthDate: {
                    required: "Birth Date is required",
                    pattern: "Please enter a valid date in this format MM/DD/YYYY"
                },
                gender: {
                    required: "Gender is required"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#recaptcha-container").length > 0 && !1 === FL.myaccount.reCaptchaCalled && (FL.myaccount.reCaptchaCalled = !0, FL.myaccount.reCaptcha.init("recaptcha-container", "reCaptchaResponse"))
    },
    clickCreateAccount: function(e) {
        e.preventDefault();
        var t = t || window._smtr || [];
        if ($(".tc-checkbox-error").hide(), $(".wcFormErrorsText").html(""), $(".wcFormErrors").addClass("hide"), !$("#profileAgreeTC").is(":checked")) return void $(".tc-checkbox-error").show();
        if ($("#registerForm").valid()) {
            if ($("#WCValidateEmailForm").val($("#formEmail").val()), $("#WCValidatePasswordForm").val($("#formPassword").val()), $("#WCValidateConfirmForm").val($("#formConfirmPassword").val()), $("#formReceiveEmail").is(":checked")) {
                $("#receiveEmailForm").val("true");
                var t = t || window._smtr || [];
                t.push(["onEmail", {
                    email: $("#formEmail").val(),
                    type: "marketing"
                }])
            } else $("#receiveEmailForm").val("false");
            if ("success" == $("#validateUserParam").val()) return FL.myaccount.submitCreateAccountForm(), !1;
            FL.global.showOverlay(), $.ajax({
                data: $("#createWCValidateEmailForm").serialize(),
                type: "POST",
                url: $("#createWCValidateEmailForm").attr("action"),
                success: function(e) {
                    if (e.success) FL.myaccount.submitCreateAccountForm();
                    else {
                        FL.global.hideOverlay();
                        var t = "",
                            a = !1,
                            i = !1,
                            o = "";
                        if ($.each(e.errors, function(e, o) {
                                switch ("" != t && e > 0 && (t += "<br>"), o) {
                                    case "flMisformedPassword":
                                        t += "Your password can only contain alphanumeric characters.";
                                        break;
                                    case "flInvalidPasswordLength":
                                        t += "Your password must be between 6 and 25 characters long.";
                                        break;
                                    case "flDuplicateEmail":
                                        a = !0;
                                        break;
                                    case "wcAccountExist":
                                        i = !0
                                }
                            }), t || (t = "An error has occured. Please try your request again."), a) return o = FL.contextPath + "/myaccount/modals/emailExistsInATGDB.jsp", void FL.modal.open(o, "custom-small");
                        if (i) return o = FL.contextPath + "/myaccount/modals/emailExistsInXBR.jsp", void FL.modal.open(o, "custom-small");
                        $(".wcFormErrorsText").html(t), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove()
                    }
                }
            })
        }
    },
    submitCreateAccountForm: function() {
        var e = $("#profileBirthDate").val(),
            t = e.split("/");
        $("#dobmo").val(t[0]), $("#dobday").val(t[1]), $("#dobyr").val(t[2]), $("#formReceiveEmail").is(":checked") ? ($("#receiveEmailHidden").val("true"), $("#receiveEmailCheckbox").val("true"), smtrArray = ["onEmail", {
            email: $("#formEmail").val(),
            type: "marketing"
        }]) : ($("#receiveEmailHidden").val("false"), $("#receiveEmailCheckbox").val("false")), $("#email").val($("#formEmail").val()), $("#WCValidatePassword").val($("#formPassword").val()), $("#WCValidateConfirm").val($("#formConfirmPassword").val()), $("#profilePhone").val($("#profilePhone").val().replace(/\-/g, "")), $.ajax({
            data: $("#registerForm").serialize(),
            url: $("#registerForm").attr("action"),
            type: "POST",
            async: !1,
            success: function(e) {
                if (e.success) window.location.href = "/store/myaccount/profile.jsp?accountCreation=true";
                else if (FL.global.hideOverlay(), $(e).filter("#upsAddresses").length > 0) $("#registerUpsModal").html(e).foundation("open"), FL.myaccount.UpsAddress.init();
                else {
                    var t = "An error has occured. Please try your request again.";
                    e.flMisformedPhoneNumber && (t = "Phone number is not in the correct format: XXX-XXX-XXXX."), e.flMisformedPostalCode && (t = "Zip Code is not in the correct format: XXXXX."), e.flMinAgeRequirements && (t = "Birth Date does not meet minimum age requirements for Winner's Circle."), e.flRestrictedCharacters && (t = "Special characters are not allowed. Please check your input and try again."), $(".wcFormErrorsText").html(t), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove()
                }
                return !0
            }
        })
    },
    initExistingWCForm: function() {
        var e = $("#wcAddNumberForm");
        e.on("submit", FL.myaccount.submitExistingWCForm), e.validate({
            rules: {
                winnersCircleNumber: {
                    required: !0,
                    number: !0
                },
                wcEmail: {
                    required: !0,
                    email: !0
                },
                wcZipcode: {
                    required: !0
                },
                reCaptchaResponseConfirm: {
                    required: !0
                }
            }
        }), $("#recaptcha-container-confirm").length > 0 && FL.myaccount.reCaptcha.init("recaptcha-container-confirm", "reCaptchaResponseConfirm"), $("#signinEmail").on("change", function() {
            var e = e || window._smtr || [];
            e.push(["onEmail", {
                email: $(this).val(),
                type: "account"
            }])
        })
    },
    submitExistingWCForm: function(e) {
        return !!$(this).valid() && (FL.global.showOverlay(), !0)
    },
    onEmailChange: function(e) {
        var t, a = a || window._smtr || [];
        t = ["onEmail", {
            email: $(this).val(),
            type: "account"
        }], a.push(t)
    },
    initBarCode: function() {
        var e = $("#couponCode").val(),
            t = $("#wcNumber").val(),
            a = [e, t];
        $.each([128], function(e, t) {
            $("#out" + this).barcode(a[1], "code" + this, {
                barWidth: 2,
                barHeight: 75,
                color: "#003d6b",
                fontSize: 20
            })
        }), Foundation.MediaQuery.is("small only") ? $.each([39], function(e, t) {
            $("#out" + this).barcode(a[0], "code" + this, {
                barWidth: 1,
                barHeight: 60,
                color: "#003d6b",
                fontSize: 16
            })
        }) : $.each([39], function(e, t) {
            $("#out" + this).barcode(a[0], "code" + this, {
                barWidth: 2,
                barHeight: 75,
                color: "#003d6b",
                fontSize: 20
            })
        }), $("#printButton").on("click", function() {
            window.print()
        })
    },
    reCaptcha: {
        init: function(e, t) {
            "undefined" != typeof grecaptcha && void 0 !== grecaptcha.render ? grecaptcha.render(e, {
                sitekey: "6Les1CgUAAAAAEXURz0RuAzML1XMut_vnh2UcBDN",
                callback: function(e) {
                    FL.myaccount.reCaptcha.callback(e, t)
                },
                "expired-callback": function() {
                    FL.myaccount.reCaptcha.expiredCallback(t)
                }
            }) : setTimeout(function() {
                FL.myaccount.reCaptcha.init(e, t)
            }, 100)
        },
        callback: function(e, t) {
            $('div[for="' + t + '"]').remove(), $("#createCrmAccountButton").attr("disabled", "disabled"), $.ajax({
                url: "/store/myaccount/gadgets/recaptchaValidation.jsp",
                data: {
                    gresponse: e
                },
                type: "post",
                success: function(a, i, o) {
                    !0 === JSON.parse(a).success ? $("#" + t).val(e) : $("#" + t).val("")
                },
                complete: function() {
                    $("#createCrmAccountButton").removeAttr("disabled")
                }
            })
        },
        expiredCallback: function(e) {
            $("#" + e).val("")
        }
    },
    UpsAddress: {
        init: function() {
            $(".address-container").on("click", function() {
                var e = $(this);
                $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
            }), $("body").on("click", "#createProfile_submit", function(e) {
                e.preventDefault();
                var t = $(".address-container.active");
                jQuery("#registerForm").find("#address1").val(t.find(".address1").text().capitalize()).end().find("#address2").val(t.find(".address2").text().capitalize()).end().find("#city").val(t.find(".city").text().capitalize()).end().find("#state").val(t.find(".state").text()).end().find("#zip").val(t.find(".zip").text()).end().find("#upsValidation").val("false").end().find("#receiveEmail").val($("#upsReceiveEmail").val()).end(), $("#registerUpsModal").foundation("close"), FL.myaccount.clickCreateAccount(e)
            })
        }
    },
    initResetPassword: function() {
        FL.myaccount.passWordValidation(), $("#resetPwForm").validate({
            rules: {
                formPassword: {
                    required: !0,
                    equalTo: "#confirmpassword"
                },
                confirmpassword: {
                    required: !0,
                    equalTo: "#formPassword"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#resetPwForm").on("submit", function() {
            return $("#resetPwForm").valid() && ($(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1), $("#resetPwForm").submit()), !1
        })
    },
    handleSavedCartMessages: function() {
        var e = $("#cartItemsSavedtoProfileflag").val(),
            t = $("#cartMergedWithItems").val(),
            a = $("#cartRemovedWithItems").val();
        1 != e && "true" != e || ($("#savedCartMessagesModal  .saved-cart-message").html("Your cart was merged with items you previously added before registration.").append(""), $("#savedCartMessagesModal  .jds-saved-cart-message").html("Your basket was merged with items you previously added before registration.").append(""), $("#savedCartMessagesModal").foundation("open")), 1 != t && "true" != t || 1 != a && "true" != a ? 1 == t || "true" == t ? ($("#savedCartMessagesModal  .saved-cart-message").html("Your cart was merged with items you previously added while signed in.").append(""), $("#savedCartMessagesModal  .jds-saved-cart-message").html("Your cart was merged with items you previously added while signed in.").append(""), $("#savedCartMessagesModal").foundation("open")) : 1 != a && "true" != a || ($("#savedCartMessagesModal  .saved-cart-message").html("Your cart was updated to reflect availability of items you previously added while signed in.").append(""), $("#savedCartMessagesModal  .jds-saved-cart-message").html("Your cart was updated to reflect availability of items you previously added while signed in.").append(""), $("#savedCartMessagesModal").foundation("open")) : ($("#savedCartMessagesModal  .saved-cart-message").html("<p>Your cart was merged with items you previously added while signed in.</p> <p>Your cart was updated to reflect availability of items you previously added while signed in.</p>").append(""), $("#savedCartMessagesModal  .jds-saved-cart-message").html("<p>Your cart was merged with items you previously added while signed in.</p> <p>Your cart was updated to reflect availability of items you previously added while signed in.</p>").append(""), $("#savedCartMessagesModal").foundation("open"))
    },
    initCrmChangePassword: function() {
        FL.myaccount.passWordValidation(), $("#CRMchangePasswordForm").validate({
            rules: {
                currentPassword: {
                    required: !0
                },
                formPassword: {
                    required: !0,
                    equalTo: "#confirmPassword"
                },
                confirmPassword: {
                    required: !0,
                    equalTo: "#formPassword"
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        }), $("#changePwForm").on("click", function() {
            if ($("#formPassword").hasClass("error")) return !1
        }), $("#crmOn").find("#CRMchangePasswordForm").on("submit", function() {
            function e(e) {
                if (e && e.hasOwnProperty("errors"))
                    for (var t = 0; t < e.errors.length; t++) $("#CRMchangePasswordErrorContainer").append('<div class="alert callout" data-closable>' + e.errors[t] + '<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>');
                else $("#changePasswordModal").foundation("close"), $("#passwordChangeContainer").html("<p>Password Changed Successfully</p>")
            }

            function t(e) {
                $("#CRMchangePasswordErrorContainer").append('<div class="alert callout" data-closable>An error occured saving your new password. Please try again later.<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>')
            }
            return $(window).width() <= 1024 ? $("#mobilePassword").val(!0) : $("#mobilePassword").val(!1), $("#CRMchangePasswordErrorContainer").html(""), $("#CRMchangePasswordForm").valid() && $.ajax({
                type: "POST",
                url: $("#CRMchangePasswordForm").attr("action"),
                data: $("#CRMchangePasswordForm").serialize(),
                success: e,
                error: t
            }), !1
        })
    },
    completeStoreRegistrationVal: function() {
        FL.myaccount.passWordValidation(), FL.mask.init(), $("#createCrmAccountButton").off("click").on("click", FL.myaccount.clickCreateCrmAccount), $("#registerForm").validate({
            rules: {
                formPassword: {
                    required: !0
                },
                formConfirmPassword: {
                    required: !0,
                    equalTo: "#formPassword"
                },
                profileBirthDate: {
                    required: !0,
                    pattern: FL.myaccount.DateRegex
                }
            },
            messages: {
                formConfirmPassword: {
                    required: "This field is required",
                    pattern: "Please enter the same value again."
                }
            },
            onfocusout: !1,
            invalidHandler: function(e, t) {
                t.numberOfInvalids() && t.errorList[0].element.focus()
            }
        })
    },
    Profile: {
        Regex: /^[^~\-_@$*()={}\\\/^%!&"']*$/,
        NameRegex: /^([a-zA-Z\-_]+\s?)+$/,
        DateRegex: /^(0[1-9]|1[012])[- \/.](0[1-9]|[12][0-9]|3[01])[- \/.](19|20)\d\d$/,
        init: function() {
            FL.myaccount.Profile.initInformationForm(), FL.myaccount.Profile.initBrands(), FL.myaccount.Profile.initSize(), FL.myaccount.Profile.initGender(), FL.myaccount.Profile.initUpdatePreferences(), FL.myaccount.Profile.initGlobalSave(), FL.myaccount.Profile.initAddressModals(), FL.myaccount.Profile.initPasswordChangeForm(), FL.myaccount.Profile.adressValidations(), FL.myaccount.Profile.creditCardForm(), FL.myaccount.Profile.selectAddressState()
        },
        initInformationForm: function(e) {
            $("#personalProfileForm").find("#email").on("change", FL.myaccount.onEmailChange), $("#personalProfileForm").validate({
                rules: {
                    firstname: {
                        required: !0,
                        pattern: FL.myaccount.NameRegex
                    },
                    lastname: {
                        required: !0,
                        pattern: FL.myaccount.NameRegex
                    },
                    email: {
                        required: !0,
                        email: !0
                    },
                    profileBirthDate: {
                        required: !0,
                        pattern: FL.myaccount.DateRegex
                    },
                    address1: {
                        minlength: 5
                    },
                    city: {
                        pattern: FL.myaccount.NameRegex
                    },
                    state: {
                        pattern: FL.myaccount.Regex
                    },
                    phone: {
                        required: !1,
                        phoneUS: !0
                    },
                    zip: {
                        pattern: FL.myaccount.Regex,
                        minlength: 5
                    },
                    postalCode: {
                        pattern: FL.myaccount.Regex,
                        minlength: 5
                    }
                },
                messages: {
                    firstname: {
                        required: "First Name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastname: {
                        required: "Last Name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    },
                    profileBirthDate: {
                        required: "Birth Date is required",
                        pattern: "Please enter a valid date in this format MM/DD/YYYY"
                    },
                    address1: {
                        required: "Address is required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "",
                        phoneUS: "Please enter a valid phone number"
                    },
                    zip: {
                        required: "Zip code is required",
                        minlength: "At least 5 numbers are required"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minlength: "At least 5 numbers are required"
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            })
        },
        profileSaveInfo: function(e) {
            e && e.preventDefault();
            var t = moment().add(-13, "year").add(1, "day"),
                a = moment($("#profileBirthDate").val());
            if (!t.isAfter(a)) return errorHTML = "Birth Date does not meet minimum age requirements.", $(".wcFormErrorsText").html(errorHTML), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove(), $("#profileBirthDate").focus(), !1;
            "" != $("input[id='address1']").val() ? $("#validAddressState").val("yes") : $("#validAddressState").val("No"), $(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1), $("#personalProfileForm").valid() && $.ajax({
                data: $("#personalProfileForm").serialize(),
                url: $("#personalProfileForm").attr("action"),
                async: !1,
                success: function(e) {
                    if (e.success && (window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp"), $(".duplicate-email-err").remove(), $(".wcFormErrors").addClass("hide"), $(e).find(".duplicate-email-err").length > 0) return $(".wcFormErrorsText").html($(e).html()), $(".wcFormErrors").removeClass("hide"), $(".wcExistingSuccess").remove(), !1;
                    if (FL.global.hideOverlay(), !($(e).filter("#upsAddresses").length > 0)) {
                        "" == $("#defaultModal").find("#address1").val() ? window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp" : 0 == $(e).filter("#upsAddresses").length && (window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp");
                        var t = !1;
                        return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#personalProfileForm").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#personalProfileForm").val(e.generatedSecureNumber), t = !0), void 0 != e.flDuplicateEmail && ($("#modalErrorMessage").text(e.flSessionNotMatchError), $("#personalProfileForm").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#personalProfileForm").val(e.generatedSecureNumber)), !1
                    }
                    $("#upsAddressModal").html(e), "" == $("#defaultModal").find("#homeAddress1").val() ? window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp" : $("#upsAddressModal").html(e).foundation("open"), $("#address_edit_edit").on("click", function(e) {
                        $("#upsAddressModal").foundation("close"), $("#defaultModal").foundation("open")
                    }), $(".address-container").on("click", function() {
                        var e = $(this);
                        $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
                    }), $("body").on("click", "#createProfile_submit", function(e) {
                        e.preventDefault();
                        var t = $(".address-container.active");
                        jQuery("#personalProfileForm").find("#homeAddress1").val(t.find(".address1").text().capitalize()).end().find("#hiddenAddress1").val(t.find(".address1").text().capitalize()).end().find("#hiddenEmptyAddress1").val(t.find(".address1").text().capitalize()).end().find("#homeAddress2").val(t.find(".address2").text().capitalize()).end().find("#hiddenAddress2").val(t.find(".address2").text().capitalize()).end().find("#hiddenEmptyAddress2").val(t.find(".address2").text().capitalize()).end().find("#homeCity").val(t.find(".city").text().capitalize()).end().find("#hiddenCity").val(t.find(".city").text().capitalize()).end().find("#hiddenEmptyCity").val(t.find(".city").text().capitalize()).end().find("#newAddressState").val(t.find(".state").text()).end().find("#newAddressState").val(t.find(".state").text()).end().find("#hiddenEmptyState").val(t.find(".state").text()).end().find("#homePostalCode").val(t.find(".zip").text()).end().find("#hiddenPostalCode").val(t.find(".zip").text()).end().find("#hiddenEmptyPostalCode").val(t.find(".zip").text()).end().find("#upsValidation").val("false").end(), $("#upsAddressModal").foundation("close"), window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp", $.ajax({
                            data: $("#personalProfileForm").serialize(),
                            url: $("#personalProfileForm").attr("action"),
                            async: !1,
                            success: function(e) {
                                e.success && (window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp")
                            }
                        })
                    })
                }
            })
        },
        adressValidations: function() {
            $(".classname").on("keyup", function() {
                "" != $(this).val() ? ($("#address1").addClass("required"), $("#city").addClass("required"), $("#state").addClass("required"),
                    $("#zip").addClass("required")) : ($("#address1").removeClass("required"), $("#city").removeClass("required"), $("#state").removeClass("required"), $("#zip").removeClass("required"))
            }), $("#state").change(function() {
                "" != $(this).val() ? ($("#address1").addClass("required"), $("#city").addClass("required"), $("#state").addClass("required"), $("#zip").addClass("required")) : ($("#address1").removeClass("required"), $("#city").removeClass("required"), $("#state").removeClass("required"), $("#zip").removeClass("required"))
            }), "" != $("#homeAddress1").val() && ($("#homeAddress1").addClass("required"), $("#homeCity").addClass("required"), $("#newAddressState").addClass("required"), $("#homePostalCode").addClass("required")), $("#newAddressState").change(function() {
                "" != $(this).val() && ($("#homeAddress1").addClass("required"), $("#homeCity").addClass("required"), $("#newAddressState").addClass("required"), $("#homePostalCode").addClass("required"))
            })
        },
        overrideProfileEditAddress: function(e) {
            $("#personalProfileForm #homeAddress1").val(e.address1), $("#personalProfileForm #homeAddress2").val(e.address2), $("#personalProfileForm #homeCity").val(e.city), $("#personalProfileForm #newAddressState").val(e.state), $("#personalProfileForm #homePostalCode").val(e.zip), $("#personalProfileForm #upsValidation").val(e.upsValidation), $("#personalProfileForm #upsAddressModal").foundation("close"), FL.myaccount.Profile.profileSaveInfo()
        },
        initBrands: function() {
            $(".brandOptions a.brand-filter").off().on("click", function() {
                $(this).toggleClass("selected");
                var e = $(this).hasClass("selected");
                $(this).next("input[type='checkbox']").prop("checked", e)
            })
        },
        initSize: function() {
            $(".sizeOptions a.size-filter").off().on("click", function() {
                var e = $(this);
                e.hasClass("active") ? (e.parent().children("input").prop("checked", !1), e.removeClass("active")) : ($("input:checkbox[name='preferencesSize']").prop("checked", !1), $("a[name='preferencesSizeButton']").removeClass("active"), e.parent().children("input").prop("checked", !0), e.toggleClass("active"))
            })
        },
        initGender: function() {
            $(".checkbox-gender").on("click", function() {
                var e = $(this);
                e.is(":checked") ? ($("input:checkbox[name='preferencesGender']").prop("checked", !1), e.prop("checked", !0)) : e.prop("checked", !1)
            })
        },
        initUpdatePreferences: function() {
            $("#js-save-preferences-btn").on("click", function(e) {
                $("input:checkbox[class='hide preference-checkbox']").prop("checked", !1), e.preventDefault(), $("#accountErrorMessage").addClass("hide"), FL.global.showOverlay();
                var t = [];
                $("input:checked").each(function() {
                    t.push($(this).attr("value"))
                });
                var a = JSON.stringify(t).replace("[", "").replace("]", "");
                $("#preferences").val(a.replace(/\"/g, "")), $("#updatePreferencesForm").length ? $.ajax({
                    url: $("#updatePreferencesForm").attr("action"),
                    data: $("#updatePreferencesForm").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        window.location.href = "/store/myaccount/gadgets/profileMyInfo.jsp"
                    },
                    error: function(e, t) {
                        return !1
                    }
                }) : $.ajax({
                    url: $("#preferencesForm").attr("action"),
                    data: $("#preferencesForm").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        window.location.href = "/store/myaccount/profile.jsp?accountCreation=true"
                    },
                    error: function(e, t) {
                        return !1
                    }
                })
            })
        },
        initGlobalSave: function() {
            $(".js-save-profile-btn").on("click", function(e) {
                $("#accountErrorMessage").addClass("hide"), FL.global.showOverlay();
                var t = $("#personalProfileForm");
                if (t.is(":visible")) {
                    var a = $("#profileBirthDate").val(),
                        i = a.split("/");
                    $("#dobmo").val(i[0]), $("#dobday").val(i[1]), $("#dobyr").val(i[2]), $.ajax({
                        url: t.attr("action"),
                        data: t.serialize(),
                        type: "POST",
                        success: function(e) {
                            $(e).find(".callout.alert").length > 0 ? ($("#accountErrorMessage").find(".callout.alert").html($(e).find(".callout.alert").html()), $("#accountErrorMessage").removeClass("hide"), $("#profileDetailsEdit").html($(e).html()), FL.myaccount.Profile.initInformationForm(), FL.myaccount.Profile.adressValidations(), FL.global.hideOverlay()) : $("#preferencesSubmitBtn").click()
                        }
                    })
                } else $("#preferencesSubmitBtn").click()
            })
        },
        initAddressModals: function() {
            var e = $(".wallet-enable").val();
            $("body").on("click", ".add-address-link", function() {
                var t = FL.contextPath + "/myaccount/modals/addAddress.jsp?type=" + $(this).data("type") + "&walletEnable=" + e;
                $.ajax(t).done(function(e) {
                    $("#addAddressModal").html(e).foundation("open")
                })
            }), $("body").on("click", ".edit-address-button", function() {
                var t = FL.contextPath + "/myaccount/modals/editAddress.jsp?addressKey=" + $(this).data("nickname") + "&type=" + $(this).data("type") + "&walletEnable=" + e;
                $.ajax(t).done(function(e) {
                    $("#editAddressModal").html(e).foundation("open")
                })
            }), $("body").on("click", ".delete-address-button", function() {
                var e = $(this).data("nickname");
                e = encodeURIComponent(e);
                var t = FL.contextPath + "/myaccount/modals/deleteCard.jsp?nickName=" + e + "&creditCardType=" + $(this).data("cardtype") + "&creditCardNumber=" + $(this).data("creditcardnumber");
                $.ajax(t).done(function(e) {
                    $("#deleteCreditCardModal").html(e).foundation("open")
                })
            }), $("body").on("open.zf.reveal", "#addAddressModal", function() {
                FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.addAddressValidation(), $("#newAddressSave").on("click", FL.myaccount.Profile.submitAddAddress)
            }), $("body").on("open.zf.reveal", "#editAddressModal", function() {
                FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.editAddressValidation(), $("#editAddressSave").on("click", FL.myaccount.Profile.submitEditAddress)
            }), $("body").on("open.zf.reveal", "#defaultModal", function() {
                FL.myaccount.Profile.initInformationForm(), $("#saveProfileButton").on("click", FL.myaccount.Profile.profileSaveInfo), $("#firstname").on("change keyup", function() {
                    $("#hiddenFirstname").val($(this).val())
                }), $("#lastname").on("change keyup", function() {
                    $("#hiddenLastname").val($(this).val())
                }), $("#homeAddress1").on("change keyup", function() {
                    $("#hiddenAddress1").val($(this).val())
                }), $("#homeAddress2").on("change keyup", function() {
                    $("#hiddenAddress2").val($(this).val())
                }), $("#homeCity").on("change keyup", function() {
                    $("#hiddenCity").val($(this).val())
                }), $("#newAddressState").on("change keyup", function() {
                    $("#hiddenState").val($(this).val())
                }), $("#homePostalCode").on("change keyup", function() {
                    $("#hiddenPostalCode").val($(this).val())
                }), $("#homeAddress1").on("change keyup", function() {
                    $("#hiddenEmptyAddress1").val($(this).val())
                }), $("#homeAddress2").on("change keyup", function() {
                    $("#hiddenEmptyAddress2").val($(this).val())
                }), $("#homeCity").on("change keyup", function() {
                    $("#hiddenEmptyCity").val($(this).val())
                }), $("#newAddressState").on("change keyup", function() {
                    $("#hiddenEmptyState").val($(this).val())
                }), $("#homePostalCode").on("change keyup", function() {
                    $("#hiddenEmptyPostalCode").val($(this).val())
                }), $("#phone").on("change keyup", function() {
                    $("#hiddenPhoneNumber").val($(this).val())
                }), $("#profileBirthDate").on("change keyup", function() {
                    var e = $(this).val(),
                        t = e.split("/");
                    $("#dobmonth").val(t[0]), $("#dobdayval").val(t[1]), $("#dobyrval").val(t[2])
                }), $("#firstname").on("change keyup", function() {
                    $("#hiddenEmptyFirstname").val($(this).val())
                }), $("#lastname").on("change keyup", function() {
                    $("#hiddenEmptyLastname").val($(this).val())
                }), $("#address1").on("change keyup", function() {
                    $("#hiddenAddress1").val($(this).val())
                }), $("#address2").on("change keyup", function() {
                    $("#hiddenAddress2").val($(this).val())
                }), $("#city").on("change keyup", function() {
                    $("#hiddenCity").val($(this).val())
                }), $("#state").on("change keyup", function() {
                    $("#hiddenState").val($(this).val())
                }), $("#zip").on("change keyup", function() {
                    $("#hiddenPostalCode").val($(this).val())
                }), $("#address1").on("change keyup", function() {
                    $("#hiddenEmptyAddress1").val($(this).val())
                }), $("#address2").on("change keyup", function() {
                    $("#hiddenEmptyAddress2").val($(this).val())
                }), $("#city").on("change keyup", function() {
                    $("#hiddenEmptyCity").val($(this).val())
                }), $("#state").on("change keyup", function() {
                    $("#hiddenEmptyState").val($(this).val())
                }), $("#zip").on("change keyup", function() {
                    $("#hiddenEmptyPostalCode").val($(this).val())
                }), $("#phone").on("change keyup", function() {
                    $("#hiddenEmptyPhoneNumber").val($(this).val())
                }), $("#phone").on("change keyup", function() {
                    $("#hiddenBillingPhoneNumber").val($(this).val())
                })
            })
        },
        initDropdowns: function() {
            $(".has-float-label select").on("change", function(e) {
                $(this).val() ? $(this).addClass("selected") : $(this).removeClass("selected")
            }).each(function() {
                $(this).val() && $(this).addClass("selected")
            })
        },
        addAddressValidation: function() {
            $("#addressAddForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !1
                    },
                    email: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            })
        },
        submitAddAddress: function(e) {
            e && e.preventDefault(), $("#addressAddForm").valid() && $.ajax({
                url: $("#addressAddForm").attr("action"),
                data: $("#addressAddForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    if (e.success) $("#addAddressModal").foundation("close"), FL.ajax.reloadComponent("profileAddresses", FL.contextPath + "/myaccount/gadgets/profileAddresses.jsp");
                    else {
                        if (!($(e).filter("#upsAddresses").length > 0)) {
                            var t = !1;
                            return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber)), !1
                        }
                        $("#upsAddressModal").html(e), $("#upsErrorFlag").val("true"), FL.myaccount.Profile.UpsAddress.init(FL.myaccount.Profile.overrideAddAddress)
                    }
                }
            })
        },
        overrideAddAddress: function(e) {
            $("#newAddressAddress1").val(e.address1), $("#newAddressAddress2").val(e.address2), $("#newAddressCity").val(e.city), $("#newAddressState").val(e.state), $("#newAddressPostalCode").val(e.zip), $("#upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close"), FL.myaccount.Profile.submitAddAddress()
        },
        editAddressValidation: function() {
            $("#addressEditForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !0
                    },
                    email: {
                        required: !0,
                        email: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    },
                    email: {
                        required: "Email is required",
                        email: "Please enter a valid email address in the format xxx@xxx.xxx"
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            })
        },
        submitEditAddress: function(e) {
            e && e.preventDefault(), $("#addressEditForm").valid() && $.ajax({
                url: $("#addressEditForm").attr("action"),
                data: $("#addressEditForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    if (e.success) $("#editAddressModal").foundation("close"), FL.ajax.reloadComponent("profileAddresses", FL.contextPath + "/myaccount/gadgets/profileAddresses.jsp");
                    else {
                        if (!($(e).filter("#upsAddresses").length > 0)) {
                            var t = !1;
                            return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber), t = !0), t || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addressAddForm #securityCode").val(e.generatedSecureNumber)), !1
                        }
                        $("#upsAddressModal").html(e), $("#upsErrorFlag").val("true"), FL.myaccount.Profile.UpsAddress.init(FL.myaccount.Profile.overrideEditAddress), $(window).width() <= 1024 ? $("#mobileLoginEdit").val(!0) : $("#mobileLoginEdit").val(!1)
                    }
                }
            })
        },
        overrideEditAddress: function(e) {
            $("#addressEditForm #shippingAddress1").val(e.address1), $("#addressEditForm #shippingAddress2").val(e.address2), $("#addressEditForm #shippingCity").val(e.city), $("#addressEditForm #shippingState").val(e.state), $("#addressEditForm #shippingZip").val(e.zip), $("#addressEditForm #upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close"), FL.myaccount.Profile.submitEditAddress()
        },
        UpsAddress: {
            init: function(e) {
                $(".address-container").on("click", function() {
                    var e = $(this);
                    $(".address-container").removeClass("active"), $(e).closest(".address-container").addClass("active")
                }), $("#overrideAddSubmitButton").on("click", function(t) {
                    t.preventDefault();
                    var a = $(".address-container.active");
                    return e && e({
                        address1: a.find(".address1").text().capitalize(),
                        address2: a.find(".address2").text().capitalize(),
                        city: a.find(".city").text().capitalize(),
                        state: a.find(".state").text(),
                        zip: a.find(".zip").text(),
                        upsValidation: "false",
                        receiveEmail: $("#upsReceiveEmail").val()
                    })
                }), $("#overrideAddWalletBillingAddSubmitButton").on("click", function(t) {
                    t.preventDefault();
                    var a = $(".address-container.active");
                    return e && e({
                        address1: a.find(".address1").text().capitalize(),
                        address2: a.find(".address2").text().capitalize(),
                        city: a.find(".city").text().capitalize(),
                        state: a.find(".state").text(),
                        zip: a.find(".zip").text(),
                        upsValidation: "false",
                        receiveEmail: $("#upsReceiveEmail").val()
                    })
                });
                var t = $(".wallet-enable").val();
                $("#address_edit_edit").on("click", function(e) {
                    $("#upsAddressModal").foundation("close"), t ? $("#editBillingAddressModal").foundation("open") : $("#editAddressModal").foundation("open")
                }), $("#address_edit_add").on("click", function(e) {
                    $("#upsAddressModal").foundation("close"), t ? $("#addBillingAddressModal").foundation("open") : $("#addAddressModal").foundation("open")
                }), $("#upsAddressModal").foundation("open")
            }
        },
        initPasswordChangeForm: function() {
            $("#changePasswordForm").validate({
                rules: {
                    currentPassword: {
                        required: !0
                    },
                    newPassword: {
                        required: !0,
                        rangelength: [6, 25],
                        alphanumeric: !0
                    },
                    confirmPassword: {
                        required: !0,
                        equalTo: "#newPassword"
                    }
                },
                messages: {
                    newPassword: {
                        alphanumeric: "Password can only contain alphanumeric characters."
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            }), $("#changePasswordForm").on("submit", function() {
                function e(e) {
                    if (e && e.hasOwnProperty("errors"))
                        for (var t = 0; t < e.errors.length; t++) $("#changePasswordErrorContainer").append('<div class="alert callout" data-closable>' + e.errors[t] + '<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>');
                    else $("#changePasswordModal").foundation("close"), $("#passwordChangeContainer").html("<p>Password Changed Successfully</p>")
                }

                function t(e) {
                    $("#changePasswordErrorContainer").append('<div class="alert callout" data-closable>An error occured saving your new password. Please try again later.<button class="close-button" aria-label="Dismiss alert" type="button" data-close><span aria-hidden="true">&times;</span></button></div>')
                }
                return $(window).width() <= 1024 ? $("#mobilePassword").val(!0) : $("#mobilePassword").val(!1), $("#changePasswordErrorContainer").html(""), $("#changePasswordForm").valid() && $.ajax({
                    url: $("#changePasswordForm").attr("action"),
                    data: $("#changePasswordForm").serialize(),
                    success: e,
                    error: t
                }), !1
            })
        },
        creditCardForm: function(e) {
            if ($("body").off("click", ".add_newcard_link").on("click", ".add_newcard_link", function() {
                    console.log("add_newcard_link test");
                    var e = FL.contextPath + "/myaccount/modals/newCreditCard.jsp";
                    $.ajax(e).done(function(e) {
                        $("#newCreditCardModal").html(e).foundation("open")
                    })
                }), $("body").off("click", ".edit_credit_card_link").on("click", ".edit_credit_card_link", function() {
                    var e = $(this).data("nickname");
                    e = encodeURIComponent(e);
                    var t = FL.contextPath + "/myaccount/modals/editCreditCard.jsp?nickname=" + e + "&fromEditLink=true";
                    $.ajax(t).done(function(e) {
                        $("#editCreditCardModal").html(e).foundation("open")
                    })
                }), $("body").off("click", ".card_newbillinglink").on("click", ".card_newbillinglink", function() {
                    var e = $("#encodedValuePass").val(),
                        t = FL.contextPath + "/myaccount/modals/addBillingAddress.jsp?nickname=" + e + "&fromaddmodal=true";
                    $.ajax(t).done(function(e) {
                        $("#addBillingAddressModal").html(e).foundation("open"), $("#addBillingAddressModal .modal-header h1").focus()
                    })
                }), $("body").off("open.zf.reveal", "#addBillingAddressModal").on("open.zf.reveal", "#addBillingAddressModal", function() {
                    FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.addBilingAddressValidation(), $("body").off("click", "#newBillingContinue").on("click", "#newBillingContinue", function(e) {
                        e.preventDefault(), FL.myaccount.Profile.addressBillingModal()
                    })
                }), $("body").off("click", ".edit_billing_address").on("click", ".edit_billing_address", function() {
                    var e = FL.contextPath + "/myaccount/modals/editBillingAddress.jsp?addressKey=" + $(this).data("nickname") + "&frommodal=true";
                    $.ajax(e).done(function(e) {
                        $("#editBillingAddressModal").html(e).foundation("open")
                    })
                }), $("body").off("open.zf.reveal", "#editBillingAddressModal").on("open.zf.reveal", "#editBillingAddressModal", function() {
                    FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.editBilingAddressValidation(), $("#editAddressBillingSave").off("click").on("click", FL.myaccount.Profile.editAddressBillingModal)
                }), $("body").off("click", ".billing-back").on("click", ".billing-back", function() {
                    var e = $("#encodedValuePass").val(),
                        t = $("#editCheckoutCard").val(),
                        a = $("#editCheckoutUnsavedCard").val(),
                        i = $("#add_credit_card_checkout_modal").val(),
                        o = $("#fromEditLinkPage").val();
                    if (void 0 != e) {
                        if (e = encodeURIComponent(e), e.length > 0)
                            if (void 0 != t && "editCheckoutCard" == t && "" != e) var r = FL.contextPath + "/checkout/modals/checkoutEditCreditCard.jsp?nickname=" + e + "&fromEditLink=" + o,
                                n = $("#checkoutEditCreditCard");
                            else var r = FL.contextPath + "/myaccount/modals/editCreditCard.jsp?nickname=" + e,
                                n = $("#editCreditCardModal")
                    } else if (void 0 != a && "editCheckoutUnsavedCard" == a) var r = FL.contextPath + "/checkout/modals/checkoutEditUnsavedCard.jsp",
                        n = $("#checkoutEditCreditCard");
                    else if (void 0 != i && "addCreditCardFromCheckout" == i) var r = FL.contextPath + "/checkout/modals/newCreditCard.jsp",
                        n = $("#newCreditCardModal");
                    else var r = FL.contextPath + "/myaccount/modals/newCreditCard.jsp",
                        n = $("#newCreditCardModal");
                    $.ajax(r).done(function(e) {
                        n.html(e).foundation("open")
                    }), $("#atg_store_contentHeader [tabindex=0]").focus()
                }), $("body").off("open.zf.reveal", "#newCreditCardModal").on("open.zf.reveal", "#newCreditCardModal", function() {
                    FL.mask.init(), FL.myaccount.Profile.initDropdowns(), FL.myaccount.Profile.newCardAddressValidation();
                    var e = $(".select-shipping.active").attr("data-addressname");
                    $("#selectedAddressValue").val(e), $("#deleteAddressCredit").on("click", function() {
                        var e = FL.contextPath + "/myaccount/modals/newCreditCard.jsp";
                        $.ajax(e).done(function(e) {
                            $("#newCreditCardModal").html(e).foundation("open")
                        })
                    }), FL.myaccount.Profile.initCreditCardSection(), FL.myaccount.Profile.selectAddressState()
                }), $("body").off("click", ".close_creditmodal").on("click", ".close_creditmodal", function() {
                    var e = FL.contextPath + "/myaccount/modals/newCreditCard.jsp";
                    $.ajax(e).done(function(e) {
                        $("#newCreditCardModal").html(e).foundation("open")
                    })
                }), $(document).off("click", ".add-card-acc-sec #addCreditCard").on("click", ".add-card-acc-sec #addCreditCard", function(e) {
                    $("#billing_form").submit(function(e) {
                        e.preventDefault(), $.ajax({
                            url: $("#billing_form").attr("action"),
                            data: $("#billing_form").serialize(),
                            async: !1,
                            type: "post",
                            success: function(e) {
                                if (e.success) $("#addCreditCard").attr("disabled", "true"), window.location.href = "/store/myaccount/gadgets/displayCreditCards.jsp";
                                else {
                                    if (!($(e).filter("#upsAddresses").length > 0)) {
                                        var t = !1,
                                            a = !1;
                                        return void 0 != e.vantivNullToken && (t = !0), void 0 != e.vantivServiceDown && (a = !0), void 0 != e.duplicateCard && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.duplicateCard)), t ? (ajaxUrl = FL.contextPath + "/myaccount/modals/vantivNullToken.jsp", void FL.modal.open(ajaxUrl, "custom-small")) : !!a && (ajaxUrl = FL.contextPath + "/myaccount/modals/vantivServiceDown.jsp", void FL.modal.open(ajaxUrl, "custom-small"))
                                    }
                                    var i = $("#billingCardNumbermyaccount").val(),
                                        o = $("#billingExpirationMonth").val(),
                                        r = $("#billingExpirationYear").val(),
                                        n = $("#billingSecurityCode").val(),
                                        s = $("#billingCardType").val();
                                    $("#upsAddressModal").html(e).foundation("open"), $("#upsErrorFlag").val("true"), $("#billingCardNumberNoaddress").val(i), $("#billingExpirationMonthNoaddress").val(o), $("#billingExpirationYearNoaddress").val(r), $("#billingSecurityCodeNoaddress").val(n), $("#billingCardTypeNoaddress").val(s), FL.myaccount.Profile.UpsAddress.init(FL.myaccount.Profile.overrideNewCardAndNewAddress)
                                }
                            }
                        })
                    }), $(this).off(e)
                }), $("body").off("open.zf.reveal", "#editCreditCardModal").on("open.zf.reveal", "#editCreditCardModal", function() {
                    $("#creditCardEdit .has-float-label select").addClass("selected"), FL.myaccount.Profile.selectAddressState(), FL.myaccount.Profile.getValueEditFields(), $("#creditCardEdit").validate({
                        rules: {
                            expirationMonthTemp: {
                                billingExpirationDate: !0
                            }
                        },
                        onfocusout: !1,
                        invalidHandler: function(e, t) {
                            t.numberOfInvalids() && t.errorList[0].element.focus()
                        }
                    })
                }), $(document).off("change click", "#newCreditCardModal #billingExpirationMonth, #newCreditCardModal #billingExpirationYear").on("change click", "#newCreditCardModal #billingExpirationMonth, #newCreditCardModal #billingExpirationYear", function() {
                    var e = (new Date).getFullYear(),
                        t = (new Date).getMonth() + 1,
                        a = parseInt($("#newCreditCardModal #billingExpirationYear").val()),
                        i = parseInt($("#newCreditCardModal #billingExpirationMonth").val());
                    "" === $(this).val() ? ($(this).addClass("error-msg-show"), $("#addCreditCard").attr("disabled", "true")) : ($(this).removeClass("error-msg-show"), $("#addCreditCard").removeAttr("disabled")), a == e && i < t ? ($("#newCreditCardModal #billingExpirationMonth").addClass("error"), $("#newCreditCardModal #billingExpirationMonth").removeClass("valid"), $("#newCreditCardModal .expire_text").css("display", "block"), $("#addCreditCard").attr("disabled", "true")) : ($("#newCreditCardModal #billingExpirationMonth").removeClass("error"), $("#newCreditCardModal #billingExpirationMonth").addClass("valid"), $("#newCreditCardModal .expire_text").css("display", "none"), "" != $(this).val() && "" != $("#billingSecurityCode").val() && "" != $("#billingCardNumbermyaccount").val() && ($("#addCreditCard").removeAttr("disabled"), $(this).removeClass("error-msg-show"))), "" === $("#billingSecurityCode").val() || "" === $("#billingCardNumbermyaccount").val() ? $("#addCreditCard").attr("disabled", "true") : $("#addCreditCard").removeAttr("disabled"), $("#newCreditCardModal select").each(function() {
                        $(this).hasClass("error-msg-show") && $("#addCreditCard").attr("disabled", "true"), $(this).hasClass("error") && ($("#addCreditCard").attr("disabled", "true"), "" === $(this).val() ? $(this).addClass("error-msg-show") : $(this).removeClass("error-msg-show"))
                    }), $("#newCreditCardModal .addCreditCard-details input").each(function() {
                        $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true"), $(this).hasClass("error-msg-show") && $("#addCreditCard").attr("disabled", "true")
                    })
                }), $(document).off("change click", "#editCreditCardModal #billingExpirationMonth, #editCreditCardModal #billingExpirationYear").on("change click", "#editCreditCardModal #billingExpirationMonth, #editCreditCardModal #billingExpirationYear", function() {
                    var e = $("#editCreditCardModal #billingExpirationMonth").val(),
                        t = $("#editCreditCardModal #billingExpirationYear").val();
                    $("#monthEditCard").val(e), $("#yearEditCard").val(t);
                    var a = (new Date).getFullYear(),
                        i = (new Date).getMonth() + 1,
                        o = parseInt(t),
                        r = parseInt(e);
                    "" === $(this).val() ? ($(this).addClass("error-msg-show"), $("#buttonAddToCart").attr("disabled", "true")) : ($(this).removeClass("error-msg-show"), $("#buttonAddToCart").removeAttr("disabled")), o == a && r < i ? ($("#editCreditCardModal #billingExpirationMonth").addClass("error"), $("#editCreditCardModal #billingExpirationMonth").removeClass("valid"), $("#editCreditCardModal .expire_text").css("display", "block"), $("#buttonAddToCart").attr("disabled", "true")) : ($("#editCreditCardModal #billingExpirationMonth").removeClass("error"), $("#editCreditCardModal #billingExpirationMonth").addClass("valid"), $("#editCreditCardModal .expire_text").css("display", "none"), "" != $(e && t).val() && $("#buttonAddToCart").removeAttr("disabled")), $("#editCreditCardModal select").each(function() {
                        $(this).hasClass("error-msg-show") && $("#buttonAddToCart").attr("disabled", "true"), $(this).hasClass("error") && ($("#buttonAddToCart").attr("disabled", "true"), "" === $(this).val() ? $(this).addClass("error-msg-show") : $(this).removeClass("error-msg-show"))
                    }), $("#editCreditCardModal .addCreditCard-details input").each(function() {
                        $(this).hasClass("error") && $("#buttonAddToCart").attr("disabled", "true"), $(this).hasClass("error-msg-show") && $("#buttonAddToCart").attr("disabled", "true")
                    })
                }), $(document).off("keyup change blur focus", "#billingCardNumbermyaccount, #billingSecurityCode").on("keyup change blur focus", "#billingCardNumbermyaccount, #billingSecurityCode", function() {
                    var e = $("#billingSecurityCode").val().length;
                    $(this).hasClass("valid") ? "" != $("#billingSecurityCode").val() && $("#addCreditCard").removeAttr("disabled") : e > 2 ? $("#addCreditCard").removeAttr("disabled") : $("#addCreditCard").attr("disabled", "true"), $("input").each(function() {
                        $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true"), $(this).hasClass("error-msg-show") && $("#addCreditCard").attr("disabled", "true")
                    }), $(".addCreditCard-details select").each(function() {
                        $(this).hasClass("error") && $("#addCreditCard").attr("disabled", "true"), $(this).hasClass("error-msg-show") && $("#addCreditCard").attr("disabled", "true")
                    })
                }), $("#deletingAssociatedError").length > 0) {
                var t = $("#deletingAssociatedError").html();
                $("#addressErrormodal").html(t).foundation("open")
            }
        },
        newCardAddressValidation: function() {
            $("#billing_form").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !1
                    },
                    creditCardNumberTemp: {
                        creditcard: {
                            required: {
                                depends: FL.myaccount.Profile.isCreditCardRequired
                            },
                            depends: function() {
                                return -1 === $("#billingCardNumbermyaccount").val().lastIndexOf("XXXX", 0) && FL.myaccount.Profile.isCreditCardRequired()
                            }
                        }
                    },
                    expirationMonthTemp: {
                        billingExpirationDate: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    }
                }
            })
        },
        initCreditCardSection: function() {
            var e = $("#billing_form");
            e.find("#billingCardNumbermyaccount").on("keyup paste", FL.myaccount.Profile.onCardNumberChange), $("select").on("change", function() {
                e.validate().element("select")
            })
        },
        onCardNumberChange: function(e) {
            var t = $("#billingCardNumbermyaccount").val();
            switch (FL.myaccount.Profile.getCreditCardType(t)) {
                case "mastercard":
                    $("#billingCardType").val("MASTERCARD"), FL.myaccount.Profile.setCvvLength(3);
                    break;
                case "visa":
                    $("#billingCardType").val("VISA"), FL.myaccount.Profile.setCvvLength(3);
                    break;
                case "amex":
                    $("#billingCardType").val("AMEX"), FL.myaccount.Profile.setCvvLength(4);
                    break;
                case "discover":
                    $("#billingCardType").val("DISCOVER"), FL.myaccount.Profile.setCvvLength(3)
            }
        },
        setCvvLength: function(e) {
            $("#billingSecurityCode").attr("maxlength", e), $("#billingSecurityCode").attr("minlength", e)
        },
        getCreditCardType: function(e) {
            var t = "unknown";
            return /^5[0-5]|^2[2-7]/.test(e) ? t = "mastercard" : /^4/.test(e) ? t = "visa" : /^3[47]/.test(e) ? t = "amex" : /^6|^3[0568]/.test(e) && (t = "discover"), t
        },
        isCreditCardRequired: function() {
            return 0 === $("#proceed_with_redirect").length
        },
        addBilingAddressValidation: function() {
            $("#addBillingAddressForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !1
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    }
                }
            })
        },
        editBilingAddressValidation: function() {
            $("#editBillingAddressForm").validate({
                rules: {
                    firstName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    lastName: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    address1: {
                        required: !0,
                        minlength: 5,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    postalCode: {
                        required: !0
                    },
                    city: {
                        required: !0,
                        pattern: FL.myaccount.Profile.NameRegex
                    },
                    state: {
                        required: !0,
                        pattern: FL.myaccount.Profile.Regex
                    },
                    phone: {
                        required: !0,
                        phoneUS: !0
                    }
                },
                messages: {
                    firstName: {
                        required: "First name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    lastName: {
                        required: "Last name is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    address1: {
                        required: "Address is required",
                        pattern: "Special characters not allowed"
                    },
                    postalCode: {
                        required: "Zip code is required",
                        minLength: "At least 5 numbers are required"
                    },
                    city: {
                        required: "City is required",
                        pattern: "Special characters and numbers are not allowed"
                    },
                    state: {
                        required: "State is required",
                        pattern: "Special characters not allowed"
                    },
                    phone: {
                        required: "Phone number is required",
                        phoneUS: "Please enter a valid phone number"
                    }
                },
                onfocusout: !1,
                invalidHandler: function(e, t) {
                    t.numberOfInvalids() && t.errorList[0].element.focus()
                }
            })
        },
        selectAddressState: function() {
            var e = $(".select-shipping.active").attr("data-addressname");
            $("#selectedAddressValue").val(e), $(".address-select-box.select-shipping").on("click", function() {
                $(this).siblings(".address-select-box").removeClass("active"), $(this).addClass("active");
                var e = $(".select-shipping.active").attr("data-addressname");
                $("#selectedAddressValue").val(e), FL.myaccount.Profile.getValueEditFields()
            })
        },
        getValueEditFields: function() {
            var e = $(".select-shipping.active #editvaluedetails");
            $("#firstnameEdit").val($(e).find(".firstnameEdit").text().trim()), $("#lastnameEdit").val($(e).find(".lastnameEdit").text().trim()), $("#addressoneEdit").val($(e).find(".addressoneEdit").text().trim()), $("#addresstwoEdit").val($(e).find(".addresstwoEdit").text().trim()), $("#cityEdit").val($(e).find(".cityEdit").text().trim()), $("#stateEdit").val($(e).find(".stateEdit").text().trim()), $("#postalcodeEdit").val($(e).find(".postalcodeEdit").text().trim()), $("#phonenoEdit").val($(e).find(".phonenoEdit").text().trim())
        },
        overrideEditBillingAddress: function(e) {
            $("#editBillingAddressForm #shippingAddress1").val(e.address1), $("#editBillingAddressForm #shippingAddress2").val(e.address2), $("#editBillingAddressForm #shippingCity").val(e.city), $("#editBillingAddressForm #shippingState").val(e.state), $("#editBillingAddressForm #shippingZip").val(e.zip), $("#editBillingAddressForm #upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close"), FL.myaccount.Profile.editAddressBillingModal()
        },
        overrideAddBillingAddress: function(e) {
            $("#newAddressAddress1").val(e.address1), $("#newAddressAddress2").val(e.address2), $("#newAddressCity").val(e.city), $("#newAddressState").val(e.state), $("#newAddressPostalCode").val(e.zip), $("#upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close"), FL.myaccount.Profile.addressBillingModal()
        },
        overrideNewCardAndNewAddress: function(e) {
            $("#newAddressAddress1").val(e.address1), $("#newAddressAddress2").val(e.address2), $("#newAddressCity").val(e.city), $("#newAddressState").val(e.state), $("#newAddressPostalCode").val(e.zip), $("#upsValidation").val(e.upsValidation), $("#upsAddressModal").foundation("close"), $("#billing_form").submit()
        },
        addressBillingModal: function(e) {
            e && e.preventDefault(), $("#addBillingAddressForm").valid() && $.ajax({
                url: $("#addBillingAddressForm").attr("action"),
                data: $("#addBillingAddressForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    if (e.success) {
                        var t = $("#edit_card_class").val(),
                            a = $("#edit_card_from_checkout").val(),
                            i = $("#add_credit_card_checkout_modal").val(),
                            o = $("#edit_card_from_profile").val(),
                            r = $(".addressAddnoCard").length;
                        if (void 0 != t && "" != t) {
                            if (t = encodeURIComponent(t), t.length > 0)
                                if (void 0 != a && "editCardFromCheckout" == a) var n = FL.contextPath + "/checkout/modals/checkoutEditCreditCard.jsp?nickname=" + t,
                                    s = $("#checkoutEditCreditCard");
                                else if (void 0 != o && "editCreditCardFromProfile" == o) var n = FL.contextPath + "/myaccount/modals/editCreditCard.jsp?nickname=" + t,
                                s = $("#editCreditCardModal")
                        } else if (void 0 != a && "editCardFromCheckout" == a) var n = FL.contextPath + "/checkout/modals/checkoutEditUnsavedCard.jsp",
                            s = $("#checkoutEditCreditCard");
                        else if (void 0 != i && "addCreditCardFromCheckout" == i) var n = FL.contextPath + "/checkout/modals/newCreditCard.jsp",
                            s = $("#newCreditCardModal");
                        else if (r > 0) FL.ajax.reloadComponent("checkoutreloadAddress", FL.contextPath + "/checkout/gadgets/displayBillingAddressCheckout.jsp", FL.checkout.billing.init);
                        else var n = FL.contextPath + "/myaccount/modals/newCreditCard.jsp",
                            s = $("#newCreditCardModal");
                        void 0 === n && void 0 === s ? $("#addBillingAddressModal").foundation("close") : $.ajax(n).done(function(e) {
                            s.html(e).foundation("open")
                        })
                    } else {
                        if (!($(e).filter("#upsAddresses").length > 0)) {
                            var l = !1;
                            return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#addBillingAddressForm").val(e.generatedSecureNumber), l = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#addBillingAddressForm").val(e.generatedSecureNumber), l = !0), l || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#addBillingAddressForm").val(e.generatedSecureNumber)), !1
                        }
                        $("#upsAddressModal").html(e).foundation("open"), $("#upsErrorFlag").val("true"), FL.myaccount.Profile.UpsAddress.init(FL.myaccount.Profile.overrideAddBillingAddress)
                    }
                }
            })
        },
        editAddressBillingModal: function(e) {
            FlIsAjaxExecuting || (FlIsAjaxExecuting = !0, e && e.preventDefault(), $("#editBillingAddressForm").valid() && $.ajax({
                url: $("#editBillingAddressForm").attr("action"),
                data: $("#editBillingAddressForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    if (e.success) {
                        FlIsAjaxExecuting = !1;
                        var t = $("#edit_card_class").val(),
                            a = $("#edit_card_from_checkout").val(),
                            i = $("#add_credit_card_checkout_modal").val(),
                            o = $("#edit_card_from_profile").val(),
                            r = $(".addressAddnoCard").length;
                        if (void 0 != t && "" != t) {
                            if (t = encodeURIComponent(t), t.length > 0)
                                if (void 0 != a && "editCardFromCheckout" == a) var n = FL.contextPath + "/checkout/modals/checkoutEditCreditCard.jsp?nickname=" + t,
                                    s = $("#checkoutEditCreditCard");
                                else if (void 0 != o && "editCreditCardFromProfile" == o) var n = FL.contextPath + "/myaccount/modals/editCreditCard.jsp?nickname=" + t,
                                s = $("#editCreditCardModal")
                        } else if (void 0 != a && "editCardFromCheckout" == a) var n = FL.contextPath + "/checkout/modals/checkoutEditUnsavedCard.jsp",
                            s = $("#checkoutEditCreditCard");
                        else if (void 0 != i && "addCreditCardFromCheckout" == i) var n = FL.contextPath + "/checkout/modals/newCreditCard.jsp",
                            s = $("#newCreditCardModal");
                        else if (r > 0) FL.ajax.reloadComponent("checkoutreloadAddress", FL.contextPath + "/checkout/gadgets/displayBillingAddressCheckout.jsp", FL.checkout.billing.init);
                        else var n = FL.contextPath + "/myaccount/modals/newCreditCard.jsp",
                            s = $("#newCreditCardModal");
                        void 0 === n && void 0 === s ? $("#editBillingAddressModal").foundation("close") : $.ajax(n).done(function(e) {
                            s.html(e).foundation("open")
                        })
                    } else {
                        if (FlIsAjaxExecuting = !1, !($(e).filter("#upsAddresses").length > 0)) {
                            var l = !1;
                            return void 0 != e.flRestrictedCharacters && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flRestrictedCharacters), $("#editBillingAddressForm").val(e.generatedSecureNumber), l = !0), void 0 != e.flSessionNotMatchError && ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.flSessionNotMatchError), $("#editBillingAddressForm").val(e.generatedSecureNumber), l = !0), l || ($(".modal-error").addClass("active"), $("#modalErrorMessage").text(e.globalError), $("#editBillingAddressForm").val(e.generatedSecureNumber)), !1
                        }
                        $("#upsAddressModal").html(e).foundation("open"), $("#upsErrorFlag").val("true"), FL.myaccount.Profile.UpsAddress.init(FL.myaccount.Profile.overrideEditBillingAddress)
                    }
                }
            }))
        }
    }
}, FL.myaccount), FL.mask.init(), FL.myaccount.addressFormValidation(), $("#wcStoreSuccess").length > 0 && ($("#crmStoreEmail").hide(), $("#crmStoreSubmit").hide()), $("#registrationAddressForm #firstname").attr("disabled", !0), $("#registrationAddressForm #lastname").attr("disabled", !0), $("#chkboxval").val("yes"), $("#formReceiveEmail").on("change", function() {
    $("#formReceiveEmail").is(":checked") ? ($("#formReceiveEmail").attr("checked", !0), $("#chkboxval").val("yes")) : ($("#formReceiveEmail").attr("checked", !1), $("#chkboxval").val("no"))
}), $(document).off("click", ".see-more-link-page a").on("click", ".see-more-link-page a", function(e) {
    e.preventDefault(), $("#selectShippingAddressSection .address-blocks:hidden, #billing_form .select-credit-card:hidden, #billing_form .address-blocks:hidden").slice(0, 3).removeClass("hidden-block"), 0 == $("#selectShippingAddressSection .address-blocks:hidden, #billing_form .select-credit-card:hidden, #billing_form .address-blocks:hidden").length && $(this).remove()
}), $(document).off("click", ".see-more-link-mod a").on("click", ".see-more-link-mod a", function(e) {
    e.preventDefault(), $(this).closest(".reveal").find(".address-blocks:hidden").slice(0, 3).removeClass("hidden-block"), 0 == $(this).closest(".reveal").find(".address-blocks:hidden").length && $(this).remove()
}), $(window).on("load", function() {
    $("#registrationAddressForm #formReceiveEmail").is(":checked") && $("#profilePhone").addClass("required"), $(".return-replace-link").each(function() {
        var e = new Date($(this).find($("input")).first().val());
        e.setDate(e.getDate() + 45);
        var t = new Date;
        t = new Date(t.getFullYear(), t.getMonth(), t.getDate(), 0, 0, 0, 0);
        var a = $(this).find($("input")).last().val();
        (e < t || "cancelled" == a.toLowerCase()) && $(this).hide()
    }), $("#accountLocked").length && new Foundation.Reveal($("#accountLocked")).open()
}), $("#btnLoginFormSignIn").on("click", function() {
    var e = /^([\w-\.]+)@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.)|(([\w-]+\.)+))([a-zA-Z]{2,4}|[0-9]{1,3})(\]?)$/;
    $(window).width() <= 1024 ? $("#mobileLogin").val(!0) : $("#mobileLogin").val(!1);
    var t = !1;
    if ("" == $.trim($("#password").val()) ? ($("#errorPassword").css("display", "inline"), $("#password").addClass("error"), t = !0, $("#password").attr("aria-labelledby", "errorPassword"), $("#password").focus()) : ($("#errorPassword").css("display", "none"), $("#password").removeClass("error"), $("#password").removeAttr("aria-labelledby")), "" == $.trim($("#signinEmail").val()) ? ($("#errorUsername").css("display", "inline"), $("#signinEmail").addClass("error"), $("#signinEmail").attr("aria-labelledby", "errorUsername"), t = !0, $("#signinEmail").focus()) : ($("#errorUsername").css("display", "none"), $("#signinEmail").removeClass("error"), $("#signinEmail").removeAttr("aria-labelledby")), !0 !== e.test($.trim($("#signinEmail").val())) ? ($("#calloutAlertId").removeClass("callout alert"), "Error:" == $("div.callout.alert").find("strong").text() ? ($("div.callout.alert").find("span").text("Please enter a valid email address in the format xxx@xxx.xxx."), $("#emailFormartError").css("display", "none"), $("#signinEmail").focus()) : ($("#emailFormartError").css("display", "flex"), $("#calloutAlertId").addClass("callout alert")), $("#signinEmail").attr("aria-labelledby", "errorUsername"), t = !0) : $("#emailFormartError").css("display", "none"), !0 === t) return !1;
    FL.Tealium.clickMyAccountSignIn()
}), $("#btnLoginCreateAccount").on("click", function() {
    FL.Tealium.clickMyAccountCreateAccount()
}), FL.Reflektion.rfkAccount(), window.FL = window.FL || {}, FL.SneakerReleaseDates = FL.SneakerReleaseDates || {}, Array.prototype.contains = function(e) {
    for (i in this)
        if (this[i] == e) return !0;
    return !1
}, $.urlParam = function(e) {
    var t = new RegExp("[?&]" + e + "=([^&#]*)").exec(window.location.href);
    return null == t ? null : t[1] || 0
}, FL.SneakerReleaseDates = jQuery.extend(!0, {
    productJSON: [],
    dateSelected: "",
    genderSelected: "",
    brandSelected: "",
    loadMoreDate: "",
    brandList: [],
    brandNames: [],
    genderNames: [],
    elem: {
        $loadMore: null,
        $wrapper: null,
        $filterDate: null,
        $filterGender: null,
        $filterBrand: null,
        $filterReset: null,
        $clndr: null,
        $clndrDropdown: null
    },
    init: function() {
        var e = FL.SneakerReleaseDates;
        $("#rcMain").length && (e.loadElements(), e.Carousel.init(), e.Filters.initCalendar(), e.Filters.initGenderNames(), e.Filters.initBrandNames(), e.Filters.initParameters(), e.Filters.attachEvents(), e.Products.attachEvents(), e.Products.loadAll(), e.AddToCalendar.init(), e.Blog.init(), e.LaunchLocator.init(), e.initRecommendations())
    },
    loadElements: function() {
        var e = FL.SneakerReleaseDates;
        e.elem.$carousel = $(".rotatingCarousel"), e.elem.$loadMore = $("#buttonLoadMore"), e.elem.$wrapper = $("#productListWrapper .column"), e.elem.$filterDate = $("#filterDate"), e.elem.$filterGender = $("#filterGender"), e.elem.$filterBrand = $("#filterBrand"), e.elem.$filterReset = $("#filterReset"), e.elem.$clndr = $("#clndr"), e.elem.$clndrDropdown = $("#clndr-dropdown")
    },
    initRecommendations: function() {
        var e = $(".sneaker-release-dates-recommendation-container");
        $.each(e, function(e, t) {
            FL.recommendation.init($(t))
        })
    },
    Carousel: {
        init: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$carousel.slick({
                slidesToShow: 3,
                slidesToScroll: 3,
                infinite: !1,
                dots: !1,
                arrows: !0,
                nextArrow: "<span class='icon icon-chevron-right slick-next-icon'></span>",
                prevArrow: "<span class='icon icon-chevron-left slick-prev-icon'></span>",
                responsive: [{
                    breakpoint: 1024,
                    settings: {
                        dots: !0,
                        arrows: !1,
                        slidesToShow: 2,
                        slidesToScroll: 2
                    }
                }, {
                    breakpoint: 640,
                    settings: {
                        dots: !0,
                        arrows: !1,
                        slidesToShow: 1,
                        slidesToScroll: 1
                    }
                }]
            }), e.elem.$carousel.find(".addToCalendar:not(.loaded)").each(e.AddToCalendar.generateCalendar)
        }
    },
    Blog: {
        init: function() {
            FL.SneakerReleaseDates.Blog.attachBlogClick()
        },
        attachBlogClick: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$wrapper.find(".isBlog").find("a:not(.isBlogClicked)").on("click", e.Blog.Events.clickBlog)
        },
        Events: {
            clickBlog: function(e) {
                var t = $(this);
                return t.attr("data-url", t.attr("href")).addClass("isBlogClicked"), FL.globalBlogModule.blogElementClicked(this), !1
            }
        }
    },
    Filters: {
        initBrandNames: function() {
            var e = FL.SneakerReleaseDates;
            e.brandNames.nike = "Nike", e.brandNames.jordan = "Jordan", e.brandNames.adidas = "adidas", e.brandNames.adidasoriginals = "adidas Originals", e.brandNames.underarmour = "Under Armour", e.brandNames.puma = "Puma", e.brandNames.reebokclassics = "Reebok Classics", e.brandNames.reebok = "Reebok", e.brandNames.newbalance = "New Balance"
        },
        initCalendar: function() {
            var e = FL.SneakerReleaseDates,
                t = $("#calendarDropdown");
            $(document).on("mouseup", function(a) {
                t.is(a.target) || 0 !== t.has(a.target).length || e.elem.$clndrDropdown.foundation("close")
            })
        },
        initGenderNames: function() {
            var e = FL.SneakerReleaseDates;
            e.genderNames.boy = "Boys", e.genderNames.girl = "Girls", e.genderNames.women = "Women", e.genderNames.men = "Men"
        },
        initParameters: function() {
            var e = FL.SneakerReleaseDates,
                t = $.urlParam("date"),
                a = $.urlParam("gender");
            null !== t && moment(t) >= moment().add(-1, "month").startOf("month") && e.Filters.updateDate(t), null !== a && a in e.genderNames && e.Filters.updateGender(a)
        },
        attachEvents: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$filterGender.on("change", e.Filters.Events.clickGender), e.elem.$filterDate.add(e.elem.$filterDate.parent()).on("mousedown", e.Filters.Events.mousedownDate), e.elem.$filterReset.on("click", e.Filters.Events.clickReset)
        },
        checkResetFilterDisplay: function() {
            var e = FL.SneakerReleaseDates;
            $("#productFilters").find(".selectWrapper").hasClass("selected") ? e.elem.$filterReset.show() : e.elem.$filterReset.hide()
        },
        getBrandDisplayName: function(e) {
            var t = FL.SneakerReleaseDates,
                a = e;
            return e in t.brandNames && (a = t.brandNames[e]), a
        },
        loadBrands: function(e) {
            var t = FL.SneakerReleaseDates,
                a = e.split("|"),
                i = $.urlParam("brand");
            a.shift(), a.pop(), a.sort(), t.elem.$filterBrand.find("option").not(":first").remove();
            for (var o = 0; o < a.length; o++) t.elem.$filterBrand.append('<option value="' + a[o] + '">' + t.Filters.getBrandDisplayName(a[o]) + "</option>");
            t.elem.$filterBrand.on("change", t.Filters.Events.clickBrand), null !== i && i in t.brandNames && t.Filters.updateBrand(i)
        },
        updateBrand: function(e) {
            var t = FL.SneakerReleaseDates;
            t.brandSelected === e && (e = ""), t.brandSelected !== e && (t.brandSelected = e, "" === t.dateSelected && (t.dateSelected = moment().format("YYYY-MM-DD")), "" !== t.brandSelected ? t.elem.$filterBrand.val(e).addClass("selected") : t.elem.$filterBrand.val("").removeClass("selected"), t.Filters.checkResetFilterDisplay())
        },
        updateDate: function(e) {
            var t = FL.SneakerReleaseDates;
            t.dateSelected = e, "" !== t.dateSelected ? t.elem.$filterDate.addClass("selected").find("option").text(moment(t.dateSelected).format("dddd, MMM D")).attr("selected", "selected") : (t.elem.$filterDate.removeClass("selected").val("").find("option").text("Select..."), t.dateSelected = moment().format("YYYY-MM-DD")), t.elem.$clndrDropdown.foundation("close"), t.Filters.checkResetFilterDisplay()
        },
        updateGender: function(e) {
            var t = FL.SneakerReleaseDates;
            t.genderSelected === e && (e = ""), t.genderSelected !== e && (t.genderSelected = e, "" === t.dateSelected && (t.dateSelected = moment().format("YYYY-MM-DD")), "" !== t.genderSelected ? t.elem.$filterGender.val(e).addClass("selected") : t.elem.$filterGender.val("").removeClass("selected"), t.Filters.checkResetFilterDisplay())
        },
        updateUrl: function() {
            var e = FL.SneakerReleaseDates,
                t = [],
                a = "";
            "" !== e.genderSelected && t.push("gender=" + e.genderSelected), "" !== e.dateSelected && e.dateSelected !== moment().format("YYYY-MM-DD") && t.push("date=" + e.dateSelected), "" !== e.brandSelected && t.push("brand=" + e.brandSelected), t.length && (a = "?" + t.join("&")), history.pushState("", "Sneaker Release Dates | Finish Line", window.location.pathname + a)
        },
        Events: {
            clickBrand: function(e) {
                var t = FL.SneakerReleaseDates,
                    a = $(this).find("option:selected").val();
                t.Filters.updateBrand(a), setTimeout(t.Products.reloadDisplay, 0)
            },
            clickDate: function(e) {
                var t = FL.SneakerReleaseDates;
                $(e.element).hasClass("event") && (t.Filters.updateDate(e.date._i), setTimeout(t.Products.reloadDisplay, 0))
            },
            mousedownDate: function(e) {
                e.preventDefault(), FL.SneakerReleaseDates.elem.$clndrDropdown.foundation("toggle")
            },
            clickGender: function(e) {
                var t = FL.SneakerReleaseDates,
                    a = $(this).find("option:selected").val();
                t.Filters.updateGender(a), setTimeout(t.Products.reloadDisplay, 0)
            },
            clickReset: function(e) {
                e.preventDefault();
                var t = FL.SneakerReleaseDates;
                t.Filters.updateBrand(""), t.Filters.updateGender(""), t.Filters.updateDate(""), t.elem.$filterReset.hide(), setTimeout(t.Products.reloadDisplay, 0)
            },
            clickResetDate: function(e) {
                var t = FL.SneakerReleaseDates;
                t.Filters.updateDate(""), setTimeout(t.Products.reloadDisplay, 0)
            },
            clickCalendarMonth: function(e) {
                var t = FL.SneakerReleaseDates,
                    a = $(this).attr("data-month"),
                    i = moment();
                for (i.add(1, "month"); i.format("MMMM") !== a;) i.add(-1, "month");
                i.set("date", 1), t.Filters.updateDate(i.format("YYYY-MM-DD")), setTimeout(t.Products.reloadDisplay, 0)
            }
        }
    },
    LaunchLocator: {
        init: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$wrapper.find(".launchLocator a").on("click", e.LaunchLocator.clickLocator)
        },
        clickLocator: function(e) {
            e.preventDefault();
            var t = $(this).attr("data-url"),
                a = $(this).attr("data-name"),
                i = $(this).attr("data-date");
            $("#launchLocatorModal").load(t, function() {
                $(this).find(".releaseProductName").text(a), $(this).find(".releaseDateInput").val(i), FL.LaunchLocator.init()
            }).foundation("open")
        }
    },
    Products: {
        attachEvents: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$loadMore.on("click", e.Products.Events.clickLoadMore)
        },
        adjustBrandValue: function(e) {
            return e.replace(" ", "").toLowerCase()
        },
        checkLoadMore: function() {
            var e, t = FL.SneakerReleaseDates;
            t.dateSelected = "" === t.dateSelected ? moment().format("YYYY-MM-DD") : t.dateSelected, e = "" === t.loadMoreDate ? moment(t.dateSelected).add(30, "day") : moment(t.loadMoreDate), t.loadMoreDate = "", $.each(t.productJSON, function(a, i) {
                if (moment(i.releaseDate) >= e && !("" !== t.genderSelected && i.gender !== t.genderSelected || "" !== t.brandSelected && i.brand !== t.brandSelected)) return t.loadMoreDate = i.releaseDate, !1
            }), "" !== t.loadMoreDate ? t.Products.displayLoadMore() : t.Products.hideLoadMore()
        },
        displayLoadMore: function() {
            FL.SneakerReleaseDates.elem.$loadMore.show()
        },
        hideLoadMore: function() {
            FL.SneakerReleaseDates.elem.$loadMore.hide()
        },
        getGender: function(e, t) {
            var a = e.substring(0, 3).toLowerCase();
            if ("" !== t) {
                if ("Mens" === t) return "men";
                if ("Womens" === t) return "women";
                if ("Boys" === t) return "boy";
                if ("Girls" === t) return "girl"
            }
            return "men" === a ? "men" : "wom" === a ? "women" : "boy" === a ? "boy" : "gir" === a ? "girl" : "men"
        },
        loadAll: function() {
            var e = FL.SneakerReleaseDates,
                t = "|";
            $.ajax({
                url: FL.contextPath + "/releaseproduct/gadgets/releaseCalendarLookupAPI.jsp",
                dataType: "json",
                success: function(a) {
                    var i = a,
                        o = moment().add(8, "day");
                    $.each(i.products, function(a, i) {
                        var r, n = i.releaseDate.split("/");
                        if (i.colorDescription = i.colorDescription.replace(/\//g, " / "), i.releaseDate = n[2] + "-" + n[0] + "-" + n[1], i.gender = e.Products.getGender(i.name, i.gender), i.brand = e.Products.adjustBrandValue(i.brand), i.displayTitle = void 0 !== i.displayTitle ? i.displayTitle : "", r = i.styleColor.split("-"), i.styleId = r[0], i.colorId = r[1], t.indexOf("|" + i.brand) < 0 && (t += i.brand + "|"), moment(i.releaseDate) < o && i.isImageAvailable) {
                            var s = i.styleColor.replace("-", "_");
                            i.imageHTML = '<img src="' + FL.productSetPrefix + s + '?$Med$&bg=rgb(238,238,238)" alt="Image of ' + i.name + '">'
                        } else i.imageHTML = '<span class="icon icon-' + i.brand.toLowerCase().replace(" ", "") + ' pl-2 pl-medium-0" style="font-size: 4.5rem;" title="' + i.brand.toLowerCase().replace(" ", "") + ' brand"></span>';
                        e.productJSON.push(i)
                    }), e.Filters.loadBrands(t), e.Calendar.load(), e.Products.checkLoadMore()
                }
            })
        },
        loadMore: function() {
            var e = FL.SneakerReleaseDates,
                t = moment().startOf("day"),
                a = t.format("YYYY-MM-DD"),
                i = moment(e.loadMoreDate),
                o = moment(e.loadMoreDate).add(29, "day"),
                r = "",
                n = "";
            $.each(e.productJSON, function(s, l) {
                var d = moment(l.releaseDate),
                    c = d.format("YYYY-MM-DD"),
                    u = l.releaseDate === r ? "" : l.releaseDate,
                    p = "",
                    h = "",
                    m = "",
                    f = [],
                    g = $("body.jdsports-page");
                if (d >= i && d <= o) "" !== e.genderSelected && l.gender !== e.genderSelected || "" !== e.brandSelected && l.brand !== e.brandSelected || (r = l.releaseDate, "" !== u && (u = c === a ? "Launching Today" : d.format("dddd M/D"), p = " hasLabel"), c === a && (h = " todaysReleases"), d > t ? (f.push('<ul class="addToCalendar dropdown menu no-arrow" data-dropdown-menu data-closing-time="100">', "<li>", '<a href="javascript:void(0)" class="arrow px-0" style="text-decoration: underline;">Remind Me<span></span></a>', '<ul class="menu vertical" style="min-width:0;">', '<li><a href="#" data-type="google">Google&nbsp;Calendar</a></li>', '<li><a href="#"data-type="ical">iCal/Outlook</a></li>', "</ul>", "</li>", "</ul>"), void 0 !== l.blogUrl && "" !== l.blogUrl && f.push('<div class="blog hasPipe ' + ("" !== l.displayTitle ? "" : "isBlog") + '"><a href="' + l.blogUrl + '" class="arrow" target="_blank">Details on the blog<span></span></a></div>'), void 0 === l.isOnLaunchLocator || "true" !== l.isOnLaunchLocator || g || f.push('<div class="launchLocator' + ("" !== l.displayTitle ? " nextLine" : " hasPipe") + '"><a href="#" class="arrow" data-url="/store/launch-locator/showLaunchLocator.jsp?id=' + l.productId + '">Launch Locator<span></span></a></div>')) : !0 === l.isActive ? (m = ["/store/product/", l.name.replace(/\s+/g, "-").replace(/'/g, "").toLowerCase(), "/" + l.productId, "?styleId=" + l.styleId, "&colorId=" + l.colorId, "&icid=promo-release-calendar+release-" + l.name + "+" + d.format("MM-DD-YYYY") + "+buy-it"].join(""), f.push('<a class="button" href="' + m + '">Shop Now</a>')) : c === a || f.push('<div class="muted soldOut">Sold Out</div>'), n += e.Products.displayProduct({
                    product: l,
                    labelClass: p,
                    productClass: h,
                    releaseDateText: u,
                    productLinks: f.join("")
                }));
                else if (d > o) return !1
            }), n || (n = '<p class="text-center">No releases found for selected filters</p>'), e.elem.$wrapper[0].innerHTML = n, $(document).foundation(), e.loadMoreDate = o.add(1, "day").format("YYYY-MM-DD"), e.Products.checkLoadMore(), e.AddToCalendar.applyCalendar(), e.Blog.attachBlogClick()
        },
        reloadDisplay: function() {
            var e = FL.SneakerReleaseDates,
                t = moment().startOf("day"),
                a = t.format("YYYY-MM-DD"),
                i = moment().add(29, "day"),
                o = moment(e.dateSelected),
                r = moment(e.dateSelected).add(29, "day"),
                n = "";
            e.Filters.updateUrl();
            var s = {
                gender: $("#filterGender").val(),
                date: $("#filterDate").text().trim(),
                brand: $("#filterBrand").val()
            };
            FL.optimove.reportEvent("filter_releases", s), r > i && (r = i), e.elem.$wrapper.html("");
            var l = "";
            $.each(e.productJSON, function(i, s) {
                var d = moment(s.releaseDate),
                    c = d.format("YYYY-MM-DD"),
                    u = s.releaseDate === n ? "" : s.releaseDate,
                    p = "",
                    h = "",
                    m = "",
                    f = [];
                if (d >= o && d <= r) "" !== e.genderSelected && s.gender !== e.genderSelected || "" !== e.brandSelected && s.brand !== e.brandSelected || (n = s.releaseDate, "" !== u && (u = c === a ? "Launching Today" : d.format("dddd M/D"), p = " hasLabel"), c === a && (h = " todaysReleases"), d > t ? (f.push('<ul class="addToCalendar dropdown menu no-arrow" data-dropdown-menu data-closing-time="100">', "<li>", '<a href="javascript:void(0)" class="arrow px-0" style="text-decoration: underline;">Remind Me<span></span></a>', '<ul class="menu vertical" style="min-width:0;">', '<li><a href="#" data-type="google">Google&nbsp;Calendar</a></li>', '<li><a href="#"data-type="ical">iCal/Outlook</a></li>', "</ul>", "</li>", "</ul>"), void 0 !== s.blogUrl && "" !== s.blogUrl && f.push('<div class="blog hasPipe ' + ("" !== s.displayTitle ? "" : "isBlog") + '"><a href="' + s.blogUrl + '" class="arrow" target="_blank">Details on the blog<span></span></a></div>'), void 0 !== s.isOnLaunchLocator && "true" === s.isOnLaunchLocator && f.push('<div class="launchLocator' + ("" !== s.displayTitle ? " nextLine" : " hasPipe") + '"><a href="#" class="arrow" data-url="/store/launch-locator/showLaunchLocator.jsp?id=' + s.productId + '">Launch Locator<span></span></a></div>')) : !0 === s.isActive ? (m = ["/store/product/", s.name.replace(/\s+/g, "-").replace(/'/g, "").toLowerCase(), "/" + s.productId, "?styleId=" + s.styleId, "&colorId=" + s.colorId, "&icid=promo-release-calendar+release-" + s.name + "+" + d.format("MM-DD-YYYY") + "+buy-it"].join(""), f.push('<a class="button nowrap" href="' + m + '">Shop Now</a>')) : c === a || f.push('<div class="muted soldOut">Sold Out</div>'), l += e.Products.displayProduct({
                    product: s,
                    labelClass: p,
                    productClass: h,
                    releaseDateText: u,
                    productLinks: f.join("")
                }));
                else if (d > r) return !1
            }), l || (l = '<p class="text-center">No releases found for selected filters</p>'), e.elem.$wrapper[0].innerHTML = l, $(document).foundation(), e.loadMoreDate = r.add(1, "day").format("YYYY-MM-DD"), e.Products.checkLoadMore(), e.AddToCalendar.applyCalendar(), e.Blog.attachBlogClick()
        },
        displayProduct: function(e) {
            return FL.SneakerReleaseDates, e = jQuery.extend(!0, {
                product: {},
                labelClass: "",
                productClass: "",
                releaseDateText: "",
                productLinks: ""
            }, e), ['<div class="row dateLabel' + e.labelClass + '">', '<div class="column small-12">', '<h3 class="text-left mt-3">' + e.releaseDateText + "</h3>", '<hr class="divider mt-1"/>', "</div>", "</div>", '<div class="row releaseProduct pt-3 pb-2 ' + e.productClass + '" data-releasedate="' + e.product.releaseDate + '" data-brand="' + e.product.brand + '" data-launchtime="' + e.product.nonDefaultLaunchTime + '">', '<div class="productImage column small-5 medium-2 medium-offset-2 large-offset-3 flex-container align-center align-middle">' + e.product.imageHTML + "</div>", '<div class="productInfo column small-7 medium-5 pl-medium-4 pt-medium-2">', '<h2 class="h4 hide-for-small-only displayName">' + e.product.name + "</h2>", '<h2 class="h5 show-for-small-only mt-1 mb-0">' + e.product.name + "</h2>", '<div class="muted" data-styleId="' + e.product.styleColor + '">Style# ' + e.product.styleColor + " | Color: " + e.product.colorDescription + '</div><div class="show-for-small-only mt-2">' + e.productLinks + "</div>", "</div>", '<div class="productLinks column medium-2 hide-for-small-only">', e.productLinks, "</div>", "</div>"].join("")
        },
        Events: {
            clickLoadMore: function(e) {
                FL.SneakerReleaseDates.Products.loadMore()
            }
        }
    },
    AddToCalendar: {
        init: function() {
            moment.tz.add("America/New_York|EST EDT EWT EPT|50 40 40 40|01010101010101010101010101010101010101010101010102301010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010101010|-261t0 1nX0 11B0 1nX0 11B0 1qL0 1a10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 RB0 8x40 iv0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1qN0 WL0 1qN0 11z0 1o10 11z0 1o10 11z0 1o10 11z0 1o10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1cN0 1cL0 1cN0 1cL0 s10 1Vz0 LB0 1BX0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 1cN0 1fz0 1a10 1fz0 1cN0 1cL0 1cN0 1cL0 1cN0 1cL0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 14p0 1lb0 14p0 1lb0 14p0 1nX0 11B0 1nX0 11B0 1nX0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Rd0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0 Op0 1zb0|21e6"), FL.SneakerReleaseDates.AddToCalendar.applyCalendar()
        },
        applyCalendar: function() {
            var e = FL.SneakerReleaseDates;
            e.elem.$wrapper.find(".addToCalendar:not(.loaded)").each(e.AddToCalendar.generateCalendar)
        },
        generateCalendar: function(e, t) {
            var a = FL.SneakerReleaseDates,
                i = a.AddToCalendar.Events;
            $(t).find("[data-type]").on("click", i.clickAddToCalendar)
        },
        getGoogleHref: function(e) {
            var t, a;
            return e = jQuery.extend({
                title: "",
                startTime: moment().tz("America/New_York"),
                endTime: moment().tz("America/New_York").add(1, "hour"),
                description: "",
                address: ""
            }, e), t = e.startTime.toISOString().replace(/-|:|\.\d+/g, ""), a = e.endTime.toISOString().replace(/-|:|\.\d+/g, ""), encodeURI(["https://www.google.com/calendar/render", "?action=TEMPLATE", "&text=" + e.title, "&dates=" + t + "/" + a, "&details=" + e.description, "&location=" + e.address, "&sprop=name:"].join(""))
        },
        getDataTextHref: function(e) {
            var t, a;
            return e = jQuery.extend({
                title: "",
                startTime: moment(),
                endTime: moment().add(1, "hour"),
                description: "",
                address: ""
            }, e), t = e.startTime.toISOString().replace(/-|:|\.\d+/g, ""), a = e.endTime.toISOString().replace(/-|:|\.\d+/g, ""), encodeURI("data:text/calendar;charset=utf8," + ["BEGIN:VCALENDAR", "VERSION:2.0", "BEGIN:VEVENT", "URL:" + e.description, "DTSTART;TZID=America/New_York:" + (t.slice(0, 8) + "T100000" || ""), "DTEND;TZID=America/New_York:" + (a.slice(0, 8) + "T110000" || ""), "TZNAME:EST", "TZID:America/New_York", "SUMMARY:" + e.title, "DESCRIPTION:" + e.description, "LOCATION:" + e.address, "END:VEVENT", "END:VCALENDAR"].join("\n"))
        },
        Events: {
            clickAddToCalendar: function(e) {
                var t, a, i, o, r = FL.SneakerReleaseDates,
                    n = $(this),
                    s = n.attr("data-type"),
                    l = n.parents(".releaseProduct"),
                    d = l.attr("data-releasedate"),
                    c = l.find(".productInfo").find(".displayName").text(),
                    u = l.attr("data-launchtime"),
                    p = "";
                "" === u ? (t = moment.tz(d + " 10:00", "America/New_York"), a = moment.tz(d + " 11:00", "America/New_York")) : (t = moment(d + " " + u), a = moment(d + " " + u).add(1, "hour"));
                var h = color = "";
                h = l.find(".productInfo").find(".muted").data("styleid").split("-")[0], color = l.find(".productInfo").find(".muted").data("styleid").split("-")[1];
                var m = {
                    product_id: "",
                    style_id: h,
                    color_id: color,
                    name: c
                };
                FL.optimove.reportEvent("remind_release_product", m), o = {
                    title: c,
                    startTime: t,
                    endTime: a,
                    description: "https://www.finishline.com/sneaker-release-dates",
                    address: "finishline.com"
                }, "google" === s ? p = r.AddToCalendar.getGoogleHref(o) : "ical" === s && (p = r.AddToCalendar.getDataTextHref(o)), "" !== p && (i = window.open(p, "_blank"), i.focus())
            }
        }
    },
    Calendar: {
        load: function() {
            var e = FL.SneakerReleaseDates,
                t = [],
                a = "";
            $.each(e.productJSON, function(e, i) {
                i.releaseDate !== a && (a = i.releaseDate, t.push({
                    date: i.releaseDate
                }))
            }), $("#clndr").clndr({
                template: "<div class='clndr-controls'><div class='clndr-control-button'><span class='clndr-previous-button'><span class='icon icon-chevron-left'></span></span>&nbsp;</div><div class='month' data-month='<%= month %>'><%= month %></div><div class='clndr-control-button rightalign'><span class='clndr-next-button'><span class='icon icon-chevron-right'></span></span>&nbsp;</div></div><table class='clndr-table' border='0' cellspacing='0' cellpadding='0'><thead><tr class='header-days'><% for(var i = 0; i < daysOfTheWeek.length; i++) { %><td class='header-day'><%= daysOfTheWeek[i] %></td><% } %></tr></thead><tbody><% for(var i = 0; i < numberOfRows; i++){ %><tr><% for(var j = 0; j < 7; j++){ %><% var d = j + i * 7; %><td class='<%= days[d].classes %>'><div class='day-contents'><%= days[d].day %></div></td><% } %></tr><% } %><tr><td class='noclick'><div class='noclick-item'>&nbsp;</div></td><td colspan='4' class='label-launchdate'>= Launch Date</td><td colspan='2' class='label-today'>Today</td></tr></tbody></table>",
                startWithMonth: moment(),
                events: t,
                clickEvents: {
                    click: e.Filters.Events.clickDate,
                    previousMonth: e.Calendar.Events.clickPreviousMonth,
                    nextMonth: e.Calendar.Events.clickNextMonth
                },
                doneRendering: e.Calendar.doneRendering,
                showAdjacentMonths: !1
            })
        },
        doneRendering: function() {
            var e = FL.SneakerReleaseDates;
            $("#clndr").find(".label-today").on("click", e.Filters.Events.clickResetDate).end().find(".month").on("click", e.Filters.Events.clickCalendarMonth).end()
        },
        Events: {
            clickPreviousMonth: function(e) {
                var t = FL.SneakerReleaseDates,
                    a = e.format("MM"),
                    i = moment().add(-1, "month").format("MM");
                t.elem.$clndr.find(".clndr-previous-button, .clndr-next-button").show(), a === i && t.elem.$clndr.find(".clndr-previous-button").hide()
            },
            clickNextMonth: function(e) {
                var t = FL.SneakerReleaseDates,
                    a = e.format("MM"),
                    i = moment().add(1, "month").format("MM");
                t.elem.$clndr.find(".clndr-previous-button, .clndr-next-button").show(), a === i && t.elem.$clndr.find(".clndr-next-button").hide()
            }
        }
    }
}, FL.SneakerReleaseDates), window.FL = window.FL || {}, FL.LaunchLocator = FL.LaunchLocator || {}, FL.LaunchLocatorData = FL.LaunchLocatorData || {}, FL.LaunchLocatorData = jQuery.extend(!0, {
    hideDistance: !1,
    destinations: [],
    origins: null,
    storeCount: 0,
    storeJSON: null,
    latitude: null,
    longitude: null,
    daysOfWeek: ["Sun", "Mon", "Tues", "Wed", "Thurs", "Fri", "Sat"],
    daysOfWeekJson: ["sunday", "monday", "tuesday", "wednesday", "thursday", "friday", "saturday"],
    currentDay: 0,
    todayJsonVal: null
}, FL.LaunchLocatorData), FL.LlHtml = jQuery.extend(!0, {
    storeFL: ['<div class="row mb-3 store" id="store[store-id]" data-sort="[store-distance]" data-storeid="[store-id]" data-crow="[crow-flies]">', '<div class="column small-12">', '<hr class="divider mt-0 mb-3"/>', "</div>", '<div class="column">', '<div class="row ml-medium-0">', '<div class="column small-12 p-medium-0">', '<h1 class="mb-0 storeName">[store-name]</h1>', '<h4 class="mb-2" style="margin-top:3px;">[store-distance] MILES AWAY</h4>', '<div class="store-result-address">', "[store-street1] [store-street2]<br>", "[store-city], [store-state] [store-zip]<br>", "[store-phone]", "</div>", '<div class="my-2">[store-storehours]</div>', '<div class="">', '<a target="_blank" href="https://maps.google.com?saddr=[data-latitude],[data-longitude]&daddr=[store-latitude],[store-longitude]" class="arrow">Get Directions<span></span></a>', "</div>", "</div>", "</div>", "</div>", "</div>"].join(""),
    storeSummary: ['<div class="row column mt-2 mb-2">', '<span id="launchSummaryText">Launching [launch-date] at <strong>[store-count]</strong> [store-plurality] near <strong>[city-state]</strong></span>', "</div>"].join(""),
    holidayHours: '<div class="holiday">\'Tis the season. Call your local store to<br/>get the most up-to-date holiday hours</div>'
}, FL.LlHtml), FL.LaunchLocator = jQuery.extend(!0, {
    init: function() {
        var e = FL.LaunchLocator,
            t = FL.LaunchLocatorData,
            a = (new Date).getDay();
        t.currentDay = a, t.todayJsonVal = t.daysOfWeekJson[a], e.Geolocation.loadGoogleMaps("", "initAddressRequest"), $("#customerAddressText").on("keypress", FL.LaunchLocator.keypressLookupInput).on("keyup", FL.LaunchLocator.keyupLookupInput)
    },
    initAddressRequest: function() {
        jQuery("#storeLookupSubmit").on("click", FL.LaunchLocator.clickStoreLookup)
    },
    keypressLookupInput: function(e) {
        10 === e.keyCode || 13 === e.keyCode ? (e.preventDefault(), FL.LaunchLocator.clickStoreLookup()) : $("#storeLookupSubmit").removeAttr("disabled")
    },
    keyupLookupInput: function(e) {
        10 === e.keyCode || 13 === e.keyCode ? e.preventDefault() : 0 === $("#customerAddressText").val().length ? $("#storeLookupSubmit").attr("disabled", "true") : $("#storeLookupSubmit").removeAttr("disabled")
    },
    clickStoreLookup: function(e) {
        var t = FL.LaunchLocator;
        FL.LaunchLocatorData.address = jQuery("#customerAddressText").val(), jQuery("#storeInfo").empty(), jQuery("#findStoreSpinner").show(), t.Geolocation.getLatLng()
    },
    displayStores: function() {
        var e = FL.LaunchLocator,
            t = FL.LaunchLocatorData,
            a = FL.LlHtml,
            i = jQuery("#launchLocatorContent"),
            o = null,
            r = [];
        jQuery.each(t.storeJSON.stores, function(o, n) {
            null === t.storeJSON ? i.html("issue loading store data") : (n.id < 2e3 || n.id >= 5250 && n.id <= 5299) && r.push(e.loadStoreToDisplay({
                store: n,
                template: a.storeFL,
                type: "fl"
            }))
        }), jQuery("#findStoreSpinner").hide(), o = jQuery("#storeInfo"), o.html(r.join("")), !1 === t.hideDistance ? o.find(".store").sort(function(e, t) {
            return jQuery(e).data("sort") - jQuery(t).data("sort")
        }).appendTo(o) : t.stateOnly || o.find(".store").sort(function(e, t) {
            return jQuery(e).data("crow") - jQuery(t).data("crow")
        }).appendTo(o), t.storeCount > 1 ? jQuery("#productBox").find(".shoeInfo").prepend("<b>" + t.storeCount + "</b> stores near <b>" + t.address + "</b> will have ") : jQuery("#productBox").find(".shoeInfo").prepend("<b>" + t.storeCount + "</b> store near <b>" + t.address + "</b> will have "), jQuery("#productInfo").hide(), jQuery("#productInfoForStores").show(), e.addSummaryInfo({
            date: jQuery(".releaseDateInput").val(),
            storeCount: t.storeCount,
            cityState: t.cityState,
            template: FL.LlHtml.storeSummary
        })
    },
    addSummaryInfo: function(e) {
        var t = e.template.replace(/\[launch-date\]/g, e.date).replace(/\[store-count\]/g, e.storeCount).replace(/\[store-plurality\]/g, 1 === e.storeCount ? "store" : "stores").replace(/\[city-state\]/g, e.cityState);
        jQuery("#storeInfo").prepend(t)
    },
    loadStoreToDisplay: function(e) {
        var t = (FL.LaunchLocator, FL.LaunchLocatorData),
            a = (FL.LlHtml, ""),
            i = "",
            o = "",
            r = "";
        if (e = jQuery.extend({
                store: null,
                template: null
            }, e), e.store.street2replace = e.store.street2.replace("#", "%23"), null !== e.store && null !== e.template) {
            jQuery("body").hasClass("ie8") && (e.template = e.template.replace(/\[data-latitude\],\[data-longitude\]/g, t.cityState), e.template = e.template.replace(/\[store-latitude\],\[store-longitude\]/g, "[store-street1] [store-replace-street2], [store-city], [store-state] [store-zip]")), o = "" !== e.store.seo && "null" !== e.store.seo && void 0 !== e.store.seo ? "/store-locations/" + e.store.seo : "/store/storepickup/pages/?storeId=" + e.store.id, r = (e.store.id < 2e3 || e.store.id >= 5250 && e.store.id <= 5299) && "" !== e.store.seo && "null" !== e.store.seo && void 0 !== e.store.seo ? '<a href="/store-locations/' + e.store.seo + '">' + e.store.name + "</a>" : e.store.name, a = e.template.replace(/\[store-id\]/g, e.store.id).replace(/\[store-distance\]/g, e.store.distance).replace(/\[store-name\]/g, r).replace(/\[store-street1\]/g, e.store.street1).replace(/\[store-street2\]/g, e.store.street2).replace(/\[store-replace-street2\]/g, e.store.street2replace).replace(/\[store-city\]/g, e.store.city).replace(/\[store-state\]/g, e.store.state).replace(/\[store-zip\]/g, e.store.zip).replace(/\[store-phone\]/g, e.store.phone).replace(/\[data-latitude\]/g, t.latitude).replace(/\[data-longitude\]/g, t.longitude).replace(/\[store-latitude\]/g, e.store.geolocation.latitude).replace(/\[store-longitude\]/g, e.store.geolocation.longitude).replace(/\[crow-flies\]/g, e.store.geolocation.crowflies).replace(/\[seo-link\]/g, o);
            for (var n = "", s = !1, l = 1; l <= 7; l++) {
                var d = (t.daysOfWeek[l], e.store.hours[t.daysOfWeekJson[l]]),
                    c = t.daysOfWeek[l - 1],
                    u = e.store.hours[t.daysOfWeekJson[l - 1]];
                if (t.currentDay === l - 1 && (s = !0), d !== u || 7 === l) {
                    var p = n + c;
                    i += '<div class="day ' + (s ? "selectedDay" : "") + '"><span>' + p + ": </span><span>" + u + "</div>", s = !1, n = ""
                } else n || (n = c + "-")
            }
            a = a.replace(/\[store-storehours\]/g, i)
        }
        return a
    },
    loadStoreDataJSON: function() {
        var e = FL.LaunchLocator,
            t = FL.LaunchLocatorData;
        jQuery.ajax({
            data: {
                latitude: t.latitude,
                longitude: t.longitude
            },
            dataType: "json",
            type: "GET",
            url: FL.contextPath + "/releaseproduct/gadgets/launchStoreLookup.jsp",
            success: e.loadStoreDataJSONSuccess,
            error: function(e, t, a) {
                console.log("FL.LaunchLocator.loadStoreDataJSON::error")
            }
        })
    },
    loadStoreDataJSONSuccess: function(e, t, a) {
        var i = FL.LaunchLocator,
            o = FL.LaunchLocatorData;
        o.storeJSON = e, o.storeCount = e.stores.length, i.loadStoreData()
    },
    toRad: function(e) {
        return e * (Math.PI / 180)
    },
    calculateDistance: function(e, t) {
        var a = FL.LaunchLocator.toRad(t.latitude - e.latitude),
            i = FL.LaunchLocator.toRad(t.longitude - e.longitude),
            o = FL.LaunchLocator.toRad(e.latitude),
            r = FL.LaunchLocator.toRad(t.latitude),
            n = Math.sin(a / 2) * Math.sin(a / 2) + Math.sin(i / 2) * Math.sin(i / 2) * Math.cos(o) * Math.cos(r),
            s = 2 * Math.atan2(Math.sqrt(n), Math.sqrt(1 - n)),
            l = 3959 * s;
        return Number(Math.round(l + "e1") + "e-1")
    },
    loadStoreData: function() {
        var e = FL.LaunchLocator,
            t = FL.LaunchLocatorData,
            a = [],
            i = [];
        null === t.storeJSON ? e.loadStoreDataJSON() : 0 === t.storeJSON.stores.length ? (jQuery("#storeInfo").html('<div class="column small-12 mt-4 text-center"><h3 id="">There are no nearby stores</h3><p>No launches in your area yet. Check back later, or <br>try using a different zipcode.</p></div>'), jQuery("#findStoreSpinner").hide()) : "false" === t.storeJSON.loaded.distance ? (a.push(new google.maps.LatLng(t.storeJSON.location.latitude, t.storeJSON.location.longitude)), t.origins = a, t.destinations = [], jQuery.each(t.storeJSON.stores, function(e, a) {
            t.destinations.push(new google.maps.LatLng(a.geolocation.latitude, a.geolocation.longitude))
        }), $.each(t.destinations, function(e) {
            i.push(FL.LaunchLocator.calculateDistance({
                latitude: a[0].lat(),
                longitude: a[0].lng()
            }, {
                latitude: t.destinations[e].lat(),
                longitude: t.destinations[e].lng()
            }))
        }), e.loadStoreDataDistances(i)) : e.displayStores()
    },
    loadStoreDataDistances: function(e) {
        var t = FL.LaunchLocator,
            a = FL.LaunchLocatorData;
        null !== e ? (e.length > 0 && $.each(e, function(t, a) {
            FL.LaunchLocatorData.storeJSON.stores[t].distance = e[t]
        }), a.storeJSON.loaded.distance = !0, a.hideDistance = !1) : (a.storeJSON.loaded.distance = !0, a.hideDistance = !0), t.loadStoreData()
    },
    keypressStoreLookupInput: function(e) {
        10 !== e.keyCode && 13 !== e.keyCode || (e.preventDefault(), jQuery("#storeLookupSubmit").click())
    },
    keyupStoreLookupInput: function(e) {
        var t = jQuery(this),
            a = jQuery("#storeLookupSubmit"),
            i = t.val().length;
        10 === e.keyCode || 13 === e.keyCode ? e.preventDefault() : t.hasClass("no-data") ? 0 === i ? a.attr("disabled", "true") : a.removeAttr("disabled") : a.html(0 === i ? "Cancel" : "Find Stores")
    },
    loadMaps: function() {
        $(".store-map").each(function() {
            var e = FL.contextPath + "/assets/images/fl_mappin.png",
                t = parseFloat($(this).data("lat")),
                a = parseFloat($(this).data("lon")),
                i = new google.maps.LatLng(t, a),
                o = new google.maps.Map(document.getElementById($(this).attr("id")), {
                    center: i,
                    zoom: 12,
                    draggable: !1,
                    mapTypeControl: !1,
                    maxZoom: 12,
                    minZoom: 12,
                    overviewMapControl: !1,
                    panControl: !1,
                    rotateControl: !1,
                    scaleControl: !1,
                    scrollwheel: !1,
                    streetViewControl: !1,
                    zoomControl: !1,
                    styles: [{
                        featureType: "poi.business",
                        stylers: [{
                            visibility: "off"
                        }]
                    }]
                });
            new google.maps.Marker({
                position: i,
                map: o,
                icon: e
            })
        })
    }
}, FL.LaunchLocator), FL.LaunchLocator.Geolocation = jQuery.extend(!0, {
    api: "https://maps.googleapis.com/maps/api/js?client=gme-thefinishlineusa1&v=3&sensor=false&callback=FL.LaunchLocator.",
    geocoder: null,
    geocodeResults: function(e, t) {
        var a, i, o, r, n, s, l, d, c = FL.LaunchLocator,
            u = FL.LaunchLocatorData,
            p = 0;
        e.length > 0 && (e.length > 1 && jQuery.each(e, function(t, a) {
            jQuery.each(e[t].address_components, function(e, a) {
                "country" === a.types[0] && ("PR" !== a.short_name && "US" !== a.short_name || (p = t))
            })
        }), a = e[p].address_components, e[p].geometry, i = e[p].geometry.location.lat(), o = e[p].geometry.location.lng(), jQuery.each(a, function(e, t) {
            switch (t.types[0]) {
                case "administrative_area_level_1":
                    n = t.short_name, s = t.long_name;
                    break;
                case "locality":
                    r = t.long_name;
                    break;
                case "country":
                    l = t.short_name, d = t.long_name
            }
        }), "US" === l || "PR" === l) && (u.latitude = i, u.longitude = o, u.cityState = "PR" === l ? void 0 !== r ? r + ", " + l : void 0 !== n ? n + ", " + l : d : void 0 !== r ? r + ", " + n : s, "US" === l && void 0 === r ? (jQuery("#storeInfo").html('<div class="column small-12 mt-4 text-center"><h3 id="">Invalid Request</h3><p>Please provide a City/State or Zip Code.</p></div>'), jQuery("#findStoreSpinner").hide()) : c.loadStoreDataJSON())
    },
    getLatLng: function() {
        var e = FL.LaunchLocator.Geolocation;
        null === e.geocoder && (e.geocoder = new google.maps.Geocoder), e.geocoder.geocode({
            address: FL.LaunchLocatorData.address
        }, e.geocodeResults)
    },
    loadGoogleMaps: function(e, t) {
        var a = FL.LaunchLocator,
            i = "" === e ? "" : e + ".";
        if (0 === jQuery("#googleMapsApi").length) {
            var o = document.createElement("script");
            o.id = "googleMapsApi", o.src = a.Geolocation.api + i + t, o.type = "text/javascript", document.getElementsByTagName("head")[0].appendChild(o)
        } else FL.LaunchLocator.initAddressRequest()
    }
}, FL.LaunchLocator.Geolocation), window.FL = window.FL || {}, FL.youthFoundation = FL.youthFoundation || {}, FL.youthFoundation = jQuery.extend(!0, {
    init: function() {
        $("body#youthFoundation").length > 0 && $("#buttonAddToCart").on("click", FL.DynamicCart.addProductToDynamicCart)
    }
}, FL.youthFoundation), window.FL = window.FL || {}, FL.giftCards = FL.giftCards || {}, FL.giftCards = jQuery.extend(!0, {
    cache: {
        success: !1,
        $card: jQuery("#txt-gc-number"),
        $pin: jQuery("#txt-gc-pin"),
        $button: jQuery("#btn-check-bal-disabled"),
        $disabled: jQuery("#btn-check-bal-disabled"),
        $error: jQuery("#msg-gc-error"),
        $another: jQuery("#btn-check-another"),
        $form: jQuery("#checkBalanceForm"),
        $display: jQuery("#checkBalanceDisplay"),
        widget: null,
        gresponse: ""
    },
    msg: {
        error: "Number entered is not valid. Please try again or contact<br/>Customer Care at 1-888-777-3949.",
        recaptcha: "Verification not passed.  Please try again or contact<br/>Customer Care at 1-888-777-3949."
    },
    hasError: !1,
    init: function() {
        var e = FL.giftCards;
        e.cache.$card.on("keyup", e.CheckBalance.keyUpCard), e.cache.$pin.on("keyup", e.CheckBalance.keyUpPin), e.cache.$button.on("click", e.CheckBalance.clickForm), e.cache.$another.on("click", e.CheckBalance.clickAnother), FL.giftCards.ReCaptcha.init()
    },
    ErrorMessage: {
        clear: function() {
            var e = FL.giftCards;
            e.hasError && (e.cache.$card.removeClass("errorMessage"), e.cache.$pin.removeClass("errorMessage"), e.cache.$error.html(""), e.hasError = !1)
        },
        show: function(e) {
            var t = FL.giftCards;
            t.hasError = !0, t.cache.$card.addClass("errorMessage"), t.cache.$pin.addClass("errorMessage"), t.cache.$error.html(e)
        }
    },
    CheckBalance: {
        ajaxReturn: function(e) {
            var t = FL.giftCards,
                a = jQuery(e),
                i = a.find("isError").html(),
                o = a.find("recaptcha").text(),
                r = a.find("result").html();
            "true" === i && "false" === o ? t.ErrorMessage.show(t.msg.error) : "true" === i && "true" === o ? t.ErrorMessage.show(t.msg.recaptcha) : t.CheckBalance.displayAmount(r), grecaptcha.reset(), t.cache.gresponse = "", t.CheckBalance.verify()
        },
        displayAmount: function(e) {
            var t = FL.giftCards;
            t.cache.$form.hide(), t.cache.$display.find(".amount").html(e).end().show()
        },
        clickAnother: function() {
            var e = FL.giftCards;
            e.cache.$card.val("").keyup(), e.cache.$pin.val(""), e.cache.$display.hide().find(".amount").html("").end(), e.cache.$form.show()
        },
        clickForm: function() {
            var e = FL.giftCards,
                t = FL.contextPath + "/global/fragments/checkGcBalance.jsp",
                a = {
                    number: e.cache.$card.val(),
                    pin: e.cache.$pin.val(),
                    gresponse: e.cache.gresponse
                };
            return /^\d{16}$/.test(a.number) && /^(\d{8}|\d{10}|\d{12})$/.test(a.pin) && "" !== a.gresponse && jQuery.post(t, a, e.CheckBalance.ajaxReturn, "html"), !1
        },
        enable: function() {
            FL.giftCards.cache.$button.removeAttr("disabled")
        },
        disable: function() {
            FL.giftCards.cache.$button.attr("disabled", "disabled")
        },
        verify: function() {
            var e = FL.giftCards;
            pin = e.cache.$pin.val(), 16 === e.cache.$card.val().length && /^(\d{8}|\d{10}|\d{12})$/.test(pin) && "" !== e.cache.gresponse ? e.CheckBalance.enable() : e.CheckBalance.disable()
        },
        keyUpPin: function(e) {
            var t = FL.giftCards,
                a = t.cache.$pin.val();
            t.cache.$pin.val(a.replace(/[^0-9]/g, "")), t.ErrorMessage.clear(), t.CheckBalance.verify()
        },
        keyUpCard: function(e) {
            var t = FL.giftCards,
                a = t.cache.$card.val();
            t.cache.$card.val(a.replace(/[^0-9]/g, "")), t.ErrorMessage.clear(), t.CheckBalance.verify()
        }
    },
    ReCaptcha: {
        init: function() {
            "undefined" != typeof grecaptcha && void 0 !== grecaptcha.render ? FL.giftCards.cache.widget = grecaptcha.render("recaptcha-container", {
                sitekey: "6LeGvygUAAAAAIoo2P03L-Ldqa3aUHjpQAmXfLuy",
                callback: FL.giftCards.ReCaptcha.callback,
                "expired-callback": FL.giftCards.ReCaptcha.expiredCallback
            }) : setTimeout(function() {
                FL.giftCards.ReCaptcha.init()
            }, 100)
        },
        callback: function(e) {
            FL.giftCards.cache.gresponse = e, FL.giftCards.CheckBalance.verify()
        },
        expiredCallback: function(e) {
            FL.giftCards.cache.gresponse = "", FL.giftCards.CheckBalance.verify()
        }
    }
}, FL.giftCards), jQuery("#btn-check-bal").on("click", function() {
    jQuery("#btn-check-bal").hasClass("errorMessage") ? (jQuery("#btn-check-bal").focus(), jQuery("#btn-check-bal").attr("aria-label", "Number entered is not valid. Please try again or contact. Customer Care at 1-888-777-3949.")) : jQuery("#txt-gc-pin").hasClass("errorMessage") && (jQuery("#txt-gc-pin").focus(), jQuery("#txt-gc-pin").attr("aria-label", "Number entered is not valid. Please try again or contact. Customer Care at 1-888-777-3949."))
}), window.FL = window.FL || {}, FL.UMB = FL.UMB || {}, FL.UMB = jQuery.extend(!0, {
    stickyUBMTop: 0,
    init: function() {
        $(".umb-wrapper").length && (FL.UMB.stickyUBMTop = $(".umb-wrapper").offset().top, $(".umb-wrapper[data-enablesticky='true']").length > 0 && $(window).scroll(function() {
            FL.UMB.enableStickyTop()
        }))
    },
    enableStickyTop: function() {
        $(window).scrollTop() > FL.UMB.stickyUBMTop ? ($(".umb-cartridge").height($(".umb-wrapper").outerHeight()), $(".umb-wrapper").addClass("sticky")) : ($(".umb-cartridge").height("auto"), $(".umb-wrapper").removeClass("sticky"))
    }
}, FL.UMB), window.FL = window.FL || {}, FL.YouTubeContainer = FL.YouTubeContainer || {}, FL.YouTubeContainer = jQuery.extend(!0, {
    init: function() {
        var e = this,
            t = $(".youtube-video-wrapper");
        $.each(t, function(t, a) {
            var i = $(a).find(".youtube-video-wrapper-cover-image");
            $(i).length > 0 && $(i).on("click", function() {
                e.setOnCLickCoverImage(a)
            })
        })
    },
    setOnCLickCoverImage: function(e) {
        var t = $(e).find(".youtube_iframe"),
            a = $(e).find(".youtube-video-wrapper-cover-image").data("url") + "&autoplay=1";
        $(e).find(".youtube-video-wrapper-cover-image").hide(), $(t).attr("src", a)
    }
}, FL.YouTubeContainer), window.FL = window.FL || {}, FL.BrandBarContainer = FL.BrandBarContainer || {}, FL.BrandBarContainer = jQuery.extend(!0, {
    init: function() {
        FL.BrandBarContainer.initCarousel(), FL.BrandBarContainer.setupADA()
    },
    initCarousel: function() {
        var e = $(".brand-bar-carousel");
        $.each(e, function(e, t) {
            $(t).slick({
                slidesToShow: 6,
                slidesToScroll: 6,
                infinite: !0,
                nextArrow: "<span class='icon icon-chevron-right slick-next-icon'></span>",
                prevArrow: "<span class='icon icon-chevron-left slick-prev-icon'></span>",
                responsive: [{
                    breakpoint: 640,
                    settings: {
                        centerPadding: "40px",
                        infinite: !0,
                        slidesToShow: 3,
                        slidesToScroll: 3,
                        nextArrow: "<span class='icon icon-chevron-right slick-next-icon'></span>",
                        prevArrow: "<span class='icon icon-chevron-left slick-prev-icon'></span>"
                    }
                }]
            })
        })
    },
    setupADA: function() {
        $(".brand-link-icon").length && setInterval(function() {
            $(".brand-link-icon").attr("tabindex", "")
        }, 50)
    }
}, FL.BrandBarContainer), window.FL = window.FL || {}, FL.loyaltyProgram = FL.loyaltyProgram || {};
var FlIsAjaxExecuting = !1;
FL.loyaltyProgram = jQuery.extend(!0, {
    loyaltyAccount: null,
    init: function() {
        var e = $("#loyaltyNumber").val();
        void 0 === e && (e = $("#wcNumber").val()), void 0 !== e && (FL.loyaltyProgram.getLoyaltyAccountSummary(e), FL.loyaltyProgram.getAccountStatus(), FL.loyaltyProgram.carouselReward(), FL.loyaltyProgram.carouselRewardWallet(), FL.loyaltyProgram.updateLoyaltyAccountInit(), $(".openAutomaticRewardsSelectionModal").off().on("click", function() {
            FL.loyaltyProgram.openAutomaticRewardsSelectionModal()
        }), $(".openStatusDetailModal").off().on("click", function() {
            FL.loyaltyProgram.openStatusDetailModal()
        }), $(".minimizeUpgradeExperience").off().on("click", function() {
            FL.loyaltyProgram.minimizedUpgradeExperience()
        }), $("#printLoyaltyCard").off().on("click", function() {
            var e = document.getElementById("wcCard"),
                t = window.open("", "PRINT");
            t.document.write("<html><head><title>" + document.title + '</title></head><body><link rel="stylesheet" type="text/css" href="/store/assets/css/app.min.css"><link rel="stylesheet" type="text/css" href="/store/assets/css/style-guide.min.css">' + e.innerHTML + "</body></html>"), t.document.close(), t.onload = function() {
                t.focus(), setTimeout(function() {
                    t.print(), t.close()
                }, 1e3)
            }
        }), $(".joinFreeBtn").off().on("click", function() {
            FL.loyaltyProgram.openUpdateLoyaltyProgramModal()
        }), $("body").off().on("open.zf.reveal", "#openStatusDetailModal[data-reveal]", function() {
            $(".joinFreeBtn").off().on("click", function() {
                FL.loyaltyProgram.openUpdateLoyaltyProgramModal()
            }), $(".hswSteps").slick({
                dots: !0,
                accessibility: !1,
                slidesToShow: 4,
                infinite: !0,
                responsive: [{
                    breakpoint: 9999,
                    settings: "unslick"
                }, {
                    breakpoint: 640,
                    settings: {
                        dots: !0,
                        accessibility: !1,
                        slidesToShow: 1,
                        infinite: !0
                    }
                }]
            })
        }))
    },
    initLoyaltyOffers: function() {
        FL.loyaltyProgram.getLoyaltyProgramCatalog(9, 1), FL.loyaltyProgram.initCatalogPagination()
    },
    displayOfferPdp: function(e, t) {
        if (FL.loyaltyProgram.carouselReward(), FL.global.showOverlay(), $("#noDataAvailable").hide(), null === t || void 0 === t || "" === t) return window.location.href = FL.contextPath;
        var a = FL.contextPath + "/myaccount/json/loyaltyOfferOrderDetailsJsonResponse.jsp";
        $.ajax({
            contentType: "application/json",
            data: {
                offerId: e,
                loyaltyNumber: t
            },
            url: a,
            async: !1,
            success: function(e) {
                if (e.result) {
                    var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                    if (!JSON.parse(t).content[0] && !JSON.parse(t).content[0].offer.offerId) return window.location.href = FL.contextPath + "/loyalty-program";
                    var a = JSON.parse(t).content[0];
                    if (FL.loyaltyProgram.loyaltyAccount, null === a || void 0 === a) return FL.global.hideOverlay(), void $("#noDataAvailable").show();
                    if ($(".loyaltyStatusReward .largeImageContainer img").attr("src", a.offer.imageUrl), $($(".loyaltyStatusReward .smallImagesContainer img")[0]).attr("src", a.offer.imageUrl), $($(".loyaltyStatusReward .smallImagesContainer img")[1]).attr("src", a.offer.imageUrl), $($(".loyaltyStatusReward .smallImagesContainer img")[2]).attr("src", a.offer.imageUrl), $("#rewardBreadcrumbsLabel").text($.parseHTML(a.offer.shortDescription)[0].nodeValue), $(".loyaltyStatusReward .offerTitle").text($.parseHTML(a.offer.shortDescription)[0].nodeValue), $(".loyaltyStatusReward .status-points").text(a.offer.pointValue + " Status Points"), null !== a.offer.eventDateTime && void 0 !== a.offer.eventDateTime) {
                        var i = new Date(a.offer.eventDateTime);
                        i.setHours(i.getHours());
                        var o = i.getHours() >= 12,
                            r = 12 == i.getHours();
                        [i.getHours() - (o && !r ? 12 : 0), i.getMinutes(), i.getSeconds() || "00"].join(":"), i.getMonth(), i.getDate(), i.getFullYear()
                    }
                    if ($(".loyaltyStatusReward .offerInformation").empty(), null !== a.offer.longDescription && (a.offer.longDescription = a.offer.longDescription.replace(/&lt;/g, "<"), a.offer.longDescription = a.offer.longDescription.replace(/&gt;/g, ">"), $(".loyaltyStatusReward .offerInformation").append("<div>" + a.offer.longDescription + "</div>")), null !== a.offer.termsAndConditions && $(".loyaltyStatusReward .termsConditions").text($.parseHTML(a.offer.termsAndConditions)[0].nodeValue), $(".loyaltyStatusReward .spend-status-points").text(a.offer.pointValue + " status points"), a.redeemable) {
                        $(".loyaltyStatusReward .spend-status-points").removeClass("light-gray"), $(".loyaltyStatusReward .spend-status-points").removeClass("inactiveGrayButton"), $(".loyaltyStatusReward .spend-status-points").attr("onclick", "javascript:FL.loyaltyProgram.redeemRewardModalOpen();"), $(".loyaltyStatusReward .spend-status-points").text("spend " + a.offer.pointValue + " status points"), $(".loyaltyStatusReward .spend-status-points").attr("href", "javascript:void(0);"), $(".loyaltyStatusReward .redeem-reward-detail").text("Spend " + a.offer.pointValue + " points for " + $.parseHTML(a.offer.shortDescription)[0].nodeValue + "?"), $("#redeemOfferForm").find("#offerId").val(a.offer.offerId), null == a.offer.longDescription && (a.offer.longDescription = "");
                        var n = $("#openRedeemRewardSuccessModal");
                        n.find(".reward-title").text($.parseHTML(a.offer.shortDescription)[0].nodeValue), n.find(".reward-image").attr("src", a.offer.imageUrl), n.find(".reward-long-description").empty(), n.find(".reward-long-description").append($("<div>" + a.offer.longDescription + "</div>")), n.find(".close-icon").attr("onclick", "javascript:FL.loyaltyProgram.gotoCatalogOffers();")
                    } else $(".loyaltyStatusReward .spend-status-points").addClass("light-gray"), $(".loyaltyStatusReward .spend-status-points").addClass("inactiveGrayButton"), $(".loyaltyStatusReward .spend-status-points").attr("onclick", "return false;"), $(".loyaltyStatusReward .spend-status-points").text(a.offer.pointValue + " status points");
                    $(".loyaltyStatusReward .badge-image").hide(), "2" == a.offer.requiredTier && ($(".loyaltyStatusReward .badge-image").show(), $(".loyaltyStatusReward .badge-image").attr("src", "https://media.finishline.com/i/finishline/small_status")), FL.global.hideOverlay(), $(".loyaltyStatusReward .mainContent").show()
                }
            }
        })
    },
    getPotentialLoyaltyPoints: function(e, t) {
        var a = 0,
            i = FL.contextPath + "/myaccount/json/loyaltyAccountSummaryJsonResponse.jsp";
        return $.ajax({
            contentType: "application/json",
            data: {
                loyaltyNumber: e
            },
            url: i,
            async: !1,
            success: function(e) {
                if (e.result) {
                    var i = e.result.replace(new RegExp("&#034;", "g"), '"'),
                        o = JSON.parse(i),
                        r = Number(o.currentTierId) > 1 ? 15 : 10;
                    a = t * r
                }
            },
            error: function(e) {}
        }), a
    },
    getAccountStatus: function() {
        var e = FL.loyaltyProgram.loyaltyAccount,
            t = "";
        if (null !== e && void 0 !== e) {
            if (null !== e.tierExpirationDate && void 0 !== e.tierExpirationDate) {
                var a = e.tierExpirationDate.split("T"),
                    i = a[0].split("-"),
                    o = new Date(i[0], i[1] - 1, i[2]);
                o.setDate(o.getDate()), o.setHours(o.getHours());
                var r = o.getHours() >= 12,
                    n = 12 == o.getHours();
                [o.getHours() - (r && !n ? 12 : 0), o.getMinutes(), o.getSeconds() || "00"].join(":"), t = o.getMonth() + 1 + "/" + o.getDate() + "/" + o.getFullYear().toString().substr(-2)
            }
            $(".loyalty-account-status .statusACCPointCounter").text(Math.trunc(e.pointsAvailable)), $(".loyalty-account-status .status-number-account").text("Status #" + e.loyaltyNumber);
            var s = 5e3;
            "1" == e.currentTierId ? ($(".loyalty-account-status .gaStatus").text("GA STATUS"), $(".loyalty-account-status .Access-A-List-Status").text("Access A-List Status at " + Math.trunc(e.pointsUntilNextTier) + " Points"), $(".loyalty-account-status .Spent-10-Status").text("$1 spent = 10 Status Points"), $(".current-tier-status").text("GA STATUS"), null !== e.pointsUntilNextTier && (s = e.pointsProgressTowardNextTier)) : (null !== e.pointsUntilTierMaintenance && void 0 !== e.pointsUntilTierMaintenance ? ($(".loyalty-account-status .Access-A-List-Status").text("Earn " + e.pointsUntilTierMaintenance + " points by " + t + " to maintain A-List Status"), s -= e.pointsUntilTierMaintenance) : $(".loyalty-account-status .Access-A-List-Status").text("You have A-List Status until " + t), $(".loyalty-account-status .gaStatus").text("A-LIST STATUS"), $(".loyalty-account-status .Spent-10-Status").text("$1 spent = 15 Status Points"), $(".current-tier-status").text("A-LIST STATUS")), setTimeout(function() {
                FL.loyaltyProgram.statusSliderInit(s, e.currentTierId, e.pointsUntilTierMaintenance)
            }, 600)
        }
    },
    redeemOffer: function() {
        $("#redeemOfferbutton").on("click", function(e) {
            e.preventDefault(), FL.global.showOverlay(), $("#divRewardErrorMessage").hide(), $.ajax({
                url: $("#redeemOfferForm").attr("action"),
                data: $("#redeemOfferForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    e.success ? (FL.global.hideOverlay(), $("#openRedeemRewardSuccessModal").foundation("open")) : e.errors && e.errors.length > 0 ? (FL.global.hideOverlay(), $("#divRewardErrorMessage").show(), $("#rewardErrorMessage").html(e.errors[0])) : (FL.global.hideOverlay(), $("#divRewardErrorMessage").show(), $("#rewardErrorMessage").html("Offer could not be redeemed; please try again."))
                },
                error: function(e) {
                    FL.global.hideOverlay(), $("#divRewardErrorMessage").show(), $("#rewardErrorMessage").html("Offer could not be redeemed; please try again.")
                }
            })
        })
    },
    statusSliderInit: function(e, t, a) {
        var i = "0%";
        1 == t && ($(".statusAccPBIcon").attr("src", "https://media.finishline.com/i/finishline/a-list_w_text"), e <= 499 && (i = "0%"), e >= 500 && e <= 999 && (i = "10%"), e >= 1e3 && e <= 1499 && (i = "20%"), e >= 1500 && e <= 1999 && (i = "30%"), e >= 2e3 && e <= 2499 && (i = "40%"), e >= 2500 && e <= 2999 && (i = "50%"), e >= 3e3 && e <= 3400 && (i = "60%"), e >= 3500 && e <= 3999 && (i = "70%"), e >= 4e3 && e <= 4499 && (i = "80%"), e >= 4500 && e <= 4999 && (i = "90%")), 2 == t && e >= 5e3 && (i = "100%"), 2 == t && a && ($(".statusAccPBIcon").attr("src", "https://media.finishline.com/i/finishline/refresh-a-list"), e <= 499 && (i = "0%"), e >= 500 && e <= 999 && (i = "10%"), e >= 1e3 && e <= 1499 && (i = "20%"), e >= 1500 && e <= 1999 && (i = "30%"), e >= 2e3 && e <= 2499 && (i = "40%"), e >= 2500 && e <= 2999 && (i = "50%"), e >= 3e3 && e <= 3400 && (i = "60%"), e >= 3500 && e <= 3999 && (i = "70%"), e >= 4e3 && e <= 4499 && (i = "80%"), e >= 4500 && e <= 4999 && (i = "90%")), setTimeout(function() {
            $(".slider-advance").css("width", i)
        }, 600)
    },
    updateLoyaltyAccountInit: function() {
        $("#upgradeAccountbutton").on("click", function(e) {
            e.preventDefault(), FL.global.showOverlay(), $.ajax({
                url: $("#upgradeAccountForm").attr("action"),
                data: $("#upgradeAccountForm").serialize(),
                async: !1,
                type: "POST",
                success: function(e) {
                    e.success ? (FL.global.hideOverlay(), window.location.href = FL.contextPath + "/myaccount/rewards.jsp") : (FL.global.hideOverlay(), alert("An error has occurred, please contact to client service."))
                },
                error: function(e) {
                    FL.global.hideOverlay(), alert("An error has occurred, please contact to client service.")
                }
            })
        })
    },
    getLoyaltyProgramCatalog: function(e, t) {
        var a = $("#loyaltyNumber"),
            i = FL.loyaltyProgram.loyaltyAccount;
        $("#pointsBalance").empty(), $("#noDataAvailable").hide(), null !== i && void 0 !== i && $("#pointsBalance").append("<strong>" + Math.trunc(i.pointsAvailable) + " Status Points</strong>"), a.val(), FL.global.showOverlay(), $("#loyaltyProgam .main-content").show();
        var o = FL.contextPath + "/myaccount/json/loyaltyOffersJsonResponse.jsp";
        $.ajax({
            data: {
                loyaltyNumber: a.val(),
                pageSize: e,
                pageNum: t - 1
            },
            url: o,
            async: !1,
            success: function(t) {
                if (t.result) {
                    var a = t.result.replace(new RegExp("&#034;", "g"), '"');
                    a = a.replace(new RegExp("&lt;", "g"), "<"), a = a.replace(new RegExp("&gt;", "g"), ">");
                    var i = JSON.parse(a);
                    $("#totalPages").val(i.totalPages), $("#currentPage").val(i.number + 1), 0 == i.number && $("#currentPage").val(1);
                    var o = "",
                        r = 0,
                        n = document.createElement("div");
                    n.classList.add("row"), $("#loyaltyLargeSection").empty(), $("#loyaltyGridSection").empty(), $("#loyaltyfooter").empty(), localStorage.setItem("loyaltyOffersObject", JSON.stringify(i.content)), 9 == e ? ($("#loyaltyLargeSection").show(), $("#loyaltyGridSection").show()) : ($("#loyaltyLargeSection").hide(), $("#loyaltyGridSection").hide()), $.each(i.content, function(t, a) {
                        o = a.offer.limitedInventory ? "+ Limited Supply" : "";
                        var i = " ";
                        if (null !== a.offer.requiredTier && void 0 !== a.offer.requiredTier && "2" == a.offer.requiredTier && (i = '<img tabindex="0" class="loyalty-offer-badge-icon" src="https://media.finishline.com/i/finishline/small_status" alt="Status badge">'), 9 == e) {
                            if (0 === r) {
                                var s = '<div class="cardBox">';
                                s += '<div><img tabindex="0" class="loyalty-offer-image orbit-image" src="' + a.offer.imageUrl + '" alt="Hero Image"></div>', s += '<div class="bigCardTextBox">', s += '<span tabindex="0" class="offerStatusSpan">' + i + " " + o + " </span>", a.offer.comingSoon && (s += '<span tabindex="0" class="offerStatusSpan ml-1">COMING SOON</span>'), a.redeemable ? s += '<div style="min-height: 24px;"></div><p tabindex="0" class="loyalty-offer-short-desc bigCardTitle">' + a.offer.shortDescription + "</p>" : s += '<div style="min-height: 24px;"></div><p tabindex="0" class="loyalty-offer-short-desc disabledText bigCardTitle">' + a.offer.shortDescription + "</p>", a.offer.eventLocation && (s += '<span tabindex="0" class="loyalty-offer-location disabledText bigOfferText">' + a.offer.eventLocation.addressLine1 + ", " + a.offer.eventLocation.city + ", " + a.offer.eventLocation.stateProvince + "</span><br></br>"), s += '<span tabindex="0" class="loyalty-offer-long-desc disabledText bigOfferText">' + (null === a.offer.longDescription ? " " : "<div>" + a.offer.longDescription + "</div>") + "</span></div>", a.offer.comingSoon || (s += '<div class="statusButtonContainer text-center">', s += '<a class="button' + (a.redeemable ? " " : " light-gray ") + 'offerGridButton" href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'' + a.offer.offerId + "');\">" + a.offer.pointValue + " POINTS</a></div>"), s += "</div>";
                                var l = $(s);
                                $("#loyaltyLargeSection").append(l)
                            }
                            if (r > 0 && r <= 4) {
                                var s = '<div class="xlarge-6 large-6 medium-6 small-6 columns">';
                                s += '<div class="cardBox">', s += '<div><img tabindex="0" class="lotalty-image orbit-image" src="' + a.offer.imageUrl + '" alt="Hero Image"></div>', s += '<div class="cardTextBox">', s += '<span tabindex="0" class="offerStatusSpan">' + i + " " + o + " </span>", a.offer.comingSoon && (s += '<span tabindex="0" class="offerStatusSpan ml-1">COMING SOON</span>'), a.redeemable ? s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>" : s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="subheader cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>", a.offer.comingSoon || (s += '<div class="statusButtonContainer text-center">', s += '<a class="button' + (a.redeemable ? " " : " light-gray ") + 'offerGridButton" href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'' + a.offer.offerId + "');\">" + a.offer.pointValue + " POINTS</a></div>"), s += "</div></div>";
                                var l = $(s);
                                2 === $(n).length && (n = document.createElement("div"), n.classList.add("row")), $(n).append(l), 1 === $(n).length && $("#loyaltyGridSection").append($(n))
                            } else if (r > 4 && r < 9) {
                                var s = '<div class="xlarge-3 large-3 medium-3 small-6 columns">';
                                s += '<div class="cardBox">', s += '<div><img tabindex="0" class="lotalty-image orbit-image" src="' + a.offer.imageUrl + '" alt="Hero Image"></div>', s += '<div class="cardTextBox">', s += '<span tabindex="0" class="offerStatusSpan">' + i + " " + o + " </span>", a.offer.comingSoon && (s += '<span tabindex="0" class="offerStatusSpan ml-1">COMING SOON</span>'),
                                    a.redeemable ? s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>" : s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="subheader cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>", a.offer.comingSoon || (s += '<div class="statusButtonContainer text-center">', s += '<a class="button' + (a.redeemable ? " " : " light-gray ") + 'offerGridButton" href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'' + a.offer.offerId + "');\">" + a.offer.pointValue + " POINTS</a></div>"), s += "</div></div>";
                                var l = $(s);
                                $("#loyaltyfooter").append(l)
                            }
                            if (9 == ++r) return
                        } else {
                            var s = '<div class="xlarge-3 large-3 medium-3 small-6 columns">';
                            s += '<div class="cardBox">', s += '<div><img tabindex="0" class="lotalty-image orbit-image" src="' + a.offer.imageUrl + '" alt="Hero Image"></div>', s += '<div class="cardTextBox">', s += '<span tabindex="0" class="offerStatusSpan">' + i + " " + o + " </span>", a.offer.comingSoon && (s += '<span tabindex="0" class="offerStatusSpan ml-1">COMING SOON</span>'), a.redeemable ? s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>" : s += '<div style="min-height: 15px;"></div><h4 tabindex="0" class="subheader cardTitle"><strong>' + a.offer.shortDescription + "</strong></h4></div>", a.offer.comingSoon || (s += '<div class="statusButtonContainer text-center">', s += '<a class="button' + (a.redeemable ? " " : " light-gray ") + 'offerGridButton" href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'' + a.offer.offerId + "');\">" + a.offer.pointValue + " POINTS</a></div>"), s += "</div></div>";
                            var l = $(s);
                            if ($("#loyaltyfooter").append(l), 16 === r) return
                        }
                    }), FL.global.hideOverlay(), $("#loyaltyProgam .main-content").show(), $("#noDataAvailable").hide(), FL.loyaltyProgram.catalogPagination(i.totalPages, i.number + 1), window.scrollTo(0, 0)
                } else $("#noDataAvailable").show(), FL.global.hideOverlay(), $("#loyaltyProgam .main-content").hide()
            }
        })
    },
    catalogPagination: function(e, t) {
        var a;
        for ($("#loyaltyCatalogPagination .pag-select").empty(), a = 1; a <= e; a++) $("#loyaltyCatalogPagination .pag-select").append("<option " + (a === t ? "Selected" : "") + ' aria-label="Go To Page ' + a + '" title="Go To Page ' + a + '" value="' + a + '">' + a + "</option>");
        $("#catalogoTotalPages").text("of " + e), 1 === t ? $("#loyaltyCatalogPagination .prev-page").addClass("disabled") : $("#loyaltyCatalogPagination .prev-page").removeClass("disabled"), t === e ? $("#loyaltyCatalogPagination .next-page").addClass("disabled") : $("#loyaltyCatalogPagination .next-page").removeClass("disabled")
    },
    initCatalogPagination: function() {
        $("#loyaltyCatalogPagination .prev-page").click(function(e) {
            e.preventDefault();
            var t = Number($("#currentPage").val()) - 1,
                a = Number($("#totalPages").val()),
                i = 9;
            t <= 0 && (t = 1), 1 === t && ($("#loyaltyCatalogPagination .prev-page").addClass("disabled"), i = 9), t < a && $("#loyaltyCatalogPagination .next-page").removeClass("disabled"), $("#loyaltyCatalogPagination .pag-select option[value='" + t + "']").prop("selected", !0), t > 0 && FL.loyaltyProgram.getLoyaltyProgramCatalog(i, t)
        }), $("#loyaltyCatalogPagination .next-page").click(function(e) {
            e.preventDefault();
            var t = Number($("#currentPage").val()) + 1,
                a = Number($("#totalPages").val());
            t > a && (t = a), t === a && $("#loyaltyCatalogPagination .next-page").addClass("disabled"), t > 1 && $("#loyaltyCatalogPagination .prev-page").removeClass("disabled"), $("#loyaltyCatalogPagination .pag-select option[value='" + t + "']").prop("selected", !0), t <= a && FL.loyaltyProgram.getLoyaltyProgramCatalog(9, t)
        }), $("#loyaltyCatalogPagination .pag-select").change(function(e) {
            e.preventDefault();
            var t = 9,
                a = Number($("#loyaltyCatalogPagination .pag-select>option:selected").text()),
                i = Number($("#totalPages").val());
            1 === a && ($("#loyaltyCatalogPagination .prev-page").addClass("disabled"), t = 9), a === i && $("#loyaltyCatalogPagination .next-page").addClass("disabled"), a > 1 && $("#loyaltyCatalogPagination .prev-page").removeClass("disabled"), a < i && $("#loyaltyCatalogPagination .next-page").removeClass("disabled"), FL.loyaltyProgram.getLoyaltyProgramCatalog(t, a)
        })
    },
    getLoyaltyAccountSummary: function(e) {
        if (void 0 !== e) {
            var t = FL.contextPath + "/myaccount/json/loyaltyAccountSummaryJsonResponse.jsp";
            FL.global.showOverlay(), $.ajax({
                contentType: "application/json",
                data: {
                    loyaltyNumber: e
                },
                url: t,
                async: !1,
                success: function(e) {
                    if (e.result) {
                        var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                        FL.loyaltyProgram.loyaltyAccount = JSON.parse(t)
                    } else FL.loyaltyProgram.loyaltyAccount = null;
                    FL.global.hideOverlay()
                },
                error: function(e) {
                    FL.global.hideOverlay()
                }
            })
        }
    },
    gotoOfferPdp: function(e) {
        window.location.href = FL.contextPath + "/loyalty-status-rewards?offerId=" + e
    },
    storeSelectedLoyaltyOffer: function(e) {
        localStorage.setItem(e.offer.offerId, JSON.stringify(e))
    },
    carouselReward: function() {
        0 != $(".recommended-offers").length && ($(".recommended-offers .recommendation-slider.pdp").css("width", "1180px"), $(".recommended-offers #slickPrevIcon").hide(), $(".recommended-offers #slickPrevIcon").click(function() {
            function e() {
                t < 0 ? (clearInterval(i), t = 0) : t -= a, 0 === t ? $(".recommended-offers .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(" + t + "px, 0px, 0px);") : $(".recommended-offers .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(-" + t + "px, 0px, 0px);")
            }
            var t = 1180,
                a = 15,
                i = setInterval(e, 1);
            $(".recommended-offers #slickPrevIcon").hide(), $(".recommended-offers #slickNextIcon").show()
        }), $(".recommended-offers #slickNextIcon").click(function() {
            function e() {
                t > 1180 ? (clearInterval(i), t = 1180) : t += a, 0 === t ? $(".recommended-offers .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(" + t + "px, 0px, 0px);") : $(".recommended-offers .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(-" + t + "px, 0px, 0px);")
            }
            var t = 0,
                a = 15,
                i = setInterval(e, 1);
            $(".recommended-offers #slickPrevIcon").show(), $(".recommended-offers #slickNextIcon").hide()
        }))
    },
    carouselRewardWallet: function() {
        0 != $(".rewards-wallet").length && ($(".rewards-wallet .recommendation-slider.pdp").css("width", "1244px"), $(".rewards-wallet #slickPrevIcon").hide(), $(".rewards-wallet #slickPrevIcon").click(function() {
            function e() {
                t < 0 ? (clearInterval(i), t = 0) : t -= a, 0 === t ? $(".rewards-wallet .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(" + t + "px, 0px, 0px);") : $(".rewards-wallet .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(-" + t + "px, 0px, 0px);")
            }
            var t = 1244,
                a = 15,
                i = setInterval(e, 1);
            $(".rewards-wallet #slickPrevIcon").hide(), $(".rewards-wallet #slickNextIcon").show()
        }), $(".rewards-wallet #slickNextIcon").click(function() {
            function e() {
                t > 1244 ? (clearInterval(i), t = 1244) : t += a, 0 === t ? $(".rewards-wallet .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(" + t + "px, 0px, 0px);") : $(".rewards-wallet .slick-track").attr("style", "opacity: 1; width: 60000px; transform: translate3d(-" + t + "px, 0px, 0px);")
            }
            var t = 0,
                a = 15,
                i = setInterval(e, 1);
            $(".rewards-wallet #slickPrevIcon").show(), $(".rewards-wallet #slickNextIcon").hide()
        }))
    },
    openRewardDetailModal: function(e, t, a) {
        FL.global.showOverlay(), FL.loyaltyProgram.callRewardDetailModal(e).success(function(e) {
            if (e.result) {
                var i = e.result.replace(new RegExp("&#034;", "g"), '"');
                i = i.replace(new RegExp("&lt;", "g"), "<"), i = i.replace(new RegExp("&gt;", "g"), ">");
                var o = JSON.parse(i),
                    r = o.content[0],
                    n = $("#openRewardDetailModal");
                n.find(".reward-title").text(r.offer.shortDescription), n.find(".reward-state").text(t), n.find(".reward-image").attr("src", r.offer.imageUrl), n.find(".reward-long-description").empty(), n.find(".reward-coupon-number").html("Reward Number: <strong>" + a + "</strong>"), n.find(".reward-long-description").append($("<div>" + r.offer.longDescription + "</div>")), n.find(".term-conditions").text(r.offer.termsAndConditions), $("#openRewardDetailModal").foundation("open")
            }
            FL.global.hideOverlay()
        }).error(function(e) {
            FL.global.hideOverlay()
        })
    },
    openForcedRewardDetailModal: function(e, t, a) {
        FL.global.showOverlay();
        var i = new Date(t);
        i = i.getMonth() + 1 + "/" + i.getDate() + "/" + i.getFullYear();
        var o = "<div><p>Forced Reward</p><p>Reward Number: " + a + "</p><p>Expires: " + i + "</p><p>Use this reward towards your next purchase in-store or online</p></div>",
            r = $("#openRewardDetailModal");
        r.find(".reward-title").text(e), r.find(".reward-image-container").html('<span tabindex="0" class="icon icon-statuslogo" alt="Status Logo"></span>'), r.find(".reward-long-description").empty(), r.find(".reward-long-description").append("<div>" + o + "</div>"), r.find(".term-conditions-container").hide(), $("#openRewardDetailModal").foundation("open"), FL.global.hideOverlay()
    },
    callRewardDetailModal: function(e) {
        var t = FL.contextPath + "/myaccount/json/loyaltyOfferOrderDetailsJsonResponse.jsp";
        return $.ajax({
            contentType: "application/json",
            data: {
                offerId: e,
                loyaltyNumber: $("#loyaltyNumber").val()
            },
            url: t,
            async: !1
        })
    },
    loyaltyAllActiveRewardsDroplet: function() {
        FL.global.showOverlay();
        var e = FL.contextPath + "/myaccount/json/LoyaltyAllActiveRewardsJsonResponse.jsp";
        $.ajax({
            contentType: "application/json",
            url: e,
            async: !1,
            success: function(e) {
                if (e.result) {
                    var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                    t = t.replace(new RegExp("&lt;", "g"), "<"), t = t.replace(new RegExp("&gt;", "g"), ">"), JSON.parse(t)
                }
                FL.global.hideOverlay()
            },
            error: function(e) {
                FL.global.hideOverlay()
            }
        })
    },
    redeemRewardModalOpen: function() {
        $("#openRedeemRewardModal").foundation("open")
    },
    gotoCatalogOffers: function() {
        window.location.href = FL.contextPath + "/loyalty-program"
    },
    openUpdateLoyaltyProgramModal: function() {
        $("#updateloyaltyAccountbutton").prop("disabled", !1), $("#updateloyaltyAccountbutton").off().on("click", function(e) {
            e.preventDefault(), $("#updateloyaltyAccountbutton").prop("disabled", !0), FL.global.showOverlay(), setTimeout(function() {
                $.ajax({
                    url: $("#upgradeAccountForm").attr("action"),
                    data: $("#upgradeAccountForm").serialize(),
                    async: !1,
                    type: "POST",
                    success: function(e) {
                        window.location.href = FL.contextPath + "/myaccount/rewards.jsp"
                    },
                    error: function(e) {
                        window.location.href = FL.contextPath + "/myaccount/rewards.jsp"
                    }
                })
            }, 1e3)
        }), $("#openUpdateLoyaltyProgramModal").addClass("update-loyalty-program-modal"), $("#openUpdateLoyaltyProgramModal").foundation("open")
    },
    minimizedUpgradeExperience: function() {
        $(".bgLogoContainer").hide(), $(".upgradeExperience").hide(), $(".minimized-upgrade-experience").show(), $("#upgradeExperienceSection").find(".upgrade-column").removeClass("large-12"), $("#upgradeExperienceSection").find(".upgrade-column").removeClass("large-9"), $("#upgradeExperienceSection").removeClass("upgrade-experience-section")
    },
    openStatusDetailModal: function() {
        $("#openStatusDetailModal").foundation("open")
    },
    openAutomaticRewardsSelectionModal: function() {
        $("#openAutomaticRewardsSelectionModal").foundation("open")
    }
}, FL.loyaltyProgram), window.FL = window.FL || {}, FL.statusAccountSummary = FL.statusAccountSummary || {};
var FlIsAjaxExecuting = !1;
FL.statusAccountSummary = jQuery.extend(!0, {
    loyaltyAccount: null,
    rewardGenerationDetails: null,
    init: function() {
        FL.statusAccountSummary.getLoyaltyAccount(), FL.statusAccountSummary.populateAutomaticRewardBanner(), FL.statusAccountSummary.loadRewardsWallet(), FL.statusAccountSummary.populateCYR(), FL.statusAccountSummary.showRewardHistory()
    },
    populateCYR: function() {
        $(".CYRslider").slick({
            slidesToShow: 4,
            infinite: !0,
            variableWidth: !0,
            dots: !0,
            swipeToSlide: !0,
            arrows: !0,
            nextArrow: '<button tabindex="0" class="icon icon-chevron-right slick-next-icon slick-arrow" aria-label="Next" type="button" style="position: absolute;top: 227px;right: -40px;color:#666666"></button>',
            prevArrow: '<button tabindex="0" class="icon icon-chevron-left slick-prev-icon slick-arrow" aria-label="Previous" type="button" style="position: absolute;top: 227px;left: -34px;color:#666666"></button>',
            responsive: [{
                breakpoint: 513,
                settings: {
                    arrows: !1,
                    centerMode: !0,
                    slidesToShow: 1,
                    infinite: !0,
                    variableWidth: !0,
                    dots: !0,
                    swipeToSlide: !0
                }
            }]
        }), FL.statusAccountSummary.getFirstPageCatalog().success(function(e) {
            if (e.result) {
                var t = e.result.replace(new RegExp("&#034;", "g"), '"'),
                    a = JSON.parse(t);
                FL.statusAccountSummary.populateCYRContainer(a.content)
            }
        })
    },
    loadRewardsWallet: function() {
        FL.statusAccountSummary.loadOffersFromAccount().success(function(e) {
            $(document).ready(function() {
                var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                t = JSON.parse(t);
                var a = t || {
                    content: []
                };
                if (FL.statusAccountSummary.initSlick(a.content.length), FL.statusAccountSummary.changeLayout(a), a.content.length > 0) {
                    for (var i = 0; i < a.content.length; i++) {
                        const o = a.content[i];
                        if (null != o.offerId) FL.statusAccountSummary.loadOffer(o).success(function(e) {
                            var t = e.result.replace(new RegExp("&#034;", "g"), '"'),
                                a = JSON.parse(t).content[0];
                            a.offer.couponNumber = o.couponNumber, a.offer.rewardStatus = o.rewardStatus;
                            var i = FL.statusAccountSummary.getDesktopOfferCard(a.offer);
                            $(".desktopSlider").slick("slickAdd", i), $(".mobileSlider").slick("slickAdd", i)
                        });
                        else {
                            var r = FL.statusAccountSummary.getDesktopForcedReward(o);
                            $(".desktopSlider").slick("slickAdd", r), $(".mobileSlider").slick("slickAdd", r)
                        }
                    }
                    FL.statusAccountSummary.initResponsiveContent()
                }
            })
        }).error(function(e) {
            changeLayout({
                content: []
            })
        })
    },
    loadOffersFromAccount: function() {
        var e = FL.contextPath + "/myaccount/json/LoyaltyAllActiveRewardsJsonResponse.jsp";
        return $.ajax({
            contentType: "application/json",
            url: e,
            async: !1
        })
    },
    getFirstPageCatalog: function() {
        var e = FL.contextPath + "/myaccount/json/loyaltyOffersJsonResponse.jsp";
        return $.ajax({
            data: {
                loyaltyNumber: $("#loyaltyNumber").val(),
                pageSize: 9,
                pageNum: 0
            },
            url: e,
            async: !1
        })
    },
    populateCYRContainer: function(e) {
        $.each(e, function(e, t) {
            var a = FL.statusAccountSummary.getCYROfferCard(t);
            $(".CYRslider").slick("slickAdd", a)
        })
    },
    loadOffer: function(e) {
        var t = FL.contextPath + "/myaccount/json/loyaltyOfferOrderDetailsJsonResponse.jsp";
        return $.ajax({
            contentType: "application/json",
            data: {
                offerId: e.offerId,
                loyaltyNumber: $("#loyaltyNumber").val()
            },
            url: t,
            async: !1
        })
    },
    changeLayout: function(e) {
        var t = FL.statusAccountSummary.loyaltyAccount;
        0 === e.content.length && 0 !== t.pointsAvailable ? ($("#RewardsWalletContainer").insertAfter($("#CYRContainer")), $("#StatusRewardsWalletDesktop").hide(), $("#StatusRewardsWalletMobile").hide(), $("#StatusDivider").hide(), $("#StatusRewardsNoRewards").show()) : 0 === e.content.length && 0 === t.pointsAvailable ? ($("#StatusRewardsWalletDesktop").hide(), $("#StatusRewardsWalletMobile").hide(), $("#StatusRewardsNoRewards").show()) : ($("#StatusRewardsNoRewards").hide(), $("#StatusRewardsWalletDesktop").show(), $("#StatusDivider").hide(), $("#StatusRewardsWalletMobile").show())
    },
    getLoyaltyAccount: function() {
        var e = $("#loyaltyNumber").val();
        if (void 0 !== e) {
            var t = FL.contextPath + "/myaccount/json/loyaltyAccountSummaryJsonResponse.jsp";
            FL.global.showOverlay(), $.ajax({
                contentType: "application/json",
                data: {
                    loyaltyNumber: e
                },
                url: t,
                async: !1,
                success: function(e) {
                    if (e.result) {
                        var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                        FL.statusAccountSummary.loyaltyAccount = JSON.parse(t)
                    }
                }
            })
        }
    },
    getDesktopOfferCard: function(e) {
        var t = '<div class="RWofferCard"><a href="javascript:FL.loyaltyProgram.openRewardDetailModal(\'%%offerId%%\', \'%%rewardStatus%%\', \'%%couponNumber%%\');" alt="Reward Card" class="open-reward-detail"><div style="background-image: url(%%imageUrl%%)" alt="" class="RWofferImg"></div><div class="RWofferDescriptionContainer"><p class="RWofferStatus">%%rewardStatus%%</p><h4 class="RWofferTitle">%%shortDescription%%</h4><div class="RWofferInfo">%%longDescription%%</div><a href="javascript:FL.loyaltyProgram.openRewardDetailModal(\'%%offerId%%\', \'%%rewardStatus%%\', \'%%couponNumber%%\');" class="RWofferLink no-decoration"><span class="underline">Details</span><span class="RWofferLinkRightArrow">►</span></a></div></a></div>';
        return t = t.replace(/%%offerId%%/g, e.offerId), t = t.replace(/%%rewardStatus%%/g, e.rewardStatus), t = t.replace(/%%couponNumber%%/g, e.couponNumber), t = t.replace(/%%shortDescription%%/g, e.shortDescription), t = t.replace(/%%longDescription%%/g, e.longDescription), t = t.replace(/%%imageUrl%%/g, e.imageUrl), t = t.replace(/&lt;/g, "<"), t = t.replace(/&gt;/g, ">")
    },
    getDesktopForcedReward: function(e) {
        var t = '<div class="RWofferCard"><a href="javascript:FL.loyaltyProgram.openForcedRewardDetailModal(\'%%amount%%\', \'%%expirationDate%%\', \'%%couponNumber%%\');" alt="Reward Card" class="open-reward-detail"><div class="forcedRewardImg"><span tabindex="0" class="icon icon-statuslogo" alt="Status Logo"></span></div><div class="RWofferDescriptionContainer"><p class="RWofferStatus hide">%%rewardStatus%%</p><h4 class="RWofferTitle">%%amount%%</h4><div class="RWofferInfo">%%longDescription%%</div><a href="javascript:FL.loyaltyProgram.openForcedRewardDetailModal(\'%%amount%%\', \'%%expirationDate%%\', \'%%couponNumber%%\');" class="RWofferLink no-decoration"><span class="underline">Details</span><span class="RWofferLinkRightArrow">►</span></a></div></a></div>';
        return t = t.replace(/%%amount%%/g, "$" + e.amount), t = t.replace(/%%longDescription%%/g, "Forced Reward"), t = t.replace(/%%couponNumber%%/g, e.couponNumber), t = t.replace(/%%expirationDate%%/g, e.expirationDate), t = t.replace(/&lt;/g, "<"), t = t.replace(/&gt;/g, ">")
    },
    getCYROfferCard: function(e) {
        var t = '<div><a href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'%%offerId%%\')" alt="Reward Card" class="no-decoration"><div class="CYROfferCard"><img src="%%offerImg%%" alt="offer image" class="CYROfferImg"><h4 class="CYROfferTitle">%%offerTitle%%</h4><a class="button CYRButton %%redeemableClasses%%" href="javascript:FL.loyaltyProgram.gotoOfferPdp(\'%%offerId%%\')" tabindex="0">%%ptsValue%% POINTS</a></div></a></div>';
        return t = e.redeemable ? t.replace(/%%redeemableClasses%%/g, "") : t.replace(/%%redeemableClasses%%/g, "light-gray inactiveGrayButton"), t = t.replace(/%%offerId%%/g, e.offer.offerId), t = t.replace(/%%redeemable%%/g, e.redeemable), t = t.replace(/%%offerImg%%/g, e.offer.imageUrl), t = t.replace(/%%offerTitle%%/g, e.offer.shortDescription), t = t.replace(/%%ptsValue%%/g, e.offer.pointValue), t = t.replace(/&lt;/g, "<"), t = t.replace(/&gt;/g, ">")
    },
    initSlick: function(e) {
        e > 3 ? $(".desktopSlider").slick({
            slidesToShow: 4,
            infinite: !0,
            variableWidth: !0,
            dots: !0,
            swipeToSlide: !0,
            arrows: !0,
            nextArrow: '<button class="icon icon-chevron-right slick-next-icon slick-arrow" aria-label="Next" type="button" style="position: absolute;top: 227px;right: -40px;color:#666666"></button>',
            prevArrow: '<button class="icon icon-chevron-left slick-prev-icon slick-arrow" aria-label="Previous" type="button" style="position: absolute;top: 227px;left: -34px;color:#666666"></button>'
        }) : $(".desktopSlider").slick({
            slidesToShow: 4
        }), $(".mobileSlider").slick({
            infinite: !0,
            arrows: !1,
            dots: !0,
            centerMode: !0,
            slidesToShow: 1,
            centerPadding: "35px"
        })
    },
    initResponsiveContent: function() {
        $(window).width() < 513 ? ($("#StatusRewardsWalletDesktop").hide(), $("#StatusRewardsWalletMobile").show()) : ($("#StatusRewardsWalletDesktop").show(), $("#StatusRewardsWalletMobile").hide()), $(window).resize(function() {
            $(window).width() < 513 ? ($("#StatusRewardsWalletDesktop").hide(), $("#StatusRewardsWalletMobile").show()) : ($("#StatusRewardsWalletDesktop").show(), $("#StatusRewardsWalletMobile").hide())
        })
    },
    showRewardHistory: function() {
        var e = $("#loyaltyNumber").val(),
            t = FL.contextPath + "/myaccount/json/loyaltyPointsSummaryJsonResponse.jsp";
        FL.global.showOverlay(), $.ajax({
            contentType: "application/json",
            data: {
                loyaltyNumber: e
            },
            url: t,
            async: !1,
            success: function(e) {
                var t = e.result.replace(new RegExp("&#034;", "g"), '"');
                t = t.replace(new RegExp("&lt;", "g"), "<"), t = t.replace(new RegExp("&gt;", "g"), ">");
                var a = JSON.parse(t);
                a.length > 0 && $(".historyContainer").removeClass("hide"), a.forEach(function(e) {
                    var t = "";
                    "TRANSACTION" == e.reference.type ? (a = FL.contextPath + "/myaccount/orderDetail.jsp?orderId=" + e.reference.key.transactionNumber + "&showOrderDeatils=false", t = "<span>Transaction # </span><a href=" + a + "> " + e.reference.description.replace("Transaction # ", "") + " </a>") : "ORDER" == e.reference.type ? (a = FL.contextPath + "/myaccount/orderDetail.jsp?orderId=" + e.reference.key.orderNumber + "&showOrderDeatils=true", t = "<span>Order # </span><a href=" + a + "> " + e.reference.description.replace("Order # ", "") + " </a>") : t = "<span> " + e.reference.description + " </span>";
                    var a = FL.contextPath + "/loyalty-status-rewards?offerId=213213",
                        i = e.pointsDate.split("-"),
                        o = i[2],
                        r = i[1],
                        n = i[0],
                        s = e.amount.toString().indexOf("-") < 0 ? "+" + e.amount.toString() : e.amount.toString(),
                        l = '<tr tabindex="0" role="row"> <td  class="hide-for-small-only"></td><td>' + r + "/" + o + "/" + n + "</td><td>" + s + "</td><td>" + t + "</td><td> " + e.balance + '</td><td class="hide-for-small-only"></td></tr>';
                    $(".historyTableBody").prepend(l)
                })
            },
            error: function(e) {
                FL.global.hideOverlay()
            }
        })
    },
    populateAutomaticRewardBanner: function() {
        var e = $("#loyaltyNumber").val(),
            t = $(".automaticRewardsNotice"),
            a = $("#automaticRewardTxt"),
            i = $("#automaticRewardBtn");
        FL.statusAccountSummary.loadAutomaticRewardInfo(e).success(function(e) {
            if (e.result) {
                var o = e.result.replace(new RegExp("&#034;", "g"), '"'),
                    r = JSON.parse(o);
                FL.statusAccountSummary.rewardGenerationDetails = r.rewardGenerationDetails, r.rewardGenerationDetails && r.rewardGenerationDetails.enabled && r.rewardGenerationDetails.selectedOption && r.rewardGenerationDetails.selectedOption.rewardAmount && r.rewardGenerationDetails.selectedOption.threshold ? (a.text("You’re currently redeeming $" + r.rewardGenerationDetails.selectedOption.rewardAmount + " Finish Line Cash whenever you reach " + r.rewardGenerationDetails.selectedOption.threshold + " points."), i.text("Change"), FL.statusAccountSummary.adjustBannerLayout(0)) : (a.text("Automatically redeem points for rewards."), i.text("View Details"), FL.statusAccountSummary.adjustBannerLayout(1)), FL.statusAccountSummary.populateAutomaticRewardModal()
            } else t.hide()
        }).error(function() {
            t.hide()
        })
    },
    populateAutomaticRewardModal: function() {
        var e = $("#loyaltyNumber").val();
        FL.statusAccountSummary.loadAutomaticRewardModalInfo(e).success(function(e) {
            if (e.result) {
                var t = e.result.replace(new RegExp("&#034;", "g"), '"'),
                    a = JSON.parse(t);
                $(".automaticRewardsSelection").empty();
                var i = "",
                    o = !1;
                try {
                    o = !FL.statusAccountSummary.rewardGenerationDetails || !FL.statusAccountSummary.rewardGenerationDetails.enabled || !FL.statusAccountSummary.rewardGenerationDetails.selectedOption
                } catch (e) {}
                i += '<div><span><input tabindex="0" type="radio" class="radio" name="radioName" value="chooseRewards" ' + (o ? "checked" : "") + ' id="chooseRewards" data-threshold="0" data-amount="0" data-enabled="false"><label tabindex="0" for="chooseRewards"><b>Choose rewards</b><br>Collect points and redeem offers from the rewards catalog.</label></span></div>', _.each(a, function(e, t) {
                    var a = !1;
                    try {
                        a = FL.statusAccountSummary.rewardGenerationDetails.selectedOption.threshold == e.threshold
                    } catch (e) {}
                    i += '<div><span><input tabindex="0" type="radio" class="radio" name="radioName" value="' + Number(e.threshold) + '" ' + (a ? "checked" : "") + ' id="reward' + Number(t + 1) + '" data-threshold="' + e.threshold + '" data-amount="' + e.rewardAmount + '" data-enabled="true"><label tabindex="0" for="reward' + Number(t + 1) + '"><b>$' + e.rewardAmount + " Finish Line Cash Reward</b><br>Automatically redeem a $" + e.rewardAmount + " Finish Line Cash reward when you reach " + e.threshold + " points.</label></span></div>"
                }), $(".automaticRewardsSelection").html(i)
            } else console.log("FL.statusAccountSummary.loadAutomaticRewardModalInfo NO DATA")
        }).error(function() {
            console.log("FL.statusAccountSummary.loadAutomaticRewardModalInfo ERROR")
        })
    },
    loadAutomaticRewardInfo: function(e) {
        var t = FL.contextPath + "/myaccount/json/automaticRewardsJson.jsp";
        return $.ajax({
            contentType: "application/json",
            data: {
                loyaltyNumber: e
            },
            url: t,
            async: !1
        })
    },
    loadAutomaticRewardModalInfo: function(e) {
        var t = FL.contextPath + "/myaccount/json/automaticRewardsModalJson.jsp";
        return $.ajax({
            contentType: "application/json",
            data: {
                loyaltyNumber: e
            },
            url: t,
            async: !1
        })
    },
    saveAutomaticRewardsSelection: function() {
        FL.global.showOverlay();
        var e = $("#loyaltyNumber").val(),
            t = $("#automaticRewardsSelectionForm"),
            a = $("input[name=radioName]:checked", ".automaticRewardsSelection"),
            i = a.attr("data-threshold"),
            o = a.attr("data-enabled"),
            r = a.attr("data-amount");
        $("#automaticRewardsSelectionLoyaltyNumber").val(e), $("#automaticRewardsSelectionRewardAmount").val(r), $("#automaticRewardsSelectionThreshold").val(i), $("#automaticRewardsSelectionEnable").val(o), $.ajax({
            url: t.attr("action"),
            data: t.serialize(),
            async: !1,
            type: "POST",
            success: function(e) {
                e.success ? (FL.statusAccountSummary.populateAutomaticRewardBanner(), FL.global.hideOverlay(), $("#openAutomaticRewardsSelectionModal").foundation("close")) : (FL.global.hideOverlay(), location.reload())
            },
            error: function(e) {
                FL.global.hideOverlay(), location.reload()
            }
        })
    },
    adjustBannerLayout: function(e) {
        switch (e) {
            case 0:
                FL.statusAccountSummary.adjustBannerLongLayout();
                break;
            case 1:
            default:
                FL.statusAccountSummary.adjustBannerShortLayout()
        }
    },
    adjustBannerLongLayout: function() {
        var e = $(".automaticRewardsNotice"),
            t = function() {
                $(window).width() < 513 ? (e.width("auto"), e.height(48)) : (e.width(600), e.height(40))
            };
        t(), $(window).resize(function() {
            t()
        })
    },
    adjustBannerShortLayout: function() {
        var e = $(".automaticRewardsNotice"),
            t = function() {
                $(window).width() < 513 ? (e.width("auto"), e.height(48)) : (e.width(374), e.height(40))
            };
        t(), $(window).resize(function() {
            t()
        })
    }
}, FL.statusAccountSummary), window.FL = window.FL || {}, FL.mobile_category = FL.mobile_category || {}, FL.mobile_category = jQuery.extend(!0, {
    init: function() {
        var e = $(".mobile-categories-container");
        $.each(e, function(e, t) {
            var a = $(t).find(".mobile-categories-list"),
                i = a.outerWidth(),
                o = a[0].scrollWidth;
            o > i && $(t).addClass("mobile-categories-container-overlay-right"), $(t).find(".mobile-categories-list").scroll(function() {
                var e = a.scrollLeft();
                o - (i + 10) < e ? $(t).removeClass("mobile-categories-container-overlay-right") : $(t).addClass("mobile-categories-container-overlay-right"), e > 10 ? $(t).addClass("mobile-categories-container-overlay-left") : $(t).removeClass("mobile-categories-container-overlay-left")
            })
        })
    }
}, FL.mobile_category), window.FL = window.FL || {}, FL.DynamicYield = FL.DynamicYield || {}, FL.DynamicYield = jQuery.extend(!0, {
    init: function() {
        FL.DynamicYield.logInEvent()
    },
    setPageContext: function() {
        var e = $(".recommendation-params .itemid").val();
        window.DY = window.DY || {}, FL.Grid.isGridPage() ? DY.recommendationContext = {
            type: "HOMEPAGE",
            lng: "en_GB"
        } : FL.Grid.isGridPage() ? DY.recommendationContext = {
            type: "CATEGORY",
            data: ["LEVEL_1", "LEVEL_2", "LEVEL_3"],
            lng: "en_GB"
        } : FL.cart.isCartPage() ? DY.recommendationContext = {
            type: "CART",
            data: e.split(";"),
            lng: "en_GB"
        } : FL.pdp.isPDPPage() ? DY.recommendationContext = {
            type: "PRODUCT",
            data: [e],
            lng: "en_GB"
        } : DY.recommendationContext = {
            type: "OTHER",
            lng: "en_GB"
        }
    },
    updateSpaEvent: function(e, t) {
        DY.API("spa", {
            context: {
                type: e,
                data: t
            },
            countAsPageview: !0
        })
    },
    addCartEvent: function(e) {
        if ($.trim($("#orderSummaryOrderTotal").text()).replace("$", "").replace(",", "").length > 0) {
            var t, a;
            e ? (t = FL.QuickLook.selectedProductSku, a = FL.QuickLook.smtrPrice * FL.QuickLook.smtrQuantity, quantity = FL.QuickLook.smtrQuantity) : (t = FL.pdp.Cart.selectedSku, a = FL.pdp.Cart.smtrPrice * FL.pdp.Cart.smtrQuantity, quantity = FL.pdp.Cart.smtrQuantity);
            var i = {
                    dyType: "add-to-cart-v1",
                    productId: t,
                    value: a,
                    currency: "USD",
                    quantity: quantity,
                    size: selectedSize
                },
                o = [],
                r = [];
            $(".checkout-bag-item").each(function() {
                var e;
                $(this).find(".show-for-large .full-price").length > 0 && (e = $(this).find(".show-for-large .full-price").text().replace("$", "")), $(this).find(".show-for-large .sale-price").length > 0 && (e = $(this).find(".show-for-large .sale-price").text().replace("$", ""));
                var t = {
                    productId: $(this).data("sku"),
                    quantity: $(this).find(".show-for-large .qty-display").text(),
                    itemPrice: parseFloat(e)
                };
                r.push($(this).data("sku")), o.push(t)
            }), i.cart = o, DY.API("event", {
                name: "Add to Cart",
                properties: i
            }), FL.DynamicYield.updateSpaEvent("CART", r)
        } else setTimeout(function() {
            FL.DynamicYield.addCartEvent(e)
        }, 500)
    },
    logInEvent: function() {
        location.href.indexOf("myaccount/profile.jsp") >= 0 ? FL.DynamicYield.logInSendEvent() : location.href.indexOf("myaccount/login.jsp") >= 0 ? localStorage.removeItem("dynamicYieldLogInFlag") : location.href.indexOf("/checkout") >= 0 ? utag_data.customer_email.length && FL.DynamicYield.logInSendEvent(!0) : location.href.indexOf("/addProfileAddress") >= 0 && utag_data.customer_email.length && FL.DynamicYield.logInSendEvent(!0, !0)
    },
    logInSendEvent: function(e, t) {
        if (void 0 == localStorage.dynamicYieldLogInFlag) {
            var a = $.trim($(".customeremail").val()),
                i = "Login",
                o = "login-v1";
            e && (a = utag_data.customer_email), t && (i = "Sign Up", o = "signup-v1"), DY.API("event", {
                name: i,
                properties: {
                    dyType: o,
                    hashedEmail: sha256(a)
                }
            }), localStorage.dynamicYieldLogInFlag = 1
        }
    },
    purchaseEvent: function() {
        var e = {
                uniqueTransactionId: $(".tfc-order-notify").attr("data-orderid"),
                dyType: "purchase-v1",
                value: parseFloat($(".payment-summary").find(".total").html().replace("&nbsp;-&nbsp;", "").replace("$", "").replace(",", "")),
                currency: "USD"
            },
            t = [];
        $(".checkout-bag-item").each(function() {
            var e = $(this),
                a = e.find(".checkout-bag-item-detail");
            id = e.attr("data-sku"), qty = a.find("div:nth-child(6)").html().replace("Quantity: ", ""), $price = a.find("div:nth-child(2)"), price = $price.find(".sale-price").length > 0 ? $price.find(".sale-price").html() : $price.find(".full-price").html(), size = a.find(".size").html(), qty = $.trim(qty), price = $.trim(price.replace("$", "")), t.push({
                productId: id,
                quantity: qty,
                itemPrice: price,
                size: $.trim(size)
            })
        }), e.cart = t, DY.API("event", {
            name: "Purchase",
            properties: e
        })
    }
}, FL.DynamicYield), window.FL = window.FL || {}, FL.optimove = FL.optimove || {}, FL.optimove = jQuery.extend(!0, {
    optimoveSDKToken: "",
    optimoveSDKVersion: "",
    optimoveSDKconfigVersion: "",
    isOptimoveSDKReady: !1,
    isJD: !1,
    init: function() {
        FL.optimove.isJD = $("body.jdsports-page").length > 0, FL.optimove.isJD && (FL.optimove.optimoveSDKToken = "1f4806e0e92dd49a1de402594f1d60b61a25f48538691dc0493a9eb271b9f5f3", FL.optimove.optimoveSDKVersion = "1.0.7", FL.optimove.optimoveSDKconfigVersion = "jdsports.1.0.0", FL.setup.isProduction || (FL.optimove.optimoveSDKconfigVersion = "jdsports.1.0.0-stg")), FL.optimove.isJD || (FL.optimove.optimoveSDKToken = "0cf20185e8d1452a53a896a573bb7406d18e5378299480847b63b57d052416f2", FL.optimove.optimoveSDKVersion = "1.0.7", FL.optimove.optimoveSDKconfigVersion = "finishline.1.0.0", FL.setup.isProduction || (FL.optimove.optimoveSDKconfigVersion = "finishline.1.0.0-stg")), FL.optimove.checkLogoutStatus(), FL.optimove.createOptimoveSDK("https://sdk-cdn.optimove.net/websdk/sdk-v" + FL.optimove.optimoveSDKVersion + ".js", FL.optimove.initializeOptimoveSDK)
    },
    createOptimoveSDK: function(e, t) {
        if (null != e) {
            var a = document,
                i = a.createElement("script"),
                o = a.getElementsByTagName("script")[0];
            i.type = "text/javascript", i.async = !0, i.defer = !0, i.src = e, i.onload = t, o.parentNode.insertBefore(i, o)
        }
    },
    initializeOptimoveSDK: function() {
        optimoveSDK.initialize(FL.optimove.optimoveSDKToken, FL.optimove.optimoveSDKconfigVersion, FL.optimove.loadOptimoveSDKFunctions)
    },
    loadOptimoveSDKFunctions: function(e) {
        FL.optimove.updateSDKPageVisit()
    },
    updateSDKPageVisit: function() {
        var e = window.location.href,
            t = $(document).find("title").text();
        utag_data.page_name, FL.optimove.reportingUserEvents(), optimoveSDK.API.setPageVisit(e, t, utag_data.page_type), FL.optimove.isOptimoveSDKReady = !0
    },
    reportEvent: function(e, t, a) {
        void 0 === a && (a = 1), FL.optimove.isOptimoveSDKReady ? optimoveSDK.API.reportEvent(e, t) : setTimeout(function() {
            (a += 1) < 40 && FL.optimove.reportEvent(e, t, a)
        }, 100)
    },
    gridFilter: function() {
        var e = {};
        $(".filterOptions .selected").each(function() {
            e = FL.optimove.addFilterItem($(this), e)
        }), $(".filterOptions .selected").length > 0 && FL.optimove.reportEvent("product_searched", e)
    },
    addFilterItem: function(e, t) {
        var a = $(e),
            i = a.closest("ul").data("filter"),
            o = a.text().replace(/\r\n/g, "").trim();
        return "Brands" == i && (t.brand = t.brand ? t.brand + ";" : "", t.brand += o), "Colors" == i && (t.color = t.color ? t.color + ";" : "", t.color += o), "Size" == i && (t.size = t.size ? t.size + ";" : "", t.size += o), "Type" == i && (t.type = t.type ? t.type + ";" : "", t.type += o), "Collection" == i && (t.collection = t.collection ? t.collection + ";" : "", t.collection += o), "Gender" == i && (t.gender = t.gender ? t.gender + ";" : "", t.gender += o), "Only sale" == i && (t.on_sale_items = t.on_sale_items ? t.on_sale_items + ";" : "", t.on_sale_items += o), "Free Shipping" == i && (t.free_shipping = !0), "Price" == i && (t.price = t.price ? t.price + ";" : "", t.price += o), "Age" == i && (t.age = t.age ? t.age + ";" : "", t.age += o), "Plus Size" == i && (t.plus_size = t.plus_size ? t.plus_size + ";" : "", t.plus_size += o), "Activity" == i && (t.activity = t.activity ? t.activity + ";" : "", t.activity += o), "Category" == i && (t.category = t.category ? t.category + ";" : "", t.category += o), t
    },
    reportingUserEvents: function() {
        location.href.indexOf("myaccount/profile.jsp") >= 0 ? FL.optimove.setUserId() : location.href.indexOf("myaccount/login.jsp") >= 0 ? localStorage.removeItem("optimoveIsLogin") : location.href.indexOf("/checkout") >= 0 ? utag_data.customer_email.length && FL.optimove.setUserId() : location.href.indexOf("/addProfileAddress") >= 0 && utag_data.customer_email.length && FL.optimove.registerUser()
    },
    setUserId: function() {
        var e = $("#loyaltyCustomerId").val();
        optimoveSDK.API.setUserId(e), localStorage.optimoveIsLogin = 1
    },
    registerUser: function() {
        if (void 0 == localStorage.optimoveIsLogin) {
            var e = $("#loyaltyCustomerId").val(),
                t = utag_data.customer_email;
            optimoveSDK.API.registerUser(e, t), localStorage.optimoveIsLogin = 1
        }
    },
    checkLogoutStatus: function() {
        location.href.toLocaleLowerCase().indexOf("logout") >= 0 && (FL.Reflektion.clearSignEvent(), localStorage.removeItem("optimoveIsLogin"))
    }
}, FL.optimove);